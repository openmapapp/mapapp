{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/deleteReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\nexport async function deleteReport(reportId: string, userId: string) {\n  const report = await db.report.findUnique({\n    where: { id: reportId },\n  });\n\n  if (!report) return { error: \"Report not found\" };\n  if (report.submittedById !== userId) return { error: \"Unauthorized\" };\n\n  // ✅ Delete the report\n  await db.report.delete({\n    where: { id: reportId },\n  });\n\n  return { success: true };\n}\n"],"names":[],"mappings":";;;;;IAIsB"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/AddMarkerButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function AddMarkerButton({ isAdding, toggleMarker }) {\n  return (\n    <button\n      onClick={toggleMarker}\n      className=\"absolute top-4 left-4 bg-blue-500 text-white text-4xl rounded-full w-12 h-12 flex justify-center shadow-lg hover:bg-blue-700 transition\"\n    >\n      {isAdding ? \"x\" : \"+\"}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,YAAY,EAAE;IAChE,qBACE,8OAAC;QACC,SAAS;QACT,WAAU;kBAET,WAAW,MAAM;;;;;;AAGxB"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/postReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\nexport async function postReport(\n  latitude: number,\n  longitude: number,\n  reportTypeId: number,\n  trustScore: number,\n  userId: string,\n  description: string | null\n  // image: string | null\n) {\n  try {\n    // console.log(\"Posting report...\");\n    // console.log(\"Latitude:\", latitude);\n    // console.log(\"Longitude:\", longitude);\n    // console.log(\"Report Type ID:\", reportTypeId);\n    // console.log(\"Trust Score:\", trustScore);\n    // console.log(\"User ID:\", userId);\n    // console.log(\"Description:\", description);\n\n    const image = null;\n\n    const report = await db.report.create({\n      data: {\n        lat: latitude,\n        long: longitude,\n        description: description ?? null,\n        image: image ?? null,\n        trustScore,\n        submittedById: userId,\n        reportTypeId,\n      },\n    });\n\n    console.log(\"Report posted:\", report);\n\n    await fetch(\"http://localhost:3005/api/new-report\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(report),\n    });\n\n    return report;\n  } catch (error) {\n    console.error(error);\n    return { error: \"Failed to post report\" };\n  }\n}\n"],"names":[],"mappings":";;;;;IAIsB"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/PopupForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { postReport } from \"@/actions/postReport\";\nimport { useSession } from \"@/app/lib/auth-client\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\n\ninterface PopupFormProps {\n  latitude: number;\n  longitude: number;\n  userId: string;\n  trustScore: number;\n  onClose: () => void;\n}\n\nconst PopupForm = ({ latitude, longitude, onClose }: PopupFormProps) => {\n  const { reportTypes } = useData();\n  const [selectedReportType, setSelectedReportType] = useState<number>(\n    reportTypes.length > 0\n      ? [...reportTypes].sort((a, b) => a.id - b.id)[0].id\n      : 0\n  );\n  const [description, setDescription] = useState(\"\");\n  const { data: session } = useSession();\n\n  const userId = session?.user?.id || \"\";\n  const trustScore = session?.user?.trust || 0;\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!selectedReportType) {\n      return;\n    }\n\n    postReport(\n      latitude,\n      longitude,\n      selectedReportType,\n      trustScore,\n      userId,\n      description\n    );\n    // Optionally clear the form if desired:\n    setDescription(\"\");\n  };\n\n  const roundedLatitude = Number(latitude).toFixed(4);\n  const roundedLongitude = Number(longitude).toFixed(4);\n\n  return (\n    <div className=\"\">\n      <form onSubmit={handleSubmit} className=\"p-2\">\n        <div>\n          <label htmlFor=\"reportType\" className=\"block font-bold\">\n            Report Type:\n          </label>\n          <select\n            id=\"reportType\"\n            value={selectedReportType}\n            onChange={(e) => setSelectedReportType(Number(e.target.value))}\n            required\n            className=\"border rounded-sm p-1 w-full\"\n          >\n            {reportTypes\n              .slice()\n              .sort((a, b) => a.id - b.id)\n              .map((type) => (\n                <option key={type.id} value={type.id}>\n                  {type.name}\n                </option>\n              ))}\n          </select>\n        </div>\n        <div className=\"mt-2\">\n          <label htmlFor=\"description\" className=\"block font-bold\">\n            Description:\n          </label>\n          <textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            className=\"border rounded-sm p-1 w-full\"\n          />\n        </div>\n        <div className=\"mt-2\">\n          <p>\n            <strong>Latitude:</strong> {roundedLatitude}\n          </p>\n          <p>\n            <strong>Longitude:</strong> {roundedLongitude}\n          </p>\n        </div>\n        <div className=\"mt-2 flex space-x-2\">\n          <button\n            type=\"submit\"\n            className=\"bg-blue-500 text-white px-3 py-1 rounded-sm hover:cursor-pointer\"\n          >\n            Submit Report\n          </button>\n          <button\n            type=\"button\"\n            className=\"bg-gray-500 text-white px-3 py-1 rounded-sm hover:cursor-pointer\"\n            onClick={onClose}\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PopupForm;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAeA,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAkB;IACjE,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IAC9B,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EACzD,YAAY,MAAM,GAAG,IACjB;WAAI;KAAY,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAClD;IAEN,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,aAAU,AAAD;IAEnC,MAAM,SAAS,SAAS,MAAM,MAAM;IACpC,MAAM,aAAa,SAAS,MAAM,SAAS;IAE3C,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,oBAAoB;YACvB;QACF;QAEA,CAAA,GAAA,qHAAA,CAAA,aAAU,AAAD,EACP,UACA,WACA,oBACA,YACA,QACA;QAEF,wCAAwC;QACxC,eAAe;IACjB;IAEA,MAAM,kBAAkB,OAAO,UAAU,OAAO,CAAC;IACjD,MAAM,mBAAmB,OAAO,WAAW,OAAO,CAAC;IAEnD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAK,UAAU;YAAc,WAAU;;8BACtC,8OAAC;;sCACC,8OAAC;4BAAM,SAAQ;4BAAa,WAAU;sCAAkB;;;;;;sCAGxD,8OAAC;4BACC,IAAG;4BACH,OAAO;4BACP,UAAU,CAAC,IAAM,sBAAsB,OAAO,EAAE,MAAM,CAAC,KAAK;4BAC5D,QAAQ;4BACR,WAAU;sCAET,YACE,KAAK,GACL,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,EAAE,GAAG,EAAE,EAAE,EAC1B,GAAG,CAAC,CAAC,qBACJ,8OAAC;oCAAqB,OAAO,KAAK,EAAE;8CACjC,KAAK,IAAI;mCADC,KAAK,EAAE;;;;;;;;;;;;;;;;8BAM5B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,SAAQ;4BAAc,WAAU;sCAAkB;;;;;;sCAGzD,8OAAC;4BACC,IAAG;4BACH,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC9C,WAAU;;;;;;;;;;;;8BAGd,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;8CAAO;;;;;;gCAAkB;gCAAE;;;;;;;sCAE9B,8OAAC;;8CACC,8OAAC;8CAAO;;;;;;gCAAmB;gCAAE;;;;;;;;;;;;;8BAGjC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,MAAK;4BACL,WAAU;4BACV,SAAS;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOX;uCAEe"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportSubmissionMarker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Marker, Popup } from \"react-map-gl/maplibre\";\nimport PopupForm from \"./PopupForm\"; // Import the form for submitting\nimport { PositionAnchor } from \"maplibre-gl\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport Image from \"next/image\";\n\nexport default function ReportSubmissionMarker({\n  mapCenter,\n  isAdding,\n  setIsAdding,\n}) {\n  const [markerPosition, setMarkerPosition] = useState({\n    longitude: mapCenter.longitude,\n    latitude: mapCenter.latitude,\n  });\n  const [popupAnchor, setPopupAnchor] = useState<PositionAnchor>(\"bottom\");\n  const [popupOffset, setPopupOffset] = useState(60);\n\n  const markerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    setMarkerPosition({\n      longitude: mapCenter.longitude,\n      latitude: mapCenter.latitude,\n    });\n  }, [mapCenter]);\n\n  useEffect(() => {\n    updatePopupAnchor();\n  }, [markerPosition]);\n\n  const updatePopupAnchor = () => {\n    if (!markerRef.current) {\n      console.warn(\"⚠️ Marker ref is null!\");\n      return;\n    }\n\n    const markerRect = markerRef.current.getBoundingClientRect();\n    const screenHeight = window.innerHeight;\n\n    if (markerRect.top > (screenHeight / 5) * 2) {\n      setPopupAnchor(\"bottom\");\n      setPopupOffset(60);\n    } else {\n      setPopupAnchor(\"top\");\n      setPopupOffset(20);\n    }\n  };\n\n  return (\n    <>\n      <Marker\n        longitude={markerPosition.longitude}\n        latitude={markerPosition.latitude}\n        draggable\n        anchor=\"bottom\"\n        style={{ zIndex: \"10\" }}\n        onDragEnd={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n          updatePopupAnchor();\n        }}\n        onDrag={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n        }}\n      >\n        <AnimatePresence>\n          {isAdding && (\n            <motion.div\n              key={\"adding-image\"}\n              initial={{ opacity: 0, y: -50 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.15 }}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <Image\n                src=\"/marker.png\"\n                width={45}\n                height={45}\n                alt=\"Marker\"\n                ref={markerRef}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </Marker>\n      {isAdding && (\n        <motion.div\n          key={\"adding-popup\"}\n          layoutId=\"popupForm\"\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.15 }}\n          exit={{ opacity: 0, y: -50 }}\n        >\n          <Popup\n            longitude={markerPosition.longitude}\n            latitude={markerPosition.latitude}\n            closeButton\n            closeOnClick={false}\n            onClose={() => setIsAdding(false)}\n            anchor={popupAnchor}\n            offset={popupOffset}\n          >\n            <PopupForm\n              latitude={markerPosition.latitude}\n              longitude={markerPosition.longitude}\n              onClose={() => setIsAdding(false)}\n            />\n          </Popup>\n        </motion.div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 429, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/officer.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABA0lEQVR42j2KvUsCcRzGfzeEDsKZnme1NFVD9rLVUlBQ/4C7c5yD/DBqEhJbtOjoEq0uTZcTRTnv0OkQ8ZxOfAFfFv8Bd8VN+Ho/QR/4wMPzeRAyY9myWvb3jk583qeEz/ucIN3crGid04PLG/+jNPoSygsC6Z7Di9vNwW5zMsGAaEQ+mkDAgZ8WbXMwmwO77d6V08VBTesBoZgq9Bk7u7OSFKIoJ+1yC2GhMpuMYWrCh+Oqg3axxKEzz9V9EPNa/leaK0obZLULr0lj/oBF7fz4+g5xWNQj/0NQpQLwGQNIz2UViKY7wOE/HXH+73YopkPyU4ZUvAShWAPe3qvwEq0DcUvPOXKW4ORclwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/car.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABBUlEQVR42k2PuWoCYRSF/4AokyBxGTJDJMRXMIVVSBA7g0GTGLMVkyqmyQukSBcQBAcccMOxcEPRURQ3FMRO0EFt1EJ8A20UK+HqLwp+8HEv51QHoR0ygiAUKhWplsvJY4mEQIco1eT5y9cP+88FRe73T/y+u2dxti1PFUqN9Y1x+qutVbjZh3CzB7FGe/X4zjhxh24Mxk9PKDLIdoYgdEYgiCPIbeT4yODWYGTQk073Oo5GF2khD25vCFgfD4ViBSbx+Nyu1z8ju8nkaJfKy0QyM+MC/BSbSGVm3Vp9+WGxOBBF0Vqz1ebSXFxek2f0FRb/5gebi6JpLTraIJXKTvDdrzrM1pXKXXi29T9TAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,0GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/roadblock.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxElEQVR42k2PTwqCYBDFv++zSKJVglButBDCIIzcuAgzjP6RbcroAOIJatFKb+PaE3SAbuBCJOgc+USsBw9+82ZgZggpRCmhrDCpBKZ/NTlM2cK3OY9Vg2BkZVNuc3LiCvErUJ6RLoaRIYXgZNuJZZ7KxOw2zfQ8zt+P6ycLllnmWxk4vUxyU2iZhGeE99ZONNfUk9LmhjDY26wi9Mo19v54Nyzn1h+oLgxGVh+p6bOd2JNGlLEGDEZWDxQ/MYrHfjXEwF+c1CxBbgbuvwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,gHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAA8W,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 490, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 501, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/raid.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAEAHicrHi4+RjwrOT8xFx4hFAAAAQAAAAAAAAAAAAACAwMBXIaagoTN7u6T0e3nZYaWgQIDAwIAAAAAAAAAAAACAwQBb5Okhqjh+/+s4vz/bpOklAIDAwIAAAAAABcfIhonNDo4e6GzoZTU8OiM0fDpcZ6ymiUwNSIMDxALAFh9jX2Hzezvrt/194KnuKR+rcKpidL07obJ6N5MbHpwAF6AkH+f3vv+od/7/2+dspiKtMexrOP8/6Hf+/5Zfo+KAFlyfnaUxdzbeLzb2lyFl4RtkqKKkMTc1JbG3NVTbXlpAA8TFRAZISQiGCAkIREWGBISFhgRGSAkHBkgJB0MEBENb3BpM2Q9BXAAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,2GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/caution.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA1UlEQVR42m3KPwsBYQAG8Pecw6UO50+OdNKhDMogg/+jRDFQLIz4BnwFE9ubUdksNm53C7kM6oYz33h1jI73Fqc89aunngcAU8J+0oeAf3GSuB1Os3M4y82dpNX+M2IfjQJTlncdRd51FdQx8yFA26j9srgV1p0Xsl/ktwGacBkjbsGwSTvSU/m6Jm6aOqIeatqkFeqjDaRYkj2vMsKTr+q3Tcnw4Cv6CaaFFOuIgnHTMxBhQrqukvfjkjOgfoFxadRwD4GXwukYQ3CxoPWLQQjOS1noN0q9SJ/GhODCAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkY,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/smoke.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 80, height: 80, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAAACgsMDBgaHB8JCgsKAAAAAAAAAAAAAAAAAAAAAAASExQVho+Vn7O+xtmDi5GaGx0fIAICAgIAAAAAAAcICQhgZ2xyyNbf+LrM2P/H1d/7rrjAzjM3OjwAAAAAADg8P0PCz9frvs7a/7/BzP+4ydb/x9bh/6GqsbwYGxwdAG10eoDH1uD8v8HN/9qprv/Kt8D/vMjU/8vY4fhZXmNqALnFzd++ztr/x7rD//Gbl//qnp7/xbzG/8HR3f+zvsbWAImTmaeapq/RpZCW0cKVf9G/jYDRn5Wd0Zelr9GNlp2sAAsMDQ4PERIXDw8RFxEPDhcRDw8XDhARFw8REhcLDA0PWIh2COGodmEAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,4GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/marker.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvklEQVR42k2Ovw7BUBjFf6goEsztJv4MbCqG4kE8hcTCYOEBWCUmiwfhBXSgQ41iExMdJPV9TSpOcpJzz+/k3gsiO0dlXWV27eKJT5Kn2ikjnya7qTEPXZ5+h4PvcNC8qTMXZlA1sQMHT2E7j9UuYsnoGMhNynRg6UFLhb+BEw+s+Ildk9Wnz1uBWnK4b7AqCIv/4ZZo3XqcowGR+t7jMpSOREaK9Nhm9HJ5qCeSs9Lxr3IGc1tnIV6WDcyk/wJYZD8DPsfKIQAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,6GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsW,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 586, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 592, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo, useCallback } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { Map, Marker, Popup } from \"react-map-gl/maplibre\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport { getReports } from \"@/actions/getReports\";\nimport { getReportTypes } from \"@/actions/getReportTypes\";\nimport { deleteReport } from \"@/actions/deleteReport\";\nimport { useSession } from \"./lib/auth-client\";\nimport { useData } from \"./components/layout/DataProvider\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport AddMarkerButton from \"./components/map/AddMarkerButton\";\nimport ReportSubmissionMarker from \"./components/map/ReportSubmissionMarker\";\nimport Image from \"next/image\";\nimport officer from \"../public/officer.png\";\nimport car from \"../public/car.png\";\nimport roadblock from \"../public/roadblock.png\";\nimport ice from \"../public/raid.png\";\nimport caution from \"../public/caution.png\";\nimport smoke from \"../public/smoke.png\";\nimport marker from \"../public/marker.png\";\n\nconst socket = io(\"http://localhost:3005\", {\n  reconnection: true,\n  reconnectionAttempts: 10,\n  reconnectionDelay: 2000,\n});\n\ntype Report = {\n  id: string;\n  long: number;\n  lat: number;\n  reportTypeId: string;\n  trustScore: number;\n  createdAt: string;\n  isRemoving?: boolean; // This is our temporary flag for exit animations\n};\n\nconst Page = () => {\n  const { data: session, isPending, error } = useSession();\n  const userId = session?.user?.id || \"\";\n  const trustScore = session?.user?.trust;\n  const [mapCenter, setMapCenter] = useState({\n    longitude: process.env.NEXT_PUBLIC_MAP_CENTER_LONG,\n    latitude: process.env.NEXT_PUBLIC_MAP_CENTER_LAT,\n  });\n  const [showFormPopup, setShowFormPopup] = useState(!session);\n  const [newReportId, setNewReportId] = useState(null);\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [playStagger, setPlayStagger] = useState(false);\n  const { reports, setReports, reportTypes } = useData();\n\n  const getBoundsFromEnv = () => {\n    const sw = process.env.NEXT_PUBLIC_MAP_BOUNDS_SW?.split(\",\").map(Number);\n    const ne = process.env.NEXT_PUBLIC_MAP_BOUNDS_NE?.split(\",\").map(Number);\n\n    if (sw?.length === 2 && ne?.length === 2) {\n      return [\n        [sw[0], sw[1]],\n        [ne[0], ne[1]],\n      ];\n    }\n\n    return undefined;\n  };\n\n  const maxBounds = getBoundsFromEnv();\n\n  // Fetch report types only once on mount\n  useEffect(() => {\n    // Listen for real-time updates from WebSockets\n    socket.on(\"new-report\", (data) => {\n      // Extract the report from the WebSocket event\n      const newReport = Array.isArray(data) ? data[1] : data;\n\n      setNewReportId(newReport.id);\n\n      setReports((prevReports) => {\n        if (prevReports.some((r) => r.id === newReport.id)) {\n          return prevReports; // Prevent duplicates\n        }\n        return [...prevReports, { ...newReport }];\n      });\n\n      setTimeout(() => setNewReportId(null), 2000);\n    });\n\n    // Listen for \"report-deleted\" events\n    socket.on(\"report-deleted\", ({ reportId }) => {\n      console.log(`🗑️ Report deleted: ${reportId}`);\n      setReports((prevReports) => prevReports.filter((r) => r.id !== reportId));\n    });\n\n    // Clean up both event listeners on unmount\n    return () => {\n      socket.off(\"new-report\");\n      socket.off(\"report-deleted\"); // ✅ Cleanup the delete event\n    };\n  }, []);\n\n  useEffect(() => {\n    if (reports.length > 0) {\n      setPlayStagger(true);\n    }\n  }, [reports.length]);\n\n  const reportTypeIcons = {\n    1: officer,\n    2: car,\n    3: roadblock,\n    4: ice,\n    5: caution,\n    6: smoke,\n  };\n\n  // Function to determine color based on trust level\n  const getMarkerColor = (trustScore: number) => {\n    if (trustScore >= 4)\n      return \"bg-green-300 shadow-green-400 before:border-t-green-300\"; // High trust (green)\n    if (trustScore >= 2)\n      return \"bg-yellow-300 shadow-yellow-400 before:border-t-yellow-300\"; // Medium trust (yellow)\n    return \"bg-red-300 shadow-red-400 before:border-t-red-300\"; // Low trust (red)\n  };\n\n  // Function to determine opacity based on age of report\n  const getMarkerOpacity = (createdAt: string) => {\n    const reportDate = new Date(createdAt);\n    const now = new Date();\n    const hoursElapsed =\n      (now.getTime() - reportDate.getTime()) / (1000 * 60 * 60);\n\n    if (hoursElapsed < 1) return \"1\";\n    if (hoursElapsed < 3) return \"0.8\";\n    if (hoursElapsed < 6) return \"1\";\n    if (hoursElapsed < 12) return \"1\";\n    return \"1\";\n  };\n\n  // Handle the drag end event to update the marker's position\n\n  // Sync marker position with map center\n  const handleMapMove = (e: any) => {\n    setMapCenter({\n      longitude: e.viewState.longitude,\n      latitude: e.viewState.latitude,\n    });\n  };\n\n  const container = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.05,\n      },\n    },\n  };\n\n  const item = {\n    hidden: { opacity: 0, y: -50 },\n    show: { opacity: 1, y: 0 },\n  };\n\n  // const memoizedMarkers = useMemo(\n  //   () =>\n  //     reports.map((report) => {\n  //       const iconSrc = reportTypeIcons[report.reportTypeId] || marker;\n  //       const markerColor = getMarkerColor(report.trustScore);\n  //       const isNew = report.id === newReportId;\n\n  //       return (\n  //         <Marker\n  //           key={report.id}\n  //           longitude={report.long}\n  //           latitude={report.lat}\n  //           color={getMarkerColor(report.trustScore)}\n  //           opacity={getMarkerOpacity(report.createdAt)}\n  //           anchor=\"bottom\"\n  //           onClick={() => setSelectedReport(report)}\n  //         >\n  //           {iconSrc && (\n  //             <motion.div\n  //               variants={isNew ? undefined : item}\n  //               initial={isNew ? { opacity: 0, y: -50 } : undefined}\n  //               animate={isNew ? { opacity: 1, y: 0 } : undefined}\n  //               layout={\"position\"}\n  //             >\n  //               <div\n  //                 className={`relative flex items-center justify-center h-12 w-12 rounded-full opacity-95 shadow-md ${markerColor} p-1 before:content-[''] before:absolute before:bottom-[-28px] before:left-1/2 before:-translate-x-1/2 before:border-[15px] before:border-transparent -translate-y-4`}\n  //               >\n  //                 <Image\n  //                   src={iconSrc}\n  //                   alt=\"Report Marker\"\n  //                   style={{ width: \"40px\", height: \"40px\" }} // Adjust size as needed\n  //                 />\n  //               </div>\n  //             </motion.div>\n  //           )}\n  //         </Marker>\n  //       );\n  //     }),\n  //   [reports]\n  // );\n\n  const handleDelete = async (reportId: string) => {\n    if (!userId) {\n      console.error(\"❌ No user ID found, cannot delete report\");\n      return;\n    }\n\n    const response = await deleteReport(reportId, userId);\n    if (response.error) {\n      console.error(\"❌ Delete failed:\", response.error);\n      return;\n    }\n\n    setReports((prevReports) =>\n      prevReports.map((r) =>\n        r.id === reportId ? { ...r, isRemoving: true } : r\n      )\n    );\n\n    setTimeout(() => {\n      setReports((prevReports) => prevReports.filter((r) => r.id !== reportId));\n    }, 200);\n\n    // setReports((prevReports) => prevReports.filter((r) => r.id !== reportId));\n    // setSelectedReport(null);\n\n    socket.emit(\"report-deleted\", { reportId });\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-66px)] w-screen relative\">\n      <div className=\"absolute left-10 top-10 z-10\"></div>\n      <Map\n        initialViewState={{\n          longitude: mapCenter.longitude,\n          latitude: mapCenter.latitude,\n          zoom: 13,\n        }}\n        minZoom={process.env.NEXT_PUBLIC_MAP_MIN_ZOOM || 10}\n        maxZoom={process.env.NEXT_PUBLIC_MAP_MAX_ZOOM || 18}\n        maxBounds={maxBounds}\n        onMove={handleMapMove}\n        style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}\n        //mapStyle={\"http://159.65.164.132:8080/data/v3.json\"}\n        mapStyle={`https://api.maptiler.com/maps/streets/style.json?key=${process.env.NEXT_PUBLIC_MAPTILER_KEY}`}\n      >\n        <AnimatePresence>\n          <motion.div\n            initial=\"hidden\"\n            animate=\"show\"\n            variants={container}\n            key={playStagger}\n          >\n            {reports.map((report) => {\n              if (report.isRemoving) return null; // Skip rendering if marked for removal\n\n              const iconSrc = reportTypeIcons[report.reportTypeId] || marker;\n              const markerColor = getMarkerColor(report.trustScore);\n              const isNew = report.id === newReportId;\n\n              return (\n                <Marker\n                  key={report.id}\n                  longitude={report.long}\n                  latitude={report.lat}\n                  color={getMarkerColor(report.trustScore)}\n                  opacity={getMarkerOpacity(report.createdAt)}\n                  anchor=\"bottom\"\n                  onClick={() => setSelectedReport(report)}\n                >\n                  {iconSrc && (\n                    <motion.div\n                      //key={report.id}\n                      layout=\"position\" // Prevents movement from triggering animations\n                      variants={isNew ? undefined : item} // Use variants only for old markers\n                      initial={isNew ? { opacity: 0, y: -50 } : undefined} // Only animate new markers\n                      animate={\n                        isNew\n                          ? {\n                              opacity: 1,\n                              y: 0,\n                              transition: { duration: 0.3, ease: \"easeOut\" },\n                            }\n                          : undefined\n                      }\n                      exit={{\n                        opacity: 0,\n                        y: -50,\n                        transition: { duration: 0.2, ease: \"easeIn\" },\n                      }}\n                    >\n                      <div\n                        className={`relative flex items-center justify-center h-12 w-12 rounded-full opacity-95 shadow-md ${markerColor} p-1 before:content-[''] before:absolute before:bottom-[-28px] before:left-1/2 before:-translate-x-1/2 before:border-[15px] before:border-transparent -translate-y-4`}\n                      >\n                        <Image\n                          src={iconSrc}\n                          alt=\"Report Marker\"\n                          style={{ width: \"40px\", height: \"40px\" }} // Adjust size as needed\n                        />\n                      </div>\n                    </motion.div>\n                  )}\n                </Marker>\n              );\n            })}\n          </motion.div>\n        </AnimatePresence>\n\n        {/* Display popup if a report is selected */}\n        {selectedReport && (\n          <Popup\n            longitude={selectedReport.long}\n            latitude={selectedReport.lat}\n            closeButton={true}\n            closeOnClick={false}\n            onClose={() => setSelectedReport(null)}\n            anchor=\"top\"\n          >\n            <div className=\"p-3 bg-white rounded shadow\">\n              <h3 className=\"font-bold\">Food Truck Report</h3>\n              <p className=\"text-sm\">\n                {selectedReport.description || \"No description provided\"}\n              </p>\n              <p>Submitted: {selectedReport.createdAt[0]}</p>\n              <p>Most recent confirmation: </p>\n              {session &&\n                session?.user?.id !== selectedReport.submittedById && (\n                  <div className=\"flex justify-between mt-2\">\n                    <button\n                      className=\"bg-green-500 text-white px-3 py-1 rounded\"\n                      //onClick={() => handleVote(selectedReport.id, \"confirm\")}\n                    >\n                      ✅ I See It\n                    </button>\n                    <button\n                      className=\"bg-red-500 text-white px-3 py-1 rounded\"\n                      //onClick={() => handleVote(selectedReport.id, \"disconfirm\")}\n                    >\n                      ❌ I Don&apos;t See It\n                    </button>\n                  </div>\n                )}\n              {/* ✅ Show Delete Button if User Owns the Report */}\n              {session?.user?.id === selectedReport.submittedById && (\n                <button\n                  className=\"bg-red-500 text-white px-3 py-1 mt-2 rounded hover:bg-red-700 transition\"\n                  onClick={() => handleDelete(selectedReport.id)}\n                >\n                  🗑️ Delete Report\n                </button>\n              )}\n            </div>\n          </Popup>\n        )}\n\n        {session ? (\n          <>\n            <AddMarkerButton\n              isAdding={isAdding}\n              toggleMarker={() => setIsAdding(!isAdding)}\n            />\n\n            <ReportSubmissionMarker\n              mapCenter={mapCenter}\n              isAdding={isAdding}\n              setIsAdding={setIsAdding}\n            />\n          </>\n        ) : (\n          <>\n            {showFormPopup && (\n              <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-4 rounded-sm shadow-sm\">\n                <button\n                  onClick={() => setShowFormPopup(false)}\n                  className=\"absolute top-2 right-2 text-gray-500 hover:text-gray-800\"\n                >\n                  ✕\n                </button>\n                <p className=\"text-black\">\n                  Please sign in to interact with the map.\n                </p>\n              </div>\n            )}\n          </>\n        )}\n      </Map>\n    </div>\n  );\n};\n\nexport default Page;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1089, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/deleteReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\nimport { requireRole } from \"@/app/lib/requireRole\";\nimport type { Session } from \"@/app/lib/auth-client\";\n\nexport async function deleteReport(reportId: string, session: Session | null) {\n  try {\n    if (!session) return { error: \"Unauthorized: No user session\" };\n\n    const reportIdNumber = Number(reportId);\n\n    const report = await db.report.findUnique({\n      where: { id: reportIdNumber },\n    });\n\n    if (!report) return { error: \"Report not found\" };\n\n    const isOwner = report.submittedById === session.user.id;\n\n    if (!isOwner) {\n      requireRole(session, \"moderator\");\n    } else {\n      return { error: \"Unauthorized\" };\n    }\n\n    await db.report.delete({\n      where: { id: reportIdNumber },\n    });\n\n    return { success: true };\n  } catch (error) {\n    console.error(error);\n    return { error: \"Error deleting report\" };\n  }\n}\n"],"names":[],"mappings":";;;;;IAMsB"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/updateReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\nimport { requireRole } from \"@/app/lib/requireRole\";\n\nexport async function updateReport(reportId, updatedData, session) {\n  const report = await db.report.findUnique({\n    where: { id: reportId },\n  });\n\n  if (!report) throw new Error(\"Report not found\");\n\n  if (\n    session.user.id !== report.submittedById &&\n    session.user.role !== \"admin\" &&\n    session.user.role !== \"moderator\"\n  ) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  return await db.report.update({\n    where: { id: reportId },\n    data: {\n      reportType: { connect: { id: updatedData.reportTypeId } },\n      description: updatedData?.dynamicFields\n        ? JSON.stringify(updatedData.dynamicFields)\n        : \"{}\",\n    },\n  });\n}\n"],"names":[],"mappings":";;;;;IAKsB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger>) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground aria-invalid:border-destructive ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:focus-visible:ring-0 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&>span]:line-clamp-1\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md\",\n          className\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: \"default\" | \"destructive\"\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-semibold data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-lg\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/PopupForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\n\nimport { postReport } from \"@/actions/postReport\";\nimport { updateReport } from \"@/actions/updateReport\";\nimport { useSession } from \"@/app/lib/auth-client\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\n\nimport { toast } from \"sonner\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n} from \"@/components/ui/dropdown-menu\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Plus, Minus } from \"lucide-react\";\n\ninterface PopupFormProps {\n  latitude: number;\n  longitude: number;\n  existingReport?: any;\n  setEditing: (editing: boolean) => void;\n  onClose: () => void;\n}\n\nconst FormSchema = z.object({\n  reportTypeId: z.string().min(1, \"Please select a report type\"),\n  dynamicFields: z.record(z.string()).optional(),\n});\n\nconst PopupForm = ({\n  latitude,\n  longitude,\n  existingReport,\n  setSelectedReport,\n  setEditing,\n  onClose,\n}: PopupFormProps) => {\n  const { reportTypes, globalSettings } = useData();\n  const { data: session } = useSession();\n\n  const userId = session?.user?.id || \"\";\n  const trustScore = session?.user?.trust || 1;\n  const [loading, setLoading] = useState(false);\n\n  const reportData = existingReport || { reportTypeId: \"\", description: \"{}\" };\n\n  const [selectedReportType, setSelectedReportType] = useState<string | null>(\n    () => {\n      if (existingReport) {\n        return String(existingReport.reportTypeId);\n      }\n      if (reportTypes.length > 0) {\n        return String(reportTypes[0].id);\n      }\n      return null;\n    }\n  );\n  const [selectedFields, setSelectedFields] = useState<string[]>(() => {\n    if (!existingReport?.description) return [];\n    try {\n      return Object.keys(JSON.parse(reportData.description));\n    } catch (error) {\n      console.error(\"Error parsing report description:\", error);\n      return [];\n    }\n  });\n\n  const form = useForm({\n    resolver: zodResolver(FormSchema),\n    defaultValues: {\n      reportTypeId: reportData ? String(reportData.reportTypeId) : \"\",\n      dynamicFields: reportData?.description\n        ? JSON.parse(reportData.description)\n        : {},\n    },\n  });\n\n  console.log(\"existingReport\", existingReport);\n\n  const selectedReport = reportTypes.find(\n    (type) => String(type.id) === selectedReportType\n  );\n  const availableFields = selectedReport?.fields || [];\n\n  useEffect(() => {\n    if (existingReport) {\n      form.setValue(\"reportTypeId\", String(existingReport.reportTypeId));\n      form.setValue(\n        \"dynamicFields\",\n        existingReport.description ? JSON.parse(existingReport.description) : {}\n      );\n    }\n  }, [existingReport, form]);\n\n  // Add a field to the form\n  const addField = (field: string) => {\n    if (!selectedFields.includes(field)) {\n      setSelectedFields((prev) => [...prev, field]);\n      form.setValue(\n        `dynamicFields.${field}`,\n        form.getValues(`dynamicFields.${field}`) || \"\"\n      );\n    }\n  };\n\n  // Remove a field from the form\n  const removeField = (field: string) => {\n    setSelectedFields((prev) => prev.filter((f) => f !== field));\n    form.setValue(`dynamicFields.${field}`, \"\");\n    form.unregister(`dynamicFields.${field}`);\n  };\n\n  const handleSubmit = async (values: any) => {\n    if (!session && !globalSettings?.submitReportsOpen) {\n      toast.error(\"You must be logged in to submit a report.\");\n      return;\n    }\n    setLoading(true);\n\n    try {\n      const payload = {\n        latitude,\n        longitude,\n        reportTypeId: Number(values.reportTypeId),\n        trustScore,\n        userId: userId || null,\n        description: JSON.stringify(values.dynamicFields || {}),\n      };\n\n      if (existingReport) {\n        const updatedReport = await updateReport(\n          existingReport.id,\n          { ...values, reportTypeId: Number(values.reportTypeId) },\n          session\n        );\n        toast.success(\"Report updated successfully!\");\n        setSelectedReport(updatedReport);\n      } else {\n        const response = await postReport(payload);\n\n        if (!response) {\n          throw new Error(\"Failed to submit report\");\n        }\n        toast.success(\"Report submitted successfully!\");\n      }\n\n      setSelectedFields([]);\n      form.reset();\n      onClose();\n    } catch (error) {\n      toast.error(\"Failed to submit report. Please try again.\");\n      console.error(\"Failed to submit report:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!selectedReportType && reportTypes.length === 0) {\n    return <p>Loading...</p>;\n  }\n\n  return (\n    <Form {...form}>\n      <form\n        onSubmit={form.handleSubmit(handleSubmit)}\n        className=\"space-y-4 p-4 z-30\"\n      >\n        {/* Report Type Selection */}\n        <FormField\n          control={form.control}\n          name=\"reportTypeId\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Report Type</FormLabel>\n              <Select\n                onValueChange={(value) => {\n                  setSelectedReportType(value);\n                  setSelectedFields([]);\n                  form.setValue(\"reportTypeId\", value);\n                }}\n                value={field.value}\n              >\n                <FormControl>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a report type\" />\n                  </SelectTrigger>\n                </FormControl>\n                <SelectContent className=\"bg-white\">\n                  {reportTypes.map((type) => (\n                    <SelectItem\n                      className=\"hover:bg-gray-100\"\n                      key={type.id}\n                      value={String(type.id)}\n                    >\n                      {type.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Dynamic Fields Selection */}\n        {availableFields.length > 0 && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"outline\" className=\"w-full\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Field\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent className=\"bg-white\">\n              {availableFields\n                .filter((field) => !selectedFields.includes(field)) // Filter out already selected fields\n                .map((field) => (\n                  <DropdownMenuItem\n                    key={field}\n                    onClick={() => addField(field)}\n                    className=\"hover:bg-gray-100\"\n                  >\n                    {field}\n                  </DropdownMenuItem>\n                ))}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n\n        {/* Render Selected Fields */}\n        {selectedFields.map((field) => (\n          <FormField\n            key={field}\n            control={form.control}\n            name={`dynamicFields.${field}`}\n            render={({ field: formField }) => (\n              <FormItem>\n                <FormLabel>{field}</FormLabel>\n                <div className=\"flex gap-2 items-center\">\n                  <FormControl>\n                    <Input {...formField} placeholder={`Enter ${field}...`} />\n                  </FormControl>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => removeField(field)}\n                  >\n                    <Minus className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        ))}\n\n        {/* Submit & Cancel Buttons */}\n        <div className=\"flex justify-between mt-4\">\n          <Button type=\"submit\" disabled={loading} className=\"w-1/2\">\n            {loading ? (\n              <span className=\"flex items-center\">Submitting...</span>\n            ) : (\n              \"Submit\"\n            )}\n          </Button>\n          <Button\n            type=\"button\"\n            onClick={onClose}\n            disabled={loading}\n            variant=\"outline\"\n            className=\"w-1/2 ml-2\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n};\n\nexport default PopupForm;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 920, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 931, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/officer.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABA0lEQVR42j2KvUsCcRzGfzeEDsKZnme1NFVD9rLVUlBQ/4C7c5yD/DBqEhJbtOjoEq0uTZcTRTnv0OkQ8ZxOfAFfFv8Bd8VN+Ho/QR/4wMPzeRAyY9myWvb3jk583qeEz/ucIN3crGid04PLG/+jNPoSygsC6Z7Di9vNwW5zMsGAaEQ+mkDAgZ8WbXMwmwO77d6V08VBTesBoZgq9Bk7u7OSFKIoJ+1yC2GhMpuMYWrCh+Oqg3axxKEzz9V9EPNa/leaK0obZLULr0lj/oBF7fz4+g5xWNQj/0NQpQLwGQNIz2UViKY7wOE/HXH+73YopkPyU4ZUvAShWAPe3qvwEq0DcUvPOXKW4ORclwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 944, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 955, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/car.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABBUlEQVR42k2PuWoCYRSF/4AokyBxGTJDJMRXMIVVSBA7g0GTGLMVkyqmyQukSBcQBAcccMOxcEPRURQ3FMRO0EFt1EJ8A20UK+HqLwp+8HEv51QHoR0ygiAUKhWplsvJY4mEQIco1eT5y9cP+88FRe73T/y+u2dxti1PFUqN9Y1x+qutVbjZh3CzB7FGe/X4zjhxh24Mxk9PKDLIdoYgdEYgiCPIbeT4yODWYGTQk073Oo5GF2khD25vCFgfD4ViBSbx+Nyu1z8ju8nkaJfKy0QyM+MC/BSbSGVm3Vp9+WGxOBBF0Vqz1ebSXFxek2f0FRb/5gebi6JpLTraIJXKTvDdrzrM1pXKXXi29T9TAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,0GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/roadblock.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxElEQVR42k2PTwqCYBDFv++zSKJVglButBDCIIzcuAgzjP6RbcroAOIJatFKb+PaE3SAbuBCJOgc+USsBw9+82ZgZggpRCmhrDCpBKZ/NTlM2cK3OY9Vg2BkZVNuc3LiCvErUJ6RLoaRIYXgZNuJZZ7KxOw2zfQ8zt+P6ycLllnmWxk4vUxyU2iZhGeE99ZONNfUk9LmhjDY26wi9Mo19v54Nyzn1h+oLgxGVh+p6bOd2JNGlLEGDEZWDxQ/MYrHfjXEwF+c1CxBbgbuvwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,gHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAA8W,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 992, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1003, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/raid.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAEAHicrHi4+RjwrOT8xFx4hFAAAAQAAAAAAAAAAAAACAwMBXIaagoTN7u6T0e3nZYaWgQIDAwIAAAAAAAAAAAACAwQBb5Okhqjh+/+s4vz/bpOklAIDAwIAAAAAABcfIhonNDo4e6GzoZTU8OiM0fDpcZ6ymiUwNSIMDxALAFh9jX2Hzezvrt/194KnuKR+rcKpidL07obJ6N5MbHpwAF6AkH+f3vv+od/7/2+dspiKtMexrOP8/6Hf+/5Zfo+KAFlyfnaUxdzbeLzb2lyFl4RtkqKKkMTc1JbG3NVTbXlpAA8TFRAZISQiGCAkIREWGBISFhgRGSAkHBkgJB0MEBENb3BpM2Q9BXAAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,2GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 1016, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/caution.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA1UlEQVR42m3KPwsBYQAG8Pecw6UO50+OdNKhDMogg/+jRDFQLIz4BnwFE9ubUdksNm53C7kM6oYz33h1jI73Fqc89aunngcAU8J+0oeAf3GSuB1Os3M4y82dpNX+M2IfjQJTlncdRd51FdQx8yFA26j9srgV1p0Xsl/ktwGacBkjbsGwSTvSU/m6Jm6aOqIeatqkFeqjDaRYkj2vMsKTr+q3Tcnw4Cv6CaaFFOuIgnHTMxBhQrqukvfjkjOgfoFxadRwD4GXwukYQ3CxoPWLQQjOS1noN0q9SJ/GhODCAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkY,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1051, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/smoke.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 80, height: 80, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAAACgsMDBgaHB8JCgsKAAAAAAAAAAAAAAAAAAAAAAASExQVho+Vn7O+xtmDi5GaGx0fIAICAgIAAAAAAAcICQhgZ2xyyNbf+LrM2P/H1d/7rrjAzjM3OjwAAAAAADg8P0PCz9frvs7a/7/BzP+4ydb/x9bh/6GqsbwYGxwdAG10eoDH1uD8v8HN/9qprv/Kt8D/vMjU/8vY4fhZXmNqALnFzd++ztr/x7rD//Gbl//qnp7/xbzG/8HR3f+zvsbWAImTmaeapq/RpZCW0cKVf9G/jYDRn5Wd0Zelr9GNlp2sAAsMDQ4PERIXDw8RFxEPDhcRDw8XDhARFw8REhcLDA0PWIh2COGodmEAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,4GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 1064, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1075, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/marker.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvklEQVR42k2Ovw7BUBjFf6goEsztJv4MbCqG4kE8hcTCYOEBWCUmiwfhBXSgQ41iExMdJPV9TSpOcpJzz+/k3gsiO0dlXWV27eKJT5Kn2ikjnya7qTEPXZ5+h4PvcNC8qTMXZlA1sQMHT2E7j9UuYsnoGMhNynRg6UFLhb+BEw+s+Ildk9Wnz1uBWnK4b7AqCIv/4ZZo3XqcowGR+t7jMpSOREaK9Nhm9HJ5qCeSs9Lxr3IGc1tnIV6WDcyk/wJYZD8DPsfKIQAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,6GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsW,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 1088, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1094, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportMarkers.tsx"],"sourcesContent":["\"use client\";\nimport { Marker } from \"react-map-gl/maplibre\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport Image from \"next/image\";\nimport { useState } from \"react\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\n\nimport officer from \"@/public/officer.png\";\nimport car from \"@/public/car.png\";\nimport roadblock from \"@/public/roadblock.png\";\nimport ice from \"@//public/raid.png\";\nimport caution from \"@/public/caution.png\";\nimport smoke from \"@/public/smoke.png\";\nimport marker from \"@/public/marker.png\";\n\nconst reportTypeIcons = {\n  1: officer,\n  2: car,\n  3: roadblock,\n  4: ice,\n  5: caution,\n  6: smoke,\n};\n\nexport default function ReportMarkers({ setSelectedReport, userId }) {\n  const { reports, setReports } = useData();\n  const [newReportId, setNewReportId] = useState<string | null>(null);\n\n  return (\n    <AnimatePresence>\n      {reports.map((report) => {\n        if (report.isRemoving) return null;\n\n        const iconSrc = reportTypeIcons[report.reportTypeId] || marker;\n        const isNew = report.id === newReportId;\n\n        return (\n          <Marker\n            key={report.id}\n            longitude={report.long}\n            latitude={report.lat}\n            anchor=\"bottom\"\n            data-marker-id={report.id}\n            onClick={() => setSelectedReport(report)}\n          >\n            <motion.div\n              layout=\"position\"\n              variants={\n                isNew\n                  ? undefined\n                  : {\n                      hidden: { opacity: 0, y: -50 },\n                      show: { opacity: 1, y: 0 },\n                    }\n              }\n              initial={isNew ? { opacity: 0, y: -50 } : undefined}\n              animate={isNew ? { opacity: 1, y: 0 } : undefined}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <div\n                className={`relative flex items-center justify-center h-12 w-12 rounded-full opacity-95 shadow-md bg-white before:border-t-white p-1 before:content-[''] before:absolute before:bottom-[-28px] before:left-1/2 before:-translate-x-1/2 before:border-[15px] before:border-transparent -translate-y-4`}\n              >\n                <Image\n                  src={iconSrc}\n                  alt=\"Report Marker\"\n                  width={40}\n                  height={40}\n                />\n              </div>\n            </motion.div>\n          </Marker>\n        );\n      })}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AADA;AACA;AAFA;;;;;;;;;;;;;;AAeA,MAAM,kBAAkB;IACtB,GAAG,sQAAA,CAAA,UAAO;IACV,GAAG,8PAAA,CAAA,UAAG;IACN,GAAG,0QAAA,CAAA,UAAS;IACZ,GAAG,gQAAA,CAAA,UAAG;IACN,GAAG,sQAAA,CAAA,UAAO;IACV,GAAG,kQAAA,CAAA,UAAK;AACV;AAEe,SAAS,cAAc,EAAE,iBAAiB,EAAE,MAAM,EAAE;IACjE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IACtC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE9D,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACb,QAAQ,GAAG,CAAC,CAAC;YACZ,IAAI,OAAO,UAAU,EAAE,OAAO;YAE9B,MAAM,UAAU,eAAe,CAAC,OAAO,YAAY,CAAC,IAAI,oQAAA,CAAA,UAAM;YAC9D,MAAM,QAAQ,OAAO,EAAE,KAAK;YAE5B,qBACE,8OAAC,gLAAA,CAAA,SAAM;gBAEL,WAAW,OAAO,IAAI;gBACtB,UAAU,OAAO,GAAG;gBACpB,QAAO;gBACP,kBAAgB,OAAO,EAAE;gBACzB,SAAS,IAAM,kBAAkB;0BAEjC,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;oBACT,QAAO;oBACP,UACE,QACI,YACA;wBACE,QAAQ;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC7B,MAAM;4BAAE,SAAS;4BAAG,GAAG;wBAAE;oBAC3B;oBAEN,SAAS,QAAQ;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG,IAAI;oBAC1C,SAAS,QAAQ;wBAAE,SAAS;wBAAG,GAAG;oBAAE,IAAI;oBACxC,MAAM;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;8BAE3B,cAAA,8OAAC;wBACC,WAAW,CAAC,wRAAwR,CAAC;kCAErS,cAAA,8OAAC,6HAAA,CAAA,UAAK;4BACJ,KAAK;4BACL,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;;;;;;eA5BT,OAAO,EAAE;;;;;QAkCpB;;;;;;AAGN"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1212, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/postVotes.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\nimport { getGlobalSettings } from \"./globalSettings\";\n\ninterface VotePayload {\n  reportId: number;\n  userId: string;\n  voteType: number;\n}\n\nexport async function voteOnReport(payload: VotePayload) {\n  const { userId, reportId, voteType } = payload;\n\n  try {\n    if (!reportId || !userId || !voteType) {\n      console.error(\"Invalid payload:\", payload);\n      return { error: \"Invalid payload\" };\n    }\n\n    const existingVote = await db.vote.findUnique({\n      where: {\n        userId_reportId: { userId, reportId },\n      },\n    });\n\n    if (!existingVote) {\n      await db.vote.create({\n        data: {\n          userId,\n          reportId,\n          value: voteType,\n        },\n      });\n\n      if (voteType === 1) {\n        await db.report.update({\n          where: { id: reportId },\n          data: { confirmationCount: { increment: 1 } },\n        });\n      } else {\n        await db.report.update({\n          where: { id: reportId },\n          data: { disconfirmationCount: { increment: 1 } },\n        });\n      }\n    } else if (existingVote.value !== voteType) {\n      // User switching votes\n      await db.vote.update({\n        where: { userId_reportId: { userId, reportId } },\n        data: { value: voteType },\n      });\n\n      if (voteType === 1) {\n        await db.report.update({\n          where: { id: reportId },\n          data: {\n            confirmationCount: { increment: 1 },\n            disconfirmationCount: { decrement: 1 },\n          },\n        });\n      } else {\n        await db.report.update({\n          where: { id: reportId },\n          data: {\n            confirmationCount: { decrement: 1 },\n            disconfirmationCount: { increment: 1 },\n          },\n        });\n      }\n    } else {\n      // User clicked the same vote again to delete it\n      await db.vote.delete({\n        where: { userId_reportId: { userId, reportId } },\n      });\n\n      if (voteType === 1) {\n        await db.report.update({\n          where: { id: reportId },\n          data: { confirmationCount: { decrement: 1 } },\n        });\n      } else {\n        await db.report.update({\n          where: { id: reportId },\n          data: { disconfirmationCount: { decrement: 1 } },\n        });\n      }\n    }\n\n    const updatedReport = await db.report.findUnique({\n      where: { id: reportId },\n    });\n\n    if (updatedReport && updatedReport.disconfirmationCount >= 5) {\n      await db.report.update({\n        where: { id: reportId },\n        data: { isVisible: false },\n      });\n    }\n\n    return { success: true };\n  } catch (error) {\n    console.error(\"Error voting on report:\", error);\n    return { error: \"Failed to vote on report\" };\n  }\n}\n"],"names":[],"mappings":";;;;;IAWsB"}},
    {"offset": {"line": 1218, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1224, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/getUserVote.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\nexport async function getUserVotes(userId, reportId) {\n  // Fetch the user's vote for this report.\n  const userVote = await db.vote.findUnique({\n    where: {\n      userId_reportId: { userId, reportId },\n    },\n  });\n\n  if (!userVote) {\n    return null;\n  }\n  // Map the result to a simpler array of objects if needed.\n  return userVote;\n}\n"],"names":[],"mappings":";;;;;IAIsB"}},
    {"offset": {"line": 1230, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1236, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground rounded-xl border shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\"flex flex-col gap-1.5 p-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"p-6 pt-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center p-6 pt-0\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1315, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1321, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAKA;AAFA;AAHA;;;;AAOA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD;IACrD,qBACE,8OAAC,sKAAmB,IAAI;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,kKACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1345, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1351, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-semibold w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 focus-visible:ring-4 focus-visible:outline-1 aria-invalid:focus-visible:ring-0 transition-[color,box-shadow]\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-sm [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-sm [a&]:hover:bg-destructive/90\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAHA;;;;;AAKA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,kWACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1391, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1397, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAKA;AAFA;AAHA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,2KAAoB,IAAI;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;0BAET,8OAAC,2KAAoB,QAAQ;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,2KAAoB,MAAM;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8OAAC,2KAAoB,mBAAmB;QACtC,aAAU;QACV,aAAa;QACb,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2KAAoB,eAAe;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 1461, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1467, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportPopup.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\nimport { voteOnReport } from \"@/actions/postVotes\";\nimport { getUserVotes } from \"@/actions/getUserVote\";\nimport type { Session } from \"@/app/lib/auth-client\";\n\nimport { Popup } from \"react-map-gl/maplibre\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { toast } from \"sonner\";\nimport { Check, X, Trash } from \"lucide-react\";\n\nconst voteCache = new Map();\n\ninterface ReportPopupProps {\n  selectedReport: any;\n  setSelectedReport: (report: any) => void;\n  setEditing: (editing: boolean) => void;\n  session: Session | null;\n  handleDelete: (reportId: string) => void;\n}\n\nexport default function ReportPopup({\n  selectedReport,\n  setSelectedReport,\n  setEditing,\n  session,\n  handleDelete,\n}: ReportPopupProps) {\n  const { reportTypes, globalSettings } = useData();\n  const [userVote, setUserVote] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (!session?.user.id || !selectedReport?.id) return;\n\n    if (voteCache.has(selectedReport.id)) {\n      setUserVote(voteCache.get(selectedReport.id));\n      return;\n    }\n\n    const fetchUserVote = async () => {\n      try {\n        if (session?.user.id) {\n          const vote = await getUserVotes(session.user.id, selectedReport.id);\n          setUserVote(vote ? vote.value : 0);\n        }\n      } catch (error) {\n        console.error(\"Error fetching user vote:\", error);\n      }\n    };\n\n    fetchUserVote();\n  }, [session?.user?.id, selectedReport?.id]);\n\n  if (!selectedReport) return null;\n\n  const parsedDescription = selectedReport.description\n    ? JSON.parse(selectedReport.description)\n    : {};\n\n  const reportType = reportTypes.find(\n    (type) => type.id === selectedReport.reportTypeId\n  );\n\n  const reportTypeName = reportType ? reportType.name : \"Unknown Type\";\n\n  const getStatus = () => {\n    if (selectedReport.disconfirmationCount >= 5)\n      return { label: \"Not There\", color: \"bg-red-500\" };\n    if (selectedReport.confirmationCount >= 5)\n      return { label: \"Confirmed\", color: \"bg-green-500\" };\n    return { label: \"Unconfirmed\", color: \"bg-yellow-500\" };\n  };\n\n  const { label, color } = getStatus();\n\n  const handleVote = async (voteType) => {\n    // Prevent voting if visitors are not allowed\n    if (!session?.user.id && !globalSettings?.votesOpenToVisitors) {\n      toast.error(\"You must be logged in to vote\");\n      return;\n    }\n\n    try {\n      const votePayload = {\n        reportId: selectedReport.id,\n        userId: session.user.id || null,\n        voteType,\n      };\n\n      await voteOnReport(votePayload);\n\n      setUserVote(voteType);\n      toast.success(\"Vote submitted!\");\n      setSelectedReport(null);\n    } catch (error) {\n      console.error(\"Error submitting vote:\", error);\n      toast.error(\"Failed to submit vote\");\n    }\n  };\n\n  return (\n    <Popup\n      longitude={selectedReport?.long}\n      latitude={selectedReport?.lat}\n      closeButton={false}\n      closeOnClick={false}\n      onClose={() => setSelectedReport(null)}\n      anchor=\"top\"\n      className=\"flex justify-center\"\n    >\n      <div className=\"flex items-center justify-center w-full\">\n        <Card className=\"w-64 bg-white relative shadow-none border-none\">\n          <Button\n            className=\"absolute border-none shadow-none -top-2 -right-2 text-gray-500 hover:cursor-pointer focus:outline-none\"\n            variant={\"ghost\"}\n            onClick={() => setSelectedReport(null)}\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n\n          <CardHeader>\n            <CardTitle className=\"text-lg flex items-center justify-between\">\n              <span>{reportTypeName || \"Report\"}</span>\n              <Badge className={`mr-3 ${color}`}>{label}</Badge>\n            </CardTitle>\n          </CardHeader>\n          <Separator />\n\n          <CardContent className=\"p-3\">\n            <ScrollArea className=\"max-h-48\">\n              <p className=\"text-sm text-gray-600\">\n                <strong>Submitted: </strong>{\" \"}\n                {new Date(selectedReport.createdAt).toLocaleString([], {\n                  hour: \"2-digit\",\n                  minute: \"2-digit\",\n                  month: \"short\",\n                  day: \"numeric\",\n                })}\n              </p>\n              {selectedReport.updatedAt !== selectedReport.createdAt && (\n                <p className=\"text-sm text-gray-600\">\n                  <strong>Updated: </strong>{\" \"}\n                  {new Date(selectedReport.updatedAt).toLocaleString([], {\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                    month: \"short\",\n                    day: \"numeric\",\n                  })}\n                </p>\n              )}\n              {selectedReport.lastSighting && (\n                <p className=\"text-sm text-gray-600\">\n                  <strong>Last Sighting: </strong>{\" \"}\n                  {new Date(selectedReport.lastSighting).toLocaleString([], {\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                    month: \"short\",\n                    day: \"numeric\",\n                  })}\n                </p>\n              )}\n\n              {Object.keys(parsedDescription).length > 0 && (\n                <>\n                  <Separator className=\"my-2\" />\n                  <div className=\"text-sm space-y-1\">\n                    {Object.entries(parsedDescription)\n                      .filter(([_, value]) => value && value.trim() !== \"\")\n                      .map(([field, value]) => (\n                        <p key={field}>\n                          <strong className=\"capitalize\">{field}: </strong>\n                          {value}\n                        </p>\n                      ))}\n                  </div>\n                </>\n              )}\n\n              {session?.user.id &&\n                (session?.user.id !== selectedReport.submittedById ||\n                  !selectedReport.submittedById) && (\n                  <div className=\"flex justify-between mt-3\">\n                    <Button\n                      size=\"sm\"\n                      className={`${\n                        userVote === 1\n                          ? \"bg-green-500 text-white\"\n                          : \"bg-green-300 text-black\"\n                      }`}\n                      onClick={() => handleVote(1)}\n                      disabled={userVote === 1} // Disable if already confirmed\n                    >\n                      <Check className=\"mr-1 h-4 w-4\" /> I See It\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      className={`${\n                        userVote === -1\n                          ? \"bg-red-500 text-white\"\n                          : \"bg-red-300 text-black\"\n                      }`}\n                      onClick={() => handleVote(-1)}\n                      disabled={userVote === -1} // Disable if already disconfirmed\n                    >\n                      <X className=\"mr-1 h-4 w-4\" /> I Don&apos;t See It\n                    </Button>\n                  </div>\n                )}\n\n              {(session?.user.id === selectedReport.submittedById ||\n                session?.user.role === \"admin\" ||\n                session?.user.role === \"moderator\") && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"w-full mt-3 flex items-center justify-center\"\n                  onClick={() => {\n                    setEditing(true);\n                  }}\n                >\n                  Edit Report\n                </Button>\n              )}\n\n              {(session?.user.id === selectedReport.submittedById ||\n                session?.user.role === \"admin\" ||\n                session?.user.role === \"moderator\") && (\n                <Button\n                  variant=\"destructive\"\n                  size=\"sm\"\n                  className=\"w-full mt-3 flex items-center justify-center bg-red-500 text-white hover:bg-red-600 hover:cursor-pointer\"\n                  onClick={() => handleDelete(selectedReport.id)}\n                >\n                  <Trash className=\"mr-2 h-4 w-4\" />\n                  Delete Report\n                </Button>\n              )}\n            </ScrollArea>\n          </CardContent>\n        </Card>\n      </div>\n    </Popup>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1851, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1857, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/AddMarkerButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function AddMarkerButton({ isAdding, toggleMarker }) {\n  return (\n    <button\n      onClick={toggleMarker}\n      className={`absolute top-9 right-10 z-10 bg-blue-500 text-white text-4xl rounded-full w-12 h-12 flex justify-center shadow-lg hover:bg-blue-700 transition-transform duration-300 ease-in-out ${\n        isAdding ? \"rotate-45\" : \"\"\n      }`}\n    >\n      +\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,YAAY,EAAE;IAChE,qBACE,8OAAC;QACC,SAAS;QACT,WAAW,CAAC,kLAAkL,EAC5L,WAAW,cAAc,IACzB;kBACH;;;;;;AAIL"}},
    {"offset": {"line": 1874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1880, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportSubmissionMarker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Marker, Popup } from \"react-map-gl/maplibre\";\nimport PopupForm from \"./PopupForm\"; // Import the form for submitting\nimport { PositionAnchor } from \"maplibre-gl\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport Image from \"next/image\";\n\nexport default function ReportSubmissionMarker({\n  mapCenter,\n  isAdding,\n  setIsAdding,\n}) {\n  const [markerPosition, setMarkerPosition] = useState({\n    longitude: mapCenter.longitude,\n    latitude: mapCenter.latitude,\n  });\n  const [popupAnchor, setPopupAnchor] = useState<PositionAnchor>(\"bottom\");\n  const [popupOffset, setPopupOffset] = useState(60);\n\n  const markerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    setMarkerPosition({\n      longitude: mapCenter.longitude,\n      latitude: mapCenter.latitude,\n    });\n  }, [mapCenter]);\n\n  useEffect(() => {\n    updatePopupAnchor();\n  }, [markerPosition]);\n\n  const updatePopupAnchor = () => {\n    if (!markerRef.current) {\n      console.warn(\"⚠️ Marker ref is null!\");\n      return;\n    }\n\n    const markerRect = markerRef.current.getBoundingClientRect();\n    const screenHeight = window.innerHeight;\n\n    if (markerRect.top > (screenHeight / 5) * 2) {\n      setPopupAnchor(\"bottom\");\n      setPopupOffset(60);\n    } else {\n      setPopupAnchor(\"top\");\n      setPopupOffset(20);\n    }\n  };\n\n  const handleSubmissionSuccess = () => {\n    setIsAdding(false);\n  };\n\n  return (\n    <>\n      <Marker\n        longitude={markerPosition.longitude}\n        latitude={markerPosition.latitude}\n        draggable\n        anchor=\"bottom\"\n        style={{ zIndex: \"10\" }}\n        onDragEnd={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n          updatePopupAnchor();\n        }}\n        onDrag={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n        }}\n      >\n        <AnimatePresence>\n          {isAdding && (\n            <motion.div\n              key={\"adding-image\"}\n              initial={{ opacity: 0, y: -50 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.15 }}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <Image\n                src=\"/marker.png\"\n                width={45}\n                height={45}\n                alt=\"Marker\"\n                ref={markerRef}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </Marker>\n      {isAdding && (\n        <motion.div\n          key={\"adding-popup\"}\n          layoutId=\"popupForm\"\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.15 }}\n          exit={{ opacity: 0, y: -50 }}\n        >\n          <Popup\n            longitude={markerPosition.longitude}\n            latitude={markerPosition.latitude}\n            closeButton\n            closeOnClick={false}\n            onClose={() => setIsAdding(false)}\n            anchor={popupAnchor}\n            offset={popupOffset}\n          >\n            <PopupForm\n              latitude={markerPosition.latitude}\n              longitude={markerPosition.longitude}\n              onClose={handleSubmissionSuccess}\n            />\n          </Popup>\n        </motion.div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2053, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2059, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/slider.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n        ? defaultValue\n        : [min, max],\n    [value, defaultValue, min, max]\n  );\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-gray-400 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\"\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/20 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  );\n}\n\nexport { Slider };\n"],"names":[],"mappings":";;;;AAEA;AAGA;AAFA;AAHA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;IAClD,MAAM,UAAU,sMAAM,OAAO,CAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACd,eACA;YAAC;YAAK;SAAI,EAChB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,8OAAC,mKAAgB,IAAI;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,uOACA;QAED,GAAG,KAAK;;0BAET,8OAAC,mKAAgB,KAAK;gBACpB,aAAU;gBACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV;0BAGF,cAAA,8OAAC,mKAAgB,KAAK;oBACpB,aAAU;oBACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,8OAAC,mKAAgB,KAAK;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf"}},
    {"offset": {"line": 2124, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2130, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/settings/TimeRangeSlider.tsx"],"sourcesContent":["\"use client\";\n\nimport { useData } from \"../../layout/DataProvider\";\nimport { Slider } from \"@/components/ui/slider\";\n\nexport default function TimeRangeSlider() {\n  const { timeRange, setTimeRange } = useData();\n\n  return (\n    <div className=\"p-3\">\n      <label className=\"block font-semibold pb-1\">Time Range</label>\n      <Slider\n        min={1}\n        max={24}\n        step={1}\n        value={[timeRange]}\n        onValueChange={(value) => setTimeRange(value[0])}\n      />\n      <p className=\"text-sm text-gray-600 mt-2\">\n        Showing repotrs from the last <strong>{[timeRange]}</strong> hours\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IAE1C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;0BAA2B;;;;;;0BAC5C,8OAAC,2HAAA,CAAA,SAAM;gBACL,KAAK;gBACL,KAAK;gBACL,MAAM;gBACN,OAAO;oBAAC;iBAAU;gBAClB,eAAe,CAAC,QAAU,aAAa,KAAK,CAAC,EAAE;;;;;;0BAEjD,8OAAC;gBAAE,WAAU;;oBAA6B;kCACV,8OAAC;kCAAQ;4BAAC;yBAAU;;;;;;oBAAU;;;;;;;;;;;;;AAIpE"}},
    {"offset": {"line": 2193, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2199, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/settings/SettingsContainer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { Button } from \"@/components/ui/button\";\nimport { MixerHorizontalIcon } from \"@radix-ui/react-icons\";\nimport TimeRangeSlider from \"./TimeRangeSlider\";\n\nexport default function SettingsContainer() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div className=\"fixed top-18 left-6 z-10\">\n      <div className=\"relative\">\n        <Button\n          className={`absolute top-7 left-3 bg-white ${\n            isOpen ? \"shadow-none\" : \"shadow\"\n          } rounded-full w-12 h-12 flex items-center justify-center hover:bg-gray-100 text-black`}\n          onClick={() => setIsOpen(!isOpen)}\n        >\n          <MixerHorizontalIcon className=\"h-6 w-6\" />\n        </Button>\n      </div>\n\n      <motion.div\n        initial={{\n          width: 50,\n          height: 50,\n          borderRadius: \"50%\",\n          backgroundColor: \"rgba(255, 255, 255, 0)\",\n          border: \"1px solid rgba(0, 0, 0, 0)\",\n        }}\n        animate={\n          isOpen\n            ? {\n                width: 320,\n                height: 300,\n                borderRadius: \"30px\",\n                padding: 16,\n                backgroundColor: \"rgba(255, 255, 255, 1)\",\n                border: \"1px solid rgba(0, 0, 0, 0)\",\n              }\n            : {\n                width: 50,\n                height: 50,\n                borderRadius: \"50%\",\n                padding: 0,\n                backgroundColor: \"rgba(255, 255, 255, 0)\",\n                border: \"1px solid rgba(0, 0, 0, 0)\",\n              }\n        }\n        transition={{ duration: 0.3, ease: \"easeOut\", exit: { duration: 0.1 } }}\n        className=\" flex flex-col overflow-hidden\"\n      >\n        {/* ✅ Top Row: Mixer Icon + Settings Title */}\n        <div className=\"flex items-center justify-between px-2 pt-2\">\n          <div className=\"w-12 h-12\"></div>\n          <AnimatePresence>\n            {isOpen && (\n              <motion.h2\n                initial={{ opacity: 0, x: -10 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -10 }}\n                transition={{\n                  duration: 0.3,\n                  ease: \"easeOut\",\n                  exit: { duration: 0.001 },\n                }}\n                className=\"font-semibold text-lg\"\n              >\n                Settings\n              </motion.h2>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* ✅ Settings Content (Appears Below) */}\n        <AnimatePresence>\n          {isOpen && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              transition={{\n                duration: 0.4,\n                ease: \"easeOut\",\n                exit: { duration: 0.1 },\n              }}\n              className=\"flex flex-col gap-4 mt-2 mb-10\"\n            >\n              <div className=\"border border-black rounded-md shadow-md p-2\">\n                <TimeRangeSlider />\n              </div>\n              <p className=\"border border-black rounded-md text-sm text-gray-600 p-3 shadow-md\">\n                Settings content goes here: filter by type, keyword, etc.\n              </p>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAEA;AADA;AAFA;AAAA;AAHA;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,2HAAA,CAAA,SAAM;oBACL,WAAW,CAAC,+BAA+B,EACzC,SAAS,gBAAgB,SAC1B,qFAAqF,CAAC;oBACvF,SAAS,IAAM,UAAU,CAAC;8BAE1B,cAAA,8OAAC,gLAAA,CAAA,sBAAmB;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAInC,8OAAC,kNAAA,CAAA,SAAM,CAAC,GAAG;gBACT,SAAS;oBACP,OAAO;oBACP,QAAQ;oBACR,cAAc;oBACd,iBAAiB;oBACjB,QAAQ;gBACV;gBACA,SACE,SACI;oBACE,OAAO;oBACP,QAAQ;oBACR,cAAc;oBACd,SAAS;oBACT,iBAAiB;oBACjB,QAAQ;gBACV,IACA;oBACE,OAAO;oBACP,QAAQ;oBACR,cAAc;oBACd,SAAS;oBACT,iBAAiB;oBACjB,QAAQ;gBACV;gBAEN,YAAY;oBAAE,UAAU;oBAAK,MAAM;oBAAW,MAAM;wBAAE,UAAU;oBAAI;gBAAE;gBACtE,WAAU;;kCAGV,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC,iNAAA,CAAA,kBAAe;0CACb,wBACC,8OAAC,kNAAA,CAAA,SAAM,CAAC,EAAE;oCACR,SAAS;wCAAE,SAAS;wCAAG,GAAG,CAAC;oCAAG;oCAC9B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,MAAM;wCAAE,SAAS;wCAAG,GAAG,CAAC;oCAAG;oCAC3B,YAAY;wCACV,UAAU;wCACV,MAAM;wCACN,MAAM;4CAAE,UAAU;wCAAM;oCAC1B;oCACA,WAAU;8CACX;;;;;;;;;;;;;;;;;kCAQP,8OAAC,iNAAA,CAAA,kBAAe;kCACb,wBACC,8OAAC,kNAAA,CAAA,SAAM,CAAC,GAAG;4BACT,SAAS;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC9B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC3B,YAAY;gCACV,UAAU;gCACV,MAAM;gCACN,MAAM;oCAAE,UAAU;gCAAI;4BACxB;4BACA,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wJAAA,CAAA,UAAe;;;;;;;;;;8CAElB,8OAAC;oCAAE,WAAU;8CAAqE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShG"}},
    {"offset": {"line": 2391, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2397, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Map, Popup } from \"react-map-gl/maplibre\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport { io } from \"socket.io-client\";\nimport { useData } from \"./components/layout/DataProvider\";\nimport { useSession } from \"./lib/auth-client\";\nimport type { Session } from \"./lib/auth-client\";\nimport { deleteReport } from \"@/actions/deleteReport\";\nimport PopupForm from \"./components/map/PopupForm\";\nimport ReportMarkers from \"./components/map/ReportMarkers\";\nimport ReportPopup from \"./components/map/ReportPopup\";\nimport AddMarkerButton from \"./components/map/AddMarkerButton\";\nimport ReportSubmissionMarker from \"./components/map/ReportSubmissionMarker\";\nimport SettingsContainer from \"./components/map/settings/SettingsContainer\";\n\nconst socket = io(\"http://localhost:3005\", {\n  reconnection: true,\n  reconnectionAttempts: 10,\n  reconnectionDelay: 2000,\n});\n\nconst Page = () => {\n  const { data: session } = useSession();\n  const userId = session?.user?.id || \"\";\n  const { reports, setReports, globalSettings } = useData();\n\n  const mapCenter = {\n    longitude: globalSettings?.mapCenterLng,\n    latitude: globalSettings?.mapCenterLat,\n  };\n\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [editing, setEditing] = useState(false);\n\n  if (!globalSettings) {\n    return (\n      <div className=\"flex justify-center items-center h-screen\">\n        Loading map...\n      </div>\n    );\n  }\n\n  const maxBounds = [\n    globalSettings.mapBoundsSwLng,\n    globalSettings.mapBoundsSwLat,\n    globalSettings.mapBoundsNeLng,\n    globalSettings.mapBoundsNeLat,\n  ];\n\n  const handleDelete = async (reportId: string) => {\n    if (!userId) {\n      console.error(\"❌ No user ID found, cannot delete report\");\n      return;\n    }\n\n    const response = await deleteReport(reportId, session);\n    if (!response) {\n      console.error(\"❌ Failed to delete report\");\n      return;\n    }\n\n    setReports((prevReports) =>\n      prevReports.filter((r) => r.id !== Number(reportId))\n    );\n    setSelectedReport(null);\n\n    socket.emit(\"report-deleted\", { reportId });\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-76px)] w-screen relative\">\n      <div className=\"absolute z-10 p-2\">\n        <SettingsContainer />\n      </div>\n      <Map\n        initialViewState={{\n          latitude: globalSettings?.mapCenterLat,\n          longitude: globalSettings?.mapCenterLng,\n          zoom: globalSettings?.mapZoom,\n        }}\n        minZoom={globalSettings?.mapMinZoom || 10}\n        maxZoom={globalSettings?.mapMaxZoom || 18}\n        maxBounds={maxBounds}\n        style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}\n        //mapStyle={\"http://159.65.164.132:8080/data/v3.json\"}\n        mapStyle={`https://api.maptiler.com/maps/streets/style.json?key=${process.env.NEXT_PUBLIC_MAPTILER_KEY}`}\n      >\n        <ReportMarkers setSelectedReport={setSelectedReport} userId={userId} />\n        {editing ? (\n          <Popup\n            latitude={selectedReport?.lat}\n            longitude={selectedReport?.long}\n            offset={10}\n            onClose={() => setEditing(false)}\n          >\n            <PopupForm\n              latitude={selectedReport?.lat}\n              longitude={selectedReport?.long}\n              existingReport={selectedReport}\n              setSelectedReport={setSelectedReport}\n              setEditing={setEditing}\n              onClose={() => setEditing(false)}\n            />\n          </Popup>\n        ) : (\n          <ReportPopup\n            selectedReport={selectedReport}\n            setSelectedReport={setSelectedReport}\n            setEditing={setEditing}\n            session={session}\n            handleDelete={handleDelete}\n          />\n        )}\n        {(session || globalSettings.submitReportsOpen) && (\n          <AddMarkerButton\n            isAdding={isAdding}\n            toggleMarker={() => setIsAdding(!isAdding)}\n          ></AddMarkerButton>\n        )}\n        {(session || globalSettings.submitReportsOpen) && (\n          <ReportSubmissionMarker\n            mapCenter={mapCenter}\n            isAdding={isAdding}\n            setIsAdding={setIsAdding}\n          ></ReportSubmissionMarker>\n        )}\n      </Map>\n    </div>\n  );\n};\n\nexport default Page;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2582, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/deleteReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\nexport async function deleteReport(reportId: string, userId: string) {\n  const report = await db.report.findUnique({\n    where: { id: reportId },\n  });\n\n  if (!report) return { error: \"Report not found\" };\n  if (report.submittedById !== userId) return { error: \"Unauthorized\" };\n\n  // ✅ Delete the report\n  await db.report.delete({\n    where: { id: reportId },\n  });\n\n  return { success: true };\n}\n"],"names":[],"mappings":";;;;;IAIsB"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/officer.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABA0lEQVR42j2KvUsCcRzGfzeEDsKZnme1NFVD9rLVUlBQ/4C7c5yD/DBqEhJbtOjoEq0uTZcTRTnv0OkQ8ZxOfAFfFv8Bd8VN+Ho/QR/4wMPzeRAyY9myWvb3jk583qeEz/ucIN3crGid04PLG/+jNPoSygsC6Z7Di9vNwW5zMsGAaEQ+mkDAgZ8WbXMwmwO77d6V08VBTesBoZgq9Bk7u7OSFKIoJ+1yC2GhMpuMYWrCh+Oqg3axxKEzz9V9EPNa/leaK0obZLULr0lj/oBF7fz4+g5xWNQj/0NQpQLwGQNIz2UViKY7wOE/HXH+73YopkPyU4ZUvAShWAPe3qvwEq0DcUvPOXKW4ORclwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/car.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABBUlEQVR42k2PuWoCYRSF/4AokyBxGTJDJMRXMIVVSBA7g0GTGLMVkyqmyQukSBcQBAcccMOxcEPRURQ3FMRO0EFt1EJ8A20UK+HqLwp+8HEv51QHoR0ygiAUKhWplsvJY4mEQIco1eT5y9cP+88FRe73T/y+u2dxti1PFUqN9Y1x+qutVbjZh3CzB7FGe/X4zjhxh24Mxk9PKDLIdoYgdEYgiCPIbeT4yODWYGTQk073Oo5GF2khD25vCFgfD4ViBSbx+Nyu1z8ju8nkaJfKy0QyM+MC/BSbSGVm3Vp9+WGxOBBF0Vqz1ebSXFxek2f0FRb/5gebi6JpLTraIJXKTvDdrzrM1pXKXXi29T9TAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,0GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/roadblock.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxElEQVR42k2PTwqCYBDFv++zSKJVglButBDCIIzcuAgzjP6RbcroAOIJatFKb+PaE3SAbuBCJOgc+USsBw9+82ZgZggpRCmhrDCpBKZ/NTlM2cK3OY9Vg2BkZVNuc3LiCvErUJ6RLoaRIYXgZNuJZZ7KxOw2zfQ8zt+P6ycLllnmWxk4vUxyU2iZhGeE99ZONNfUk9LmhjDY26wi9Mo19v54Nyzn1h+oLgxGVh+p6bOd2JNGlLEGDEZWDxQ/MYrHfjXEwF+c1CxBbgbuvwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,gHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAA8W,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/raid.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAEAHicrHi4+RjwrOT8xFx4hFAAAAQAAAAAAAAAAAAACAwMBXIaagoTN7u6T0e3nZYaWgQIDAwIAAAAAAAAAAAACAwQBb5Okhqjh+/+s4vz/bpOklAIDAwIAAAAAABcfIhonNDo4e6GzoZTU8OiM0fDpcZ6ymiUwNSIMDxALAFh9jX2Hzezvrt/194KnuKR+rcKpidL07obJ6N5MbHpwAF6AkH+f3vv+od/7/2+dspiKtMexrOP8/6Hf+/5Zfo+KAFlyfnaUxdzbeLzb2lyFl4RtkqKKkMTc1JbG3NVTbXlpAA8TFRAZISQiGCAkIREWGBISFhgRGSAkHBkgJB0MEBENb3BpM2Q9BXAAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,2GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/caution.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA1UlEQVR42m3KPwsBYQAG8Pecw6UO50+OdNKhDMogg/+jRDFQLIz4BnwFE9ubUdksNm53C7kM6oYz33h1jI73Fqc89aunngcAU8J+0oeAf3GSuB1Os3M4y82dpNX+M2IfjQJTlncdRd51FdQx8yFA26j9srgV1p0Xsl/ktwGacBkjbsGwSTvSU/m6Jm6aOqIeatqkFeqjDaRYkj2vMsKTr+q3Tcnw4Cv6CaaFFOuIgnHTMxBhQrqukvfjkjOgfoFxadRwD4GXwukYQ3CxoPWLQQjOS1noN0q9SJ/GhODCAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkY,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/smoke.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 80, height: 80, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAAACgsMDBgaHB8JCgsKAAAAAAAAAAAAAAAAAAAAAAASExQVho+Vn7O+xtmDi5GaGx0fIAICAgIAAAAAAAcICQhgZ2xyyNbf+LrM2P/H1d/7rrjAzjM3OjwAAAAAADg8P0PCz9frvs7a/7/BzP+4ydb/x9bh/6GqsbwYGxwdAG10eoDH1uD8v8HN/9qprv/Kt8D/vMjU/8vY4fhZXmNqALnFzd++ztr/x7rD//Gbl//qnp7/xbzG/8HR3f+zvsbWAImTmaeapq/RpZCW0cKVf9G/jYDRn5Wd0Zelr9GNlp2sAAsMDQ4PERIXDw8RFxEPDhcRDw8XDhARFw8REhcLDA0PWIh2COGodmEAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,4GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/marker.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvklEQVR42k2Ovw7BUBjFf6goEsztJv4MbCqG4kE8hcTCYOEBWCUmiwfhBXSgQ41iExMdJPV9TSpOcpJzz+/k3gsiO0dlXWV27eKJT5Kn2ikjnya7qTEPXZ5+h4PvcNC8qTMXZlA1sQMHT2E7j9UuYsnoGMhNynRg6UFLhb+BEw+s+Ildk9Wnz1uBWnK4b7AqCIv/4ZZo3XqcowGR+t7jMpSOREaK9Nhm9HJ5qCeSs9Lxr3IGc1tnIV6WDcyk/wJYZD8DPsfKIQAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,6GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsW,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportMarkers.tsx"],"sourcesContent":["\"use client\";\nimport { Marker } from \"react-map-gl/maplibre\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport Image from \"next/image\";\nimport { useState } from \"react\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\n\nimport officer from \"@/public/officer.png\";\nimport car from \"@/public/car.png\";\nimport roadblock from \"@/public/roadblock.png\";\nimport ice from \"@//public/raid.png\";\nimport caution from \"@/public/caution.png\";\nimport smoke from \"@/public/smoke.png\";\nimport marker from \"@/public/marker.png\";\n\nconst reportTypeIcons = {\n  1: officer,\n  2: car,\n  3: roadblock,\n  4: ice,\n  5: caution,\n  6: smoke,\n};\n\nconst getMarkerColor = (trustScore: number) => {\n  if (trustScore >= 4)\n    return \"bg-green-300 shadow-green-400 before:border-t-green-300\";\n  if (trustScore >= 2)\n    return \"bg-yellow-300 shadow-yellow-400 before:border-t-yellow-300\";\n  return \"bg-red-300 shadow-red-400 before:border-t-red-300\";\n};\n\nconst getMarkerOpacity = (createdAt: string) => {\n  const reportDate = new Date(createdAt);\n  const now = new Date();\n  const hoursElapsed =\n    (now.getTime() - reportDate.getTime()) / (1000 * 60 * 60);\n  return hoursElapsed < 1 ? \"1\" : \"0.8\";\n};\n\nexport default function ReportMarkers({ setSelectedReport, userId }) {\n  const { reports, setReports } = useData();\n  const [newReportId, setNewReportId] = useState<string | null>(null);\n\n  return (\n    <AnimatePresence>\n      {reports.map((report) => {\n        if (report.isRemoving) return null;\n\n        const iconSrc = reportTypeIcons[report.reportTypeId] || marker;\n        const markerColor = getMarkerColor(report.trustScore);\n        const isNew = report.id === newReportId;\n\n        return (\n          <Marker\n            key={report.id}\n            longitude={report.long}\n            latitude={report.lat}\n            anchor=\"bottom\"\n            data-marker-id={report.id}\n            onClick={() => setSelectedReport(report)}\n          >\n            <motion.div\n              layout=\"position\"\n              variants={\n                isNew\n                  ? undefined\n                  : {\n                      hidden: { opacity: 0, y: -50 },\n                      show: { opacity: 1, y: 0 },\n                    }\n              }\n              initial={isNew ? { opacity: 0, y: -50 } : undefined}\n              animate={isNew ? { opacity: 1, y: 0 } : undefined}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <div\n                className={`relative flex items-center justify-center h-12 w-12 rounded-full opacity-95 shadow-md ${markerColor} p-1 before:content-[''] before:absolute before:bottom-[-28px] before:left-1/2 before:-translate-x-1/2 before:border-[15px] before:border-transparent -translate-y-4`}\n              >\n                <Image\n                  src={iconSrc}\n                  alt=\"Report Marker\"\n                  width={40}\n                  height={40}\n                />\n              </div>\n            </motion.div>\n          </Marker>\n        );\n      })}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AADA;AACA;AAFA;;;;;;;;;;;;;;AAeA,MAAM,kBAAkB;IACtB,GAAG,sQAAA,CAAA,UAAO;IACV,GAAG,8PAAA,CAAA,UAAG;IACN,GAAG,0QAAA,CAAA,UAAS;IACZ,GAAG,gQAAA,CAAA,UAAG;IACN,GAAG,sQAAA,CAAA,UAAO;IACV,GAAG,kQAAA,CAAA,UAAK;AACV;AAEA,MAAM,iBAAiB,CAAC;IACtB,IAAI,cAAc,GAChB,OAAO;IACT,IAAI,cAAc,GAChB,OAAO;IACT,OAAO;AACT;AAEA,MAAM,mBAAmB,CAAC;IACxB,MAAM,aAAa,IAAI,KAAK;IAC5B,MAAM,MAAM,IAAI;IAChB,MAAM,eACJ,CAAC,IAAI,OAAO,KAAK,WAAW,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,EAAE;IAC1D,OAAO,eAAe,IAAI,MAAM;AAClC;AAEe,SAAS,cAAc,EAAE,iBAAiB,EAAE,MAAM,EAAE;IACjE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IACtC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE9D,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACb,QAAQ,GAAG,CAAC,CAAC;YACZ,IAAI,OAAO,UAAU,EAAE,OAAO;YAE9B,MAAM,UAAU,eAAe,CAAC,OAAO,YAAY,CAAC,IAAI,oQAAA,CAAA,UAAM;YAC9D,MAAM,cAAc,eAAe,OAAO,UAAU;YACpD,MAAM,QAAQ,OAAO,EAAE,KAAK;YAE5B,qBACE,8OAAC,gLAAA,CAAA,SAAM;gBAEL,WAAW,OAAO,IAAI;gBACtB,UAAU,OAAO,GAAG;gBACpB,QAAO;gBACP,kBAAgB,OAAO,EAAE;gBACzB,SAAS,IAAM,kBAAkB;0BAEjC,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;oBACT,QAAO;oBACP,UACE,QACI,YACA;wBACE,QAAQ;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC7B,MAAM;4BAAE,SAAS;4BAAG,GAAG;wBAAE;oBAC3B;oBAEN,SAAS,QAAQ;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG,IAAI;oBAC1C,SAAS,QAAQ;wBAAE,SAAS;wBAAG,GAAG;oBAAE,IAAI;oBACxC,MAAM;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;8BAE3B,cAAA,8OAAC;wBACC,WAAW,CAAC,sFAAsF,EAAE,YAAY,oKAAoK,CAAC;kCAErR,cAAA,8OAAC,6HAAA,CAAA,UAAK;4BACJ,KAAK;4BACL,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;;;;;;eA5BT,OAAO,EAAE;;;;;QAkCpB;;;;;;AAGN"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground rounded-xl border shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\"flex flex-col gap-1.5 p-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"p-6 pt-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center p-6 pt-0\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAKA;AAFA;AAHA;;;;AAOA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD;IACrD,qBACE,8OAAC,sKAAmB,IAAI;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,kKACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-semibold w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 focus-visible:ring-4 focus-visible:outline-1 aria-invalid:focus-visible:ring-0 transition-[color,box-shadow]\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-sm [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-sm [a&]:hover:bg-destructive/90\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAHA;;;;;AAKA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,kWACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAKA;AAFA;AAHA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,2KAAoB,IAAI;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;0BAET,8OAAC,2KAAoB,QAAQ;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,2KAAoB,MAAM;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8OAAC,2KAAoB,mBAAmB;QACtC,aAAU;QACV,aAAa;QACb,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2KAAoB,eAAe;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportPopup.tsx"],"sourcesContent":["\"use client\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\nimport { Popup } from \"react-map-gl/maplibre\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Check, X, Trash } from \"lucide-react\";\n\nexport default function ReportPopup({\n  selectedReport,\n  setSelectedReport,\n  session,\n  handleDelete,\n  popupPosition,\n}) {\n  if (!selectedReport || !popupPosition) return null;\n\n  const { reportTypes } = useData();\n\n  const parsedDescription = selectedReport.description\n    ? JSON.parse(selectedReport.description)\n    : {};\n\n  const reportType = reportTypes.find(\n    (type) => type.id === selectedReport.reportTypeId\n  );\n  const reportTypeName = reportType ? reportType.name : \"Unknown Type\";\n\n  return (\n    <div\n      className=\"absolute transform -translate-x-1/2 -translate-y-full z-50\"\n      style={{\n        left: popupPosition.x,\n        top: popupPosition.y - 10, // Adjust positioning\n      }}\n    >\n      <Card className=\"w-64 shadow-lg border bg-white relative\">\n        <Button\n          className=\"absolute border-none shadow-none top-0.5 right-0.5 text-gray-500 hover:text-gray-800 hover:cursor-pointer focus:outline-none\"\n          onClick={() => setSelectedReport(null)}\n        >\n          <X className=\"h-4 w-4 focus:outline-none\" />\n        </Button>\n\n        <CardHeader>\n          <CardTitle className=\"text-lg flex items-center justify-between\">\n            <span>{reportTypeName || \"Report\"}</span>\n            <Badge className=\"mr-3\">{selectedReport.trustScore} Trust</Badge>\n          </CardTitle>\n        </CardHeader>\n        <Separator />\n\n        <CardContent className=\"p-3\">\n          <ScrollArea className=\"max-h-48\">\n            <p className=\"text-sm text-gray-600\">\n              <strong>Submitted: </strong>{\" \"}\n              {new Date(selectedReport.createdAt).toLocaleString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n              })}\n            </p>\n\n            {Object.keys(parsedDescription).length > 0 && (\n              <>\n                <Separator className=\"my-2\" />\n                <div className=\"text-sm space-y-1\">\n                  {Object.entries(parsedDescription)\n                    .filter(([_, value]) => value && value.trim() !== \"\")\n                    .map(([field, value]) => (\n                      <p key={field}>\n                        <strong className=\"capitalize\">{field}: </strong>\n                        {value}\n                      </p>\n                    ))}\n                </div>\n              </>\n            )}\n\n            {session?.user.id === selectedReport.submittedById && (\n              <Button\n                variant=\"destructive\"\n                size=\"sm\"\n                className=\"w-full mt-3 flex items-center justify-center bg-red-500 text-white hover:bg-red-600 hover:cursor-pointer\"\n                onClick={() => handleDelete(selectedReport.id)}\n              >\n                <Trash className=\"mr-2 h-4 w-4\" />\n                Delete Report\n              </Button>\n            )}\n          </ScrollArea>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AARA;;;;;;;;;AAUe,SAAS,YAAY,EAClC,cAAc,EACd,iBAAiB,EACjB,OAAO,EACP,YAAY,EACZ,aAAa,EACd;IACC,IAAI,CAAC,kBAAkB,CAAC,eAAe,OAAO;IAE9C,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IAE9B,MAAM,oBAAoB,eAAe,WAAW,GAChD,KAAK,KAAK,CAAC,eAAe,WAAW,IACrC,CAAC;IAEL,MAAM,aAAa,YAAY,IAAI,CACjC,CAAC,OAAS,KAAK,EAAE,KAAK,eAAe,YAAY;IAEnD,MAAM,iBAAiB,aAAa,WAAW,IAAI,GAAG;IAEtD,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YACL,MAAM,cAAc,CAAC;YACrB,KAAK,cAAc,CAAC,GAAG;QACzB;kBAEA,cAAA,8OAAC,yHAAA,CAAA,OAAI;YAAC,WAAU;;8BACd,8OAAC,2HAAA,CAAA,SAAM;oBACL,WAAU;oBACV,SAAS,IAAM,kBAAkB;8BAEjC,cAAA,8OAAC,4LAAA,CAAA,IAAC;wBAAC,WAAU;;;;;;;;;;;8BAGf,8OAAC,yHAAA,CAAA,aAAU;8BACT,cAAA,8OAAC,yHAAA,CAAA,YAAS;wBAAC,WAAU;;0CACnB,8OAAC;0CAAM,kBAAkB;;;;;;0CACzB,8OAAC,0HAAA,CAAA,QAAK;gCAAC,WAAU;;oCAAQ,eAAe,UAAU;oCAAC;;;;;;;;;;;;;;;;;;8BAGvD,8OAAC,8HAAA,CAAA,YAAS;;;;;8BAEV,8OAAC,yHAAA,CAAA,cAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC,mIAAA,CAAA,aAAU;wBAAC,WAAU;;0CACpB,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAqB;oCAC5B,IAAI,KAAK,eAAe,SAAS,EAAE,cAAc,CAAC,EAAE,EAAE;wCACrD,MAAM;wCACN,QAAQ;oCACV;;;;;;;4BAGD,OAAO,IAAI,CAAC,mBAAmB,MAAM,GAAG,mBACvC;;kDACE,8OAAC,8HAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;kDACrB,8OAAC;wCAAI,WAAU;kDACZ,OAAO,OAAO,CAAC,mBACb,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,SAAS,MAAM,IAAI,OAAO,IACjD,GAAG,CAAC,CAAC,CAAC,OAAO,MAAM,iBAClB,8OAAC;;kEACC,8OAAC;wDAAO,WAAU;;4DAAc;4DAAM;;;;;;;oDACrC;;+CAFK;;;;;;;;;;;;4BASjB,SAAS,KAAK,OAAO,eAAe,aAAa,kBAChD,8OAAC,2HAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,eAAe,EAAE;;kDAE7C,8OAAC,oMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlD"}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 750, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/AddMarkerButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function AddMarkerButton({ isAdding, toggleMarker }) {\n  return (\n    <button\n      onClick={toggleMarker}\n      className={`absolute top-8 right-6 z-10 bg-blue-500 text-white text-4xl rounded-full w-12 h-12 flex justify-center shadow-lg hover:bg-blue-700 transition-transform duration-300 ease-in-out ${\n        isAdding ? \"rotate-45\" : \"\"\n      }`}\n    >\n      +\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,YAAY,EAAE;IAChE,qBACE,8OAAC;QACC,SAAS;QACT,WAAW,CAAC,iLAAiL,EAC3L,WAAW,cAAc,IACzB;kBACH;;;;;;AAIL"}},
    {"offset": {"line": 767, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/postReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\ninterface ReportPayload {\n  latitude: number;\n  longitude: number;\n  reportTypeId: number;\n  trustScore: number;\n  userId: string;\n  description: Record<string, string> | null; // ✅ Ensuring it's an object\n}\n\nexport async function postReport(payload: ReportPayload) {\n  try {\n    const {\n      latitude,\n      longitude,\n      reportTypeId,\n      trustScore,\n      userId,\n      description,\n    } = payload;\n\n    const image = null;\n\n    const report = await db.report.create({\n      data: {\n        lat: latitude,\n        long: longitude,\n        description: JSON.stringify(description) ?? null,\n        image: image ?? null,\n        trustScore,\n        submittedById: userId,\n        reportTypeId,\n      },\n    });\n\n    console.log(\"Report posted:\", report);\n\n    // Emit new report event via WebSocket\n    await fetch(\"http://localhost:3005/api/new-report\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(report),\n    });\n\n    return report;\n  } catch (error) {\n    console.error(error);\n    return { error: \"Failed to post report\" };\n  }\n}\n"],"names":[],"mappings":";;;;;IAasB"}},
    {"offset": {"line": 779, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger>) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground aria-invalid:border-destructive ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:focus-visible:ring-0 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&>span]:line-clamp-1\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1003, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1009, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n  useFormState,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState } = useFormContext()\n  const formState = useFormState({ name: fieldContext.name })\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  )\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message) : props.children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm font-medium\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1161, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/PopupForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { z } from \"zod\";\n\nimport { postReport } from \"@/actions/postReport\";\nimport { useSession } from \"@/app/lib/auth-client\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\n\nimport { toast } from \"sonner\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\n\ninterface PopupFormProps {\n  latitude: number;\n  longitude: number;\n  onClose: () => void;\n}\n\nconst baseSchema = z.object({\n  reportTypeId: z.string().min(1, \"Please select a report type\"),\n  description: z.string().optional(),\n});\n\nconst PopupForm = ({ latitude, longitude, onClose }: PopupFormProps) => {\n  const { reportTypes } = useData();\n  const { data: session } = useSession();\n\n  const userId = session?.user?.id || \"\";\n  const trustScore = session?.user?.trust || 1;\n\n  const [selectedReportType, setSelectedReportType] = useState<string | null>(\n    reportTypes.length > 0 ? String(reportTypes[0].id) : null\n  );\n  const [loading, setLoading] = useState(false);\n\n  const selectedReport = reportTypes.find(\n    (type) => String(type.id) === selectedReportType\n  );\n\n  const dynamicSchema = baseSchema.extend(\n    selectedReport?.fields?.reduce(\n      (schema, field) => ({\n        ...schema,\n        [field]: z.string().optional(),\n      }),\n      {}\n    ) ?? {}\n  );\n\n  const form = useForm({\n    resolver: zodResolver(dynamicSchema),\n    defaultValues: {\n      reportTypeId: selectedReportType || \"\",\n      description: \"\",\n      ...(selectedReport?.fields?.reduce(\n        (acc, field) => ({\n          ...acc,\n          [field]: \"\",\n        }),\n        {}\n      ) ?? {}),\n    },\n  });\n\n  const handleSubmit = async (values: any) => {\n    setLoading(true);\n\n    try {\n      const formDataObject = selectedReport?.fields?.reduce((acc, field) => {\n        acc[field] = values[field] || \"\";\n        return acc;\n      }, {});\n\n      const payload = {\n        latitude,\n        longitude,\n        reportTypeId: Number(values.reportTypeId),\n        trustScore,\n        userId,\n        description: formDataObject,\n      };\n\n      const response = await postReport(payload);\n\n      if (!response) {\n        throw new Error(\"Failed to submit report\");\n      }\n\n      toast.success(\"Report submitted successfully!\");\n      form.reset();\n      onClose();\n    } catch (error) {\n      toast.error(\"Failed to submit report. Please try again.\");\n      console.error(\"Failed to submit report:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form\n        onSubmit={form.handleSubmit(handleSubmit)}\n        className=\"space-y-4 p-4 \"\n      >\n        {/* Report Type Selection */}\n        <FormField\n          control={form.control}\n          name=\"reportTypeId\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Report Type</FormLabel>\n              <Select\n                onValueChange={(value) => {\n                  setSelectedReportType(value);\n                  field.onChange(value);\n                }}\n                value={field.value}\n              >\n                <FormControl>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a report type\" />\n                  </SelectTrigger>\n                </FormControl>\n                <SelectContent className=\"bg-white\">\n                  {reportTypes.map((type) => (\n                    <SelectItem\n                      className=\"hover:bg-gray-100\"\n                      key={type.id}\n                      value={String(type.id)}\n                    >\n                      {type.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Dynamic Fields Based on Report Type */}\n        {selectedReport?.fields?.map((field) => (\n          <FormField\n            key={field}\n            control={form.control}\n            name={field}\n            render={({ field: formField }) => (\n              <FormItem>\n                <FormLabel>{field}</FormLabel>\n                <FormControl>\n                  <Input {...formField} placeholder={`Enter ${field}...`} />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        ))}\n\n        {/* Submit & Cancel Buttons */}\n        <div className=\"flex justify-between mt-4\">\n          <Button type=\"submit\" disabled={loading} className=\"w-1/2\">\n            {loading ? (\n              <span className=\"flex items-center\">Submitting...</span>\n            ) : (\n              \"Submit Report\"\n            )}\n          </Button>\n          <Button\n            type=\"button\"\n            onClick={onClose}\n            disabled={loading}\n            variant=\"outline\"\n            className=\"w-1/2 ml-2\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n};\n\nexport default PopupForm;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1422, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1428, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportSubmissionMarker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Marker, Popup } from \"react-map-gl/maplibre\";\nimport PopupForm from \"./PopupForm\"; // Import the form for submitting\nimport { PositionAnchor } from \"maplibre-gl\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport Image from \"next/image\";\n\nexport default function ReportSubmissionMarker({\n  mapCenter,\n  isAdding,\n  setIsAdding,\n}) {\n  const [markerPosition, setMarkerPosition] = useState({\n    longitude: mapCenter.longitude,\n    latitude: mapCenter.latitude,\n  });\n  const [popupAnchor, setPopupAnchor] = useState<PositionAnchor>(\"bottom\");\n  const [popupOffset, setPopupOffset] = useState(60);\n\n  const markerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    setMarkerPosition({\n      longitude: mapCenter.longitude,\n      latitude: mapCenter.latitude,\n    });\n  }, [mapCenter]);\n\n  useEffect(() => {\n    updatePopupAnchor();\n  }, [markerPosition]);\n\n  const updatePopupAnchor = () => {\n    if (!markerRef.current) {\n      console.warn(\"⚠️ Marker ref is null!\");\n      return;\n    }\n\n    const markerRect = markerRef.current.getBoundingClientRect();\n    const screenHeight = window.innerHeight;\n\n    if (markerRect.top > (screenHeight / 5) * 2) {\n      setPopupAnchor(\"bottom\");\n      setPopupOffset(60);\n    } else {\n      setPopupAnchor(\"top\");\n      setPopupOffset(20);\n    }\n  };\n\n  const handleSubmissionSuccess = () => {\n    setIsAdding(false);\n  };\n\n  return (\n    <>\n      <Marker\n        longitude={markerPosition.longitude}\n        latitude={markerPosition.latitude}\n        draggable\n        anchor=\"bottom\"\n        style={{ zIndex: \"10\" }}\n        onDragEnd={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n          updatePopupAnchor();\n        }}\n        onDrag={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n        }}\n      >\n        <AnimatePresence>\n          {isAdding && (\n            <motion.div\n              key={\"adding-image\"}\n              initial={{ opacity: 0, y: -50 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.15 }}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <Image\n                src=\"/marker.png\"\n                width={45}\n                height={45}\n                alt=\"Marker\"\n                ref={markerRef}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </Marker>\n      {isAdding && (\n        <motion.div\n          key={\"adding-popup\"}\n          layoutId=\"popupForm\"\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.15 }}\n          exit={{ opacity: 0, y: -50 }}\n        >\n          <Popup\n            longitude={markerPosition.longitude}\n            latitude={markerPosition.latitude}\n            closeButton\n            closeOnClick={false}\n            onClose={() => setIsAdding(false)}\n            anchor={popupAnchor}\n            offset={popupOffset}\n          >\n            <PopupForm\n              latitude={markerPosition.latitude}\n              longitude={markerPosition.longitude}\n              onClose={handleSubmissionSuccess}\n            />\n          </Popup>\n        </motion.div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1601, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1607, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/slider.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n        ? defaultValue\n        : [min, max],\n    [value, defaultValue, min, max]\n  );\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-gray-400 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\"\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/20 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  );\n}\n\nexport { Slider };\n"],"names":[],"mappings":";;;;AAEA;AAGA;AAFA;AAHA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;IAClD,MAAM,UAAU,sMAAM,OAAO,CAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACd,eACA;YAAC;YAAK;SAAI,EAChB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,8OAAC,mKAAgB,IAAI;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,uOACA;QAED,GAAG,KAAK;;0BAET,8OAAC,mKAAgB,KAAK;gBACpB,aAAU;gBACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV;0BAGF,cAAA,8OAAC,mKAAgB,KAAK;oBACpB,aAAU;oBACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,8OAAC,mKAAgB,KAAK;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf"}},
    {"offset": {"line": 1672, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1678, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/settings/TimeRangeSlider.tsx"],"sourcesContent":["\"use client\";\n\nimport { useData } from \"../../layout/DataProvider\";\nimport { Slider } from \"@/components/ui/slider\";\n\nexport default function TimeRangeSlider() {\n  const { timeRange, setTimeRange } = useData();\n\n  return (\n    <div className=\"p-3\">\n      <label className=\"block font-semibold pb-1\">Time Range</label>\n      <Slider\n        min={1}\n        max={24}\n        step={1}\n        value={[timeRange]}\n        onValueChange={(value) => setTimeRange(value[0])}\n      />\n      <p className=\"text-sm text-gray-600 mt-2\">\n        Showing repotrs from the last <strong>{[timeRange]}</strong> hours\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IAE1C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;0BAA2B;;;;;;0BAC5C,8OAAC,2HAAA,CAAA,SAAM;gBACL,KAAK;gBACL,KAAK;gBACL,MAAM;gBACN,OAAO;oBAAC;iBAAU;gBAClB,eAAe,CAAC,QAAU,aAAa,KAAK,CAAC,EAAE;;;;;;0BAEjD,8OAAC;gBAAE,WAAU;;oBAA6B;kCACV,8OAAC;kCAAQ;4BAAC;yBAAU;;;;;;oBAAU;;;;;;;;;;;;;AAIpE"}},
    {"offset": {"line": 1741, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1747, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/settings/SettingsContainer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { Button } from \"@/components/ui/button\";\nimport { MixerHorizontalIcon } from \"@radix-ui/react-icons\";\nimport TimeRangeSlider from \"./TimeRangeSlider\";\n\nexport default function SettingsContainer() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div className=\"fixed top-28 left-6 z-10\">\n      <div className=\"relative\">\n        <Button\n          className={`absolute top-7 left-3 bg-white ${\n            isOpen ? \"shadow-none\" : \"shadow\"\n          } rounded-full w-12 h-12 flex items-center justify-center hover:bg-gray-100`}\n          onClick={() => setIsOpen(!isOpen)}\n        >\n          <MixerHorizontalIcon className=\"h-6 w-6\" />\n        </Button>\n      </div>\n\n      <motion.div\n        initial={{\n          width: 50,\n          height: 50,\n          borderRadius: \"50%\",\n          backgroundColor: \"rgba(255, 255, 255, 0)\",\n          border: \"1px solid rgba(0, 0, 0, 0)\",\n        }}\n        animate={\n          isOpen\n            ? {\n                width: 320,\n                height: 300,\n                borderRadius: \"30px\",\n                padding: 16,\n                backgroundColor: \"rgba(255, 255, 255, 1)\",\n                border: \"1px solid rgba(0, 0, 0, 0)\",\n              }\n            : {\n                width: 50,\n                height: 50,\n                borderRadius: \"50%\",\n                padding: 0,\n                backgroundColor: \"rgba(255, 255, 255, 0)\",\n                border: \"1px solid rgba(0, 0, 0, 0)\",\n              }\n        }\n        transition={{ duration: 0.3, ease: \"easeOut\", exit: { duration: 0.1 } }}\n        className=\" flex flex-col overflow-hidden\"\n      >\n        {/* ✅ Top Row: Mixer Icon + Settings Title */}\n        <div className=\"flex items-center justify-between px-2 pt-2\">\n          <div className=\"w-12 h-12\"></div>\n          <AnimatePresence>\n            {isOpen && (\n              <motion.h2\n                initial={{ opacity: 0, x: -10 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -10 }}\n                transition={{\n                  duration: 0.3,\n                  ease: \"easeOut\",\n                  exit: { duration: 0.001 },\n                }}\n                className=\"font-semibold text-lg\"\n              >\n                Settings\n              </motion.h2>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* ✅ Settings Content (Appears Below) */}\n        <AnimatePresence>\n          {isOpen && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              transition={{\n                duration: 0.4,\n                ease: \"easeOut\",\n                exit: { duration: 0.1 },\n              }}\n              className=\"flex flex-col gap-4 mt-2 mb-10\"\n            >\n              <div className=\"border border-black rounded-md shadow-md p-2\">\n                <TimeRangeSlider />\n              </div>\n              <p className=\"border border-black rounded-md text-sm text-gray-600 p-3 shadow-md\">\n                Settings content goes here: filter by type, keyword, etc.\n              </p>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAEA;AADA;AAFA;AAAA;AAHA;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,2HAAA,CAAA,SAAM;oBACL,WAAW,CAAC,+BAA+B,EACzC,SAAS,gBAAgB,SAC1B,0EAA0E,CAAC;oBAC5E,SAAS,IAAM,UAAU,CAAC;8BAE1B,cAAA,8OAAC,gLAAA,CAAA,sBAAmB;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAInC,8OAAC,kNAAA,CAAA,SAAM,CAAC,GAAG;gBACT,SAAS;oBACP,OAAO;oBACP,QAAQ;oBACR,cAAc;oBACd,iBAAiB;oBACjB,QAAQ;gBACV;gBACA,SACE,SACI;oBACE,OAAO;oBACP,QAAQ;oBACR,cAAc;oBACd,SAAS;oBACT,iBAAiB;oBACjB,QAAQ;gBACV,IACA;oBACE,OAAO;oBACP,QAAQ;oBACR,cAAc;oBACd,SAAS;oBACT,iBAAiB;oBACjB,QAAQ;gBACV;gBAEN,YAAY;oBAAE,UAAU;oBAAK,MAAM;oBAAW,MAAM;wBAAE,UAAU;oBAAI;gBAAE;gBACtE,WAAU;;kCAGV,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC,iNAAA,CAAA,kBAAe;0CACb,wBACC,8OAAC,kNAAA,CAAA,SAAM,CAAC,EAAE;oCACR,SAAS;wCAAE,SAAS;wCAAG,GAAG,CAAC;oCAAG;oCAC9B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,MAAM;wCAAE,SAAS;wCAAG,GAAG,CAAC;oCAAG;oCAC3B,YAAY;wCACV,UAAU;wCACV,MAAM;wCACN,MAAM;4CAAE,UAAU;wCAAM;oCAC1B;oCACA,WAAU;8CACX;;;;;;;;;;;;;;;;;kCAQP,8OAAC,iNAAA,CAAA,kBAAe;kCACb,wBACC,8OAAC,kNAAA,CAAA,SAAM,CAAC,GAAG;4BACT,SAAS;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC9B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC3B,YAAY;gCACV,UAAU;gCACV,MAAM;gCACN,MAAM;oCAAE,UAAU;gCAAI;4BACxB;4BACA,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wJAAA,CAAA,UAAe;;;;;;;;;;8CAElB,8OAAC;oCAAE,WAAU;8CAAqE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShG"}},
    {"offset": {"line": 1939, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1945, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Map } from \"react-map-gl/maplibre\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport { io } from \"socket.io-client\";\nimport { useData } from \"./components/layout/DataProvider\";\nimport { useSession } from \"./lib/auth-client\";\nimport { deleteReport } from \"@/actions/deleteReport\";\nimport ReportMarkers from \"./components/map/ReportMarkers\";\nimport ReportPopup from \"./components/map/ReportPopup\";\nimport AddMarkerButton from \"./components/map/AddMarkerButton\";\nimport ReportSubmissionMarker from \"./components/map/ReportSubmissionMarker\";\nimport TimeRangeSlider from \"./components/map/settings/TimeRangeSlider\";\nimport SettingsContainer from \"./components/map/settings/SettingsContainer\";\n\nconst socket = io(\"http://localhost:3005\", {\n  reconnection: true,\n  reconnectionAttempts: 10,\n  reconnectionDelay: 2000,\n});\n\nconst Page = () => {\n  const { data: session } = useSession();\n  const userId = session?.user?.id || \"\";\n  const { reports, setReports } = useData();\n\n  const [mapCenter, setMapCenter] = useState({\n    longitude: parseFloat(\n      process.env.NEXT_PUBLIC_MAP_CENTER_LONG || \"-73.935424\"\n    ),\n    latitude: parseFloat(process.env.NEXT_PUBLIC_MAP_CENTER_LAT || \"40.730610\"),\n  });\n\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [popupPosition, setPopupPosition] = useState({ x: 0, y: 0 });\n  const [isAdding, setIsAdding] = useState(false);\n  const mapRef = useRef(null);\n\n  const getBoundsFromEnv = () => {\n    const sw = process.env.NEXT_PUBLIC_MAP_BOUNDS_SW?.split(\",\").map(Number);\n    const ne = process.env.NEXT_PUBLIC_MAP_BOUNDS_NE?.split(\",\").map(Number);\n\n    if (sw?.length === 2 && ne?.length === 2) {\n      return [sw[0], sw[1], ne[0], ne[1]];\n    }\n\n    return undefined;\n  };\n\n  const maxBounds = getBoundsFromEnv();\n\n  const handleDelete = async (reportId: string) => {\n    if (!userId) {\n      console.error(\"❌ No user ID found, cannot delete report\");\n      return;\n    }\n\n    const response = await deleteReport(reportId, userId);\n    if (!response) {\n      console.error(\"❌ Failed to delete report\");\n      return;\n    }\n\n    setReports((prevReports) =>\n      prevReports.filter((r) => r.id !== Number(reportId))\n    );\n    setSelectedReport(null);\n\n    socket.emit(\"report-deleted\", { reportId });\n  };\n\n  // Function to update popup position when marker is clicked\n  const updatePopupPosition = () => {\n    if (!selectedReport || !mapRef.current) return;\n\n    const markerElement = document.querySelector(\n      `[data-marker-id=\"${selectedReport.id}\"]`\n    );\n\n    if (markerElement) {\n      const markerRect = markerElement.getBoundingClientRect();\n      setPopupPosition({\n        x: markerRect.left + markerRect.width / 2,\n        y: markerRect.top,\n      });\n    }\n  };\n\n  // Ensure popup repositions on map movement\n  useEffect(() => {\n    if (selectedReport) updatePopupPosition();\n  }, [selectedReport]);\n\n  return (\n    <div className=\"h-[calc(100vh-66px)] w-screen relative\">\n      <div className=\"absolute left-4 top-4 z-10 p-2\">\n        <SettingsContainer />\n      </div>\n      <Map\n        initialViewState={{\n          longitude: mapCenter.longitude,\n          latitude: mapCenter.latitude,\n          zoom: 13,\n        }}\n        minZoom={Number(process.env.NEXT_PUBLIC_MAP_MIN_ZOOM || 10)}\n        maxZoom={Number(process.env.NEXT_PUBLIC_MAP_MAX_ZOOM || 18)}\n        maxBounds={maxBounds}\n        ref={mapRef}\n        style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}\n        //mapStyle={\"http://159.65.164.132:8080/data/v3.json\"}\n        mapStyle={`https://api.maptiler.com/maps/streets/style.json?key=${process.env.NEXT_PUBLIC_MAPTILER_KEY}`}\n      >\n        <ReportMarkers setSelectedReport={setSelectedReport} userId={userId} />\n        <ReportPopup\n          selectedReport={selectedReport}\n          setSelectedReport={setSelectedReport}\n          session={session}\n          popupPosition={popupPosition}\n          handleDelete={handleDelete}\n        />\n        {session && (\n          <AddMarkerButton\n            isAdding={isAdding}\n            toggleMarker={() => setIsAdding(!isAdding)}\n          ></AddMarkerButton>\n        )}\n        {session && (\n          <ReportSubmissionMarker\n            mapCenter={mapCenter}\n            isAdding={isAdding}\n            setIsAdding={setIsAdding}\n          ></ReportSubmissionMarker>\n        )}\n      </Map>\n    </div>\n  );\n};\n\nexport default Page;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2127, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
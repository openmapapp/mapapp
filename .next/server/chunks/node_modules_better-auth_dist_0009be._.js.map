{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-TOKZL3ZI.js"],"sourcesContent":["import { APIError } from 'better-call';\n\n// src/utils/password.ts\nasync function validatePassword(ctx, data) {\n  const accounts = await ctx.context.internalAdapter.findAccounts(data.userId);\n  const credentialAccount = accounts?.find(\n    (account) => account.providerId === \"credential\"\n  );\n  const currentPassword = credentialAccount?.password;\n  if (!credentialAccount || !currentPassword) {\n    return false;\n  }\n  const compare = await ctx.context.password.verify({\n    hash: currentPassword,\n    password: data.password\n  });\n  return compare;\n}\nasync function checkPassword(userId, c) {\n  const accounts = await c.context.internalAdapter.findAccounts(userId);\n  const credentialAccount = accounts?.find(\n    (account) => account.providerId === \"credential\"\n  );\n  const currentPassword = credentialAccount?.password;\n  if (!credentialAccount || !currentPassword || !c.body.password) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"No password credential found\"\n    });\n  }\n  const compare = await c.context.password.verify({\n    hash: currentPassword,\n    password: c.body.password\n  });\n  if (!compare) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"Invalid password\"\n    });\n  }\n  return true;\n}\n\nexport { checkPassword, validatePassword };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,wBAAwB;AACxB,eAAe,iBAAiB,GAAG,EAAE,IAAI;IACvC,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,MAAM;IAC3E,MAAM,oBAAoB,UAAU,KAClC,CAAC,UAAY,QAAQ,UAAU,KAAK;IAEtC,MAAM,kBAAkB,mBAAmB;IAC3C,IAAI,CAAC,qBAAqB,CAAC,iBAAiB;QAC1C,OAAO;IACT;IACA,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;QAChD,MAAM;QACN,UAAU,KAAK,QAAQ;IACzB;IACA,OAAO;AACT;AACA,eAAe,cAAc,MAAM,EAAE,CAAC;IACpC,MAAM,WAAW,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC;IAC9D,MAAM,oBAAoB,UAAU,KAClC,CAAC,UAAY,QAAQ,UAAU,KAAK;IAEtC,MAAM,kBAAkB,mBAAmB;IAC3C,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE;QAC9D,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,UAAU,MAAM,EAAE,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;QAC9C,MAAM;QACN,UAAU,EAAE,IAAI,CAAC,QAAQ;IAC3B;IACA,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-FURNA6HY.js"],"sourcesContent":["// src/utils/date.ts\nvar getDate = (span, unit = \"ms\") => {\n  return new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\nexport { getDate };\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;AACpB,IAAI,UAAU,CAAC,MAAM,OAAO,IAAI;IAC9B,OAAO,IAAI,KAAK,KAAK,GAAG,KAAK,CAAC,SAAS,QAAQ,OAAO,MAAM,IAAI;AAClE","ignoreList":[0]}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-GTQM7JU7.js"],"sourcesContent":["import { getDate } from './chunk-FURNA6HY.js';\nimport { createHash } from '@better-auth/utils/hash';\nimport { base64Url } from '@better-auth/utils/base64';\nimport { betterFetch } from '@better-fetch/fetch';\nimport { jwtVerify } from 'jose';\n\nasync function generateCodeChallenge(codeVerifier) {\n  const codeChallengeBytes = await createHash(\"SHA-256\").digest(codeVerifier);\n  return base64Url.encode(new Uint8Array(codeChallengeBytes), {\n    padding: false\n  });\n}\nfunction getOAuth2Tokens(data) {\n  return {\n    tokenType: data.token_type,\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    accessTokenExpiresAt: data.expires_in ? getDate(data.expires_in, \"sec\") : void 0,\n    scopes: data?.scope ? typeof data.scope === \"string\" ? data.scope.split(\" \") : data.scope : [],\n    idToken: data.id_token\n  };\n}\n\n// src/oauth2/create-authorization-url.ts\nasync function createAuthorizationURL({\n  id,\n  options,\n  authorizationEndpoint,\n  state,\n  codeVerifier,\n  scopes,\n  claims,\n  redirectURI,\n  duration,\n  prompt\n}) {\n  const url = new URL(authorizationEndpoint);\n  url.searchParams.set(\"response_type\", \"code\");\n  url.searchParams.set(\"client_id\", options.clientId);\n  url.searchParams.set(\"state\", state);\n  url.searchParams.set(\"scope\", scopes.join(\" \"));\n  url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  if (codeVerifier) {\n    const codeChallenge = await generateCodeChallenge(codeVerifier);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"code_challenge\", codeChallenge);\n  }\n  if (claims) {\n    const claimsObj = claims.reduce(\n      (acc, claim) => {\n        acc[claim] = null;\n        return acc;\n      },\n      {}\n    );\n    url.searchParams.set(\n      \"claims\",\n      JSON.stringify({\n        id_token: { email: null, email_verified: null, ...claimsObj }\n      })\n    );\n  }\n  if (duration) {\n    url.searchParams.set(\"duration\", duration);\n  }\n  if (prompt) {\n    url.searchParams.set(\"prompt\", \"select_account\");\n  }\n  return url;\n}\nasync function validateAuthorizationCode({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  tokenEndpoint,\n  authentication\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\",\n    \"user-agent\": \"better-auth\"\n  };\n  body.set(\"grant_type\", \"authorization_code\");\n  body.set(\"code\", code);\n  codeVerifier && body.set(\"code_verifier\", codeVerifier);\n  body.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  if (authentication === \"basic\") {\n    const encodedCredentials = btoa(\n      `${options.clientId}:${options.clientSecret}`\n    );\n    headers[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    body.set(\"client_id\", options.clientId);\n    body.set(\"client_secret\", options.clientSecret);\n  }\n  const { data, error } = await betterFetch(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = getOAuth2Tokens(data);\n  return tokens;\n}\nasync function validateToken(token, jwksEndpoint) {\n  const { data, error } = await betterFetch(jwksEndpoint, {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      \"user-agent\": \"better-auth\"\n    }\n  });\n  if (error) {\n    throw error;\n  }\n  const keys = data[\"keys\"];\n  const header = JSON.parse(atob(token.split(\".\")[0]));\n  const key = keys.find((key2) => key2.kid === header.kid);\n  if (!key) {\n    throw new Error(\"Key not found\");\n  }\n  const verified = await jwtVerify(token, key);\n  return verified;\n}\n\nexport { createAuthorizationURL, generateCodeChallenge, getOAuth2Tokens, validateAuthorizationCode, validateToken };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-KLDFBLYL.js"],"sourcesContent":["import { createRandomStringGenerator } from '@better-auth/utils/random';\n\n// src/utils/logger.ts\nvar levels = [\"info\", \"success\", \"warn\", \"error\", \"debug\"];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n  return levels.indexOf(logLevel) <= levels.indexOf(currentLogLevel);\n}\nvar colors = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  underscore: \"\\x1B[4m\",\n  blink: \"\\x1B[5m\",\n  reverse: \"\\x1B[7m\",\n  hidden: \"\\x1B[8m\",\n  fg: {\n    black: \"\\x1B[30m\",\n    red: \"\\x1B[31m\",\n    green: \"\\x1B[32m\",\n    yellow: \"\\x1B[33m\",\n    blue: \"\\x1B[34m\",\n    magenta: \"\\x1B[35m\",\n    cyan: \"\\x1B[36m\",\n    white: \"\\x1B[37m\"\n  },\n  bg: {\n    black: \"\\x1B[40m\",\n    red: \"\\x1B[41m\",\n    green: \"\\x1B[42m\",\n    yellow: \"\\x1B[43m\",\n    blue: \"\\x1B[44m\",\n    magenta: \"\\x1B[45m\",\n    cyan: \"\\x1B[46m\",\n    white: \"\\x1B[47m\"\n  }\n};\nvar levelColors = {\n  info: colors.fg.blue,\n  success: colors.fg.green,\n  warn: colors.fg.yellow,\n  error: colors.fg.red,\n  debug: colors.fg.magenta\n};\nvar formatMessage = (level, message) => {\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n  return `${colors.dim}${timestamp}${colors.reset} ${levelColors[level]}${level.toUpperCase()}${colors.reset} ${colors.bright}[Better Auth]:${colors.reset} ${message}`;\n};\nvar createLogger = (options) => {\n  const enabled = options?.disabled !== true;\n  const logLevel = options?.level ?? \"error\";\n  const LogFunc = (level, message, args = []) => {\n    if (!enabled || !shouldPublishLog(logLevel, level)) {\n      return;\n    }\n    const formattedMessage = formatMessage(level, message);\n    if (!options || typeof options.log !== \"function\") {\n      if (level === \"error\") {\n        console.error(formattedMessage, ...args);\n      } else if (level === \"warn\") {\n        console.warn(formattedMessage, ...args);\n      } else {\n        console.log(formattedMessage, ...args);\n      }\n      return;\n    }\n    options.log(level === \"success\" ? \"info\" : level, message, ...args);\n  };\n  return Object.fromEntries(\n    levels.map((level) => [\n      level,\n      (...[message, ...args]) => LogFunc(level, message, args)\n    ])\n  );\n};\nvar logger = createLogger();\n\n// src/utils/hide-metadata.ts\nvar HIDE_METADATA = {\n  isAction: false\n};\nvar generateId = (size) => {\n  return createRandomStringGenerator(\"a-z\", \"A-Z\", \"0-9\")(size || 32);\n};\n\nexport { HIDE_METADATA, createLogger, generateId, levels, logger, shouldPublishLog };\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,sBAAsB;AACtB,IAAI,SAAS;IAAC;IAAQ;IAAW;IAAQ;IAAS;CAAQ;AAC1D,SAAS,iBAAiB,eAAe,EAAE,QAAQ;IACjD,OAAO,OAAO,OAAO,CAAC,aAAa,OAAO,OAAO,CAAC;AACpD;AACA,IAAI,SAAS;IACX,OAAO;IACP,QAAQ;IACR,KAAK;IACL,YAAY;IACZ,OAAO;IACP,SAAS;IACT,QAAQ;IACR,IAAI;QACF,OAAO;QACP,KAAK;QACL,OAAO;QACP,QAAQ;QACR,MAAM;QACN,SAAS;QACT,MAAM;QACN,OAAO;IACT;IACA,IAAI;QACF,OAAO;QACP,KAAK;QACL,OAAO;QACP,QAAQ;QACR,MAAM;QACN,SAAS;QACT,MAAM;QACN,OAAO;IACT;AACF;AACA,IAAI,cAAc;IAChB,MAAM,OAAO,EAAE,CAAC,IAAI;IACpB,SAAS,OAAO,EAAE,CAAC,KAAK;IACxB,MAAM,OAAO,EAAE,CAAC,MAAM;IACtB,OAAO,OAAO,EAAE,CAAC,GAAG;IACpB,OAAO,OAAO,EAAE,CAAC,OAAO;AAC1B;AACA,IAAI,gBAAgB,CAAC,OAAO;IAC1B,MAAM,YAAY,AAAC,aAAa,GAAG,IAAI,OAAQ,WAAW;IAC1D,OAAO,GAAG,OAAO,GAAG,GAAG,YAAY,OAAO,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,MAAM,GAAG,MAAM,WAAW,KAAK,OAAO,KAAK,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,cAAc,EAAE,OAAO,KAAK,CAAC,CAAC,EAAE,SAAS;AACvK;AACA,IAAI,eAAe,CAAC;IAClB,MAAM,UAAU,SAAS,aAAa;IACtC,MAAM,WAAW,SAAS,SAAS;IACnC,MAAM,UAAU,CAAC,OAAO,SAAS,OAAO,EAAE;QACxC,IAAI,CAAC,WAAW,CAAC,iBAAiB,UAAU,QAAQ;YAClD;QACF;QACA,MAAM,mBAAmB,cAAc,OAAO;QAC9C,IAAI,CAAC,WAAW,OAAO,QAAQ,GAAG,KAAK,YAAY;YACjD,IAAI,UAAU,SAAS;gBACrB,QAAQ,KAAK,CAAC,qBAAqB;YACrC,OAAO,IAAI,UAAU,QAAQ;gBAC3B,QAAQ,IAAI,CAAC,qBAAqB;YACpC,OAAO;gBACL,QAAQ,GAAG,CAAC,qBAAqB;YACnC;YACA;QACF;QACA,QAAQ,GAAG,CAAC,UAAU,YAAY,SAAS,OAAO,YAAY;IAChE;IACA,OAAO,OAAO,WAAW,CACvB,OAAO,GAAG,CAAC,CAAC,QAAU;YACpB;YACA,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,GAAK,QAAQ,OAAO,SAAS;SACpD;AAEL;AACA,IAAI,SAAS;AAEb,6BAA6B;AAC7B,IAAI,gBAAgB;IAClB,UAAU;AACZ;AACA,IAAI,aAAa,CAAC;IAChB,OAAO,CAAA,GAAA,8JAAA,CAAA,8BAA2B,AAAD,EAAE,OAAO,OAAO,OAAO,QAAQ;AAClE","ignoreList":[0]}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-UNWCXKMP.js"],"sourcesContent":["// src/error/index.ts\nvar BetterAuthError = class extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"BetterAuthError\";\n    this.message = message;\n    this.cause = cause;\n    this.stack = \"\";\n  }\n};\nvar MissingDependencyError = class extends BetterAuthError {\n  constructor(pkgName) {\n    super(\n      `The package \"${pkgName}\" is required. Make sure it is installed.`,\n      pkgName\n    );\n  }\n};\n\nexport { BetterAuthError, MissingDependencyError };\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;AACrB,IAAI,kBAAkB,cAAc;IAClC,YAAY,OAAO,EAAE,KAAK,CAAE;QAC1B,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,KAAK,GAAG;IACf;AACF;AACA,IAAI,yBAAyB,cAAc;IACzC,YAAY,OAAO,CAAE;QACnB,KAAK,CACH,CAAC,aAAa,EAAE,QAAQ,yCAAyC,CAAC,EAClE;IAEJ;AACF","ignoreList":[0]}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-GB5YTBLA.js"],"sourcesContent":["import { validateAuthorizationCode, createAuthorizationURL, getOAuth2Tokens } from './chunk-GTQM7JU7.js';\nimport { logger } from './chunk-KLDFBLYL.js';\nimport { BetterAuthError } from './chunk-UNWCXKMP.js';\nimport { betterFetch } from '@better-fetch/fetch';\nimport { APIError } from 'better-call';\nimport { decodeProtectedHeader, jwtVerify, decodeJwt, importJWK, createRemoteJWKSet } from 'jose';\nimport { z } from 'zod';\n\nvar apple = (options) => {\n  const tokenEndpoint = \"https://appleid.apple.com/auth/token\";\n  return {\n    id: \"apple\",\n    name: \"Apple\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scope = scopes || [\"email\", \"name\"];\n      options.scope && _scope.push(...options.scope);\n      return new URL(\n        `https://appleid.apple.com/auth/authorize?client_id=${options.clientId}&response_type=code&redirect_uri=${options.redirectURI || redirectURI}&scope=${_scope.join(\" \")}&state=${state}&response_mode=form_post`\n      );\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const decodedHeader = decodeProtectedHeader(token);\n      const { kid, alg: jwtAlg } = decodedHeader;\n      if (!kid || !jwtAlg) return false;\n      const publicKey = await getApplePublicKey(kid);\n      const { payload: jwtClaims } = await jwtVerify(token, publicKey, {\n        algorithms: [jwtAlg],\n        issuer: \"https://appleid.apple.com\",\n        audience: options.appBundleIdentifier || options.clientId,\n        maxTokenAge: \"1h\"\n      });\n      [\"email_verified\", \"is_private_email\"].forEach((field) => {\n        if (jwtClaims[field] !== void 0) {\n          jwtClaims[field] = Boolean(jwtClaims[field]);\n        }\n      });\n      if (nonce && jwtClaims.nonce !== nonce) {\n        return false;\n      }\n      return !!jwtClaims;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const profile = decodeJwt(token.idToken);\n      if (!profile) {\n        return null;\n      }\n      const name = profile.user ? `${profile.user.name.firstName} ${profile.user.name.lastName}` : profile.email;\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name,\n          emailVerified: false,\n          email: profile.email,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar getApplePublicKey = async (kid) => {\n  const APPLE_BASE_URL = \"https://appleid.apple.com\";\n  const JWKS_APPLE_URI = \"/auth/keys\";\n  const { data } = await betterFetch(`${APPLE_BASE_URL}${JWKS_APPLE_URI}`);\n  if (!data?.keys) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"Keys not found\"\n    });\n  }\n  const jwk = data.keys.find((key) => key.kid === kid);\n  if (!jwk) {\n    throw new Error(`JWK with kid ${kid} not found`);\n  }\n  return await importJWK(jwk, jwk.alg);\n};\nvar discord = (options) => {\n  return {\n    id: \"discord\",\n    name: \"Discord\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = scopes || [\"identify\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      return new URL(\n        `https://discord.com/api/oauth2/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"none\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://discord.com/api/users/@me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (profile.avatar === null) {\n        const defaultAvatarNumber = profile.discriminator === \"0\" ? Number(BigInt(profile.id) >> BigInt(22)) % 6 : parseInt(profile.discriminator) % 5;\n        profile.image_url = `https://cdn.discordapp.com/embed/avatars/${defaultAvatarNumber}.png`;\n      } else {\n        const format = profile.avatar.startsWith(\"a_\") ? \"gif\" : \"png\";\n        profile.image_url = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.${format}`;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name || profile.username || \"\",\n          email: profile.email,\n          emailVerified: profile.verified,\n          image: profile.image_url,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar facebook = (options) => {\n  return {\n    id: \"facebook\",\n    name: \"Facebook\",\n    async createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = scopes || [\"email\", \"public_profile\"];\n      options.scope && _scopes.push(...options.scope);\n      return await createAuthorizationURL({\n        id: \"facebook\",\n        options,\n        authorizationEndpoint: \"https://www.facebook.com/v21.0/dialog/oauth\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://graph.facebook.com/oauth/access_token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      if (token.split(\".\").length) {\n        try {\n          const { payload: jwtClaims } = await jwtVerify(\n            token,\n            createRemoteJWKSet(\n              new URL(\"https://www.facebook.com/.well-known/oauth/openid/jwks\")\n            ),\n            {\n              algorithms: [\"RS256\"],\n              audience: options.clientId,\n              issuer: \"https://www.facebook.com\"\n            }\n          );\n          if (nonce && jwtClaims.nonce !== nonce) {\n            return false;\n          }\n          return !!jwtClaims;\n        } catch (error) {\n          return false;\n        }\n      }\n      return true;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken) {\n        const profile2 = decodeJwt(token.idToken);\n        const user = {\n          id: profile2.sub,\n          name: profile2.name,\n          email: profile2.email,\n          picture: {\n            data: {\n              url: profile2.picture,\n              height: 100,\n              width: 100,\n              is_silhouette: false\n            }\n          }\n        };\n        const userMap2 = await options.mapProfileToUser?.({\n          ...user,\n          email_verified: true\n        });\n        return {\n          user: {\n            ...user,\n            emailVerified: true,\n            ...userMap2\n          },\n          data: profile2\n        };\n      }\n      const fields = [\n        \"id\",\n        \"name\",\n        \"email\",\n        \"picture\",\n        ...options?.fields || []\n      ];\n      const { data: profile, error } = await betterFetch(\n        \"https://graph.facebook.com/me?fields=\" + fields.join(\",\"),\n        {\n          auth: {\n            type: \"Bearer\",\n            token: token.accessToken\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.picture.data.url,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar github = (options) => {\n  const tokenEndpoint = \"https://github.com/login/oauth/access_token\";\n  return {\n    id: \"github\",\n    name: \"GitHub\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = scopes || [\"user:email\"];\n      options.scope && _scopes.push(...options.scope);\n      return createAuthorizationURL({\n        id: \"github\",\n        options,\n        authorizationEndpoint: \"https://github.com/login/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.github.com/user\",\n        {\n          headers: {\n            \"User-Agent\": \"better-auth\",\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      let emailVerified = false;\n      const { data } = await betterFetch(\"https://api.github.com/user/emails\", {\n        headers: {\n          authorization: `Bearer ${token.accessToken}`,\n          \"User-Agent\": \"better-auth\"\n        }\n      });\n      if (data) {\n        profile.email = (data.find((e) => e.primary) ?? data[0])?.email;\n        emailVerified = data.find((e) => e.email === profile.email)?.verified ?? false;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id.toString(),\n          name: profile.name || profile.login,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar google = (options) => {\n  return {\n    id: \"google\",\n    name: \"Google\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret is required for Google. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Google\");\n      }\n      const _scopes = scopes || [\"email\", \"profile\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      const url = await createAuthorizationURL({\n        id: \"google\",\n        options,\n        authorizationEndpoint: \"https://accounts.google.com/o/oauth2/auth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n      options.accessType && url.searchParams.set(\"access_type\", options.accessType);\n      options.prompt && url.searchParams.set(\"prompt\", options.prompt);\n      options.display && url.searchParams.set(\"display\", options.display);\n      options.hd && url.searchParams.set(\"hd\", options.hd);\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://oauth2.googleapis.com/token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const googlePublicKeyUrl = `https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${token}`;\n      const { data: tokenInfo } = await betterFetch(googlePublicKeyUrl);\n      if (!tokenInfo) {\n        return false;\n      }\n      const isValid = tokenInfo.aud === options.clientId && tokenInfo.iss === \"https://accounts.google.com\";\n      return isValid;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = decodeJwt(token.idToken);\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: user.email_verified,\n          ...userMap\n        },\n        data: user\n      };\n    }\n  };\n};\nvar microsoft = (options) => {\n  const tenant = options.tenantId || \"common\";\n  const authorizationEndpoint = `https://login.microsoftonline.com/${tenant}/oauth2/v2.0/authorize`;\n  const tokenEndpoint = `https://login.microsoftonline.com/${tenant}/oauth2/v2.0/token`;\n  return {\n    id: \"microsoft\",\n    name: \"Microsoft EntraID\",\n    createAuthorizationURL(data) {\n      const scopes = data.scopes || [\"openid\", \"profile\", \"email\", \"User.Read\"];\n      options.scope && scopes.push(...options.scope);\n      return createAuthorizationURL({\n        id: \"microsoft\",\n        options,\n        authorizationEndpoint,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        scopes,\n        redirectURI: data.redirectURI,\n        prompt: options.requireSelectAccount || false\n      });\n    },\n    validateAuthorizationCode({ code, codeVerifier, redirectURI }) {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = decodeJwt(token.idToken);\n      const profilePhotoSize = options.profilePhotoSize || 48;\n      await betterFetch(\n        `https://graph.microsoft.com/v1.0/me/photos/${profilePhotoSize}x${profilePhotoSize}/$value`,\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          async onResponse(context) {\n            if (options.disableProfilePhoto || !context.response.ok) {\n              return;\n            }\n            try {\n              const response = context.response.clone();\n              const pictureBuffer = await response.arrayBuffer();\n              const pictureBase64 = Buffer.from(pictureBuffer).toString(\"base64\");\n              user.picture = `data:image/jpeg;base64, ${pictureBase64}`;\n            } catch (e) {\n              logger.error(\n                e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n                e\n              );\n            }\n          }\n        }\n      );\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: user\n      };\n    }\n  };\n};\nvar spotify = (options) => {\n  return {\n    id: \"spotify\",\n    name: \"Spotify\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = scopes || [\"user-read-email\"];\n      options.scope && _scopes.push(...options.scope);\n      return createAuthorizationURL({\n        id: \"spotify\",\n        options,\n        authorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.spotify.com/v1/me\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          email: profile.email,\n          image: profile.images[0]?.url,\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar twitch = (options) => {\n  return {\n    id: \"twitch\",\n    name: \"Twitch\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = scopes || [\"user:read:email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      return createAuthorizationURL({\n        id: \"twitch\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.twitch.tv/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        claims: options.claims || [\n          \"email\",\n          \"email_verified\",\n          \"preferred_username\",\n          \"picture\"\n        ]\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const idToken = token.idToken;\n      if (!idToken) {\n        logger.error(\"No idToken found in token\");\n        return null;\n      }\n      const profile = decodeJwt(idToken);\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar twitter = (options) => {\n  return {\n    id: \"twitter\",\n    name: \"Twitter\",\n    createAuthorizationURL(data) {\n      const _scopes = data.scopes || [\n        \"users.read\",\n        \"tweet.read\",\n        \"offline.access\"\n      ];\n      options.scope && _scopes.push(...options.scope);\n      return createAuthorizationURL({\n        id: \"twitter\",\n        options,\n        authorizationEndpoint: \"https://x.com/i/oauth2/authorize\",\n        scopes: _scopes,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        redirectURI: data.redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        authentication: \"basic\",\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.x.com/2/users/me?user.fields=profile_image_url\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.data.id,\n          name: profile.data.name,\n          email: profile.data.username || null,\n          image: profile.data.profile_image_url,\n          emailVerified: profile.data.verified || false,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar dropbox = (options) => {\n  const tokenEndpoint = \"https://api.dropboxapi.com/oauth2/token\";\n  return {\n    id: \"dropbox\",\n    name: \"Dropbox\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI\n    }) => {\n      const _scopes = scopes || [\"account_info.read\"];\n      options.scope && _scopes.push(...options.scope);\n      return await createAuthorizationURL({\n        id: \"dropbox\",\n        options,\n        authorizationEndpoint: \"https://www.dropbox.com/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.dropboxapi.com/2/users/get_current_account\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.account_id,\n          name: profile.name?.display_name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.profile_photo_url,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar linkedin = (options) => {\n  const authorizationEndpoint = \"https://www.linkedin.com/oauth/v2/authorization\";\n  const tokenEndpoint = \"https://www.linkedin.com/oauth/v2/accessToken\";\n  return {\n    id: \"linkedin\",\n    name: \"Linkedin\",\n    createAuthorizationURL: async ({ state, scopes, redirectURI }) => {\n      const _scopes = scopes || [\"profile\", \"email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      return await createAuthorizationURL({\n        id: \"linkedin\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      const { data: profile, error } = await betterFetch(\n        \"https://api.linkedin.com/v2/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.picture,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar cleanDoubleSlashes = (input = \"\") => {\n  return input.split(\"://\").map((str) => str.replace(/\\/{2,}/g, \"/\")).join(\"://\");\n};\nvar issuerToEndpoints = (issuer) => {\n  let baseUrl = issuer || \"https://gitlab.com\";\n  return {\n    authorizationEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/authorize`),\n    tokenEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/token`),\n    userinfoEndpoint: cleanDoubleSlashes(`${baseUrl}/api/v4/user`)\n  };\n};\nvar gitlab = (options) => {\n  const { authorizationEndpoint, tokenEndpoint, userinfoEndpoint } = issuerToEndpoints(options.issuer);\n  const issuerId = \"gitlab\";\n  const issuerName = \"Gitlab\";\n  return {\n    id: issuerId,\n    name: issuerName,\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI\n    }) => {\n      const _scopes = scopes || [\"read_user\"];\n      options.scope && _scopes.push(...options.scope);\n      return await createAuthorizationURL({\n        id: issuerId,\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        codeVerifier,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        userinfoEndpoint,\n        { headers: { authorization: `Bearer ${token.accessToken}` } }\n      );\n      if (error || profile.state !== \"active\" || profile.locked) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id.toString(),\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar reddit = (options) => {\n  return {\n    id: \"reddit\",\n    name: \"Reddit\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = scopes || [\"identity\"];\n      options.scope && _scopes.push(...options.scope);\n      return createAuthorizationURL({\n        id: \"reddit\",\n        options,\n        authorizationEndpoint: \"https://www.reddit.com/api/v1/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        duration: options.duration\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: options.redirectURI || redirectURI\n      });\n      const headers = {\n        \"content-type\": \"application/x-www-form-urlencoded\",\n        accept: \"text/plain\",\n        \"user-agent\": \"better-auth\",\n        Authorization: `Basic ${Buffer.from(\n          `${options.clientId}:${options.clientSecret}`\n        ).toString(\"base64\")}`\n      };\n      const { data, error } = await betterFetch(\n        \"https://www.reddit.com/api/v1/access_token\",\n        {\n          method: \"POST\",\n          headers,\n          body: body.toString()\n        }\n      );\n      if (error) {\n        throw error;\n      }\n      return getOAuth2Tokens(data);\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://oauth.reddit.com/api/v1/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`,\n            \"User-Agent\": \"better-auth\"\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.oauth_client_id,\n          emailVerified: profile.has_verified_email,\n          image: profile.icon_img?.split(\"?\")[0],\n          ...userMap\n        },\n        data: profile\n      };\n    }\n  };\n};\nvar socialProviders = {\n  apple,\n  discord,\n  facebook,\n  github,\n  microsoft,\n  google,\n  spotify,\n  twitch,\n  twitter,\n  dropbox,\n  linkedin,\n  gitlab,\n  reddit\n};\nvar socialProviderList = Object.keys(socialProviders);\nvar SocialProviderListEnum = z.enum(socialProviderList, {\n  description: \"OAuth2 provider to use\"\n});\n\nexport { SocialProviderListEnum, apple, discord, dropbox, facebook, getApplePublicKey, github, gitlab, google, linkedin, microsoft, reddit, socialProviderList, socialProviders, spotify, twitch, twitter };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1286, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1292, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-TQQSPPNA.js"],"sourcesContent":["// src/utils/env.ts\nvar _envShim = /* @__PURE__ */ Object.create(null);\nvar _getEnv = (useShim) => globalThis.process?.env || //@ts-expect-error\nglobalThis.Deno?.env.toObject() || //@ts-expect-error\nglobalThis.__env__ || (useShim ? _envShim : globalThis);\nvar env = new Proxy(_envShim, {\n  get(_, prop) {\n    const env2 = _getEnv();\n    return env2[prop] ?? _envShim[prop];\n  },\n  has(_, prop) {\n    const env2 = _getEnv();\n    return prop in env2 || prop in _envShim;\n  },\n  set(_, prop, value) {\n    const env2 = _getEnv(true);\n    env2[prop] = value;\n    return true;\n  },\n  deleteProperty(_, prop) {\n    if (!prop) {\n      return false;\n    }\n    const env2 = _getEnv(true);\n    delete env2[prop];\n    return true;\n  },\n  ownKeys() {\n    const env2 = _getEnv(true);\n    return Object.keys(env2);\n  }\n});\nfunction toBoolean(val) {\n  return val ? val !== \"false\" : false;\n}\nvar nodeENV = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV || \"\";\nvar isProduction = nodeENV === \"production\";\nvar isDevelopment = nodeENV === \"dev\" || nodeENV === \"development\";\nvar isTest = nodeENV === \"test\" || toBoolean(env.TEST);\n\nexport { env, isDevelopment, isProduction, isTest };\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;;AACnB,IAAI,WAAW,aAAa,GAAG,OAAO,MAAM,CAAC;AAC7C,IAAI,UAAU,CAAC,UAAY,WAAW,OAAO,EAAE,OAAO,kBAAkB;IACxE,WAAW,IAAI,EAAE,IAAI,cAAc,kBAAkB;IACrD,WAAW,OAAO,IAAI,CAAC,UAAU,WAAW,UAAU;AACtD,IAAI,MAAM,IAAI,MAAM,UAAU;IAC5B,KAAI,CAAC,EAAE,IAAI;QACT,MAAM,OAAO;QACb,OAAO,IAAI,CAAC,KAAK,IAAI,QAAQ,CAAC,KAAK;IACrC;IACA,KAAI,CAAC,EAAE,IAAI;QACT,MAAM,OAAO;QACb,OAAO,QAAQ,QAAQ,QAAQ;IACjC;IACA,KAAI,CAAC,EAAE,IAAI,EAAE,KAAK;QAChB,MAAM,OAAO,QAAQ;QACrB,IAAI,CAAC,KAAK,GAAG;QACb,OAAO;IACT;IACA,gBAAe,CAAC,EAAE,IAAI;QACpB,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QACA,MAAM,OAAO,QAAQ;QACrB,OAAO,IAAI,CAAC,KAAK;QACjB,OAAO;IACT;IACA;QACE,MAAM,OAAO,QAAQ;QACrB,OAAO,OAAO,IAAI,CAAC;IACrB;AACF;AACA,SAAS,UAAU,GAAG;IACpB,OAAO,MAAM,QAAQ,UAAU;AACjC;AACA,IAAI,UAAU,OAAO,YAAY,eAAe,QAAQ,GAAG,uDAA4B;AACvF,IAAI,eAAe,YAAY;AAC/B,IAAI,gBAAgB,YAAY,SAAS,YAAY;AACrD,IAAI,SAAS,YAAY,UAAU,UAAU,IAAI,IAAI","ignoreList":[0]}},
    {"offset": {"line": 1338, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1344, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-XFCIANZX.js"],"sourcesContent":["import { env } from './chunk-TQQSPPNA.js';\nimport { BetterAuthError } from './chunk-UNWCXKMP.js';\n\n// src/utils/url.ts\nfunction checkHasPath(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.pathname !== \"/\";\n  } catch (error) {\n    throw new BetterAuthError(\n      `Invalid base URL: ${url}. Please provide a valid base URL.`\n    );\n  }\n}\nfunction withPath(url, path = \"/api/auth\") {\n  const hasPath = checkHasPath(url);\n  if (hasPath) {\n    return url;\n  }\n  path = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${url.replace(/\\/+$/, \"\")}${path}`;\n}\nfunction getBaseURL(url, path) {\n  if (url) {\n    return withPath(url, path);\n  }\n  const fromEnv = env.BETTER_AUTH_URL || env.NEXT_PUBLIC_BETTER_AUTH_URL || env.PUBLIC_BETTER_AUTH_URL || env.NUXT_PUBLIC_BETTER_AUTH_URL || env.NUXT_PUBLIC_AUTH_URL || (env.BASE_URL !== \"/\" ? env.BASE_URL : void 0);\n  if (fromEnv) {\n    return withPath(fromEnv, path);\n  }\n  if (typeof window !== \"undefined\" && window.location) {\n    return withPath(window.location.origin, path);\n  }\n  return void 0;\n}\nfunction getOrigin(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.origin;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getProtocol(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.protocol;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getHost(url) {\n  if (url.includes(\"://\")) {\n    const parsedUrl = new URL(url);\n    return parsedUrl.host;\n  }\n  return url;\n}\n\nexport { getBaseURL, getHost, getOrigin, getProtocol };\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,mBAAmB;AACnB,SAAS,aAAa,GAAG;IACvB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,QAAQ,KAAK;IAChC,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,6JAAA,CAAA,kBAAe,CACvB,CAAC,kBAAkB,EAAE,IAAI,kCAAkC,CAAC;IAEhE;AACF;AACA,SAAS,SAAS,GAAG,EAAE,OAAO,WAAW;IACvC,MAAM,UAAU,aAAa;IAC7B,IAAI,SAAS;QACX,OAAO;IACT;IACA,OAAO,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC/C,OAAO,GAAG,IAAI,OAAO,CAAC,QAAQ,MAAM,MAAM;AAC5C;AACA,SAAS,WAAW,GAAG,EAAE,IAAI;IAC3B,IAAI,KAAK;QACP,OAAO,SAAS,KAAK;IACvB;IACA,MAAM,UAAU,6JAAA,CAAA,MAAG,CAAC,eAAe,IAAI,6JAAA,CAAA,MAAG,CAAC,2BAA2B,IAAI,6JAAA,CAAA,MAAG,CAAC,sBAAsB,IAAI,6JAAA,CAAA,MAAG,CAAC,2BAA2B,IAAI,6JAAA,CAAA,MAAG,CAAC,oBAAoB,IAAI,CAAC,6JAAA,CAAA,MAAG,CAAC,QAAQ,KAAK,MAAM,6JAAA,CAAA,MAAG,CAAC,QAAQ,GAAG,KAAK,CAAC;IACpN,IAAI,SAAS;QACX,OAAO,SAAS,SAAS;IAC3B;IACA,uCAAsD;;IAEtD;IACA,OAAO,KAAK;AACd;AACA,SAAS,UAAU,GAAG;IACpB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,MAAM;IACzB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AACA,SAAS,YAAY,GAAG;IACtB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,QAAQ;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AACA,SAAS,QAAQ,GAAG;IAClB,IAAI,IAAI,QAAQ,CAAC,QAAQ;QACvB,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,IAAI;IACvB;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1408, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1414, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-IWEXZ2ES.js"],"sourcesContent":["import { getDate } from './chunk-FURNA6HY.js';\nimport { isProduction } from './chunk-TQQSPPNA.js';\nimport { BetterAuthError } from './chunk-UNWCXKMP.js';\nimport { base64Url } from '@better-auth/utils/base64';\nimport { createHMAC } from '@better-auth/utils/hmac';\n\n// src/utils/time.ts\nvar createTime = (value, format) => {\n  const toMilliseconds = () => {\n    switch (format) {\n      case \"ms\":\n        return value;\n      case \"s\":\n        return value * 1e3;\n      case \"m\":\n        return value * 1e3 * 60;\n      case \"h\":\n        return value * 1e3 * 60 * 60;\n      case \"d\":\n        return value * 1e3 * 60 * 60 * 24;\n      case \"w\":\n        return value * 1e3 * 60 * 60 * 24 * 7;\n      case \"y\":\n        return value * 1e3 * 60 * 60 * 24 * 365;\n    }\n  };\n  const time = {\n    t: `${value}${format}`,\n    value,\n    tFormat: format,\n    toMilliseconds,\n    toSeconds: () => time.toMilliseconds() / 1e3,\n    toMinutes: () => time.toSeconds() / 60,\n    toHours: () => time.toMinutes() / 60,\n    toDays: () => time.toHours() / 24,\n    toWeeks: () => time.toDays() / 7,\n    toYears: () => time.toDays() / 365,\n    getDate: () => new Date(Date.now() + time.toMilliseconds()),\n    add: (other) => {\n      const otherMs = typeof other === \"string\" ? parseTime(other).toMilliseconds() : other.toMilliseconds();\n      return createTime(time.toMilliseconds() + otherMs, \"ms\");\n    },\n    subtract: (other) => {\n      const otherMs = typeof other === \"string\" ? parseTime(other).toMilliseconds() : other.toMilliseconds();\n      return createTime(time.toMilliseconds() - otherMs, \"ms\");\n    },\n    multiply: (factor) => createTime(time.toMilliseconds() * factor, \"ms\"),\n    divide: (divisor) => createTime(time.toMilliseconds() / divisor, \"ms\"),\n    equals: (other) => {\n      const otherMs = typeof other === \"string\" ? parseTime(other).toMilliseconds() : other.toMilliseconds();\n      return time.toMilliseconds() === otherMs;\n    },\n    lessThan: (other) => {\n      const otherMs = typeof other === \"string\" ? parseTime(other).toMilliseconds() : other.toMilliseconds();\n      return time.toMilliseconds() < otherMs;\n    },\n    greaterThan: (other) => {\n      const otherMs = typeof other === \"string\" ? parseTime(other).toMilliseconds() : other.toMilliseconds();\n      return time.toMilliseconds() > otherMs;\n    },\n    format: (pattern) => {\n      const date = time.getDate();\n      return pattern.replace(/YYYY|MM|DD|HH|mm|ss/g, (match) => {\n        switch (match) {\n          case \"YYYY\":\n            return date.getFullYear().toString();\n          case \"MM\":\n            return (date.getMonth() + 1).toString().padStart(2, \"0\");\n          case \"DD\":\n            return date.getDate().toString().padStart(2, \"0\");\n          case \"HH\":\n            return date.getHours().toString().padStart(2, \"0\");\n          case \"mm\":\n            return date.getMinutes().toString().padStart(2, \"0\");\n          case \"ss\":\n            return date.getSeconds().toString().padStart(2, \"0\");\n          default:\n            return match;\n        }\n      });\n    },\n    fromNow: () => {\n      const ms = time.toMilliseconds();\n      if (ms < 0) return time.ago();\n      if (ms < 1e3) return \"in a few seconds\";\n      if (ms < 6e4) return `in ${Math.round(ms / 1e3)} seconds`;\n      if (ms < 36e5) return `in ${Math.round(ms / 6e4)} minutes`;\n      if (ms < 864e5) return `in ${Math.round(ms / 36e5)} hours`;\n      if (ms < 6048e5) return `in ${Math.round(ms / 864e5)} days`;\n      if (ms < 26298e5) return `in ${Math.round(ms / 6048e5)} weeks`;\n      if (ms < 315576e5) return `in ${Math.round(ms / 26298e5)} months`;\n      return `in ${Math.round(ms / 315576e5)} years`;\n    },\n    ago: () => {\n      const ms = -time.toMilliseconds();\n      if (ms < 0) return time.fromNow();\n      if (ms < 1e3) return \"a few seconds ago\";\n      if (ms < 6e4) return `${Math.round(ms / 1e3)} seconds ago`;\n      if (ms < 36e5) return `${Math.round(ms / 6e4)} minutes ago`;\n      if (ms < 864e5) return `${Math.round(ms / 36e5)} hours ago`;\n      if (ms < 6048e5) return `${Math.round(ms / 864e5)} days ago`;\n      if (ms < 26298e5) return `${Math.round(ms / 6048e5)} weeks ago`;\n      if (ms < 315576e5) return `${Math.round(ms / 26298e5)} months ago`;\n      return `${Math.round(ms / 315576e5)} years ago`;\n    }\n  };\n  return time;\n};\nvar parseTime = (time) => {\n  const match = time.match(/^(\\d+)(ms|s|m|h|d|w|y)$/);\n  if (!match) throw new Error(\"Invalid time format\");\n  return createTime(parseInt(match[1]), match[2]);\n};\n\n// src/cookies/cookie-utils.ts\nfunction parseSetCookieHeader(setCookie) {\n  const cookies = /* @__PURE__ */ new Map();\n  const cookieArray = setCookie.split(\", \");\n  cookieArray.forEach((cookieString) => {\n    const parts = cookieString.split(\";\").map((part) => part.trim());\n    const [nameValue, ...attributes] = parts;\n    const [name, ...valueParts] = nameValue.split(\"=\");\n    const value = valueParts.join(\"=\");\n    if (!name || value === void 0) {\n      return;\n    }\n    const attrObj = { value };\n    attributes.forEach((attribute) => {\n      const [attrName, ...attrValueParts] = attribute.split(\"=\");\n      const attrValue = attrValueParts.join(\"=\");\n      const normalizedAttrName = attrName.trim().toLowerCase();\n      switch (normalizedAttrName) {\n        case \"max-age\":\n          attrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n          break;\n        case \"expires\":\n          attrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n          break;\n        case \"domain\":\n          attrObj.domain = attrValue ? attrValue.trim() : void 0;\n          break;\n        case \"path\":\n          attrObj.path = attrValue ? attrValue.trim() : void 0;\n          break;\n        case \"secure\":\n          attrObj.secure = true;\n          break;\n        case \"httponly\":\n          attrObj.httponly = true;\n          break;\n        case \"samesite\":\n          attrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n          break;\n        default:\n          attrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n          break;\n      }\n    });\n    cookies.set(name, attrObj);\n  });\n  return cookies;\n}\n\n// src/cookies/index.ts\nfunction createCookieGetter(options) {\n  const secure = options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL !== void 0 ? options.baseURL.startsWith(\"https://\") ? true : false : isProduction;\n  const secureCookiePrefix = secure ? \"__Secure-\" : \"\";\n  const crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n  const domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n  if (crossSubdomainEnabled && !domain) {\n    throw new BetterAuthError(\n      \"baseURL is required when crossSubdomainCookies are enabled\"\n    );\n  }\n  function createCookie(cookieName, overrideAttributes = {}) {\n    const prefix = options.advanced?.cookiePrefix || \"better-auth\";\n    const name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n    const attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n    return {\n      name: `${secureCookiePrefix}${name}`,\n      attributes: {\n        secure: !!secureCookiePrefix,\n        sameSite: \"lax\",\n        path: \"/\",\n        httpOnly: true,\n        ...crossSubdomainEnabled ? { domain } : {},\n        ...options.advanced?.defaultCookieAttributes,\n        ...overrideAttributes,\n        ...attributes\n      }\n    };\n  }\n  return createCookie;\n}\nfunction getCookies(options) {\n  const createCookie = createCookieGetter(options);\n  const sessionMaxAge = options.session?.expiresIn || createTime(7, \"d\").toSeconds();\n  const sessionToken = createCookie(\"session_token\", {\n    maxAge: sessionMaxAge\n  });\n  const sessionData = createCookie(\"session_data\", {\n    maxAge: options.session?.cookieCache?.maxAge || 60 * 5\n  });\n  const dontRememberToken = createCookie(\"dont_remember\");\n  return {\n    sessionToken: {\n      name: sessionToken.name,\n      options: sessionToken.attributes\n    },\n    /**\n     * This cookie is used to store the session data in the cookie\n     * This is useful for when you want to cache the session in the cookie\n     */\n    sessionData: {\n      name: sessionData.name,\n      options: sessionData.attributes\n    },\n    dontRememberToken: {\n      name: dontRememberToken.name,\n      options: dontRememberToken.attributes\n    }\n  };\n}\nasync function setCookieCache(ctx, session) {\n  const shouldStoreSessionDataInCookie = ctx.context.options.session?.cookieCache?.enabled;\n  if (shouldStoreSessionDataInCookie) {\n    const data = base64Url.encode(\n      JSON.stringify({\n        session,\n        expiresAt: getDate(\n          ctx.context.authCookies.sessionData.options.maxAge || 60,\n          \"sec\"\n        ).getTime(),\n        signature: await createHMAC(\"SHA-256\", \"base64urlnopad\").sign(\n          ctx.context.secret,\n          JSON.stringify(session)\n        )\n      }),\n      {\n        padding: false\n      }\n    );\n    if (data.length > 4093) {\n      throw new BetterAuthError(\n        \"Session data is too large to store in the cookie. Please disable session cookie caching or reduce the size of the session data\"\n      );\n    }\n    ctx.setCookie(\n      ctx.context.authCookies.sessionData.name,\n      data,\n      ctx.context.authCookies.sessionData.options\n    );\n  }\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n  const options = ctx.context.authCookies.sessionToken.options;\n  const maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n  await ctx.setSignedCookie(\n    ctx.context.authCookies.sessionToken.name,\n    session.session.token,\n    ctx.context.secret,\n    {\n      ...options,\n      maxAge,\n      ...overrides\n    }\n  );\n  if (dontRememberMe) {\n    await ctx.setSignedCookie(\n      ctx.context.authCookies.dontRememberToken.name,\n      \"true\",\n      ctx.context.secret,\n      ctx.context.authCookies.dontRememberToken.options\n    );\n  }\n  await setCookieCache(ctx, session);\n  ctx.context.setNewSession(session);\n  if (ctx.context.options.secondaryStorage) {\n    await ctx.context.secondaryStorage?.set(\n      session.session.token,\n      JSON.stringify({\n        user: session.user,\n        session: session.session\n      }),\n      Math.floor(\n        (new Date(session.session.expiresAt).getTime() - Date.now()) / 1e3\n      )\n    );\n  }\n}\nfunction deleteSessionCookie(ctx) {\n  ctx.setCookie(ctx.context.authCookies.sessionToken.name, \"\", {\n    ...ctx.context.authCookies.sessionToken.options,\n    maxAge: 0\n  });\n  ctx.setCookie(ctx.context.authCookies.sessionData.name, \"\", {\n    ...ctx.context.authCookies.sessionData.options,\n    maxAge: 0\n  });\n  ctx.setCookie(ctx.context.authCookies.dontRememberToken.name, \"\", {\n    ...ctx.context.authCookies.dontRememberToken.options,\n    maxAge: 0\n  });\n}\nfunction parseCookies(cookieHeader) {\n  const cookies = cookieHeader.split(\"; \");\n  const cookieMap = /* @__PURE__ */ new Map();\n  cookies.forEach((cookie) => {\n    const [name, value] = cookie.split(\"=\");\n    cookieMap.set(name, value);\n  });\n  return cookieMap;\n}\n\nexport { createCookieGetter, deleteSessionCookie, getCookies, parseCookies, parseSetCookieHeader, setCookieCache, setSessionCookie };\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,oBAAoB;AACpB,IAAI,aAAa,CAAC,OAAO;IACvB,MAAM,iBAAiB;QACrB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO,QAAQ;YACjB,KAAK;gBACH,OAAO,QAAQ,MAAM;YACvB,KAAK;gBACH,OAAO,QAAQ,MAAM,KAAK;YAC5B,KAAK;gBACH,OAAO,QAAQ,MAAM,KAAK,KAAK;YACjC,KAAK;gBACH,OAAO,QAAQ,MAAM,KAAK,KAAK,KAAK;YACtC,KAAK;gBACH,OAAO,QAAQ,MAAM,KAAK,KAAK,KAAK;QACxC;IACF;IACA,MAAM,OAAO;QACX,GAAG,GAAG,QAAQ,QAAQ;QACtB;QACA,SAAS;QACT;QACA,WAAW,IAAM,KAAK,cAAc,KAAK;QACzC,WAAW,IAAM,KAAK,SAAS,KAAK;QACpC,SAAS,IAAM,KAAK,SAAS,KAAK;QAClC,QAAQ,IAAM,KAAK,OAAO,KAAK;QAC/B,SAAS,IAAM,KAAK,MAAM,KAAK;QAC/B,SAAS,IAAM,KAAK,MAAM,KAAK;QAC/B,SAAS,IAAM,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,cAAc;QACxD,KAAK,CAAC;YACJ,MAAM,UAAU,OAAO,UAAU,WAAW,UAAU,OAAO,cAAc,KAAK,MAAM,cAAc;YACpG,OAAO,WAAW,KAAK,cAAc,KAAK,SAAS;QACrD;QACA,UAAU,CAAC;YACT,MAAM,UAAU,OAAO,UAAU,WAAW,UAAU,OAAO,cAAc,KAAK,MAAM,cAAc;YACpG,OAAO,WAAW,KAAK,cAAc,KAAK,SAAS;QACrD;QACA,UAAU,CAAC,SAAW,WAAW,KAAK,cAAc,KAAK,QAAQ;QACjE,QAAQ,CAAC,UAAY,WAAW,KAAK,cAAc,KAAK,SAAS;QACjE,QAAQ,CAAC;YACP,MAAM,UAAU,OAAO,UAAU,WAAW,UAAU,OAAO,cAAc,KAAK,MAAM,cAAc;YACpG,OAAO,KAAK,cAAc,OAAO;QACnC;QACA,UAAU,CAAC;YACT,MAAM,UAAU,OAAO,UAAU,WAAW,UAAU,OAAO,cAAc,KAAK,MAAM,cAAc;YACpG,OAAO,KAAK,cAAc,KAAK;QACjC;QACA,aAAa,CAAC;YACZ,MAAM,UAAU,OAAO,UAAU,WAAW,UAAU,OAAO,cAAc,KAAK,MAAM,cAAc;YACpG,OAAO,KAAK,cAAc,KAAK;QACjC;QACA,QAAQ,CAAC;YACP,MAAM,OAAO,KAAK,OAAO;YACzB,OAAO,QAAQ,OAAO,CAAC,wBAAwB,CAAC;gBAC9C,OAAQ;oBACN,KAAK;wBACH,OAAO,KAAK,WAAW,GAAG,QAAQ;oBACpC,KAAK;wBACH,OAAO,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;oBACtD,KAAK;wBACH,OAAO,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;oBAC/C,KAAK;wBACH,OAAO,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;oBAChD,KAAK;wBACH,OAAO,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;oBAClD,KAAK;wBACH,OAAO,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;oBAClD;wBACE,OAAO;gBACX;YACF;QACF;QACA,SAAS;YACP,MAAM,KAAK,KAAK,cAAc;YAC9B,IAAI,KAAK,GAAG,OAAO,KAAK,GAAG;YAC3B,IAAI,KAAK,KAAK,OAAO;YACrB,IAAI,KAAK,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,KAAK,QAAQ,CAAC;YACzD,IAAI,KAAK,MAAM,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,KAAK,QAAQ,CAAC;YAC1D,IAAI,KAAK,OAAO,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,MAAM,MAAM,CAAC;YAC1D,IAAI,KAAK,QAAQ,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,OAAO,KAAK,CAAC;YAC3D,IAAI,KAAK,SAAS,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,QAAQ,MAAM,CAAC;YAC9D,IAAI,KAAK,UAAU,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,SAAS,OAAO,CAAC;YACjE,OAAO,CAAC,GAAG,EAAE,KAAK,KAAK,CAAC,KAAK,UAAU,MAAM,CAAC;QAChD;QACA,KAAK;YACH,MAAM,KAAK,CAAC,KAAK,cAAc;YAC/B,IAAI,KAAK,GAAG,OAAO,KAAK,OAAO;YAC/B,IAAI,KAAK,KAAK,OAAO;YACrB,IAAI,KAAK,KAAK,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,KAAK,YAAY,CAAC;YAC1D,IAAI,KAAK,MAAM,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,KAAK,YAAY,CAAC;YAC3D,IAAI,KAAK,OAAO,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,MAAM,UAAU,CAAC;YAC3D,IAAI,KAAK,QAAQ,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,OAAO,SAAS,CAAC;YAC5D,IAAI,KAAK,SAAS,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,QAAQ,UAAU,CAAC;YAC/D,IAAI,KAAK,UAAU,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,SAAS,WAAW,CAAC;YAClE,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,UAAU,UAAU,CAAC;QACjD;IACF;IACA,OAAO;AACT;AACA,IAAI,YAAY,CAAC;IACf,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;IAC5B,OAAO,WAAW,SAAS,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE;AAChD;AAEA,8BAA8B;AAC9B,SAAS,qBAAqB,SAAS;IACrC,MAAM,UAAU,aAAa,GAAG,IAAI;IACpC,MAAM,cAAc,UAAU,KAAK,CAAC;IACpC,YAAY,OAAO,CAAC,CAAC;QACnB,MAAM,QAAQ,aAAa,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,OAAS,KAAK,IAAI;QAC7D,MAAM,CAAC,WAAW,GAAG,WAAW,GAAG;QACnC,MAAM,CAAC,MAAM,GAAG,WAAW,GAAG,UAAU,KAAK,CAAC;QAC9C,MAAM,QAAQ,WAAW,IAAI,CAAC;QAC9B,IAAI,CAAC,QAAQ,UAAU,KAAK,GAAG;YAC7B;QACF;QACA,MAAM,UAAU;YAAE;QAAM;QACxB,WAAW,OAAO,CAAC,CAAC;YAClB,MAAM,CAAC,UAAU,GAAG,eAAe,GAAG,UAAU,KAAK,CAAC;YACtD,MAAM,YAAY,eAAe,IAAI,CAAC;YACtC,MAAM,qBAAqB,SAAS,IAAI,GAAG,WAAW;YACtD,OAAQ;gBACN,KAAK;oBACH,OAAO,CAAC,UAAU,GAAG,YAAY,SAAS,UAAU,IAAI,IAAI,MAAM,KAAK;oBACvE;gBACF,KAAK;oBACH,QAAQ,OAAO,GAAG,YAAY,IAAI,KAAK,UAAU,IAAI,MAAM,KAAK;oBAChE;gBACF,KAAK;oBACH,QAAQ,MAAM,GAAG,YAAY,UAAU,IAAI,KAAK,KAAK;oBACrD;gBACF,KAAK;oBACH,QAAQ,IAAI,GAAG,YAAY,UAAU,IAAI,KAAK,KAAK;oBACnD;gBACF,KAAK;oBACH,QAAQ,MAAM,GAAG;oBACjB;gBACF,KAAK;oBACH,QAAQ,QAAQ,GAAG;oBACnB;gBACF,KAAK;oBACH,QAAQ,QAAQ,GAAG,YAAY,UAAU,IAAI,GAAG,WAAW,KAAK,KAAK;oBACrE;gBACF;oBACE,OAAO,CAAC,mBAAmB,GAAG,YAAY,UAAU,IAAI,KAAK;oBAC7D;YACJ;QACF;QACA,QAAQ,GAAG,CAAC,MAAM;IACpB;IACA,OAAO;AACT;AAEA,uBAAuB;AACvB,SAAS,mBAAmB,OAAO;IACjC,MAAM,SAAS,QAAQ,QAAQ,EAAE,qBAAqB,KAAK,IAAI,QAAQ,QAAQ,EAAE,mBAAmB,QAAQ,OAAO,KAAK,KAAK,IAAI,QAAQ,OAAO,CAAC,UAAU,CAAC,cAAc,OAAO,QAAQ,6JAAA,CAAA,eAAY;IACrM,MAAM,qBAAqB,SAAS,cAAc;IAClD,MAAM,wBAAwB,CAAC,CAAC,QAAQ,QAAQ,EAAE,uBAAuB;IACzE,MAAM,SAAS,wBAAwB,QAAQ,QAAQ,EAAE,uBAAuB,UAAU,CAAC,QAAQ,OAAO,GAAG,IAAI,IAAI,QAAQ,OAAO,EAAE,QAAQ,GAAG,KAAK,CAAC,IAAI,KAAK;IAChK,IAAI,yBAAyB,CAAC,QAAQ;QACpC,MAAM,IAAI,6JAAA,CAAA,kBAAe,CACvB;IAEJ;IACA,SAAS,aAAa,UAAU,EAAE,qBAAqB,CAAC,CAAC;QACvD,MAAM,SAAS,QAAQ,QAAQ,EAAE,gBAAgB;QACjD,MAAM,OAAO,QAAQ,QAAQ,EAAE,SAAS,CAAC,WAAW,EAAE,QAAQ,GAAG,OAAO,CAAC,EAAE,YAAY;QACvF,MAAM,aAAa,QAAQ,QAAQ,EAAE,SAAS,CAAC,WAAW,EAAE;QAC5D,OAAO;YACL,MAAM,GAAG,qBAAqB,MAAM;YACpC,YAAY;gBACV,QAAQ,CAAC,CAAC;gBACV,UAAU;gBACV,MAAM;gBACN,UAAU;gBACV,GAAG,wBAAwB;oBAAE;gBAAO,IAAI,CAAC,CAAC;gBAC1C,GAAG,QAAQ,QAAQ,EAAE,uBAAuB;gBAC5C,GAAG,kBAAkB;gBACrB,GAAG,UAAU;YACf;QACF;IACF;IACA,OAAO;AACT;AACA,SAAS,WAAW,OAAO;IACzB,MAAM,eAAe,mBAAmB;IACxC,MAAM,gBAAgB,QAAQ,OAAO,EAAE,aAAa,WAAW,GAAG,KAAK,SAAS;IAChF,MAAM,eAAe,aAAa,iBAAiB;QACjD,QAAQ;IACV;IACA,MAAM,cAAc,aAAa,gBAAgB;QAC/C,QAAQ,QAAQ,OAAO,EAAE,aAAa,UAAU,KAAK;IACvD;IACA,MAAM,oBAAoB,aAAa;IACvC,OAAO;QACL,cAAc;YACZ,MAAM,aAAa,IAAI;YACvB,SAAS,aAAa,UAAU;QAClC;QACA;;;KAGC,GACD,aAAa;YACX,MAAM,YAAY,IAAI;YACtB,SAAS,YAAY,UAAU;QACjC;QACA,mBAAmB;YACjB,MAAM,kBAAkB,IAAI;YAC5B,SAAS,kBAAkB,UAAU;QACvC;IACF;AACF;AACA,eAAe,eAAe,GAAG,EAAE,OAAO;IACxC,MAAM,iCAAiC,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,aAAa;IACjF,IAAI,gCAAgC;QAClC,MAAM,OAAO,8JAAA,CAAA,YAAS,CAAC,MAAM,CAC3B,KAAK,SAAS,CAAC;YACb;YACA,WAAW,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EACf,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,IAAI,IACtD,OACA,OAAO;YACT,WAAW,MAAM,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EAAE,WAAW,kBAAkB,IAAI,CAC3D,IAAI,OAAO,CAAC,MAAM,EAClB,KAAK,SAAS,CAAC;QAEnB,IACA;YACE,SAAS;QACX;QAEF,IAAI,KAAK,MAAM,GAAG,MAAM;YACtB,MAAM,IAAI,6JAAA,CAAA,kBAAe,CACvB;QAEJ;QACA,IAAI,SAAS,CACX,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EACxC,MACA,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO;IAE/C;AACF;AACA,eAAe,iBAAiB,GAAG,EAAE,OAAO,EAAE,cAAc,EAAE,SAAS;IACrE,MAAM,UAAU,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO;IAC5D,MAAM,SAAS,iBAAiB,KAAK,IAAI,IAAI,OAAO,CAAC,aAAa,CAAC,SAAS;IAC5E,MAAM,IAAI,eAAe,CACvB,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EACzC,QAAQ,OAAO,CAAC,KAAK,EACrB,IAAI,OAAO,CAAC,MAAM,EAClB;QACE,GAAG,OAAO;QACV;QACA,GAAG,SAAS;IACd;IAEF,IAAI,gBAAgB;QAClB,MAAM,IAAI,eAAe,CACvB,IAAI,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,EAC9C,QACA,IAAI,OAAO,CAAC,MAAM,EAClB,IAAI,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,OAAO;IAErD;IACA,MAAM,eAAe,KAAK;IAC1B,IAAI,OAAO,CAAC,aAAa,CAAC;IAC1B,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE;QACxC,MAAM,IAAI,OAAO,CAAC,gBAAgB,EAAE,IAClC,QAAQ,OAAO,CAAC,KAAK,EACrB,KAAK,SAAS,CAAC;YACb,MAAM,QAAQ,IAAI;YAClB,SAAS,QAAQ,OAAO;QAC1B,IACA,KAAK,KAAK,CACR,CAAC,IAAI,KAAK,QAAQ,OAAO,CAAC,SAAS,EAAE,OAAO,KAAK,KAAK,GAAG,EAAE,IAAI;IAGrE;AACF;AACA,SAAS,oBAAoB,GAAG;IAC9B,IAAI,SAAS,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI;QAC3D,GAAG,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO;QAC/C,QAAQ;IACV;IACA,IAAI,SAAS,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI;QAC1D,GAAG,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO;QAC9C,QAAQ;IACV;IACA,IAAI,SAAS,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI;QAChE,GAAG,IAAI,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,OAAO;QACpD,QAAQ;IACV;AACF;AACA,SAAS,aAAa,YAAY;IAChC,MAAM,UAAU,aAAa,KAAK,CAAC;IACnC,MAAM,YAAY,aAAa,GAAG,IAAI;IACtC,QAAQ,OAAO,CAAC,CAAC;QACf,MAAM,CAAC,MAAM,MAAM,GAAG,OAAO,KAAK,CAAC;QACnC,UAAU,GAAG,CAAC,MAAM;IACtB;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1709, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1715, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-72KRA3CK.js"],"sourcesContent":["import { isTest } from './chunk-TQQSPPNA.js';\nimport { z } from 'zod';\nimport { APIError } from 'better-call';\n\nvar accountSchema = z.object({\n  id: z.string(),\n  providerId: z.string(),\n  accountId: z.string(),\n  userId: z.string(),\n  accessToken: z.string().nullish(),\n  refreshToken: z.string().nullish(),\n  idToken: z.string().nullish(),\n  /**\n   * Access token expires at\n   */\n  accessTokenExpiresAt: z.date().nullish(),\n  /**\n   * Refresh token expires at\n   */\n  refreshTokenExpiresAt: z.date().nullish(),\n  /**\n   * The scopes that the user has authorized\n   */\n  scope: z.string().nullish(),\n  /**\n   * Password is only stored in the credential provider\n   */\n  password: z.string().nullish(),\n  createdAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\nvar userSchema = z.object({\n  id: z.string(),\n  email: z.string().transform((val) => val.toLowerCase()),\n  emailVerified: z.boolean().default(false),\n  name: z.string(),\n  image: z.string().nullish(),\n  createdAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\nvar sessionSchema = z.object({\n  id: z.string(),\n  userId: z.string(),\n  expiresAt: z.date(),\n  createdAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  token: z.string(),\n  ipAddress: z.string().nullish(),\n  userAgent: z.string().nullish()\n});\nvar verificationSchema = z.object({\n  id: z.string(),\n  value: z.string(),\n  createdAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  expiresAt: z.date(),\n  identifier: z.string()\n});\nfunction parseOutputData(data, schema) {\n  const fields = schema.fields;\n  const parsedData = {};\n  for (const key in data) {\n    const field = fields[key];\n    if (!field) {\n      parsedData[key] = data[key];\n      continue;\n    }\n    if (field.returned === false) {\n      continue;\n    }\n    parsedData[key] = data[key];\n  }\n  return parsedData;\n}\nfunction getAllFields(options, table) {\n  let schema = {\n    ...table === \"user\" ? options.user?.additionalFields : {},\n    ...table === \"session\" ? options.session?.additionalFields : {}\n  };\n  for (const plugin of options.plugins || []) {\n    if (plugin.schema && plugin.schema[table]) {\n      schema = {\n        ...schema,\n        ...plugin.schema[table].fields\n      };\n    }\n  }\n  return schema;\n}\nfunction parseUserOutput(options, user) {\n  const schema = getAllFields(options, \"user\");\n  return parseOutputData(user, { fields: schema });\n}\nfunction parseAccountOutput(options, account) {\n  const schema = getAllFields(options, \"account\");\n  return parseOutputData(account, { fields: schema });\n}\nfunction parseSessionOutput(options, session) {\n  const schema = getAllFields(options, \"session\");\n  return parseOutputData(session, { fields: schema });\n}\nfunction parseInputData(data, schema) {\n  const action = schema.action || \"create\";\n  const fields = schema.fields;\n  const parsedData = {};\n  for (const key in fields) {\n    if (key in data) {\n      if (fields[key].input === false) {\n        if (fields[key].defaultValue) {\n          parsedData[key] = fields[key].defaultValue;\n          continue;\n        }\n        continue;\n      }\n      if (fields[key].validator?.input && data[key] !== void 0) {\n        parsedData[key] = fields[key].validator.input.parse(data[key]);\n        continue;\n      }\n      if (fields[key].transform?.input && data[key] !== void 0) {\n        parsedData[key] = fields[key].transform?.input(data[key]);\n        continue;\n      }\n      parsedData[key] = data[key];\n      continue;\n    }\n    if (fields[key].defaultValue && action === \"create\") {\n      parsedData[key] = fields[key].defaultValue;\n      continue;\n    }\n    if (fields[key].required && action === \"create\") {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `${key} is required`\n      });\n    }\n  }\n  return parsedData;\n}\nfunction parseUserInput(options, user, action) {\n  const schema = getAllFields(options, \"user\");\n  return parseInputData(user || {}, { fields: schema, action });\n}\nfunction parseAdditionalUserInput(options, user) {\n  const schema = getAllFields(options, \"user\");\n  return parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n  const schema = getAllFields(options, \"account\");\n  return parseInputData(account, { fields: schema });\n}\nfunction parseSessionInput(options, session) {\n  const schema = getAllFields(options, \"session\");\n  return parseInputData(session, { fields: schema });\n}\nfunction mergeSchema(schema, newSchema) {\n  if (!newSchema) {\n    return schema;\n  }\n  for (const table in newSchema) {\n    const newModelName = newSchema[table]?.modelName;\n    if (newModelName) {\n      schema[table].modelName = newModelName;\n    }\n    for (const field in schema[table].fields) {\n      const newField = newSchema[table]?.fields?.[field];\n      if (!newField) {\n        continue;\n      }\n      schema[table].fields[field].fieldName = newField;\n    }\n  }\n  return schema;\n}\n\n// src/utils/json.ts\nfunction safeJSONParse(data) {\n  try {\n    return JSON.parse(data);\n  } catch {\n    return null;\n  }\n}\n\n// src/utils/get-request-ip.ts\nfunction getIp(req, options) {\n  if (options.advanced?.ipAddress?.disableIpTracking) {\n    return null;\n  }\n  const testIP = \"127.0.0.1\";\n  if (isTest) {\n    return testIP;\n  }\n  const ipHeaders = options.advanced?.ipAddress?.ipAddressHeaders;\n  const keys = ipHeaders || [\n    \"x-client-ip\",\n    \"x-forwarded-for\",\n    \"cf-connecting-ip\",\n    \"fastly-client-ip\",\n    \"x-real-ip\",\n    \"x-cluster-client-ip\",\n    \"x-forwarded\",\n    \"forwarded-for\",\n    \"forwarded\"\n  ];\n  const headers = req instanceof Request ? req.headers : req;\n  for (const key of keys) {\n    const value = headers.get(key);\n    if (typeof value === \"string\") {\n      const ip = value.split(\",\")[0].trim();\n      if (ip) return ip;\n    }\n  }\n  return null;\n}\n\nexport { accountSchema, getAllFields, getIp, mergeSchema, parseAccountInput, parseAccountOutput, parseAdditionalUserInput, parseInputData, parseOutputData, parseSessionInput, parseSessionOutput, parseUserInput, parseUserOutput, safeJSONParse, sessionSchema, userSchema, verificationSchema };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1959, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1965, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-DBPOZRMS.js"],"sourcesContent":["import { createHash } from '@better-auth/utils/hash';\nimport { xchacha20poly1305 } from '@noble/ciphers/chacha';\nimport { utf8ToBytes, bytesToHex, hexToBytes } from '@noble/ciphers/utils';\nimport { managedNonce } from '@noble/ciphers/webcrypto';\nimport { SignJWT } from 'jose';\nimport { scryptAsync } from '@noble/hashes/scrypt';\nimport { getRandomValues } from '@better-auth/utils';\nimport { hex } from '@better-auth/utils/hex';\nimport { createRandomStringGenerator } from '@better-auth/utils/random';\n\n// src/crypto/index.ts\n\n// src/crypto/buffer.ts\nfunction constantTimeEqual(a, b) {\n  const aBuffer = new Uint8Array(a);\n  const bBuffer = new Uint8Array(b);\n  if (aBuffer.length !== bBuffer.length) {\n    return false;\n  }\n  let c = 0;\n  for (let i = 0; i < aBuffer.length; i++) {\n    c |= aBuffer[i] ^ bBuffer[i];\n  }\n  return c === 0;\n}\nasync function hashToBase64(data) {\n  const buffer = await createHash(\"SHA-256\").digest(data);\n  return Buffer.from(buffer).toString(\"base64\");\n}\nasync function compareHash(data, hash) {\n  const buffer = await createHash(\"SHA-256\").digest(\n    typeof data === \"string\" ? new TextEncoder().encode(data) : data\n  );\n  const hashBuffer = Buffer.from(hash, \"base64\");\n  return constantTimeEqual(buffer, hashBuffer);\n}\nasync function signJWT(payload, secret, expiresIn = 3600) {\n  const jwt = await new SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n  return jwt;\n}\nvar config = {\n  N: 16384,\n  r: 16,\n  p: 1,\n  dkLen: 64\n};\nasync function generateKey(password, salt) {\n  return await scryptAsync(password.normalize(\"NFKC\"), salt, {\n    N: config.N,\n    p: config.p,\n    r: config.r,\n    dkLen: config.dkLen,\n    maxmem: 128 * config.N * config.r * 2\n  });\n}\nvar hashPassword = async (password) => {\n  const salt = hex.encode(getRandomValues(new Uint8Array(16)));\n  const key = await generateKey(password, salt);\n  return `${salt}:${hex.encode(key)}`;\n};\nvar verifyPassword = async ({\n  hash,\n  password\n}) => {\n  const [salt, key] = hash.split(\":\");\n  const targetKey = await generateKey(password, salt);\n  return constantTimeEqual(targetKey, new Uint8Array(Buffer.from(key, \"hex\")));\n};\nvar generateRandomString = createRandomStringGenerator(\n  \"a-z\",\n  \"0-9\",\n  \"A-Z\",\n  \"-_\"\n);\n\n// src/crypto/index.ts\nvar symmetricEncrypt = async ({\n  key,\n  data\n}) => {\n  const keyAsBytes = await createHash(\"SHA-256\").digest(key);\n  const dataAsBytes = utf8ToBytes(data);\n  const chacha = managedNonce(xchacha20poly1305)(new Uint8Array(keyAsBytes));\n  return bytesToHex(chacha.encrypt(dataAsBytes));\n};\nvar symmetricDecrypt = async ({\n  key,\n  data\n}) => {\n  const keyAsBytes = await createHash(\"SHA-256\").digest(key);\n  const dataAsBytes = hexToBytes(data);\n  const chacha = managedNonce(xchacha20poly1305)(new Uint8Array(keyAsBytes));\n  return new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\n\nexport { compareHash, constantTimeEqual, generateRandomString, hashPassword, hashToBase64, signJWT, symmetricDecrypt, symmetricEncrypt, verifyPassword };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2064, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2070, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-NPO64SVN.js"],"sourcesContent":["import { generateRandomString } from './chunk-DBPOZRMS.js';\nimport { z } from 'zod';\nimport { APIError } from 'better-call';\n\nasync function generateState(c, link) {\n  const callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n  if (!callbackURL) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"callbackURL is required\"\n    });\n  }\n  const codeVerifier = generateRandomString(128);\n  const state = generateRandomString(32);\n  const data = JSON.stringify({\n    callbackURL,\n    codeVerifier,\n    errorURL: c.body?.errorCallbackURL,\n    newUserURL: c.body?.newUserCallbackURL,\n    link,\n    /**\n     * This is the actual expiry time of the state\n     */\n    expiresAt: Date.now() + 10 * 60 * 1e3\n  });\n  const expiresAt = /* @__PURE__ */ new Date();\n  expiresAt.setMinutes(expiresAt.getMinutes() + 10);\n  const verification = await c.context.internalAdapter.createVerificationValue({\n    value: data,\n    identifier: state,\n    expiresAt\n  });\n  if (!verification) {\n    c.context.logger.error(\n      \"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\"\n    );\n    throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n      message: \"Unable to create verification\"\n    });\n  }\n  return {\n    state: verification.identifier,\n    codeVerifier\n  };\n}\nasync function parseState(c) {\n  const state = c.query.state || c.body.state;\n  const data = await c.context.internalAdapter.findVerificationValue(state);\n  if (!data) {\n    c.context.logger.error(\"State Mismatch. Verification not found\", {\n      state\n    });\n    throw c.redirect(\n      `${c.context.baseURL}/error?error=please_restart_the_process`\n    );\n  }\n  const parsedData = z.object({\n    callbackURL: z.string(),\n    codeVerifier: z.string(),\n    errorURL: z.string().optional(),\n    newUserURL: z.string().optional(),\n    expiresAt: z.number(),\n    link: z.object({\n      email: z.string(),\n      userId: z.string()\n    }).optional()\n  }).parse(JSON.parse(data.value));\n  if (!parsedData.errorURL) {\n    parsedData.errorURL = `${c.context.baseURL}/error`;\n  }\n  if (parsedData.expiresAt < Date.now()) {\n    await c.context.internalAdapter.deleteVerificationValue(data.id);\n    c.context.logger.error(\"State expired.\", {\n      state\n    });\n    throw c.redirect(\n      `${c.context.baseURL}/error?error=please_restart_the_process`\n    );\n  }\n  await c.context.internalAdapter.deleteVerificationValue(data.id);\n  return parsedData;\n}\n\nexport { generateState, parseState };\n"],"names":[],"mappings":";;;;AAAA;AAEA;AADA;;;;AAGA,eAAe,cAAc,CAAC,EAAE,IAAI;IAClC,MAAM,cAAc,EAAE,IAAI,EAAE,eAAe,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO;IACpE,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE;IAC1C,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE;IACnC,MAAM,OAAO,KAAK,SAAS,CAAC;QAC1B;QACA;QACA,UAAU,EAAE,IAAI,EAAE;QAClB,YAAY,EAAE,IAAI,EAAE;QACpB;QACA;;KAEC,GACD,WAAW,KAAK,GAAG,KAAK,KAAK,KAAK;IACpC;IACA,MAAM,YAAY,aAAa,GAAG,IAAI;IACtC,UAAU,UAAU,CAAC,UAAU,UAAU,KAAK;IAC9C,MAAM,eAAe,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC;QAC3E,OAAO;QACP,YAAY;QACZ;IACF;IACA,IAAI,CAAC,cAAc;QACjB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CACpB;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,yBAAyB;YAC1C,SAAS;QACX;IACF;IACA,OAAO;QACL,OAAO,aAAa,UAAU;QAC9B;IACF;AACF;AACA,eAAe,WAAW,CAAC;IACzB,MAAM,QAAQ,EAAE,KAAK,CAAC,KAAK,IAAI,EAAE,IAAI,CAAC,KAAK;IAC3C,MAAM,OAAO,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAAC;IACnE,IAAI,CAAC,MAAM;QACT,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,0CAA0C;YAC/D;QACF;QACA,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,uCAAuC,CAAC;IAEjE;IACA,MAAM,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QAC1B,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM;QACrB,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM;QACtB,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC7B,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC/B,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM;QACnB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;YACf,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;QAClB,GAAG,QAAQ;IACb,GAAG,KAAK,CAAC,KAAK,KAAK,CAAC,KAAK,KAAK;IAC9B,IAAI,CAAC,WAAW,QAAQ,EAAE;QACxB,WAAW,QAAQ,GAAG,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;IACpD;IACA,IAAI,WAAW,SAAS,GAAG,KAAK,GAAG,IAAI;QACrC,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,KAAK,EAAE;QAC/D,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,kBAAkB;YACvC;QACF;QACA,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,uCAAuC,CAAC;IAEjE;IACA,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,KAAK,EAAE;IAC/D,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 2151, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2157, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-FUJTYWXL.js"],"sourcesContent":["import { SocialProviderListEnum, socialProviderList } from './chunk-GB5YTBLA.js';\nimport { getHost, getProtocol, getOrigin } from './chunk-XFCIANZX.js';\nimport { setSessionCookie, deleteSessionCookie, setCookieCache } from './chunk-IWEXZ2ES.js';\nimport { safeJSONParse, parseUserInput, getIp } from './chunk-72KRA3CK.js';\nimport { HIDE_METADATA, generateId, logger } from './chunk-KLDFBLYL.js';\nimport { generateState, parseState } from './chunk-NPO64SVN.js';\nimport { generateRandomString, signJWT } from './chunk-DBPOZRMS.js';\nimport { getDate } from './chunk-FURNA6HY.js';\nimport { isDevelopment } from './chunk-TQQSPPNA.js';\nimport { createMiddleware, createMiddlewareCreator, createEndpointCreator, APIError, setCookie, getCookie, getSignedCookie, setSignedCookie, createRouter } from 'better-call';\nexport { APIError } from 'better-call';\nimport { z } from 'zod';\nimport { createHMAC } from '@better-auth/utils/hmac';\nimport { base64 } from '@better-auth/utils/base64';\nimport { binary } from '@better-auth/utils/binary';\nimport { jwtVerify } from 'jose';\nimport { JWTExpired } from 'jose/errors';\n\nvar optionsMiddleware = createMiddleware(async () => {\n  return {};\n});\nvar createAuthMiddleware = createMiddlewareCreator({\n  use: [\n    optionsMiddleware,\n    /**\n     * Only use for post hooks\n     */\n    createMiddleware(async () => {\n      return {};\n    })\n  ]\n});\nvar createAuthEndpoint = createEndpointCreator({\n  use: [optionsMiddleware]\n});\n\n// src/utils/wildcard.ts\nfunction escapeRegExpChar(char) {\n  if (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") {\n    return `\\\\${char}`;\n  } else {\n    return char;\n  }\n}\nfunction escapeRegExpString(str) {\n  let result = \"\";\n  for (let i = 0; i < str.length; i++) {\n    result += escapeRegExpChar(str[i]);\n  }\n  return result;\n}\nfunction transform(pattern, separator = true) {\n  if (Array.isArray(pattern)) {\n    let regExpPatterns = pattern.map((p) => `^${transform(p, separator)}$`);\n    return `(?:${regExpPatterns.join(\"|\")})`;\n  }\n  let separatorSplitter = \"\";\n  let separatorMatcher = \"\";\n  let wildcard = \".\";\n  if (separator === true) {\n    separatorSplitter = \"/\";\n    separatorMatcher = \"[/\\\\\\\\]\";\n    wildcard = \"[^/\\\\\\\\]\";\n  } else if (separator) {\n    separatorSplitter = separator;\n    separatorMatcher = escapeRegExpString(separatorSplitter);\n    if (separatorMatcher.length > 1) {\n      separatorMatcher = `(?:${separatorMatcher})`;\n      wildcard = `((?!${separatorMatcher}).)`;\n    } else {\n      wildcard = `[^${separatorMatcher}]`;\n    }\n  }\n  let requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n  let optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n  let segments = separator ? pattern.split(separatorSplitter) : [pattern];\n  let result = \"\";\n  for (let s = 0; s < segments.length; s++) {\n    let segment = segments[s];\n    let nextSegment = segments[s + 1];\n    let currentSeparator = \"\";\n    if (!segment && s > 0) {\n      continue;\n    }\n    if (separator) {\n      if (s === segments.length - 1) {\n        currentSeparator = optionalSeparator;\n      } else if (nextSegment !== \"**\") {\n        currentSeparator = requiredSeparator;\n      } else {\n        currentSeparator = \"\";\n      }\n    }\n    if (separator && segment === \"**\") {\n      if (currentSeparator) {\n        result += s === 0 ? \"\" : currentSeparator;\n        result += `(?:${wildcard}*?${currentSeparator})*?`;\n      }\n      continue;\n    }\n    for (let c = 0; c < segment.length; c++) {\n      let char = segment[c];\n      if (char === \"\\\\\") {\n        if (c < segment.length - 1) {\n          result += escapeRegExpChar(segment[c + 1]);\n          c++;\n        }\n      } else if (char === \"?\") {\n        result += wildcard;\n      } else if (char === \"*\") {\n        result += `${wildcard}*?`;\n      } else {\n        result += escapeRegExpChar(char);\n      }\n    }\n    result += currentSeparator;\n  }\n  return result;\n}\nfunction isMatch(regexp, sample) {\n  if (typeof sample !== \"string\") {\n    throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n  }\n  return regexp.test(sample);\n}\nfunction wildcardMatch(pattern, options) {\n  if (typeof pattern !== \"string\" && !Array.isArray(pattern)) {\n    throw new TypeError(\n      `The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`\n    );\n  }\n  if (typeof options === \"string\" || typeof options === \"boolean\") {\n    options = { separator: options };\n  }\n  if (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) {\n    throw new TypeError(\n      `The second argument must be an options object or a string/boolean separator, but ${typeof options} given`\n    );\n  }\n  options = options || {};\n  if (options.separator === \"\\\\\") {\n    throw new Error(\n      \"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\"\n    );\n  }\n  let regexpPattern = transform(pattern, options.separator);\n  let regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n  let fn = isMatch.bind(null, regexp);\n  fn.options = options;\n  fn.pattern = pattern;\n  fn.regexp = regexp;\n  return fn;\n}\n\n// src/api/middlewares/origin-check.ts\nvar originCheckMiddleware = createAuthMiddleware(async (ctx) => {\n  if (ctx.request?.method !== \"POST\") {\n    return;\n  }\n  const { body, query, context } = ctx;\n  const originHeader = ctx.headers?.get(\"origin\") || ctx.headers?.get(\"referer\") || \"\";\n  const callbackURL = body?.callbackURL || query?.callbackURL;\n  const redirectURL = body?.redirectTo;\n  const errorCallbackURL = body?.errorCallbackURL;\n  const newUserCallbackURL = body?.newUserCallbackURL;\n  const trustedOrigins = context.trustedOrigins;\n  const usesCookies = ctx.headers?.has(\"cookie\");\n  const matchesPattern = (url, pattern) => {\n    if (url.startsWith(\"/\")) {\n      return false;\n    }\n    if (pattern.includes(\"*\")) {\n      return wildcardMatch(pattern)(getHost(url));\n    }\n    const protocol = getProtocol(url);\n    return protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === getOrigin(url) : url.startsWith(pattern);\n  };\n  const validateURL = (url, label) => {\n    if (!url) {\n      return;\n    }\n    const isTrustedOrigin = trustedOrigins.some(\n      (origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && !url.includes(\":\")\n    );\n    if (!isTrustedOrigin) {\n      ctx.context.logger.error(`Invalid ${label}: ${url}`);\n      ctx.context.logger.info(\n        `If it's a valid URL, please add ${url} to trustedOrigins in your auth config\n`,\n        `Current list of trustedOrigins: ${trustedOrigins}`\n      );\n      throw new APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n    }\n  };\n  if (usesCookies && !ctx.context.options.advanced?.disableCSRFCheck) {\n    validateURL(originHeader, \"origin\");\n  }\n  callbackURL && validateURL(callbackURL, \"callbackURL\");\n  redirectURL && validateURL(redirectURL, \"redirectURL\");\n  errorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n  newUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nvar originCheck = (getValue) => createAuthMiddleware(async (ctx) => {\n  const { context } = ctx;\n  const callbackURL = getValue(ctx);\n  const trustedOrigins = context.trustedOrigins;\n  const matchesPattern = (url, pattern) => {\n    if (url.startsWith(\"/\")) {\n      return false;\n    }\n    if (pattern.includes(\"*\")) {\n      return wildcardMatch(pattern)(getHost(url));\n    }\n    return url.startsWith(pattern);\n  };\n  const validateURL = (url, label) => {\n    if (!url) {\n      return;\n    }\n    const isTrustedOrigin = trustedOrigins.some(\n      (origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && !url.includes(\":\")\n    );\n    if (!isTrustedOrigin) {\n      ctx.context.logger.error(`Invalid ${label}: ${url}`);\n      ctx.context.logger.info(\n        `If it's a valid URL, please add ${url} to trustedOrigins in your auth config\n`,\n        `Current list of trustedOrigins: ${trustedOrigins}`\n      );\n      throw new APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n    }\n  };\n  callbackURL && validateURL(callbackURL, \"callbackURL\");\n});\n\n// src/error/codes.ts\nvar BASE_ERROR_CODES = {\n  USER_NOT_FOUND: \"User not found\",\n  FAILED_TO_CREATE_USER: \"Failed to create user\",\n  FAILED_TO_CREATE_SESSION: \"Failed to create session\",\n  FAILED_TO_UPDATE_USER: \"Failed to update user\",\n  FAILED_TO_GET_SESSION: \"Failed to get session\",\n  INVALID_PASSWORD: \"Invalid password\",\n  INVALID_EMAIL: \"Invalid email\",\n  INVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n  SOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n  PROVIDER_NOT_FOUND: \"Provider not found\",\n  INVALID_TOKEN: \"invalid token\",\n  ID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n  FAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n  USER_EMAIL_NOT_FOUND: \"User email not found\",\n  EMAIL_NOT_VERIFIED: \"Email not verified\",\n  PASSWORD_TOO_SHORT: \"Password too short\",\n  PASSWORD_TOO_LONG: \"Password too long\",\n  USER_ALREADY_EXISTS: \"User already exists\",\n  EMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n  CREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n  SESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n  FAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n  ACCOUNT_NOT_FOUND: \"Account not found\"\n};\nvar getSession = () => createAuthEndpoint(\n  \"/get-session\",\n  {\n    method: \"GET\",\n    query: z.optional(\n      z.object({\n        /**\n         * If cookie cache is enabled, it will disable the cache\n         * and fetch the session from the database\n         */\n        disableCookieCache: z.boolean({\n          description: \"Disable cookie cache and fetch session from database\"\n        }).or(z.string().transform((v) => v === \"true\")).optional(),\n        disableRefresh: z.boolean({\n          description: \"Disable session refresh. Useful for checking session status, without updating the session\"\n        }).optional()\n      })\n    ),\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Get the current session\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    session: {\n                      type: \"object\",\n                      properties: {\n                        token: {\n                          type: \"string\"\n                        },\n                        userId: {\n                          type: \"string\"\n                        },\n                        expiresAt: {\n                          type: \"string\"\n                        }\n                      }\n                    },\n                    user: {\n                      type: \"object\",\n                      $ref: \"#/components/schemas/User\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      const sessionCookieToken = await ctx.getSignedCookie(\n        ctx.context.authCookies.sessionToken.name,\n        ctx.context.secret\n      );\n      if (!sessionCookieToken) {\n        return ctx.json(null);\n      }\n      const sessionDataCookie = ctx.getCookie(\n        ctx.context.authCookies.sessionData.name\n      );\n      const sessionDataPayload = sessionDataCookie ? safeJSONParse(binary.decode(base64.decode(sessionDataCookie))) : null;\n      if (sessionDataPayload) {\n        const isValid = await createHMAC(\"SHA-256\", \"base64urlnopad\").verify(\n          ctx.context.secret,\n          JSON.stringify(sessionDataPayload.session),\n          sessionDataPayload.signature\n        );\n        if (!isValid) {\n          deleteSessionCookie(ctx);\n          return ctx.json(null);\n        }\n      }\n      const dontRememberMe = await ctx.getSignedCookie(\n        ctx.context.authCookies.dontRememberToken.name,\n        ctx.context.secret\n      );\n      if (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n        const session2 = sessionDataPayload.session;\n        const hasExpired = sessionDataPayload.expiresAt < Date.now() || session2.session.expiresAt < /* @__PURE__ */ new Date();\n        if (!hasExpired) {\n          return ctx.json(\n            session2\n          );\n        } else {\n          const dataCookie = ctx.context.authCookies.sessionData.name;\n          ctx.setCookie(dataCookie, \"\", {\n            maxAge: 0\n          });\n        }\n      }\n      const session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n      ctx.context.session = session;\n      if (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n        deleteSessionCookie(ctx);\n        if (session) {\n          await ctx.context.internalAdapter.deleteSession(\n            session.session.token\n          );\n        }\n        return ctx.json(null);\n      }\n      if (dontRememberMe || ctx.query?.disableRefresh) {\n        return ctx.json(\n          session\n        );\n      }\n      const expiresIn = ctx.context.sessionConfig.expiresIn;\n      const updateAge = ctx.context.sessionConfig.updateAge;\n      const sessionIsDueToBeUpdatedDate = session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3;\n      const shouldBeUpdated = sessionIsDueToBeUpdatedDate <= Date.now();\n      if (shouldBeUpdated) {\n        const updatedSession = await ctx.context.internalAdapter.updateSession(\n          session.session.token,\n          {\n            expiresAt: getDate(ctx.context.sessionConfig.expiresIn, \"sec\")\n          }\n        );\n        if (!updatedSession) {\n          deleteSessionCookie(ctx);\n          return ctx.json(null, { status: 401 });\n        }\n        const maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n        await setSessionCookie(\n          ctx,\n          {\n            session: updatedSession,\n            user: session.user\n          },\n          false,\n          {\n            maxAge\n          }\n        );\n        return ctx.json({\n          session: updatedSession,\n          user: session.user\n        });\n      }\n      await setCookieCache(ctx, session);\n      return ctx.json(\n        session\n      );\n    } catch (error2) {\n      ctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error2);\n      throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n      });\n    }\n  }\n);\nvar getSessionFromCtx = async (ctx, config) => {\n  if (ctx.context.session) {\n    return ctx.context.session;\n  }\n  const session = await getSession()({\n    ...ctx,\n    _flag: \"json\",\n    headers: ctx.headers,\n    query: config\n  }).catch((e) => {\n    return null;\n  });\n  ctx.context.session = session;\n  return session;\n};\nvar sessionMiddleware = createAuthMiddleware(async (ctx) => {\n  const session = await getSessionFromCtx(ctx);\n  if (!session?.session) {\n    throw new APIError(\"UNAUTHORIZED\");\n  }\n  return {\n    session\n  };\n});\nvar freshSessionMiddleware = createAuthMiddleware(async (ctx) => {\n  const session = await getSessionFromCtx(ctx);\n  if (!session?.session) {\n    throw new APIError(\"UNAUTHORIZED\");\n  }\n  if (ctx.context.sessionConfig.freshAge === 0) {\n    return {\n      session\n    };\n  }\n  const freshAge = ctx.context.sessionConfig.freshAge;\n  const lastUpdated = session.session.updatedAt?.valueOf() || session.session.createdAt.valueOf();\n  const now = Date.now();\n  const isFresh = now - lastUpdated < freshAge * 1e3;\n  if (!isFresh) {\n    throw new APIError(\"FORBIDDEN\", {\n      message: \"Session is not fresh\"\n    });\n  }\n  return {\n    session\n  };\n});\nvar listSessions = () => createAuthEndpoint(\n  \"/list-sessions\",\n  {\n    method: \"GET\",\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"List all active sessions for the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    type: \"object\",\n                    properties: {\n                      token: {\n                        type: \"string\"\n                      },\n                      userId: {\n                        type: \"string\"\n                      },\n                      expiresAt: {\n                        type: \"string\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const sessions = await ctx.context.internalAdapter.listSessions(\n      ctx.context.session.user.id\n    );\n    const activeSessions = sessions.filter((session) => {\n      return session.expiresAt > /* @__PURE__ */ new Date();\n    });\n    return ctx.json(\n      activeSessions\n    );\n  }\n);\nvar revokeSession = createAuthEndpoint(\n  \"/revoke-session\",\n  {\n    method: \"POST\",\n    body: z.object({\n      token: z.string({\n        description: \"The token to revoke\"\n      })\n    }),\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Revoke a single session\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  token: {\n                    type: \"string\"\n                  }\n                },\n                required: [\"token\"]\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const token = ctx.body.token;\n    const findSession = await ctx.context.internalAdapter.findSession(token);\n    if (!findSession) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Session not found\"\n      });\n    }\n    if (findSession.session.userId !== ctx.context.session.user.id) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    try {\n      await ctx.context.internalAdapter.deleteSession(token);\n    } catch (error2) {\n      ctx.context.logger.error(\n        error2 && typeof error2 === \"object\" && \"name\" in error2 ? error2.name : \"\",\n        error2\n      );\n      throw new APIError(\"INTERNAL_SERVER_ERROR\");\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\nvar revokeSessions = createAuthEndpoint(\n  \"/revoke-sessions\",\n  {\n    method: \"POST\",\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Revoke all sessions for the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      await ctx.context.internalAdapter.deleteSessions(\n        ctx.context.session.user.id\n      );\n    } catch (error2) {\n      ctx.context.logger.error(\n        error2 && typeof error2 === \"object\" && \"name\" in error2 ? error2.name : \"\",\n        error2\n      );\n      throw new APIError(\"INTERNAL_SERVER_ERROR\");\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\nvar revokeOtherSessions = createAuthEndpoint(\n  \"/revoke-other-sessions\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Revoke all other sessions for the user except the current one\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    if (!session.user) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    const sessions = await ctx.context.internalAdapter.listSessions(\n      session.user.id\n    );\n    const activeSessions = sessions.filter((session2) => {\n      return session2.expiresAt > /* @__PURE__ */ new Date();\n    });\n    const otherSessions = activeSessions.filter(\n      (session2) => session2.token !== ctx.context.session.session.token\n    );\n    await Promise.all(\n      otherSessions.map(\n        (session2) => ctx.context.internalAdapter.deleteSession(session2.token)\n      )\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600) {\n  const token = await signJWT(\n    {\n      email: email.toLowerCase(),\n      updateTo\n    },\n    secret,\n    expiresIn\n  );\n  return token;\n}\nasync function sendVerificationEmailFn(ctx, user) {\n  if (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n    ctx.context.logger.error(\"Verification email isn't enabled.\");\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"Verification email isn't enabled\"\n    });\n  }\n  const token = await createEmailVerificationToken(\n    ctx.context.secret,\n    user.email,\n    void 0,\n    ctx.context.options.emailVerification?.expiresIn\n  );\n  const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n  await ctx.context.options.emailVerification.sendVerificationEmail(\n    {\n      user,\n      url,\n      token\n    },\n    ctx.request\n  );\n}\nvar sendVerificationEmail = createAuthEndpoint(\n  \"/send-verification-email\",\n  {\n    method: \"POST\",\n    body: z.object({\n      email: z.string({\n        description: \"The email to send the verification email to\"\n      }).email(),\n      callbackURL: z.string({\n        description: \"The URL to use for email verification callback\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a verification email to the user\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  email: {\n                    type: \"string\",\n                    description: \"The email to send the verification email to\"\n                  },\n                  callbackURL: {\n                    type: \"string\",\n                    description: \"The URL to use for email verification callback\"\n                  }\n                },\n                required: [\"email\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n      ctx.context.logger.error(\"Verification email isn't enabled.\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Verification email isn't enabled\"\n      });\n    }\n    const { email } = ctx.body;\n    const user = await ctx.context.internalAdapter.findUserByEmail(email);\n    if (!user) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.USER_NOT_FOUND\n      });\n    }\n    await sendVerificationEmailFn(ctx, user.user);\n    return ctx.json({\n      status: true\n    });\n  }\n);\nvar verifyEmail = createAuthEndpoint(\n  \"/verify-email\",\n  {\n    method: \"GET\",\n    query: z.object({\n      token: z.string({\n        description: \"The token to verify the email\"\n      }),\n      callbackURL: z.string({\n        description: \"The URL to redirect to after email verification\"\n      }).optional()\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Verify the email of the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\"\n                    },\n                    status: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"user\", \"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    function redirectOnError(error2) {\n      if (ctx.query.callbackURL) {\n        if (ctx.query.callbackURL.includes(\"?\")) {\n          throw ctx.redirect(`${ctx.query.callbackURL}&error=${error2}`);\n        }\n        throw ctx.redirect(`${ctx.query.callbackURL}?error=${error2}`);\n      }\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: error2\n      });\n    }\n    const { token } = ctx.query;\n    let jwt;\n    try {\n      jwt = await jwtVerify(\n        token,\n        new TextEncoder().encode(ctx.context.secret),\n        {\n          algorithms: [\"HS256\"]\n        }\n      );\n    } catch (e) {\n      if (e instanceof JWTExpired) {\n        return redirectOnError(\"token_expired\");\n      }\n      return redirectOnError(\"invalid_token\");\n    }\n    const schema2 = z.object({\n      email: z.string().email(),\n      updateTo: z.string().optional()\n    });\n    const parsed = schema2.parse(jwt.payload);\n    const user = await ctx.context.internalAdapter.findUserByEmail(\n      parsed.email\n    );\n    if (!user) {\n      return redirectOnError(\"user_not_found\");\n    }\n    if (parsed.updateTo) {\n      const session = await getSessionFromCtx(ctx);\n      if (!session) {\n        if (ctx.query.callbackURL) {\n          throw ctx.redirect(`${ctx.query.callbackURL}?error=unauthorized`);\n        }\n        return redirectOnError(\"unauthorized\");\n      }\n      if (session.user.email !== parsed.email) {\n        if (ctx.query.callbackURL) {\n          throw ctx.redirect(`${ctx.query.callbackURL}?error=unauthorized`);\n        }\n        return redirectOnError(\"unauthorized\");\n      }\n      const updatedUser = await ctx.context.internalAdapter.updateUserByEmail(\n        parsed.email,\n        {\n          email: parsed.updateTo,\n          emailVerified: false\n        }\n      );\n      const newToken = await createEmailVerificationToken(\n        ctx.context.secret,\n        parsed.updateTo\n      );\n      await ctx.context.options.emailVerification?.sendVerificationEmail?.(\n        {\n          user: updatedUser,\n          url: `${ctx.context.baseURL}/verify-email?token=${newToken}`,\n          token: newToken\n        },\n        ctx.request\n      );\n      if (ctx.query.callbackURL) {\n        throw ctx.redirect(ctx.query.callbackURL);\n      }\n      return ctx.json({\n        status: true,\n        user: {\n          id: updatedUser.id,\n          email: updatedUser.email,\n          name: updatedUser.name,\n          image: updatedUser.image,\n          emailVerified: updatedUser.emailVerified,\n          createdAt: updatedUser.createdAt,\n          updatedAt: updatedUser.updatedAt\n        }\n      });\n    }\n    await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n      emailVerified: true\n    });\n    if (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n      const currentSession = await getSessionFromCtx(ctx);\n      if (!currentSession || currentSession.user.email !== parsed.email) {\n        const session = await ctx.context.internalAdapter.createSession(\n          user.user.id,\n          ctx.request\n        );\n        if (!session) {\n          throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n            message: \"Failed to create session\"\n          });\n        }\n        await setSessionCookie(ctx, { session, user: user.user });\n      }\n    }\n    if (ctx.query.callbackURL) {\n      throw ctx.redirect(ctx.query.callbackURL);\n    }\n    return ctx.json({\n      status: true,\n      user: null\n    });\n  }\n);\n\n// src/oauth2/link-account.ts\nasync function handleOAuthUserInfo(c, {\n  userInfo,\n  account,\n  callbackURL\n}) {\n  const dbUser = await c.context.internalAdapter.findOAuthUser(\n    userInfo.email.toLowerCase(),\n    account.accountId,\n    account.providerId\n  ).catch((e) => {\n    logger.error(\n      \"Better auth was unable to query your database.\\nError: \",\n      e\n    );\n    throw c.redirect(\n      `${c.context.baseURL}/error?error=internal_server_error`\n    );\n  });\n  let user = dbUser?.user;\n  let isRegister = !user;\n  if (dbUser) {\n    const hasBeenLinked = dbUser.accounts.find(\n      (a) => a.providerId === account.providerId\n    );\n    if (!hasBeenLinked) {\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(\n        account.providerId\n      );\n      if (!isTrustedProvider && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        if (isDevelopment) {\n          logger.warn(\n            `User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`\n          );\n        }\n        return {\n          error: \"account not linked\",\n          data: null\n        };\n      }\n      try {\n        await c.context.internalAdapter.linkAccount({\n          providerId: account.providerId,\n          accountId: userInfo.id.toString(),\n          userId: dbUser.user.id,\n          accessToken: account.accessToken,\n          idToken: account.idToken,\n          refreshToken: account.refreshToken,\n          accessTokenExpiresAt: account.accessTokenExpiresAt,\n          refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n          scope: account.scope\n        });\n      } catch (e) {\n        logger.error(\"Unable to link account\", e);\n        return {\n          error: \"unable to link account\",\n          data: null\n        };\n      }\n    } else {\n      const updateData = Object.fromEntries(\n        Object.entries({\n          accessToken: account.accessToken,\n          idToken: account.idToken,\n          refreshToken: account.refreshToken,\n          accessTokenExpiresAt: account.accessTokenExpiresAt,\n          refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n          scope: account.scope\n        }).filter(([_, value]) => value !== void 0)\n      );\n      if (Object.keys(updateData).length > 0) {\n        await c.context.internalAdapter.updateAccount(\n          hasBeenLinked.id,\n          updateData\n        );\n      }\n    }\n  } else {\n    try {\n      user = await c.context.internalAdapter.createOAuthUser(\n        {\n          ...userInfo,\n          email: userInfo.email.toLowerCase(),\n          id: void 0\n        },\n        {\n          accessToken: account.accessToken,\n          idToken: account.idToken,\n          refreshToken: account.refreshToken,\n          accessTokenExpiresAt: account.accessTokenExpiresAt,\n          refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n          scope: account.scope,\n          providerId: account.providerId,\n          accountId: userInfo.id.toString()\n        }\n      ).then((res) => res?.user);\n      if (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp) {\n        const token = await createEmailVerificationToken(\n          c.context.secret,\n          user.email,\n          void 0,\n          c.context.options.emailVerification?.expiresIn\n        );\n        const url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n        await c.context.options.emailVerification?.sendVerificationEmail?.(\n          {\n            user,\n            url,\n            token\n          },\n          c.request\n        );\n      }\n    } catch (e) {\n      if (e instanceof APIError) {\n        return {\n          error: e.message,\n          data: null,\n          isRegister: false\n        };\n      }\n      return {\n        error: \"unable to create user\",\n        data: null,\n        isRegister: false\n      };\n    }\n  }\n  if (!user) {\n    return {\n      error: \"unable to create user\",\n      data: null,\n      isRegister: false\n    };\n  }\n  const session = await c.context.internalAdapter.createSession(\n    user.id,\n    c.request\n  );\n  if (!session) {\n    return {\n      error: \"unable to create session\",\n      data: null,\n      isRegister: false\n    };\n  }\n  return {\n    data: {\n      session,\n      user\n    },\n    error: null,\n    isRegister\n  };\n}\n\n// src/api/routes/sign-in.ts\nvar signInSocial = createAuthEndpoint(\n  \"/sign-in/social\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * Callback URL to redirect to after the user\n       * has signed in.\n       */\n      callbackURL: z.string({\n        description: \"Callback URL to redirect to after the user has signed in\"\n      }).optional(),\n      /**\n       * callback url to redirect if the user is newly registered.\n       *\n       * useful if you have different routes for existing users and new users\n       */\n      newUserCallbackURL: z.string().optional(),\n      /**\n       * Callback url to redirect to if an error happens\n       *\n       * If it's initiated from the client sdk this defaults to\n       * the current url.\n       */\n      errorCallbackURL: z.string({\n        description: \"Callback URL to redirect to if an error happens\"\n      }).optional(),\n      /**\n       * OAuth2 provider to use`\n       */\n      provider: SocialProviderListEnum,\n      /**\n       * Disable automatic redirection to the provider\n       *\n       * This is useful if you want to handle the redirection\n       * yourself like in a popup or a different tab.\n       */\n      disableRedirect: z.boolean({\n        description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\"\n      }).optional(),\n      /**\n       * ID token from the provider\n       *\n       * This is used to sign in the user\n       * if the user is already signed in with the\n       * provider in the frontend.\n       *\n       * Only applicable if the provider supports\n       * it. Currently only `apple` and `google` is\n       * supported out of the box.\n       */\n      idToken: z.optional(\n        z.object({\n          /**\n           * ID token from the provider\n           */\n          token: z.string({\n            description: \"ID token from the provider\"\n          }),\n          /**\n           * The nonce used to generate the token\n           */\n          nonce: z.string({\n            description: \"Nonce used to generate the token\"\n          }).optional(),\n          /**\n           * Access token from the provider\n           */\n          accessToken: z.string({\n            description: \"Access token from the provider\"\n          }).optional(),\n          /**\n           * Refresh token from the provider\n           */\n          refreshToken: z.string({\n            description: \"Refresh token from the provider\"\n          }).optional(),\n          /**\n           * Expiry date of the token\n           */\n          expiresAt: z.number({\n            description: \"Expiry date of the token\"\n          }).optional()\n        }),\n        {\n          description: \"ID token from the provider to sign in the user with id token\"\n        }\n      )\n    }),\n    metadata: {\n      openapi: {\n        description: \"Sign in with a social provider\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    session: {\n                      type: \"string\"\n                    },\n                    user: {\n                      type: \"object\"\n                    },\n                    url: {\n                      type: \"string\"\n                    },\n                    redirect: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"session\", \"user\", \"url\", \"redirect\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.body.provider\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Provider not found. Make sure to add the provider in your auth config\",\n        {\n          provider: c.body.provider\n        }\n      );\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.PROVIDER_NOT_FOUND\n      });\n    }\n    if (c.body.idToken) {\n      if (!provider.verifyIdToken) {\n        c.context.logger.error(\n          \"Provider does not support id token verification\",\n          {\n            provider: c.body.provider\n          }\n        );\n        throw new APIError(\"NOT_FOUND\", {\n          message: BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED\n        });\n      }\n      const { token, nonce } = c.body.idToken;\n      const valid = await provider.verifyIdToken(token, nonce);\n      if (!valid) {\n        c.context.logger.error(\"Invalid id token\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.INVALID_TOKEN\n        });\n      }\n      const userInfo = await provider.getUserInfo({\n        idToken: token,\n        accessToken: c.body.idToken.accessToken,\n        refreshToken: c.body.idToken.refreshToken\n      });\n      if (!userInfo || !userInfo?.user) {\n        c.context.logger.error(\"Failed to get user info\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO\n        });\n      }\n      if (!userInfo.user.email) {\n        c.context.logger.error(\"User email not found\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND\n        });\n      }\n      const data = await handleOAuthUserInfo(c, {\n        userInfo: {\n          email: userInfo.user.email,\n          id: userInfo.user.id,\n          name: userInfo.user.name || \"\",\n          image: userInfo.user.image,\n          emailVerified: userInfo.user.emailVerified || false\n        },\n        account: {\n          providerId: provider.id,\n          accountId: userInfo.user.id,\n          accessToken: c.body.idToken.accessToken\n        }\n      });\n      if (data.error) {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: data.error\n        });\n      }\n      await setSessionCookie(c, data.data);\n      return c.json({\n        redirect: false,\n        token: data.data.session.token,\n        url: void 0,\n        user: {\n          id: data.data.user.id,\n          email: data.data.user.email,\n          name: data.data.user.name,\n          image: data.data.user.image,\n          emailVerified: data.data.user.emailVerified,\n          createdAt: data.data.user.createdAt,\n          updatedAt: data.data.user.updatedAt\n        }\n      });\n    }\n    const { codeVerifier, state } = await generateState(c);\n    const url = await provider.createAuthorizationURL({\n      state,\n      codeVerifier,\n      redirectURI: `${c.context.baseURL}/callback/${provider.id}`\n    });\n    return c.json({\n      url: url.toString(),\n      redirect: !c.body.disableRedirect\n    });\n  }\n);\nvar signInEmail = createAuthEndpoint(\n  \"/sign-in/email\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * Email of the user\n       */\n      email: z.string({\n        description: \"Email of the user\"\n      }),\n      /**\n       * Password of the user\n       */\n      password: z.string({\n        description: \"Password of the user\"\n      }),\n      /**\n       * Callback URL to use as a redirect for email\n       * verification and for possible redirects\n       */\n      callbackURL: z.string({\n        description: \"Callback URL to use as a redirect for email verification\"\n      }).optional(),\n      /**\n       * If this is false, the session will not be remembered\n       * @default true\n       */\n      rememberMe: z.boolean({\n        description: \"If this is false, the session will not be remembered. Default is `true`.\"\n      }).default(true).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Sign in with email and password\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\"\n                    },\n                    url: {\n                      type: \"string\"\n                    },\n                    redirect: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"session\", \"user\", \"url\", \"redirect\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options?.emailAndPassword?.enabled) {\n      ctx.context.logger.error(\n        \"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\"\n      );\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Email and password is not enabled\"\n      });\n    }\n    const { email, password } = ctx.body;\n    const isValidEmail = z.string().email().safeParse(email);\n    if (!isValidEmail.success) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL\n      });\n    }\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      await ctx.context.password.hash(password);\n      ctx.context.logger.error(\"User not found\", { email });\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const credentialAccount = user.accounts.find(\n      (a) => a.providerId === \"credential\"\n    );\n    if (!credentialAccount) {\n      ctx.context.logger.error(\"Credential account not found\", { email });\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const currentPassword = credentialAccount?.password;\n    if (!currentPassword) {\n      ctx.context.logger.error(\"Password not found\", { email });\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const validPassword = await ctx.context.password.verify({\n      hash: currentPassword,\n      password\n    });\n    if (!validPassword) {\n      ctx.context.logger.error(\"Invalid password\");\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    if (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n      if (!ctx.context.options?.emailVerification?.sendVerificationEmail) {\n        throw new APIError(\"FORBIDDEN\", {\n          message: BASE_ERROR_CODES.EMAIL_NOT_VERIFIED\n        });\n      }\n      const token = await createEmailVerificationToken(\n        ctx.context.secret,\n        user.user.email,\n        void 0,\n        ctx.context.options.emailVerification?.expiresIn\n      );\n      const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n      await ctx.context.options.emailVerification.sendVerificationEmail(\n        {\n          user: user.user,\n          url,\n          token\n        },\n        ctx.request\n      );\n      throw new APIError(\"FORBIDDEN\", {\n        message: BASE_ERROR_CODES.EMAIL_NOT_VERIFIED\n      });\n    }\n    const session = await ctx.context.internalAdapter.createSession(\n      user.user.id,\n      ctx.headers,\n      ctx.body.rememberMe === false\n    );\n    if (!session) {\n      ctx.context.logger.error(\"Failed to create session\");\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION\n      });\n    }\n    await setSessionCookie(\n      ctx,\n      {\n        session,\n        user: user.user\n      },\n      ctx.body.rememberMe === false\n    );\n    return ctx.json({\n      redirect: !!ctx.body.callbackURL,\n      token: session.token,\n      url: ctx.body.callbackURL,\n      user: {\n        id: user.user.id,\n        email: user.user.email,\n        name: user.user.name,\n        image: user.user.image,\n        emailVerified: user.user.emailVerified,\n        createdAt: user.user.createdAt,\n        updatedAt: user.user.updatedAt\n      }\n    });\n  }\n);\nvar schema = z.object({\n  code: z.string().optional(),\n  error: z.string().optional(),\n  error_description: z.string().optional(),\n  state: z.string().optional()\n});\nvar callbackOAuth = createAuthEndpoint(\n  \"/callback/:id\",\n  {\n    method: [\"GET\", \"POST\"],\n    body: schema.optional(),\n    query: schema.optional(),\n    metadata: HIDE_METADATA\n  },\n  async (c) => {\n    let queryOrBody;\n    try {\n      if (c.method === \"GET\") {\n        queryOrBody = schema.parse(c.query);\n      } else if (c.method === \"POST\") {\n        queryOrBody = schema.parse(c.body);\n      } else {\n        throw new Error(\"Unsupported method\");\n      }\n    } catch (e) {\n      c.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n      throw c.redirect(\n        `${c.context.baseURL}/error?error=invalid_callback_request`\n      );\n    }\n    const { code, error: error2, state, error_description } = queryOrBody;\n    if (!state) {\n      c.context.logger.error(\"State not found\", error2);\n      throw c.redirect(`${c.context.baseURL}/error?error=state_not_found`);\n    }\n    if (!code) {\n      c.context.logger.error(\"Code not found\");\n      throw c.redirect(\n        `${c.context.baseURL}/error?error=${error2 || \"no_code\"}&error_description=${error_description}`\n      );\n    }\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.params.id\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Oauth provider with id\",\n        c.params.id,\n        \"not found\"\n      );\n      throw c.redirect(\n        `${c.context.baseURL}/error?error=oauth_provider_not_found`\n      );\n    }\n    const { codeVerifier, callbackURL, link, errorURL, newUserURL } = await parseState(c);\n    let tokens;\n    try {\n      tokens = await provider.validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: `${c.context.baseURL}/callback/${provider.id}`\n      });\n    } catch (e) {\n      c.context.logger.error(\"\", e);\n      throw c.redirect(\n        `${c.context.baseURL}/error?error=please_restart_the_process`\n      );\n    }\n    const userInfo = await provider.getUserInfo(tokens).then((res) => res?.user);\n    function redirectOnError(error3) {\n      let url = errorURL || callbackURL || `${c.context.baseURL}/error`;\n      if (url.includes(\"?\")) {\n        url = `${url}&error=${error3}`;\n      } else {\n        url = `${url}?error=${error3}`;\n      }\n      throw c.redirect(url);\n    }\n    if (!userInfo) {\n      c.context.logger.error(\"Unable to get user info\");\n      return redirectOnError(\"unable_to_get_user_info\");\n    }\n    if (!userInfo.email) {\n      c.context.logger.error(\n        \"Provider did not return email. This could be due to misconfiguration in the provider settings.\"\n      );\n      return redirectOnError(\"email_not_found\");\n    }\n    if (!callbackURL) {\n      c.context.logger.error(\"No callback URL found\");\n      throw c.redirect(\n        `${c.context.baseURL}/error?error=please_restart_the_process`\n      );\n    }\n    if (link) {\n      if (c.context.options.account?.accountLinking?.allowDifferentEmails !== true && link.email !== userInfo.email.toLowerCase()) {\n        return redirectOnError(\"email_doesn't_match\");\n      }\n      const existingAccount = await c.context.internalAdapter.findAccount(\n        userInfo.id\n      );\n      if (existingAccount) {\n        if (existingAccount && existingAccount.userId !== link.userId) {\n          return redirectOnError(\"account_already_linked_to_different_user\");\n        }\n        return redirectOnError(\"account_already_linked\");\n      }\n      const newAccount = await c.context.internalAdapter.createAccount({\n        userId: link.userId,\n        providerId: provider.id,\n        accountId: userInfo.id\n      });\n      if (!newAccount) {\n        return redirectOnError(\"unable_to_link_account\");\n      }\n      let toRedirectTo2;\n      try {\n        const url = callbackURL;\n        toRedirectTo2 = url.toString();\n      } catch {\n        toRedirectTo2 = callbackURL;\n      }\n      throw c.redirect(toRedirectTo2);\n    }\n    const result = await handleOAuthUserInfo(c, {\n      userInfo: {\n        ...userInfo,\n        email: userInfo.email,\n        name: userInfo.name || userInfo.email\n      },\n      account: {\n        providerId: provider.id,\n        accountId: userInfo.id,\n        ...tokens,\n        scope: tokens.scopes?.join(\",\")\n      },\n      callbackURL\n    });\n    if (result.error) {\n      c.context.logger.error(result.error.split(\" \").join(\"_\"));\n      return redirectOnError(result.error.split(\" \").join(\"_\"));\n    }\n    const { session, user } = result.data;\n    await setSessionCookie(c, {\n      session,\n      user\n    });\n    let toRedirectTo;\n    try {\n      const url = result.isRegister ? newUserURL || callbackURL : callbackURL;\n      toRedirectTo = url.toString();\n    } catch {\n      toRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n    }\n    throw c.redirect(toRedirectTo);\n  }\n);\nvar signOut = createAuthEndpoint(\n  \"/sign-out\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Sign out the current user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const sessionCookieToken = await ctx.getSignedCookie(\n      ctx.context.authCookies.sessionToken.name,\n      ctx.context.secret\n    );\n    if (!sessionCookieToken) {\n      deleteSessionCookie(ctx);\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n      });\n    }\n    await ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n    deleteSessionCookie(ctx);\n    return ctx.json({\n      success: true\n    });\n  }\n);\nfunction redirectError(ctx, callbackURL, query) {\n  const url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n  if (query)\n    Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n  return url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n  const url = new URL(callbackURL, ctx.baseURL);\n  if (query)\n    Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n  return url.href;\n}\nvar forgetPassword = createAuthEndpoint(\n  \"/forget-password\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The email address of the user to send a password reset email to.\n       */\n      email: z.string({\n        description: \"The email address of the user to send a password reset email to\"\n      }).email(),\n      /**\n       * The URL to redirect the user to reset their password.\n       * If the token isn't valid or expired, it'll be redirected with a query parameter `?\n       * error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?\n       * token=VALID_TOKEN\n       */\n      redirectTo: z.string({\n        description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a password reset email to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n      ctx.context.logger.error(\n        \"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPasswordToken function in your auth config!\"\n      );\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Reset password isn't enabled\"\n      });\n    }\n    const { email, redirectTo } = ctx.body;\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      ctx.context.logger.error(\"Reset Password: User not found\", { email });\n      return ctx.json(\n        {\n          status: false\n        },\n        {\n          body: {\n            status: true\n          }\n        }\n      );\n    }\n    const defaultExpiresIn = 60 * 60 * 1;\n    const expiresAt = getDate(\n      ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || defaultExpiresIn,\n      \"sec\"\n    );\n    const verificationToken = generateId(24);\n    await ctx.context.internalAdapter.createVerificationValue({\n      value: user.user.id.toString(),\n      identifier: `reset-password:${verificationToken}`,\n      expiresAt\n    });\n    const url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${redirectTo}`;\n    await ctx.context.options.emailAndPassword.sendResetPassword(\n      {\n        user: user.user,\n        url,\n        token: verificationToken\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\nvar forgetPasswordCallback = createAuthEndpoint(\n  \"/reset-password/:token\",\n  {\n    method: \"GET\",\n    query: z.object({\n      callbackURL: z.string({\n        description: \"The URL to redirect the user to reset their password\"\n      })\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Redirects the user to the callback URL with the token\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    token: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { token } = ctx.params;\n    const { callbackURL } = ctx.query;\n    if (!token || !callbackURL) {\n      throw ctx.redirect(\n        redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" })\n      );\n    }\n    const verification = await ctx.context.internalAdapter.findVerificationValue(\n      `reset-password:${token}`\n    );\n    if (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) {\n      throw ctx.redirect(\n        redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" })\n      );\n    }\n    throw ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n  }\n);\nvar resetPassword = createAuthEndpoint(\n  \"/reset-password\",\n  {\n    method: \"POST\",\n    query: z.object({\n      token: z.string().optional()\n    }).optional(),\n    body: z.object({\n      newPassword: z.string({\n        description: \"The new password to set\"\n      }),\n      token: z.string({\n        description: \"The token to reset the password\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Reset the password for a user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const token = ctx.body.token || ctx.query?.token;\n    if (!token) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    const { newPassword } = ctx.body;\n    const minLength = ctx.context.password?.config.minPasswordLength;\n    const maxLength = ctx.context.password?.config.maxPasswordLength;\n    if (newPassword.length < minLength) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    if (newPassword.length > maxLength) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const id = `reset-password:${token}`;\n    const verification = await ctx.context.internalAdapter.findVerificationValue(id);\n    if (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    await ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n    const userId = verification.value;\n    const hashedPassword = await ctx.context.password.hash(newPassword);\n    const accounts = await ctx.context.internalAdapter.findAccounts(userId);\n    const account = accounts.find((ac) => ac.providerId === \"credential\");\n    if (!account) {\n      await ctx.context.internalAdapter.createAccount({\n        userId,\n        providerId: \"credential\",\n        password: hashedPassword,\n        accountId: userId\n      });\n      return ctx.json({\n        status: true\n      });\n    }\n    await ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n    return ctx.json({\n      status: true\n    });\n  }\n);\nvar updateUser = () => createAuthEndpoint(\n  \"/update-user\",\n  {\n    method: \"POST\",\n    body: z.record(z.string(), z.any()),\n    use: [sessionMiddleware],\n    metadata: {\n      $Infer: {\n        body: {}\n      },\n      openapi: {\n        description: \"Update the current user\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  name: {\n                    type: \"string\",\n                    description: \"The name of the user\"\n                  },\n                  image: {\n                    type: \"string\",\n                    description: \"The image of the user\"\n                  }\n                }\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const body = ctx.body;\n    if (body.email) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED\n      });\n    }\n    const { name, image, ...rest } = body;\n    const session = ctx.context.session;\n    if (image === void 0 && name === void 0 && Object.keys(rest).length === 0) {\n      return ctx.json({\n        status: true\n      });\n    }\n    const additionalFields = parseUserInput(\n      ctx.context.options,\n      rest,\n      \"update\"\n    );\n    const user = await ctx.context.internalAdapter.updateUserByEmail(\n      session.user.email,\n      {\n        name,\n        image,\n        ...additionalFields\n      }\n    );\n    await setSessionCookie(ctx, {\n      session: session.session,\n      user\n    });\n    return ctx.json({\n      status: true\n    });\n  }\n);\nvar changePassword = createAuthEndpoint(\n  \"/change-password\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The new password to set\n       */\n      newPassword: z.string({\n        description: \"The new password to set\"\n      }),\n      /**\n       * The current password of the user\n       */\n      currentPassword: z.string({\n        description: \"The current password\"\n      }),\n      /**\n       * revoke all sessions that are not the\n       * current one logged in by the user\n       */\n      revokeOtherSessions: z.boolean({\n        description: \"Revoke all other sessions\"\n      }).optional()\n    }),\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Change the password of the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      description: \"The user object\",\n                      $ref: \"#/components/schemas/User\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { newPassword, currentPassword, revokeOtherSessions: revokeOtherSessions2 } = ctx.body;\n    const session = ctx.context.session;\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (newPassword.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (newPassword.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const account = accounts.find(\n      (account2) => account2.providerId === \"credential\" && account2.password\n    );\n    if (!account || !account.password) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND\n      });\n    }\n    const passwordHash = await ctx.context.password.hash(newPassword);\n    const verify = await ctx.context.password.verify({\n      hash: account.password,\n      password: currentPassword\n    });\n    if (!verify) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_PASSWORD\n      });\n    }\n    await ctx.context.internalAdapter.updateAccount(account.id, {\n      password: passwordHash\n    });\n    let token = null;\n    if (revokeOtherSessions2) {\n      await ctx.context.internalAdapter.deleteSessions(session.user.id);\n      const newSession = await ctx.context.internalAdapter.createSession(\n        session.user.id,\n        ctx.headers\n      );\n      if (!newSession) {\n        throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n          message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n        });\n      }\n      await setSessionCookie(ctx, {\n        session: newSession,\n        user: session.user\n      });\n      token = newSession.token;\n    }\n    return ctx.json({\n      token,\n      user: {\n        id: session.user.id,\n        email: session.user.email,\n        name: session.user.name,\n        image: session.user.image,\n        emailVerified: session.user.emailVerified,\n        createdAt: session.user.createdAt,\n        updatedAt: session.user.updatedAt\n      }\n    });\n  }\n);\nvar setPassword = createAuthEndpoint(\n  \"/set-password\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The new password to set\n       */\n      newPassword: z.string()\n    }),\n    metadata: {\n      SERVER_ONLY: true\n    },\n    use: [sessionMiddleware]\n  },\n  async (ctx) => {\n    const { newPassword } = ctx.body;\n    const session = ctx.context.session;\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (newPassword.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (newPassword.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const account = accounts.find(\n      (account2) => account2.providerId === \"credential\" && account2.password\n    );\n    const passwordHash = await ctx.context.password.hash(newPassword);\n    if (!account) {\n      await ctx.context.internalAdapter.linkAccount({\n        userId: session.user.id,\n        providerId: \"credential\",\n        accountId: session.user.id,\n        password: passwordHash\n      });\n      return ctx.json({\n        status: true\n      });\n    }\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"user already has a password\"\n    });\n  }\n);\nvar deleteUser = createAuthEndpoint(\n  \"/delete-user\",\n  {\n    method: \"POST\",\n    use: [sessionMiddleware],\n    body: z.object({\n      /**\n       * The callback URL to redirect to after the user is deleted\n       * this is only used on delete user callback\n       */\n      callbackURL: z.string().optional(),\n      /**\n       * The password of the user. If the password isn't provided, session freshness\n       * will be checked.\n       */\n      password: z.string().optional(),\n      /**\n       * The token to delete the user. If the token is provided, the user will be deleted\n       */\n      token: z.string().optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Delete the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.deleteUser?.enabled) {\n      ctx.context.logger.error(\n        \"Delete user is disabled. Enable it in the options\",\n        {\n          session: ctx.context.session\n        }\n      );\n      throw new APIError(\"NOT_FOUND\");\n    }\n    const session = ctx.context.session;\n    if (ctx.body.password) {\n      const accounts = await ctx.context.internalAdapter.findAccounts(\n        session.user.id\n      );\n      const account = accounts.find(\n        (account2) => account2.providerId === \"credential\" && account2.password\n      );\n      if (!account || !account.password) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND\n        });\n      }\n      const verify = await ctx.context.password.verify({\n        hash: account.password,\n        password: ctx.body.password\n      });\n      if (!verify) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: BASE_ERROR_CODES.INVALID_PASSWORD\n        });\n      }\n    } else {\n      if (ctx.context.options.session?.freshAge) {\n        const currentAge = session.session.createdAt.getTime();\n        const freshAge = ctx.context.options.session.freshAge;\n        const now = Date.now();\n        if (now - currentAge > freshAge) {\n          throw new APIError(\"BAD_REQUEST\", {\n            message: BASE_ERROR_CODES.SESSION_EXPIRED\n          });\n        }\n      }\n    }\n    if (ctx.body.token) {\n      await deleteUserCallback({\n        ...ctx,\n        query: {\n          token: ctx.body.token\n        }\n      });\n      return ctx.json({\n        success: true,\n        message: \"User deleted\"\n      });\n    }\n    if (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n      const token = generateRandomString(32, \"0-9\", \"a-z\");\n      await ctx.context.internalAdapter.createVerificationValue({\n        value: session.user.id,\n        identifier: `delete-account-${token}`,\n        expiresAt: new Date(Date.now() + 1e3 * 60 * 60 * 24)\n      });\n      const url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n      await ctx.context.options.user.deleteUser.sendDeleteAccountVerification(\n        {\n          user: session.user,\n          url,\n          token\n        },\n        ctx.request\n      );\n      return ctx.json({\n        success: true,\n        message: \"Verification email sent\"\n      });\n    }\n    const beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n    if (beforeDelete) {\n      await beforeDelete(session.user, ctx.request);\n    }\n    await ctx.context.internalAdapter.deleteUser(session.user.id);\n    await ctx.context.internalAdapter.deleteSessions(session.user.id);\n    await ctx.context.internalAdapter.deleteAccounts(session.user.id);\n    deleteSessionCookie(ctx);\n    const afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n    if (afterDelete) {\n      await afterDelete(session.user, ctx.request);\n    }\n    return ctx.json({\n      success: true,\n      message: \"User deleted\"\n    });\n  }\n);\nvar deleteUserCallback = createAuthEndpoint(\n  \"/delete-user/callback\",\n  {\n    method: \"GET\",\n    query: z.object({\n      token: z.string(),\n      callbackURL: z.string().optional()\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)]\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.deleteUser?.enabled) {\n      ctx.context.logger.error(\n        \"Delete user is disabled. Enable it in the options\"\n      );\n      throw new APIError(\"NOT_FOUND\");\n    }\n    const session = await getSessionFromCtx(ctx);\n    if (!session) {\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO\n      });\n    }\n    const token = await ctx.context.internalAdapter.findVerificationValue(\n      `delete-account-${ctx.query.token}`\n    );\n    if (!token || token.expiresAt < /* @__PURE__ */ new Date()) {\n      if (token) {\n        await ctx.context.internalAdapter.deleteVerificationValue(token.id);\n      }\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    if (token.value !== session.user.id) {\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    const beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n    if (beforeDelete) {\n      await beforeDelete(session.user, ctx.request);\n    }\n    await ctx.context.internalAdapter.deleteUser(session.user.id);\n    await ctx.context.internalAdapter.deleteSessions(session.user.id);\n    await ctx.context.internalAdapter.deleteAccounts(session.user.id);\n    await ctx.context.internalAdapter.deleteVerificationValue(token.id);\n    deleteSessionCookie(ctx);\n    const afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n    if (afterDelete) {\n      await afterDelete(session.user, ctx.request);\n    }\n    if (ctx.query.callbackURL) {\n      throw ctx.redirect(ctx.query.callbackURL || \"/\");\n    }\n    return ctx.json({\n      success: true,\n      message: \"User deleted\"\n    });\n  }\n);\nvar changeEmail = createAuthEndpoint(\n  \"/change-email\",\n  {\n    method: \"POST\",\n    body: z.object({\n      newEmail: z.string({\n        description: \"The new email to set\"\n      }).email(),\n      callbackURL: z.string({\n        description: \"The URL to redirect to after email verification\"\n      }).optional()\n    }),\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\"\n                    },\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.changeEmail?.enabled) {\n      ctx.context.logger.error(\"Change email is disabled.\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Change email is disabled\"\n      });\n    }\n    if (ctx.body.newEmail === ctx.context.session.user.email) {\n      ctx.context.logger.error(\"Email is the same\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Email is the same\"\n      });\n    }\n    const existingUser = await ctx.context.internalAdapter.findUserByEmail(\n      ctx.body.newEmail\n    );\n    if (existingUser) {\n      ctx.context.logger.error(\"Email already exists\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Couldn't update your email\"\n      });\n    }\n    if (ctx.context.session.user.emailVerified !== true) {\n      await ctx.context.internalAdapter.updateUserByEmail(\n        ctx.context.session.user.email,\n        {\n          email: ctx.body.newEmail\n        }\n      );\n      return ctx.json({\n        status: true\n      });\n    }\n    if (!ctx.context.options.user.changeEmail.sendChangeEmailVerification) {\n      ctx.context.logger.error(\"Verification email isn't enabled.\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Verification email isn't enabled\"\n      });\n    }\n    const token = await createEmailVerificationToken(\n      ctx.context.secret,\n      ctx.context.session.user.email,\n      ctx.body.newEmail,\n      ctx.context.options.emailVerification?.expiresIn\n    );\n    const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n    await ctx.context.options.user.changeEmail.sendChangeEmailVerification(\n      {\n        user: ctx.context.session.user,\n        newEmail: ctx.body.newEmail,\n        url,\n        token\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\n// src/api/routes/error.ts\nvar html = (errorCode = \"Unknown\") => `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Authentication Error</title>\n    <style>\n        :root {\n            --bg-color: #f8f9fa;\n            --text-color: #212529;\n            --accent-color: #000000;\n            --error-color: #dc3545;\n            --border-color: #e9ecef;\n        }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n            line-height: 1.5;\n        }\n        .error-container {\n            background-color: #ffffff;\n            border-radius: 12px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n            padding: 2.5rem;\n            text-align: center;\n            max-width: 90%;\n            width: 400px;\n        }\n        h1 {\n            color: var(--error-color);\n            font-size: 1.75rem;\n            margin-bottom: 1rem;\n            font-weight: 600;\n        }\n        p {\n            margin-bottom: 1.5rem;\n            color: #495057;\n        }\n        .btn {\n            background-color: var(--accent-color);\n            color: #ffffff;\n            text-decoration: none;\n            padding: 0.75rem 1.5rem;\n            border-radius: 6px;\n            transition: all 0.3s ease;\n            display: inline-block;\n            font-weight: 500;\n            border: 2px solid var(--accent-color);\n        }\n        .btn:hover {\n            background-color: #131721;\n        }\n        .error-code {\n            font-size: 0.875rem;\n            color: #6c757d;\n            margin-top: 1.5rem;\n            padding-top: 1.5rem;\n            border-top: 1px solid var(--border-color);\n        }\n        .icon {\n            font-size: 3rem;\n            margin-bottom: 1rem;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"error-container\">\n        <div class=\"icon\">\\u26A0\\uFE0F</div>\n        <h1>Better Auth Error</h1>\n        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>\n        <a href=\"/\" id=\"returnLink\" class=\"btn\">Return to Application</a>\n        <div class=\"error-code\">Error Code: <span id=\"errorCode\">${errorCode}</span></div>\n    </div>\n</body>\n</html>`;\nvar error = createAuthEndpoint(\n  \"/error\",\n  {\n    method: \"GET\",\n    metadata: {\n      ...HIDE_METADATA,\n      openapi: {\n        description: \"Displays an error page\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"text/html\": {\n                schema: {\n                  type: \"string\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const query = new URL(c.request?.url || \"\").searchParams.get(\"error\") || \"Unknown\";\n    return new Response(html(query), {\n      headers: {\n        \"Content-Type\": \"text/html\"\n      }\n    });\n  }\n);\n\n// src/api/routes/ok.ts\nvar ok = createAuthEndpoint(\n  \"/ok\",\n  {\n    method: \"GET\",\n    metadata: {\n      ...HIDE_METADATA,\n      openapi: {\n        description: \"Check if the API is working\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    ok: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    return ctx.json({\n      ok: true\n    });\n  }\n);\nvar signUpEmail = () => createAuthEndpoint(\n  \"/sign-up/email\",\n  {\n    method: \"POST\",\n    body: z.record(z.string(), z.any()),\n    metadata: {\n      $Infer: {\n        body: {}\n      },\n      openapi: {\n        description: \"Sign up a user using email and password\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  name: {\n                    type: \"string\",\n                    description: \"The name of the user\"\n                  },\n                  email: {\n                    type: \"string\",\n                    description: \"The email of the user\"\n                  },\n                  password: {\n                    type: \"string\",\n                    description: \"The password of the user\"\n                  },\n                  callbackURL: {\n                    type: \"string\",\n                    description: \"The URL to use for email verification callback\"\n                  }\n                },\n                required: [\"name\", \"email\", \"password\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    id: {\n                      type: \"string\",\n                      description: \"The id of the user\"\n                    },\n                    email: {\n                      type: \"string\",\n                      description: \"The email of the user\"\n                    },\n                    name: {\n                      type: \"string\",\n                      description: \"The name of the user\"\n                    },\n                    image: {\n                      type: \"string\",\n                      description: \"The image of the user\"\n                    },\n                    emailVerified: {\n                      type: \"boolean\",\n                      description: \"If the email is verified\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.enabled) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Email and password sign up is not enabled\"\n      });\n    }\n    const body = ctx.body;\n    const { name, email, password, image, callbackURL, ...additionalFields } = body;\n    const isValidEmail = z.string().email().safeParse(email);\n    if (!isValidEmail.success) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL\n      });\n    }\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (password.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (password.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const dbUser = await ctx.context.internalAdapter.findUserByEmail(email);\n    if (dbUser?.user) {\n      ctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n      throw new APIError(\"UNPROCESSABLE_ENTITY\", {\n        message: BASE_ERROR_CODES.USER_ALREADY_EXISTS\n      });\n    }\n    const additionalData = parseUserInput(\n      ctx.context.options,\n      additionalFields\n    );\n    let createdUser;\n    try {\n      createdUser = await ctx.context.internalAdapter.createUser({\n        email: email.toLowerCase(),\n        name,\n        image,\n        ...additionalData,\n        emailVerified: false\n      });\n      if (!createdUser) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: BASE_ERROR_CODES.FAILED_TO_CREATE_USER\n        });\n      }\n    } catch (e) {\n      if (isDevelopment) {\n        ctx.context.logger.error(\"Failed to create user\", e);\n      }\n      throw new APIError(\"UNPROCESSABLE_ENTITY\", {\n        message: BASE_ERROR_CODES.FAILED_TO_CREATE_USER,\n        details: e\n      });\n    }\n    if (!createdUser) {\n      throw new APIError(\"UNPROCESSABLE_ENTITY\", {\n        message: BASE_ERROR_CODES.FAILED_TO_CREATE_USER\n      });\n    }\n    const hash = await ctx.context.password.hash(password);\n    await ctx.context.internalAdapter.linkAccount({\n      userId: createdUser.id,\n      providerId: \"credential\",\n      accountId: createdUser.id,\n      password: hash\n    });\n    if (ctx.context.options.emailVerification?.sendOnSignUp || ctx.context.options.emailAndPassword.requireEmailVerification) {\n      const token = await createEmailVerificationToken(\n        ctx.context.secret,\n        createdUser.email,\n        void 0,\n        ctx.context.options.emailVerification?.expiresIn\n      );\n      const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${body.callbackURL || \"/\"}`;\n      await ctx.context.options.emailVerification?.sendVerificationEmail?.(\n        {\n          user: createdUser,\n          url,\n          token\n        },\n        ctx.request\n      );\n    }\n    if (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) {\n      return ctx.json({\n        token: null,\n        user: {\n          id: createdUser.id,\n          email: createdUser.email,\n          name: createdUser.name,\n          image: createdUser.image,\n          emailVerified: createdUser.emailVerified,\n          createdAt: createdUser.createdAt,\n          updatedAt: createdUser.updatedAt\n        }\n      });\n    }\n    const session = await ctx.context.internalAdapter.createSession(\n      createdUser.id,\n      ctx.request\n    );\n    if (!session) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION\n      });\n    }\n    await setSessionCookie(ctx, {\n      session,\n      user: createdUser\n    });\n    return ctx.json({\n      token: session.token,\n      user: {\n        id: createdUser.id,\n        email: createdUser.email,\n        name: createdUser.name,\n        image: createdUser.image,\n        emailVerified: createdUser.emailVerified,\n        createdAt: createdUser.createdAt,\n        updatedAt: createdUser.updatedAt\n      }\n    });\n  }\n);\nvar listUserAccounts = createAuthEndpoint(\n  \"/list-accounts\",\n  {\n    method: \"GET\",\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"List all accounts linked to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    type: \"object\",\n                    properties: {\n                      id: {\n                        type: \"string\"\n                      },\n                      provider: {\n                        type: \"string\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const session = c.context.session;\n    const accounts = await c.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    return c.json(\n      accounts.map((a) => {\n        return {\n          id: a.id,\n          provider: a.providerId,\n          createdAt: a.createdAt,\n          updatedAt: a.updatedAt,\n          accountId: a.accountId,\n          scopes: a.scope?.split(\",\") || []\n        };\n      })\n    );\n  }\n);\nvar linkSocialAccount = createAuthEndpoint(\n  \"/link-social\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    body: z.object({\n      /**\n       * Callback URL to redirect to after the user has signed in.\n       */\n      callbackURL: z.string({\n        description: \"The URL to redirect to after the user has signed in\"\n      }).optional(),\n      /**\n       * OAuth2 provider to use`\n       */\n      provider: z.enum(socialProviderList, {\n        description: \"The OAuth2 provider to use\"\n      })\n    }),\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Link a social account to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    url: {\n                      type: \"string\"\n                    },\n                    redirect: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"url\", \"redirect\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const session = c.context.session;\n    const account = await c.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const existingAccount = account.find(\n      (a) => a.providerId === c.body.provider\n    );\n    if (existingAccount) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.SOCIAL_ACCOUNT_ALREADY_LINKED\n      });\n    }\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.body.provider\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Provider not found. Make sure to add the provider in your auth config\",\n        {\n          provider: c.body.provider\n        }\n      );\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.PROVIDER_NOT_FOUND\n      });\n    }\n    const state = await generateState(c, {\n      userId: session.user.id,\n      email: session.user.email\n    });\n    const url = await provider.createAuthorizationURL({\n      state: state.state,\n      codeVerifier: state.codeVerifier,\n      redirectURI: `${c.context.baseURL}/callback/${provider.id}`\n    });\n    return c.json({\n      url: url.toString(),\n      redirect: true\n    });\n  }\n);\nvar unlinkAccount = createAuthEndpoint(\n  \"/unlink-account\",\n  {\n    method: \"POST\",\n    body: z.object({\n      providerId: z.string()\n    }),\n    use: [freshSessionMiddleware]\n  },\n  async (ctx) => {\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      ctx.context.session.user.id\n    );\n    if (accounts.length === 1) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT\n      });\n    }\n    const accountExist = accounts.find(\n      (account) => account.providerId === ctx.body.providerId\n    );\n    if (!accountExist) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.ACCOUNT_NOT_FOUND\n      });\n    }\n    await ctx.context.internalAdapter.deleteAccount(\n      ctx.body.providerId,\n      ctx.context.session.user.id\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\n// src/api/rate-limiter/index.ts\nfunction shouldRateLimit(max, window, rateLimitData) {\n  const now = Date.now();\n  const windowInMs = window * 1e3;\n  const timeSinceLastRequest = now - rateLimitData.lastRequest;\n  return timeSinceLastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n  return new Response(\n    JSON.stringify({\n      message: \"Too many requests. Please try again later.\"\n    }),\n    {\n      status: 429,\n      statusText: \"Too Many Requests\",\n      headers: {\n        \"X-Retry-After\": retryAfter.toString()\n      }\n    }\n  );\n}\nfunction getRetryAfter(lastRequest, window) {\n  const now = Date.now();\n  const windowInMs = window * 1e3;\n  return Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDBStorage(ctx, modelName) {\n  const model = \"rateLimit\";\n  const db = ctx.adapter;\n  return {\n    get: async (key) => {\n      const res = await db.findMany({\n        model,\n        where: [{ field: \"key\", value: key }]\n      });\n      const data = res[0];\n      if (typeof data?.lastRequest === \"bigint\") {\n        data.lastRequest = Number(data.lastRequest);\n      }\n      return data;\n    },\n    set: async (key, value, _update) => {\n      try {\n        if (_update) {\n          await db.updateMany({\n            model: modelName ?? \"rateLimit\",\n            where: [{ field: \"key\", value: key }],\n            update: {\n              count: value.count,\n              lastRequest: value.lastRequest\n            }\n          });\n        } else {\n          await db.create({\n            model: modelName ?? \"rateLimit\",\n            data: {\n              key,\n              count: value.count,\n              lastRequest: value.lastRequest\n            }\n          });\n        }\n      } catch (e) {\n        ctx.logger.error(\"Error setting rate limit\", e);\n      }\n    }\n  };\n}\nvar memory = /* @__PURE__ */ new Map();\nfunction getRateLimitStorage(ctx) {\n  if (ctx.options.rateLimit?.customStorage) {\n    return ctx.options.rateLimit.customStorage;\n  }\n  if (ctx.rateLimit.storage === \"secondary-storage\") {\n    return {\n      get: async (key) => {\n        const stringified = await ctx.options.secondaryStorage?.get(key);\n        return stringified ? JSON.parse(stringified) : void 0;\n      },\n      set: async (key, value) => {\n        await ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value));\n      }\n    };\n  }\n  const storage = ctx.rateLimit.storage;\n  if (storage === \"memory\") {\n    return {\n      async get(key) {\n        return memory.get(key);\n      },\n      async set(key, value, _update) {\n        memory.set(key, value);\n      }\n    };\n  }\n  return createDBStorage(ctx, ctx.rateLimit.modelName);\n}\nasync function onRequestRateLimit(req, ctx) {\n  if (!ctx.rateLimit.enabled) {\n    return;\n  }\n  const baseURL = ctx.baseURL;\n  const path = req.url.replace(baseURL, \"\").split(\"?\")[0];\n  let window = ctx.rateLimit.window;\n  let max = ctx.rateLimit.max;\n  const key = getIp(req, ctx.options) + path;\n  const specialRules = getDefaultSpecialRules();\n  const specialRule = specialRules.find((rule) => rule.pathMatcher(path));\n  if (specialRule) {\n    window = specialRule.window;\n    max = specialRule.max;\n  }\n  for (const plugin of ctx.options.plugins || []) {\n    if (plugin.rateLimit) {\n      const matchedRule = plugin.rateLimit.find(\n        (rule) => rule.pathMatcher(path)\n      );\n      if (matchedRule) {\n        window = matchedRule.window;\n        max = matchedRule.max;\n        break;\n      }\n    }\n  }\n  if (ctx.rateLimit.customRules) {\n    const _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n      if (p.includes(\"*\")) {\n        const isMatch2 = wildcardMatch(p)(path);\n        return isMatch2;\n      }\n      return p === path;\n    });\n    if (_path) {\n      const customRule = ctx.rateLimit.customRules[_path];\n      const resolved = typeof customRule === \"function\" ? await customRule(req) : customRule;\n      if (resolved) {\n        window = resolved.window;\n        max = resolved.max;\n      }\n    }\n  }\n  const storage = getRateLimitStorage(ctx);\n  const data = await storage.get(key);\n  const now = Date.now();\n  if (!data) {\n    await storage.set(key, {\n      key,\n      count: 1,\n      lastRequest: now\n    });\n  } else {\n    const timeSinceLastRequest = now - data.lastRequest;\n    if (shouldRateLimit(max, window, data)) {\n      const retryAfter = getRetryAfter(data.lastRequest, window);\n      return rateLimitResponse(retryAfter);\n    } else if (timeSinceLastRequest > window * 1e3) {\n      await storage.set(\n        key,\n        {\n          ...data,\n          count: 1,\n          lastRequest: now\n        },\n        true\n      );\n    } else {\n      await storage.set(\n        key,\n        {\n          ...data,\n          count: data.count + 1,\n          lastRequest: now\n        },\n        true\n      );\n    }\n  }\n}\nfunction getDefaultSpecialRules() {\n  const specialRules = [\n    {\n      pathMatcher(path) {\n        return path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n      },\n      window: 10,\n      max: 3\n    }\n  ];\n  return specialRules;\n}\nfunction getEndpoints(ctx, options) {\n  const pluginEndpoints = options.plugins?.reduce(\n    (acc, plugin) => {\n      return {\n        ...acc,\n        ...plugin.endpoints\n      };\n    },\n    {}\n  );\n  const middlewares = options.plugins?.map(\n    (plugin) => plugin.middlewares?.map((m) => {\n      const middleware = async (context) => {\n        return m.middleware({\n          ...context,\n          context: {\n            ...ctx,\n            ...context.context\n          }\n        });\n      };\n      middleware.path = m.path;\n      middleware.options = m.middleware.options;\n      middleware.headers = m.middleware.headers;\n      return {\n        path: m.path,\n        middleware\n      };\n    })\n  ).filter((plugin) => plugin !== void 0).flat() || [];\n  const baseEndpoints = {\n    signInSocial,\n    callbackOAuth,\n    getSession: getSession(),\n    signOut,\n    signUpEmail: signUpEmail(),\n    signInEmail,\n    forgetPassword,\n    resetPassword,\n    verifyEmail,\n    sendVerificationEmail,\n    changeEmail,\n    changePassword,\n    setPassword,\n    updateUser: updateUser(),\n    deleteUser,\n    forgetPasswordCallback,\n    listSessions: listSessions(),\n    revokeSession,\n    revokeSessions,\n    revokeOtherSessions,\n    linkSocialAccount,\n    listUserAccounts,\n    deleteUserCallback,\n    unlinkAccount\n  };\n  const endpoints = {\n    ...baseEndpoints,\n    ...pluginEndpoints,\n    ok,\n    error\n  };\n  let api = {};\n  for (const [key, endpoint] of Object.entries(endpoints)) {\n    api[key] = async (context = {}) => {\n      endpoint.headers = new Headers();\n      let internalCtx = {\n        setHeader(key2, value) {\n          endpoint.headers.set(key2, value);\n        },\n        setCookie(key2, value, options2) {\n          setCookie(endpoint.headers, key2, value, options2);\n        },\n        getCookie(key2, prefix) {\n          const header = context.headers;\n          const cookieH = header?.get(\"cookie\");\n          const cookie = getCookie(cookieH || \"\", key2, prefix);\n          return cookie;\n        },\n        getSignedCookie(key2, secret, prefix) {\n          const header = context.headers;\n          if (!header) {\n            return null;\n          }\n          const cookie = getSignedCookie(header, secret, key2, prefix);\n          return cookie;\n        },\n        async setSignedCookie(key2, value, secret, options2) {\n          await setSignedCookie(endpoint.headers, key2, value, secret, options2);\n        },\n        redirect(url) {\n          endpoint.headers.set(\"Location\", url);\n          return new APIError(\"FOUND\");\n        },\n        responseHeader: endpoint.headers\n      };\n      let authCtx = await ctx;\n      let newSession = null;\n      let internalContext = {\n        ...internalCtx,\n        ...context,\n        path: endpoint.path,\n        context: {\n          ...authCtx,\n          ...context.context,\n          session: null,\n          setNewSession: function(session) {\n            this.newSession = session;\n            newSession = session;\n          }\n        }\n      };\n      const plugins = options.plugins || [];\n      const beforeHooks = plugins.map((plugin) => {\n        if (plugin.hooks?.before) {\n          return plugin.hooks.before;\n        }\n      }).filter((plugin) => plugin !== void 0).flat();\n      const afterHooks = plugins.map((plugin) => {\n        if (plugin.hooks?.after) {\n          return plugin.hooks.after;\n        }\n      }).filter((plugin) => plugin !== void 0).flat();\n      if (options.hooks?.before) {\n        beforeHooks.push({\n          matcher: () => true,\n          handler: options.hooks.before\n        });\n      }\n      if (options.hooks?.after) {\n        afterHooks.push({\n          matcher: () => true,\n          handler: options.hooks.after\n        });\n      }\n      for (const hook of beforeHooks) {\n        if (!hook.matcher(internalContext)) continue;\n        const hookRes = await hook.handler(internalContext);\n        if (hookRes && \"context\" in hookRes) {\n          internalContext = {\n            ...internalContext,\n            ...hookRes.context\n          };\n          continue;\n        }\n        if (hookRes) {\n          return hookRes;\n        }\n      }\n      let endpointRes;\n      try {\n        endpointRes = await endpoint(internalContext);\n        if (newSession) {\n          internalContext.context.newSession = newSession;\n        }\n      } catch (e) {\n        if (newSession) {\n          internalContext.context.newSession = newSession;\n        }\n        if (e instanceof APIError) {\n          if (!afterHooks?.length) {\n            e.headers = endpoint.headers;\n            throw e;\n          }\n          internalContext.context.returned = e;\n          internalContext.context.returned.headers = endpoint.headers;\n          for (const hook of afterHooks || []) {\n            const match = hook.matcher(internalContext);\n            if (match) {\n              try {\n                const hookRes = await hook.handler(internalContext);\n                if (hookRes && \"response\" in hookRes) {\n                  internalContext.context.returned = hookRes.response;\n                }\n              } catch (e2) {\n                if (e2 instanceof APIError) {\n                  internalContext.context.returned = e2;\n                  continue;\n                }\n                throw e2;\n              }\n            }\n          }\n          if (internalContext.context.returned instanceof APIError) {\n            internalContext.context.returned.headers = endpoint.headers;\n            throw internalContext.context.returned;\n          }\n          return internalContext.context.returned;\n        }\n        throw e;\n      }\n      internalContext.context.returned = endpointRes;\n      internalContext.responseHeader = endpoint.headers;\n      for (const hook of afterHooks) {\n        const match = hook.matcher(internalContext);\n        if (match) {\n          try {\n            const hookRes = await hook.handler(internalContext);\n            if (hookRes) {\n              if (\"responseHeader\" in hookRes) {\n                const headers = hookRes.responseHeader;\n                internalContext.responseHeader = headers;\n              } else {\n                internalContext.context.returned = hookRes;\n              }\n            }\n          } catch (e) {\n            if (e instanceof APIError) {\n              internalContext.context.returned = e;\n              continue;\n            }\n            throw e;\n          }\n        }\n      }\n      const response = internalContext.context.returned;\n      if (response instanceof Response) {\n        endpoint.headers.forEach((value, key2) => {\n          if (key2 === \"set-cookie\") {\n            response.headers.append(key2, value);\n          } else {\n            response.headers.set(key2, value);\n          }\n        });\n      }\n      if (response instanceof APIError) {\n        response.headers = endpoint.headers;\n        throw response;\n      }\n      return response;\n    };\n    api[key].path = endpoint.path;\n    api[key].method = endpoint.method;\n    api[key].options = endpoint.options;\n    api[key].headers = endpoint.headers;\n  }\n  return {\n    api,\n    middlewares\n  };\n}\nvar router = (ctx, options) => {\n  const { api, middlewares } = getEndpoints(ctx, options);\n  const basePath = new URL(ctx.baseURL).pathname;\n  return createRouter(api, {\n    extraContext: ctx,\n    basePath,\n    routerMiddleware: [\n      {\n        path: \"/**\",\n        middleware: originCheckMiddleware\n      },\n      ...middlewares\n    ],\n    async onRequest(req) {\n      for (const plugin of ctx.options.plugins || []) {\n        if (plugin.onRequest) {\n          const response = await plugin.onRequest(req, ctx);\n          if (response && \"response\" in response) {\n            return response.response;\n          }\n        }\n      }\n      return onRequestRateLimit(req, ctx);\n    },\n    async onResponse(res) {\n      for (const plugin of ctx.options.plugins || []) {\n        if (plugin.onResponse) {\n          const response = await plugin.onResponse(res, ctx);\n          if (response) {\n            return response.response;\n          }\n        }\n      }\n      return res;\n    },\n    onError(e) {\n      if (e instanceof APIError && e.status === \"FOUND\") {\n        return;\n      }\n      if (options.onAPIError?.throw) {\n        throw e;\n      }\n      if (options.onAPIError?.onError) {\n        options.onAPIError.onError(e, ctx);\n        return;\n      }\n      const optLogLevel = options.logger?.level;\n      const log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? logger : void 0;\n      if (options.logger?.disabled !== true) {\n        if (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n          if (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n            ctx.logger?.error(e.message);\n            return;\n          }\n        }\n        if (e instanceof APIError) {\n          if (e.status === \"INTERNAL_SERVER_ERROR\") {\n            ctx.logger.error(e.status, e);\n          }\n          log?.error(e.message);\n        } else {\n          ctx.logger?.error(\n            e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n            e\n          );\n        }\n      }\n    }\n  });\n};\n\nexport { BASE_ERROR_CODES, callbackOAuth, changeEmail, changePassword, createAuthEndpoint, createAuthMiddleware, createEmailVerificationToken, deleteUser, deleteUserCallback, error, forgetPassword, forgetPasswordCallback, freshSessionMiddleware, getEndpoints, getSession, getSessionFromCtx, handleOAuthUserInfo, linkSocialAccount, listSessions, listUserAccounts, ok, optionsMiddleware, originCheck, originCheckMiddleware, resetPassword, revokeOtherSessions, revokeSession, revokeSessions, router, sendVerificationEmail, sendVerificationEmailFn, sessionMiddleware, setPassword, signInEmail, signInSocial, signOut, signUpEmail, unlinkAccount, updateUser, verifyEmail };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;AALA;AAHA;AAUA;AARA;AAWA;AADA;AADA;AAVA;AAKA;AADA;AASA;AACA;AARA;AARA;AAKA;;;;;;;;;;;;;;;;;;AAaA,IAAI,oBAAoB,CAAA,GAAA,iJAAA,CAAA,mBAAgB,AAAD,EAAE;IACvC,OAAO,CAAC;AACV;AACA,IAAI,uBAAuB,CAAA,GAAA,iJAAA,CAAA,0BAAuB,AAAD,EAAE;IACjD,KAAK;QACH;QACA;;KAEC,GACD,CAAA,GAAA,iJAAA,CAAA,mBAAgB,AAAD,EAAE;YACf,OAAO,CAAC;QACV;KACD;AACH;AACA,IAAI,qBAAqB,CAAA,GAAA,iJAAA,CAAA,wBAAqB,AAAD,EAAE;IAC7C,KAAK;QAAC;KAAkB;AAC1B;AAEA,wBAAwB;AACxB,SAAS,iBAAiB,IAAI;IAC5B,IAAI,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,MAAM;QACjP,OAAO,CAAC,EAAE,EAAE,MAAM;IACpB,OAAO;QACL,OAAO;IACT;AACF;AACA,SAAS,mBAAmB,GAAG;IAC7B,IAAI,SAAS;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACnC,UAAU,iBAAiB,GAAG,CAAC,EAAE;IACnC;IACA,OAAO;AACT;AACA,SAAS,UAAU,OAAO,EAAE,YAAY,IAAI;IAC1C,IAAI,MAAM,OAAO,CAAC,UAAU;QAC1B,IAAI,iBAAiB,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,UAAU,GAAG,WAAW,CAAC,CAAC;QACtE,OAAO,CAAC,GAAG,EAAE,eAAe,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C;IACA,IAAI,oBAAoB;IACxB,IAAI,mBAAmB;IACvB,IAAI,WAAW;IACf,IAAI,cAAc,MAAM;QACtB,oBAAoB;QACpB,mBAAmB;QACnB,WAAW;IACb,OAAO,IAAI,WAAW;QACpB,oBAAoB;QACpB,mBAAmB,mBAAmB;QACtC,IAAI,iBAAiB,MAAM,GAAG,GAAG;YAC/B,mBAAmB,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;YAC5C,WAAW,CAAC,IAAI,EAAE,iBAAiB,GAAG,CAAC;QACzC,OAAO;YACL,WAAW,CAAC,EAAE,EAAE,iBAAiB,CAAC,CAAC;QACrC;IACF;IACA,IAAI,oBAAoB,YAAY,GAAG,iBAAiB,EAAE,CAAC,GAAG;IAC9D,IAAI,oBAAoB,YAAY,GAAG,iBAAiB,EAAE,CAAC,GAAG;IAC9D,IAAI,WAAW,YAAY,QAAQ,KAAK,CAAC,qBAAqB;QAAC;KAAQ;IACvE,IAAI,SAAS;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,IAAK;QACxC,IAAI,UAAU,QAAQ,CAAC,EAAE;QACzB,IAAI,cAAc,QAAQ,CAAC,IAAI,EAAE;QACjC,IAAI,mBAAmB;QACvB,IAAI,CAAC,WAAW,IAAI,GAAG;YACrB;QACF;QACA,IAAI,WAAW;YACb,IAAI,MAAM,SAAS,MAAM,GAAG,GAAG;gBAC7B,mBAAmB;YACrB,OAAO,IAAI,gBAAgB,MAAM;gBAC/B,mBAAmB;YACrB,OAAO;gBACL,mBAAmB;YACrB;QACF;QACA,IAAI,aAAa,YAAY,MAAM;YACjC,IAAI,kBAAkB;gBACpB,UAAU,MAAM,IAAI,KAAK;gBACzB,UAAU,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE,iBAAiB,GAAG,CAAC;YACpD;YACA;QACF;QACA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;YACvC,IAAI,OAAO,OAAO,CAAC,EAAE;YACrB,IAAI,SAAS,MAAM;gBACjB,IAAI,IAAI,QAAQ,MAAM,GAAG,GAAG;oBAC1B,UAAU,iBAAiB,OAAO,CAAC,IAAI,EAAE;oBACzC;gBACF;YACF,OAAO,IAAI,SAAS,KAAK;gBACvB,UAAU;YACZ,OAAO,IAAI,SAAS,KAAK;gBACvB,UAAU,GAAG,SAAS,EAAE,CAAC;YAC3B,OAAO;gBACL,UAAU,iBAAiB;YAC7B;QACF;QACA,UAAU;IACZ;IACA,OAAO;AACT;AACA,SAAS,QAAQ,MAAM,EAAE,MAAM;IAC7B,IAAI,OAAO,WAAW,UAAU;QAC9B,MAAM,IAAI,UAAU,CAAC,6BAA6B,EAAE,OAAO,OAAO,MAAM,CAAC;IAC3E;IACA,OAAO,OAAO,IAAI,CAAC;AACrB;AACA,SAAS,cAAc,OAAO,EAAE,OAAO;IACrC,IAAI,OAAO,YAAY,YAAY,CAAC,MAAM,OAAO,CAAC,UAAU;QAC1D,MAAM,IAAI,UACR,CAAC,gFAAgF,EAAE,OAAO,QAAQ,MAAM,CAAC;IAE7G;IACA,IAAI,OAAO,YAAY,YAAY,OAAO,YAAY,WAAW;QAC/D,UAAU;YAAE,WAAW;QAAQ;IACjC;IACA,IAAI,UAAU,MAAM,KAAK,KAAK,CAAC,CAAC,OAAO,YAAY,eAAe,OAAO,YAAY,YAAY,YAAY,QAAQ,CAAC,MAAM,OAAO,CAAC,QAAQ,GAAG;QAC7I,MAAM,IAAI,UACR,CAAC,iFAAiF,EAAE,OAAO,QAAQ,MAAM,CAAC;IAE9G;IACA,UAAU,WAAW,CAAC;IACtB,IAAI,QAAQ,SAAS,KAAK,MAAM;QAC9B,MAAM,IAAI,MACR;IAEJ;IACA,IAAI,gBAAgB,UAAU,SAAS,QAAQ,SAAS;IACxD,IAAI,SAAS,IAAI,OAAO,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,QAAQ,KAAK;IAC3D,IAAI,KAAK,QAAQ,IAAI,CAAC,MAAM;IAC5B,GAAG,OAAO,GAAG;IACb,GAAG,OAAO,GAAG;IACb,GAAG,MAAM,GAAG;IACZ,OAAO;AACT;AAEA,sCAAsC;AACtC,IAAI,wBAAwB,qBAAqB,OAAO;IACtD,IAAI,IAAI,OAAO,EAAE,WAAW,QAAQ;QAClC;IACF;IACA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IACjC,MAAM,eAAe,IAAI,OAAO,EAAE,IAAI,aAAa,IAAI,OAAO,EAAE,IAAI,cAAc;IAClF,MAAM,cAAc,MAAM,eAAe,OAAO;IAChD,MAAM,cAAc,MAAM;IAC1B,MAAM,mBAAmB,MAAM;IAC/B,MAAM,qBAAqB,MAAM;IACjC,MAAM,iBAAiB,QAAQ,cAAc;IAC7C,MAAM,cAAc,IAAI,OAAO,EAAE,IAAI;IACrC,MAAM,iBAAiB,CAAC,KAAK;QAC3B,IAAI,IAAI,UAAU,CAAC,MAAM;YACvB,OAAO;QACT;QACA,IAAI,QAAQ,QAAQ,CAAC,MAAM;YACzB,OAAO,cAAc,SAAS,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EAAE;QACxC;QACA,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD,EAAE;QAC7B,OAAO,aAAa,WAAW,aAAa,YAAY,CAAC,WAAW,YAAY,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE,OAAO,IAAI,UAAU,CAAC;IAClH;IACA,MAAM,cAAc,CAAC,KAAK;QACxB,IAAI,CAAC,KAAK;YACR;QACF;QACA,MAAM,kBAAkB,eAAe,IAAI,CACzC,CAAC,SAAW,eAAe,KAAK,WAAW,KAAK,WAAW,QAAQ,UAAU,YAAY,CAAC,IAAI,QAAQ,CAAC;QAEzG,IAAI,CAAC,iBAAiB;YACpB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,KAAK;YACnD,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CACrB,CAAC,gCAAgC,EAAE,IAAI;AAC/C,CAAC,EACO,CAAC,gCAAgC,EAAE,gBAAgB;YAErD,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;gBAAE,SAAS,CAAC,QAAQ,EAAE,OAAO;YAAC;QAChE;IACF;IACA,IAAI,eAAe,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,kBAAkB;QAClE,YAAY,cAAc;IAC5B;IACA,eAAe,YAAY,aAAa;IACxC,eAAe,YAAY,aAAa;IACxC,oBAAoB,YAAY,kBAAkB;IAClD,sBAAsB,YAAY,oBAAoB;AACxD;AACA,IAAI,cAAc,CAAC,WAAa,qBAAqB,OAAO;QAC1D,MAAM,EAAE,OAAO,EAAE,GAAG;QACpB,MAAM,cAAc,SAAS;QAC7B,MAAM,iBAAiB,QAAQ,cAAc;QAC7C,MAAM,iBAAiB,CAAC,KAAK;YAC3B,IAAI,IAAI,UAAU,CAAC,MAAM;gBACvB,OAAO;YACT;YACA,IAAI,QAAQ,QAAQ,CAAC,MAAM;gBACzB,OAAO,cAAc,SAAS,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EAAE;YACxC;YACA,OAAO,IAAI,UAAU,CAAC;QACxB;QACA,MAAM,cAAc,CAAC,KAAK;YACxB,IAAI,CAAC,KAAK;gBACR;YACF;YACA,MAAM,kBAAkB,eAAe,IAAI,CACzC,CAAC,SAAW,eAAe,KAAK,WAAW,KAAK,WAAW,QAAQ,UAAU,YAAY,CAAC,IAAI,QAAQ,CAAC;YAEzG,IAAI,CAAC,iBAAiB;gBACpB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,KAAK;gBACnD,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CACrB,CAAC,gCAAgC,EAAE,IAAI;AAC/C,CAAC,EACO,CAAC,gCAAgC,EAAE,gBAAgB;gBAErD,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;oBAAE,SAAS,CAAC,QAAQ,EAAE,OAAO;gBAAC;YAChE;QACF;QACA,eAAe,YAAY,aAAa;IAC1C;AAEA,qBAAqB;AACrB,IAAI,mBAAmB;IACrB,gBAAgB;IAChB,uBAAuB;IACvB,0BAA0B;IAC1B,uBAAuB;IACvB,uBAAuB;IACvB,kBAAkB;IAClB,eAAe;IACf,2BAA2B;IAC3B,+BAA+B;IAC/B,oBAAoB;IACpB,eAAe;IACf,wBAAwB;IACxB,yBAAyB;IACzB,sBAAsB;IACtB,oBAAoB;IACpB,oBAAoB;IACpB,mBAAmB;IACnB,qBAAqB;IACrB,0BAA0B;IAC1B,8BAA8B;IAC9B,iBAAiB;IACjB,+BAA+B;IAC/B,mBAAmB;AACrB;AACA,IAAI,aAAa,IAAM,mBACrB,gBACA;QACE,QAAQ;QACR,OAAO,sIAAA,CAAA,IAAC,CAAC,QAAQ,CACf,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACP;;;SAGC,GACD,oBAAoB,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;gBAC5B,aAAa;YACf,GAAG,EAAE,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,IAAM,MAAM,SAAS,QAAQ;YACzD,gBAAgB,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;gBACxB,aAAa;YACf,GAAG,QAAQ;QACb;QAEF,gBAAgB;QAChB,UAAU;YACR,SAAS;gBACP,aAAa;gBACb,WAAW;oBACT,OAAO;wBACL,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,SAAS;4CACP,MAAM;4CACN,YAAY;gDACV,OAAO;oDACL,MAAM;gDACR;gDACA,QAAQ;oDACN,MAAM;gDACR;gDACA,WAAW;oDACT,MAAM;gDACR;4CACF;wCACF;wCACA,MAAM;4CACJ,MAAM;4CACN,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI;YACF,MAAM,qBAAqB,MAAM,IAAI,eAAe,CAClD,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EACzC,IAAI,OAAO,CAAC,MAAM;YAEpB,IAAI,CAAC,oBAAoB;gBACvB,OAAO,IAAI,IAAI,CAAC;YAClB;YACA,MAAM,oBAAoB,IAAI,SAAS,CACrC,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI;YAE1C,MAAM,qBAAqB,oBAAoB,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAE,8JAAA,CAAA,SAAM,CAAC,MAAM,CAAC,8JAAA,CAAA,SAAM,CAAC,MAAM,CAAC,uBAAuB;YAChH,IAAI,oBAAoB;gBACtB,MAAM,UAAU,MAAM,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EAAE,WAAW,kBAAkB,MAAM,CAClE,IAAI,OAAO,CAAC,MAAM,EAClB,KAAK,SAAS,CAAC,mBAAmB,OAAO,GACzC,mBAAmB,SAAS;gBAE9B,IAAI,CAAC,SAAS;oBACZ,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;oBACpB,OAAO,IAAI,IAAI,CAAC;gBAClB;YACF;YACA,MAAM,iBAAiB,MAAM,IAAI,eAAe,CAC9C,IAAI,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,EAC9C,IAAI,OAAO,CAAC,MAAM;YAEpB,IAAI,oBAAoB,WAAW,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,aAAa,WAAW,CAAC,IAAI,KAAK,EAAE,oBAAoB;gBACtH,MAAM,WAAW,mBAAmB,OAAO;gBAC3C,MAAM,aAAa,mBAAmB,SAAS,GAAG,KAAK,GAAG,MAAM,SAAS,OAAO,CAAC,SAAS,GAAG,aAAa,GAAG,IAAI;gBACjH,IAAI,CAAC,YAAY;oBACf,OAAO,IAAI,IAAI,CACb;gBAEJ,OAAO;oBACL,MAAM,aAAa,IAAI,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI;oBAC3D,IAAI,SAAS,CAAC,YAAY,IAAI;wBAC5B,QAAQ;oBACV;gBACF;YACF;YACA,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;YAC9D,IAAI,OAAO,CAAC,OAAO,GAAG;YACtB,IAAI,CAAC,WAAW,QAAQ,OAAO,CAAC,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ;gBACtE,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;gBACpB,IAAI,SAAS;oBACX,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7C,QAAQ,OAAO,CAAC,KAAK;gBAEzB;gBACA,OAAO,IAAI,IAAI,CAAC;YAClB;YACA,IAAI,kBAAkB,IAAI,KAAK,EAAE,gBAAgB;gBAC/C,OAAO,IAAI,IAAI,CACb;YAEJ;YACA,MAAM,YAAY,IAAI,OAAO,CAAC,aAAa,CAAC,SAAS;YACrD,MAAM,YAAY,IAAI,OAAO,CAAC,aAAa,CAAC,SAAS;YACrD,MAAM,8BAA8B,QAAQ,OAAO,CAAC,SAAS,CAAC,OAAO,KAAK,YAAY,MAAM,YAAY;YACxG,MAAM,kBAAkB,+BAA+B,KAAK,GAAG;YAC/D,IAAI,iBAAiB;gBACnB,MAAM,iBAAiB,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CACpE,QAAQ,OAAO,CAAC,KAAK,EACrB;oBACE,WAAW,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EAAE,IAAI,OAAO,CAAC,aAAa,CAAC,SAAS,EAAE;gBAC1D;gBAEF,IAAI,CAAC,gBAAgB;oBACnB,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;oBACpB,OAAO,IAAI,IAAI,CAAC,MAAM;wBAAE,QAAQ;oBAAI;gBACtC;gBACA,MAAM,SAAS,CAAC,eAAe,SAAS,CAAC,OAAO,KAAK,KAAK,GAAG,EAAE,IAAI;gBACnE,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EACnB,KACA;oBACE,SAAS;oBACT,MAAM,QAAQ,IAAI;gBACpB,GACA,OACA;oBACE;gBACF;gBAEF,OAAO,IAAI,IAAI,CAAC;oBACd,SAAS;oBACT,MAAM,QAAQ,IAAI;gBACpB;YACF;YACA,MAAM,CAAA,GAAA,6JAAA,CAAA,iBAAc,AAAD,EAAE,KAAK;YAC1B,OAAO,IAAI,IAAI,CACb;QAEJ,EAAE,OAAO,QAAQ;YACf,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,yBAAyB;YAClD,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,yBAAyB;gBAC1C,SAAS,iBAAiB,qBAAqB;YACjD;QACF;IACF;AAEF,IAAI,oBAAoB,OAAO,KAAK;IAClC,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE;QACvB,OAAO,IAAI,OAAO,CAAC,OAAO;IAC5B;IACA,MAAM,UAAU,MAAM,aAAa;QACjC,GAAG,GAAG;QACN,OAAO;QACP,SAAS,IAAI,OAAO;QACpB,OAAO;IACT,GAAG,KAAK,CAAC,CAAC;QACR,OAAO;IACT;IACA,IAAI,OAAO,CAAC,OAAO,GAAG;IACtB,OAAO;AACT;AACA,IAAI,oBAAoB,qBAAqB,OAAO;IAClD,MAAM,UAAU,MAAM,kBAAkB;IACxC,IAAI,CAAC,SAAS,SAAS;QACrB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,OAAO;QACL;IACF;AACF;AACA,IAAI,yBAAyB,qBAAqB,OAAO;IACvD,MAAM,UAAU,MAAM,kBAAkB;IACxC,IAAI,CAAC,SAAS,SAAS;QACrB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,IAAI,IAAI,OAAO,CAAC,aAAa,CAAC,QAAQ,KAAK,GAAG;QAC5C,OAAO;YACL;QACF;IACF;IACA,MAAM,WAAW,IAAI,OAAO,CAAC,aAAa,CAAC,QAAQ;IACnD,MAAM,cAAc,QAAQ,OAAO,CAAC,SAAS,EAAE,aAAa,QAAQ,OAAO,CAAC,SAAS,CAAC,OAAO;IAC7F,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,UAAU,MAAM,cAAc,WAAW;IAC/C,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS;QACX;IACF;IACA,OAAO;QACL;IACF;AACF;AACA,IAAI,eAAe,IAAM,mBACvB,kBACA;QACE,QAAQ;QACR,KAAK;YAAC;SAAkB;QACxB,gBAAgB;QAChB,UAAU;YACR,SAAS;gBACP,aAAa;gBACb,WAAW;oBACT,OAAO;wBACL,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,OAAO;wCACL,MAAM;wCACN,YAAY;4CACV,OAAO;gDACL,MAAM;4CACR;4CACA,QAAQ;gDACN,MAAM;4CACR;4CACA,WAAW;gDACT,MAAM;4CACR;wCACF;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAC7D,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QAE7B,MAAM,iBAAiB,SAAS,MAAM,CAAC,CAAC;YACtC,OAAO,QAAQ,SAAS,GAAG,aAAa,GAAG,IAAI;QACjD;QACA,OAAO,IAAI,IAAI,CACb;IAEJ;AAEF,IAAI,gBAAgB,mBAClB,mBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACd,aAAa;QACf;IACF;IACA,KAAK;QAAC;KAAkB;IACxB,gBAAgB;IAChB,UAAU;QACR,SAAS;YACP,aAAa;YACb,aAAa;gBACX,SAAS;oBACP,oBAAoB;wBAClB,QAAQ;4BACN,MAAM;4BACN,YAAY;gCACV,OAAO;oCACL,MAAM;gCACR;4BACF;4BACA,UAAU;gCAAC;6BAAQ;wBACrB;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,QAAQ,IAAI,IAAI,CAAC,KAAK;IAC5B,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;IAClE,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,IAAI,YAAY,OAAO,CAAC,MAAM,KAAK,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE;QAC9D,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,IAAI;QACF,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;IAClD,EAAE,OAAO,QAAQ;QACf,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB,UAAU,OAAO,WAAW,YAAY,UAAU,SAAS,OAAO,IAAI,GAAG,IACzE;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,IAAI,iBAAiB,mBACnB,oBACA;IACE,QAAQ;IACR,KAAK;QAAC;KAAkB;IACxB,gBAAgB;IAChB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,QAAQ;wCACN,MAAM;oCACR;gCACF;gCACA,UAAU;oCAAC;iCAAS;4BACtB;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,IAAI;QACF,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAC9C,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IAE/B,EAAE,OAAO,QAAQ;QACf,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB,UAAU,OAAO,WAAW,YAAY,UAAU,SAAS,OAAO,IAAI,GAAG,IACzE;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,IAAI,sBAAsB,mBACxB,0BACA;IACE,QAAQ;IACR,gBAAgB;IAChB,KAAK;QAAC;KAAkB;IACxB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,IAAI,CAAC,QAAQ,IAAI,EAAE;QACjB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAC7D,QAAQ,IAAI,CAAC,EAAE;IAEjB,MAAM,iBAAiB,SAAS,MAAM,CAAC,CAAC;QACtC,OAAO,SAAS,SAAS,GAAG,aAAa,GAAG,IAAI;IAClD;IACA,MAAM,gBAAgB,eAAe,MAAM,CACzC,CAAC,WAAa,SAAS,KAAK,KAAK,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK;IAEpE,MAAM,QAAQ,GAAG,CACf,cAAc,GAAG,CACf,CAAC,WAAa,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,SAAS,KAAK;IAG1E,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,eAAe,6BAA6B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,IAAI;IACnF,MAAM,QAAQ,MAAM,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EACxB;QACE,OAAO,MAAM,WAAW;QACxB;IACF,GACA,QACA;IAEF,OAAO;AACT;AACA,eAAe,wBAAwB,GAAG,EAAE,IAAI;IAC9C,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,uBAAuB;QACjE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,QAAQ,MAAM,6BAClB,IAAI,OAAO,CAAC,MAAM,EAClB,KAAK,KAAK,EACV,KAAK,GACL,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;IAEzC,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;IAC3G,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,qBAAqB,CAC/D;QACE;QACA;QACA;IACF,GACA,IAAI,OAAO;AAEf;AACA,IAAI,wBAAwB,mBAC1B,4BACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACd,aAAa;QACf,GAAG,KAAK;QACR,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf,GAAG,QAAQ;IACb;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,aAAa;gBACX,SAAS;oBACP,oBAAoB;wBAClB,QAAQ;4BACN,MAAM;4BACN,YAAY;gCACV,OAAO;oCACL,MAAM;oCACN,aAAa;gCACf;gCACA,aAAa;oCACX,MAAM;oCACN,aAAa;gCACf;4BACF;4BACA,UAAU;gCAAC;6BAAQ;wBACrB;oBACF;gBACF;YACF;YACA,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,uBAAuB;QACjE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI;IAC1B,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC;IAC/D,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,cAAc;QAC1C;IACF;IACA,MAAM,wBAAwB,KAAK,KAAK,IAAI;IAC5C,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,IAAI,cAAc,mBAChB,iBACA;IACE,QAAQ;IACR,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACd,aAAa;QACf;QACA,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf,GAAG,QAAQ;IACb;IACA,KAAK;QAAC,YAAY,CAAC,MAAQ,IAAI,KAAK,CAAC,WAAW;KAAE;IAClD,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,MAAM;wCACJ,MAAM;oCACR;oCACA,QAAQ;wCACN,MAAM;oCACR;gCACF;gCACA,UAAU;oCAAC;oCAAQ;iCAAS;4BAC9B;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,SAAS,gBAAgB,MAAM;QAC7B,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;YACzB,IAAI,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM;gBACvC,MAAM,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,QAAQ;YAC/D;YACA,MAAM,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,QAAQ;QAC/D;QACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS;QACX;IACF;IACA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,KAAK;IAC3B,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,CAAA,GAAA,8JAAA,CAAA,YAAS,AAAD,EAClB,OACA,IAAI,cAAc,MAAM,CAAC,IAAI,OAAO,CAAC,MAAM,GAC3C;YACE,YAAY;gBAAC;aAAQ;QACvB;IAEJ,EAAE,OAAO,GAAG;QACV,IAAI,aAAa,+JAAA,CAAA,aAAU,EAAE;YAC3B,OAAO,gBAAgB;QACzB;QACA,OAAO,gBAAgB;IACzB;IACA,MAAM,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACvB,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK;QACvB,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B;IACA,MAAM,SAAS,QAAQ,KAAK,CAAC,IAAI,OAAO;IACxC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAC5D,OAAO,KAAK;IAEd,IAAI,CAAC,MAAM;QACT,OAAO,gBAAgB;IACzB;IACA,IAAI,OAAO,QAAQ,EAAE;QACnB,MAAM,UAAU,MAAM,kBAAkB;QACxC,IAAI,CAAC,SAAS;YACZ,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;gBACzB,MAAM,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,mBAAmB,CAAC;YAClE;YACA,OAAO,gBAAgB;QACzB;QACA,IAAI,QAAQ,IAAI,CAAC,KAAK,KAAK,OAAO,KAAK,EAAE;YACvC,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;gBACzB,MAAM,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,mBAAmB,CAAC;YAClE;YACA,OAAO,gBAAgB;QACzB;QACA,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CACrE,OAAO,KAAK,EACZ;YACE,OAAO,OAAO,QAAQ;YACtB,eAAe;QACjB;QAEF,MAAM,WAAW,MAAM,6BACrB,IAAI,OAAO,CAAC,MAAM,EAClB,OAAO,QAAQ;QAEjB,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBAC3C;YACE,MAAM;YACN,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,UAAU;YAC5D,OAAO;QACT,GACA,IAAI,OAAO;QAEb,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;YACzB,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;QAC1C;QACA,OAAO,IAAI,IAAI,CAAC;YACd,QAAQ;YACR,MAAM;gBACJ,IAAI,YAAY,EAAE;gBAClB,OAAO,YAAY,KAAK;gBACxB,MAAM,YAAY,IAAI;gBACtB,OAAO,YAAY,KAAK;gBACxB,eAAe,YAAY,aAAa;gBACxC,WAAW,YAAY,SAAS;gBAChC,WAAW,YAAY,SAAS;YAClC;QACF;IACF;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,KAAK,EAAE;QAChE,eAAe;IACjB;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,6BAA6B;QACtE,MAAM,iBAAiB,MAAM,kBAAkB;QAC/C,IAAI,CAAC,kBAAkB,eAAe,IAAI,CAAC,KAAK,KAAK,OAAO,KAAK,EAAE;YACjE,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7D,KAAK,IAAI,CAAC,EAAE,EACZ,IAAI,OAAO;YAEb,IAAI,CAAC,SAAS;gBACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,yBAAyB;oBAC1C,SAAS;gBACX;YACF;YACA,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;gBAAE;gBAAS,MAAM,KAAK,IAAI;YAAC;QACzD;IACF;IACA,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;QACzB,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;IAC1C;IACA,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;QACR,MAAM;IACR;AACF;AAGF,6BAA6B;AAC7B,eAAe,oBAAoB,CAAC,EAAE,EACpC,QAAQ,EACR,OAAO,EACP,WAAW,EACZ;IACC,MAAM,SAAS,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAC1D,SAAS,KAAK,CAAC,WAAW,IAC1B,QAAQ,SAAS,EACjB,QAAQ,UAAU,EAClB,KAAK,CAAC,CAAC;QACP,6JAAA,CAAA,SAAM,CAAC,KAAK,CACV,2DACA;QAEF,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,kCAAkC,CAAC;IAE5D;IACA,IAAI,OAAO,QAAQ;IACnB,IAAI,aAAa,CAAC;IAClB,IAAI,QAAQ;QACV,MAAM,gBAAgB,OAAO,QAAQ,CAAC,IAAI,CACxC,CAAC,IAAM,EAAE,UAAU,KAAK,QAAQ,UAAU;QAE5C,IAAI,CAAC,eAAe;YAClB,MAAM,mBAAmB,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB;YACpE,MAAM,oBAAoB,kBAAkB,SAC1C,QAAQ,UAAU;YAEpB,IAAI,CAAC,qBAAqB,CAAC,SAAS,aAAa,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,YAAY,OAAO;gBACjH,IAAI,6JAAA,CAAA,gBAAa,EAAE;oBACjB,6JAAA,CAAA,SAAM,CAAC,IAAI,CACT,CAAC,+CAA+C,EAAE,QAAQ,UAAU,CAAC,2IAA2I,CAAC;gBAErN;gBACA,OAAO;oBACL,OAAO;oBACP,MAAM;gBACR;YACF;YACA,IAAI;gBACF,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;oBAC1C,YAAY,QAAQ,UAAU;oBAC9B,WAAW,SAAS,EAAE,CAAC,QAAQ;oBAC/B,QAAQ,OAAO,IAAI,CAAC,EAAE;oBACtB,aAAa,QAAQ,WAAW;oBAChC,SAAS,QAAQ,OAAO;oBACxB,cAAc,QAAQ,YAAY;oBAClC,sBAAsB,QAAQ,oBAAoB;oBAClD,uBAAuB,QAAQ,qBAAqB;oBACpD,OAAO,QAAQ,KAAK;gBACtB;YACF,EAAE,OAAO,GAAG;gBACV,6JAAA,CAAA,SAAM,CAAC,KAAK,CAAC,0BAA0B;gBACvC,OAAO;oBACL,OAAO;oBACP,MAAM;gBACR;YACF;QACF,OAAO;YACL,MAAM,aAAa,OAAO,WAAW,CACnC,OAAO,OAAO,CAAC;gBACb,aAAa,QAAQ,WAAW;gBAChC,SAAS,QAAQ,OAAO;gBACxB,cAAc,QAAQ,YAAY;gBAClC,sBAAsB,QAAQ,oBAAoB;gBAClD,uBAAuB,QAAQ,qBAAqB;gBACpD,OAAO,QAAQ,KAAK;YACtB,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,UAAU,KAAK;YAE3C,IAAI,OAAO,IAAI,CAAC,YAAY,MAAM,GAAG,GAAG;gBACtC,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAC3C,cAAc,EAAE,EAChB;YAEJ;QACF;IACF,OAAO;QACL,IAAI;YACF,OAAO,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,eAAe,CACpD;gBACE,GAAG,QAAQ;gBACX,OAAO,SAAS,KAAK,CAAC,WAAW;gBACjC,IAAI,KAAK;YACX,GACA;gBACE,aAAa,QAAQ,WAAW;gBAChC,SAAS,QAAQ,OAAO;gBACxB,cAAc,QAAQ,YAAY;gBAClC,sBAAsB,QAAQ,oBAAoB;gBAClD,uBAAuB,QAAQ,qBAAqB;gBACpD,OAAO,QAAQ,KAAK;gBACpB,YAAY,QAAQ,UAAU;gBAC9B,WAAW,SAAS,EAAE,CAAC,QAAQ;YACjC,GACA,IAAI,CAAC,CAAC,MAAQ,KAAK;YACrB,IAAI,CAAC,SAAS,aAAa,IAAI,QAAQ,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,cAAc;gBACxF,MAAM,QAAQ,MAAM,6BAClB,EAAE,OAAO,CAAC,MAAM,EAChB,KAAK,KAAK,EACV,KAAK,GACL,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;gBAEvC,MAAM,MAAM,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,aAAa;gBACzF,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBACzC;oBACE;oBACA;oBACA;gBACF,GACA,EAAE,OAAO;YAEb;QACF,EAAE,OAAO,GAAG;YACV,IAAI,aAAa,iJAAA,CAAA,WAAQ,EAAE;gBACzB,OAAO;oBACL,OAAO,EAAE,OAAO;oBAChB,MAAM;oBACN,YAAY;gBACd;YACF;YACA,OAAO;gBACL,OAAO;gBACP,MAAM;gBACN,YAAY;YACd;QACF;IACF;IACA,IAAI,CAAC,MAAM;QACT,OAAO;YACL,OAAO;YACP,MAAM;YACN,YAAY;QACd;IACF;IACA,MAAM,UAAU,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAC3D,KAAK,EAAE,EACP,EAAE,OAAO;IAEX,IAAI,CAAC,SAAS;QACZ,OAAO;YACL,OAAO;YACP,MAAM;YACN,YAAY;QACd;IACF;IACA,OAAO;QACL,MAAM;YACJ;YACA;QACF;QACA,OAAO;QACP;IACF;AACF;AAEA,4BAA4B;AAC5B,IAAI,eAAe,mBACjB,mBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;;OAGC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf,GAAG,QAAQ;QACX;;;;OAIC,GACD,oBAAoB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACvC;;;;;OAKC,GACD,kBAAkB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACzB,aAAa;QACf,GAAG,QAAQ;QACX;;OAEC,GACD,UAAU,6JAAA,CAAA,yBAAsB;QAChC;;;;;OAKC,GACD,iBAAiB,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;YACzB,aAAa;QACf,GAAG,QAAQ;QACX;;;;;;;;;;OAUC,GACD,SAAS,sIAAA,CAAA,IAAC,CAAC,QAAQ,CACjB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACP;;WAEC,GACD,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACd,aAAa;YACf;YACA;;WAEC,GACD,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACd,aAAa;YACf,GAAG,QAAQ;YACX;;WAEC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACpB,aAAa;YACf,GAAG,QAAQ;YACX;;WAEC,GACD,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACrB,aAAa;YACf,GAAG,QAAQ;YACX;;WAEC,GACD,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBAClB,aAAa;YACf,GAAG,QAAQ;QACb,IACA;YACE,aAAa;QACf;IAEJ;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,SAAS;wCACP,MAAM;oCACR;oCACA,MAAM;wCACJ,MAAM;oCACR;oCACA,KAAK;wCACH,MAAM;oCACR;oCACA,UAAU;wCACR,MAAM;oCACR;gCACF;gCACA,UAAU;oCAAC;oCAAW;oCAAQ;oCAAO;iCAAW;4BAClD;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,WAAW,EAAE,OAAO,CAAC,eAAe,CAAC,IAAI,CAC7C,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ;IAEjC,IAAI,CAAC,UAAU;QACb,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CACpB,yEACA;YACE,UAAU,EAAE,IAAI,CAAC,QAAQ;QAC3B;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,iBAAiB,kBAAkB;QAC9C;IACF;IACA,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE;QAClB,IAAI,CAAC,SAAS,aAAa,EAAE;YAC3B,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CACpB,mDACA;gBACE,UAAU,EAAE,IAAI,CAAC,QAAQ;YAC3B;YAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;gBAC9B,SAAS,iBAAiB,sBAAsB;YAClD;QACF;QACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,OAAO;QACvC,MAAM,QAAQ,MAAM,SAAS,aAAa,CAAC,OAAO;QAClD,IAAI,CAAC,OAAO;YACV,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB;gBACzC,UAAU,EAAE,IAAI,CAAC,QAAQ;YAC3B;YACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS,iBAAiB,aAAa;YACzC;QACF;QACA,MAAM,WAAW,MAAM,SAAS,WAAW,CAAC;YAC1C,SAAS;YACT,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;YACvC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY;QAC3C;QACA,IAAI,CAAC,YAAY,CAAC,UAAU,MAAM;YAChC,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B;gBAChD,UAAU,EAAE,IAAI,CAAC,QAAQ;YAC3B;YACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS,iBAAiB,uBAAuB;YACnD;QACF;QACA,IAAI,CAAC,SAAS,IAAI,CAAC,KAAK,EAAE;YACxB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,wBAAwB;gBAC7C,UAAU,EAAE,IAAI,CAAC,QAAQ;YAC3B;YACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS,iBAAiB,oBAAoB;YAChD;QACF;QACA,MAAM,OAAO,MAAM,oBAAoB,GAAG;YACxC,UAAU;gBACR,OAAO,SAAS,IAAI,CAAC,KAAK;gBAC1B,IAAI,SAAS,IAAI,CAAC,EAAE;gBACpB,MAAM,SAAS,IAAI,CAAC,IAAI,IAAI;gBAC5B,OAAO,SAAS,IAAI,CAAC,KAAK;gBAC1B,eAAe,SAAS,IAAI,CAAC,aAAa,IAAI;YAChD;YACA,SAAS;gBACP,YAAY,SAAS,EAAE;gBACvB,WAAW,SAAS,IAAI,CAAC,EAAE;gBAC3B,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;YACzC;QACF;QACA,IAAI,KAAK,KAAK,EAAE;YACd,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS,KAAK,KAAK;YACrB;QACF;QACA,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,GAAG,KAAK,IAAI;QACnC,OAAO,EAAE,IAAI,CAAC;YACZ,UAAU;YACV,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK;YAC9B,KAAK,KAAK;YACV,MAAM;gBACJ,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;gBACrB,OAAO,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK;gBAC3B,MAAM,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI;gBACzB,OAAO,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK;gBAC3B,eAAe,KAAK,IAAI,CAAC,IAAI,CAAC,aAAa;gBAC3C,WAAW,KAAK,IAAI,CAAC,IAAI,CAAC,SAAS;gBACnC,WAAW,KAAK,IAAI,CAAC,IAAI,CAAC,SAAS;YACrC;QACF;IACF;IACA,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAE;IACpD,MAAM,MAAM,MAAM,SAAS,sBAAsB,CAAC;QAChD;QACA;QACA,aAAa,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE;IAC7D;IACA,OAAO,EAAE,IAAI,CAAC;QACZ,KAAK,IAAI,QAAQ;QACjB,UAAU,CAAC,EAAE,IAAI,CAAC,eAAe;IACnC;AACF;AAEF,IAAI,cAAc,mBAChB,kBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;OAEC,GACD,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACd,aAAa;QACf;QACA;;OAEC,GACD,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACjB,aAAa;QACf;QACA;;;OAGC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf,GAAG,QAAQ;QACX;;;OAGC,GACD,YAAY,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;YACpB,aAAa;QACf,GAAG,OAAO,CAAC,MAAM,QAAQ;IAC3B;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,MAAM;wCACJ,MAAM;oCACR;oCACA,KAAK;wCACH,MAAM;oCACR;oCACA,UAAU;wCACR,MAAM;oCACR;gCACF;gCACA,UAAU;oCAAC;oCAAW;oCAAQ;oCAAO;iCAAW;4BAClD;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE,kBAAkB,SAAS;QACnD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;IACpC,MAAM,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,GAAG,SAAS,CAAC;IAClD,IAAI,CAAC,aAAa,OAAO,EAAE;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,aAAa;QACzC;IACF;IACA,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO;QACpE,iBAAiB;IACnB;IACA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;QAChC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,kBAAkB;YAAE;QAAM;QACnD,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS,iBAAiB,yBAAyB;QACrD;IACF;IACA,MAAM,oBAAoB,KAAK,QAAQ,CAAC,IAAI,CAC1C,CAAC,IAAM,EAAE,UAAU,KAAK;IAE1B,IAAI,CAAC,mBAAmB;QACtB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,gCAAgC;YAAE;QAAM;QACjE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS,iBAAiB,yBAAyB;QACrD;IACF;IACA,MAAM,kBAAkB,mBAAmB;IAC3C,IAAI,CAAC,iBAAiB;QACpB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,sBAAsB;YAAE;QAAM;QACvD,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS,iBAAiB,yBAAyB;QACrD;IACF;IACA,MAAM,gBAAgB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;QACtD,MAAM;QACN;IACF;IACA,IAAI,CAAC,eAAe;QAClB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS,iBAAiB,yBAAyB;QACrD;IACF;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE,kBAAkB,4BAA4B,CAAC,KAAK,IAAI,CAAC,aAAa,EAAE;QAC/F,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE,mBAAmB,uBAAuB;YAClE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;gBAC9B,SAAS,iBAAiB,kBAAkB;YAC9C;QACF;QACA,MAAM,QAAQ,MAAM,6BAClB,IAAI,OAAO,CAAC,MAAM,EAClB,KAAK,IAAI,CAAC,KAAK,EACf,KAAK,GACL,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;QAEzC,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;QAC3G,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,qBAAqB,CAC/D;YACE,MAAM,KAAK,IAAI;YACf;YACA;QACF,GACA,IAAI,OAAO;QAEb,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,iBAAiB,kBAAkB;QAC9C;IACF;IACA,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7D,KAAK,IAAI,CAAC,EAAE,EACZ,IAAI,OAAO,EACX,IAAI,IAAI,CAAC,UAAU,KAAK;IAE1B,IAAI,CAAC,SAAS;QACZ,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS,iBAAiB,wBAAwB;QACpD;IACF;IACA,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EACnB,KACA;QACE;QACA,MAAM,KAAK,IAAI;IACjB,GACA,IAAI,IAAI,CAAC,UAAU,KAAK;IAE1B,OAAO,IAAI,IAAI,CAAC;QACd,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW;QAChC,OAAO,QAAQ,KAAK;QACpB,KAAK,IAAI,IAAI,CAAC,WAAW;QACzB,MAAM;YACJ,IAAI,KAAK,IAAI,CAAC,EAAE;YAChB,OAAO,KAAK,IAAI,CAAC,KAAK;YACtB,MAAM,KAAK,IAAI,CAAC,IAAI;YACpB,OAAO,KAAK,IAAI,CAAC,KAAK;YACtB,eAAe,KAAK,IAAI,CAAC,aAAa;YACtC,WAAW,KAAK,IAAI,CAAC,SAAS;YAC9B,WAAW,KAAK,IAAI,CAAC,SAAS;QAChC;IACF;AACF;AAEF,IAAI,SAAS,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACpB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,mBAAmB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACtC,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B;AACA,IAAI,gBAAgB,mBAClB,iBACA;IACE,QAAQ;QAAC;QAAO;KAAO;IACvB,MAAM,OAAO,QAAQ;IACrB,OAAO,OAAO,QAAQ;IACtB,UAAU,6JAAA,CAAA,gBAAa;AACzB,GACA,OAAO;IACL,IAAI;IACJ,IAAI;QACF,IAAI,EAAE,MAAM,KAAK,OAAO;YACtB,cAAc,OAAO,KAAK,CAAC,EAAE,KAAK;QACpC,OAAO,IAAI,EAAE,MAAM,KAAK,QAAQ;YAC9B,cAAc,OAAO,KAAK,CAAC,EAAE,IAAI;QACnC,OAAO;YACL,MAAM,IAAI,MAAM;QAClB;IACF,EAAE,OAAO,GAAG;QACV,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B;QACnD,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,qCAAqC,CAAC;IAE/D;IACA,MAAM,EAAE,IAAI,EAAE,OAAO,MAAM,EAAE,KAAK,EAAE,iBAAiB,EAAE,GAAG;IAC1D,IAAI,CAAC,OAAO;QACV,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,mBAAmB;QAC1C,MAAM,EAAE,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,4BAA4B,CAAC;IACrE;IACA,IAAI,CAAC,MAAM;QACT,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,aAAa,EAAE,UAAU,UAAU,mBAAmB,EAAE,mBAAmB;IAEpG;IACA,MAAM,WAAW,EAAE,OAAO,CAAC,eAAe,CAAC,IAAI,CAC7C,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,EAAE;IAE7B,IAAI,CAAC,UAAU;QACb,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CACpB,0BACA,EAAE,MAAM,CAAC,EAAE,EACX;QAEF,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,qCAAqC,CAAC;IAE/D;IACA,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,MAAM,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IACnF,IAAI;IACJ,IAAI;QACF,SAAS,MAAM,SAAS,yBAAyB,CAAC;YAChD;YACA;YACA,aAAa,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE;QAC7D;IACF,EAAE,OAAO,GAAG;QACV,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI;QAC3B,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,uCAAuC,CAAC;IAEjE;IACA,MAAM,WAAW,MAAM,SAAS,WAAW,CAAC,QAAQ,IAAI,CAAC,CAAC,MAAQ,KAAK;IACvE,SAAS,gBAAgB,MAAM;QAC7B,IAAI,MAAM,YAAY,eAAe,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;QACjE,IAAI,IAAI,QAAQ,CAAC,MAAM;YACrB,MAAM,GAAG,IAAI,OAAO,EAAE,QAAQ;QAChC,OAAO;YACL,MAAM,GAAG,IAAI,OAAO,EAAE,QAAQ;QAChC;QACA,MAAM,EAAE,QAAQ,CAAC;IACnB;IACA,IAAI,CAAC,UAAU;QACb,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,OAAO,gBAAgB;IACzB;IACA,IAAI,CAAC,SAAS,KAAK,EAAE;QACnB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CACpB;QAEF,OAAO,gBAAgB;IACzB;IACA,IAAI,CAAC,aAAa;QAChB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,MAAM,EAAE,QAAQ,CACd,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,uCAAuC,CAAC;IAEjE;IACA,IAAI,MAAM;QACR,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,yBAAyB,QAAQ,KAAK,KAAK,KAAK,SAAS,KAAK,CAAC,WAAW,IAAI;YAC3H,OAAO,gBAAgB;QACzB;QACA,MAAM,kBAAkB,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,WAAW,CACjE,SAAS,EAAE;QAEb,IAAI,iBAAiB;YACnB,IAAI,mBAAmB,gBAAgB,MAAM,KAAK,KAAK,MAAM,EAAE;gBAC7D,OAAO,gBAAgB;YACzB;YACA,OAAO,gBAAgB;QACzB;QACA,MAAM,aAAa,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;YAC/D,QAAQ,KAAK,MAAM;YACnB,YAAY,SAAS,EAAE;YACvB,WAAW,SAAS,EAAE;QACxB;QACA,IAAI,CAAC,YAAY;YACf,OAAO,gBAAgB;QACzB;QACA,IAAI;QACJ,IAAI;YACF,MAAM,MAAM;YACZ,gBAAgB,IAAI,QAAQ;QAC9B,EAAE,OAAM;YACN,gBAAgB;QAClB;QACA,MAAM,EAAE,QAAQ,CAAC;IACnB;IACA,MAAM,SAAS,MAAM,oBAAoB,GAAG;QAC1C,UAAU;YACR,GAAG,QAAQ;YACX,OAAO,SAAS,KAAK;YACrB,MAAM,SAAS,IAAI,IAAI,SAAS,KAAK;QACvC;QACA,SAAS;YACP,YAAY,SAAS,EAAE;YACvB,WAAW,SAAS,EAAE;YACtB,GAAG,MAAM;YACT,OAAO,OAAO,MAAM,EAAE,KAAK;QAC7B;QACA;IACF;IACA,IAAI,OAAO,KAAK,EAAE;QAChB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC;QACpD,OAAO,gBAAgB,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC;IACtD;IACA,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAO,IAAI;IACrC,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,GAAG;QACxB;QACA;IACF;IACA,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,OAAO,UAAU,GAAG,cAAc,cAAc;QAC5D,eAAe,IAAI,QAAQ;IAC7B,EAAE,OAAM;QACN,eAAe,OAAO,UAAU,GAAG,cAAc,cAAc;IACjE;IACA,MAAM,EAAE,QAAQ,CAAC;AACnB;AAEF,IAAI,UAAU,mBACZ,aACA;IACE,QAAQ;IACR,gBAAgB;IAChB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,SAAS;wCACP,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,qBAAqB,MAAM,IAAI,eAAe,CAClD,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EACzC,IAAI,OAAO,CAAC,MAAM;IAEpB,IAAI,CAAC,oBAAoB;QACvB,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;QACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,qBAAqB;QACjD;IACF;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;IAChD,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;IACpB,OAAO,IAAI,IAAI,CAAC;QACd,SAAS;IACX;AACF;AAEF,SAAS,cAAc,GAAG,EAAE,WAAW,EAAE,KAAK;IAC5C,MAAM,MAAM,cAAc,IAAI,IAAI,aAAa,IAAI,OAAO,IAAI,IAAI,IAAI,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC;IAC5F,IAAI,OACF,OAAO,OAAO,CAAC,OAAO,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,IAAI,YAAY,CAAC,GAAG,CAAC,GAAG;IACpE,OAAO,IAAI,IAAI;AACjB;AACA,SAAS,iBAAiB,GAAG,EAAE,WAAW,EAAE,KAAK;IAC/C,MAAM,MAAM,IAAI,IAAI,aAAa,IAAI,OAAO;IAC5C,IAAI,OACF,OAAO,OAAO,CAAC,OAAO,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,IAAI,YAAY,CAAC,GAAG,CAAC,GAAG;IACpE,OAAO,IAAI,IAAI;AACjB;AACA,IAAI,iBAAiB,mBACnB,oBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;OAEC,GACD,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACd,aAAa;QACf,GAAG,KAAK;QACR;;;;;OAKC,GACD,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACnB,aAAa;QACf,GAAG,QAAQ;IACb;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,mBAAmB;QAC5D,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,IAAI,IAAI;IACtC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO;QACpE,iBAAiB;IACnB;IACA,IAAI,CAAC,MAAM;QACT,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,kCAAkC;YAAE;QAAM;QACnE,OAAO,IAAI,IAAI,CACb;YACE,QAAQ;QACV,GACA;YACE,MAAM;gBACJ,QAAQ;YACV;QACF;IAEJ;IACA,MAAM,mBAAmB,KAAK,KAAK;IACnC,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EACtB,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,2BAA2B,IAAI,kBACpE;IAEF,MAAM,oBAAoB,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IACrC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC;QACxD,OAAO,KAAK,IAAI,CAAC,EAAE,CAAC,QAAQ;QAC5B,YAAY,CAAC,eAAe,EAAE,mBAAmB;QACjD;IACF;IACA,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,kBAAkB,aAAa,EAAE,YAAY;IAClG,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,iBAAiB,CAC1D;QACE,MAAM,KAAK,IAAI;QACf;QACA,OAAO;IACT,GACA,IAAI,OAAO;IAEb,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,IAAI,yBAAyB,mBAC3B,0BACA;IACE,QAAQ;IACR,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf;IACF;IACA,KAAK;QAAC,YAAY,CAAC,MAAQ,IAAI,KAAK,CAAC,WAAW;KAAE;IAClD,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,OAAO;wCACL,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,MAAM;IAC5B,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,KAAK;IACjC,IAAI,CAAC,SAAS,CAAC,aAAa;QAC1B,MAAM,IAAI,QAAQ,CAChB,cAAc,IAAI,OAAO,EAAE,aAAa;YAAE,OAAO;QAAgB;IAErE;IACA,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAC1E,CAAC,eAAe,EAAE,OAAO;IAE3B,IAAI,CAAC,gBAAgB,aAAa,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ;QACxE,MAAM,IAAI,QAAQ,CAChB,cAAc,IAAI,OAAO,EAAE,aAAa;YAAE,OAAO;QAAgB;IAErE;IACA,MAAM,IAAI,QAAQ,CAAC,iBAAiB,IAAI,OAAO,EAAE,aAAa;QAAE;IAAM;AACxE;AAEF,IAAI,gBAAgB,mBAClB,mBACA;IACE,QAAQ;IACR,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B,GAAG,QAAQ;IACX,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf;QACA,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACd,aAAa;QACf,GAAG,QAAQ;IACb;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,QAAQ,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,KAAK,EAAE;IAC3C,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,aAAa;QACzC;IACF;IACA,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,IAAI;IAChC,MAAM,YAAY,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO;IAC/C,MAAM,YAAY,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO;IAC/C,IAAI,YAAY,MAAM,GAAG,WAAW;QAClC,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,kBAAkB;QAC9C;IACF;IACA,IAAI,YAAY,MAAM,GAAG,WAAW;QAClC,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,iBAAiB;QAC7C;IACF;IACA,MAAM,KAAK,CAAC,eAAe,EAAE,OAAO;IACpC,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAAC;IAC7E,IAAI,CAAC,gBAAgB,aAAa,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ;QACxE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,aAAa;QACzC;IACF;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,aAAa,EAAE;IACzE,MAAM,SAAS,aAAa,KAAK;IACjC,MAAM,iBAAiB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;IACvD,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC;IAChE,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,KAAO,GAAG,UAAU,KAAK;IACxD,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;YAC9C;YACA,YAAY;YACZ,UAAU;YACV,WAAW;QACb;QACA,OAAO,IAAI,IAAI,CAAC;YACd,QAAQ;QACV;IACF;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ;IACzD,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,IAAI,aAAa,IAAM,mBACrB,gBACA;QACE,QAAQ;QACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,sIAAA,CAAA,IAAC,CAAC,GAAG;QAChC,KAAK;YAAC;SAAkB;QACxB,UAAU;YACR,QAAQ;gBACN,MAAM,CAAC;YACT;YACA,SAAS;gBACP,aAAa;gBACb,aAAa;oBACX,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,MAAM;wCACJ,MAAM;wCACN,aAAa;oCACf;oCACA,OAAO;wCACL,MAAM;wCACN,aAAa;oCACf;gCACF;4BACF;wBACF;oBACF;gBACF;gBACA,WAAW;oBACT,OAAO;wBACL,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,MAAM;4CACJ,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,MAAM,OAAO,IAAI,IAAI;QACrB,IAAI,KAAK,KAAK,EAAE;YACd,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,wBAAwB;YACpD;QACF;QACA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,GAAG;QACjC,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;QACnC,IAAI,UAAU,KAAK,KAAK,SAAS,KAAK,KAAK,OAAO,IAAI,CAAC,MAAM,MAAM,KAAK,GAAG;YACzE,OAAO,IAAI,IAAI,CAAC;gBACd,QAAQ;YACV;QACF;QACA,MAAM,mBAAmB,CAAA,GAAA,6JAAA,CAAA,iBAAc,AAAD,EACpC,IAAI,OAAO,CAAC,OAAO,EACnB,MACA;QAEF,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAC9D,QAAQ,IAAI,CAAC,KAAK,EAClB;YACE;YACA;YACA,GAAG,gBAAgB;QACrB;QAEF,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;YAC1B,SAAS,QAAQ,OAAO;YACxB;QACF;QACA,OAAO,IAAI,IAAI,CAAC;YACd,QAAQ;QACV;IACF;AAEF,IAAI,iBAAiB,mBACnB,oBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;OAEC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf;QACA;;OAEC,GACD,iBAAiB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACxB,aAAa;QACf;QACA;;;OAGC,GACD,qBAAqB,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;YAC7B,aAAa;QACf,GAAG,QAAQ;IACb;IACA,KAAK;QAAC;KAAkB;IACxB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,MAAM;wCACJ,aAAa;wCACb,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,EAAE,WAAW,EAAE,eAAe,EAAE,qBAAqB,oBAAoB,EAAE,GAAG,IAAI,IAAI;IAC5F,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC1C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,kBAAkB;QAC9C;IACF;IACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC1C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,iBAAiB;QAC7C;IACF;IACA,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAC7D,QAAQ,IAAI,CAAC,EAAE;IAEjB,MAAM,UAAU,SAAS,IAAI,CAC3B,CAAC,WAAa,SAAS,UAAU,KAAK,gBAAgB,SAAS,QAAQ;IAEzE,IAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ,EAAE;QACjC,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,4BAA4B;QACxD;IACF;IACA,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;IACrD,MAAM,SAAS,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;QAC/C,MAAM,QAAQ,QAAQ;QACtB,UAAU;IACZ;IACA,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,gBAAgB;QAC5C;IACF;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE;QAC1D,UAAU;IACZ;IACA,IAAI,QAAQ;IACZ,IAAI,sBAAsB;QACxB,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;QAChE,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAChE,QAAQ,IAAI,CAAC,EAAE,EACf,IAAI,OAAO;QAEb,IAAI,CAAC,YAAY;YACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,yBAAyB;gBAC1C,SAAS,iBAAiB,qBAAqB;YACjD;QACF;QACA,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;YAC1B,SAAS;YACT,MAAM,QAAQ,IAAI;QACpB;QACA,QAAQ,WAAW,KAAK;IAC1B;IACA,OAAO,IAAI,IAAI,CAAC;QACd;QACA,MAAM;YACJ,IAAI,QAAQ,IAAI,CAAC,EAAE;YACnB,OAAO,QAAQ,IAAI,CAAC,KAAK;YACzB,MAAM,QAAQ,IAAI,CAAC,IAAI;YACvB,OAAO,QAAQ,IAAI,CAAC,KAAK;YACzB,eAAe,QAAQ,IAAI,CAAC,aAAa;YACzC,WAAW,QAAQ,IAAI,CAAC,SAAS;YACjC,WAAW,QAAQ,IAAI,CAAC,SAAS;QACnC;IACF;AACF;AAEF,IAAI,cAAc,mBAChB,iBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;OAEC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM;IACvB;IACA,UAAU;QACR,aAAa;IACf;IACA,KAAK;QAAC;KAAkB;AAC1B,GACA,OAAO;IACL,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,IAAI;IAChC,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC1C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,kBAAkB;QAC9C;IACF;IACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC1C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,iBAAiB;QAC7C;IACF;IACA,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAC7D,QAAQ,IAAI,CAAC,EAAE;IAEjB,MAAM,UAAU,SAAS,IAAI,CAC3B,CAAC,WAAa,SAAS,UAAU,KAAK,gBAAgB,SAAS,QAAQ;IAEzE,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;IACrD,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;YAC5C,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACvB,YAAY;YACZ,WAAW,QAAQ,IAAI,CAAC,EAAE;YAC1B,UAAU;QACZ;QACA,OAAO,IAAI,IAAI,CAAC;YACd,QAAQ;QACV;IACF;IACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;QAChC,SAAS;IACX;AACF;AAEF,IAAI,aAAa,mBACf,gBACA;IACE,QAAQ;IACR,KAAK;QAAC;KAAkB;IACxB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;;OAGC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAChC;;;OAGC,GACD,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC7B;;OAEC,GACD,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;4BACR;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,SAAS;QAClD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB,qDACA;YACE,SAAS,IAAI,OAAO,CAAC,OAAO;QAC9B;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;QACrB,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAC7D,QAAQ,IAAI,CAAC,EAAE;QAEjB,MAAM,UAAU,SAAS,IAAI,CAC3B,CAAC,WAAa,SAAS,UAAU,KAAK,gBAAgB,SAAS,QAAQ;QAEzE,IAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ,EAAE;YACjC,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,4BAA4B;YACxD;QACF;QACA,MAAM,SAAS,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC/C,MAAM,QAAQ,QAAQ;YACtB,UAAU,IAAI,IAAI,CAAC,QAAQ;QAC7B;QACA,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,gBAAgB;YAC5C;QACF;IACF,OAAO;QACL,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,UAAU;YACzC,MAAM,aAAa,QAAQ,OAAO,CAAC,SAAS,CAAC,OAAO;YACpD,MAAM,WAAW,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ;YACrD,MAAM,MAAM,KAAK,GAAG;YACpB,IAAI,MAAM,aAAa,UAAU;gBAC/B,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;oBAChC,SAAS,iBAAiB,eAAe;gBAC3C;YACF;QACF;IACF;IACA,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;QAClB,MAAM,mBAAmB;YACvB,GAAG,GAAG;YACN,OAAO;gBACL,OAAO,IAAI,IAAI,CAAC,KAAK;YACvB;QACF;QACA,OAAO,IAAI,IAAI,CAAC;YACd,SAAS;YACT,SAAS;QACX;IACF;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,+BAA+B;QACtE,MAAM,QAAQ,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE,IAAI,OAAO;QAC9C,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC;YACxD,OAAO,QAAQ,IAAI,CAAC,EAAE;YACtB,YAAY,CAAC,eAAe,EAAE,OAAO;YACrC,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,MAAM,KAAK,KAAK;QACnD;QACA,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,4BAA4B,EAAE,MAAM,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;QACnH,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,6BAA6B,CACrE;YACE,MAAM,QAAQ,IAAI;YAClB;YACA;QACF,GACA,IAAI,OAAO;QAEb,OAAO,IAAI,IAAI,CAAC;YACd,SAAS;YACT,SAAS;QACX;IACF;IACA,MAAM,eAAe,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IAC1D,IAAI,cAAc;QAChB,MAAM,aAAa,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC9C;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,EAAE;IAC5D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;IACpB,MAAM,cAAc,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IACzD,IAAI,aAAa;QACf,MAAM,YAAY,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC7C;IACA,OAAO,IAAI,IAAI,CAAC;QACd,SAAS;QACT,SAAS;IACX;AACF;AAEF,IAAI,qBAAqB,mBACvB,yBACA;IACE,QAAQ;IACR,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;QACf,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAClC;IACA,KAAK;QAAC,YAAY,CAAC,MAAQ,IAAI,KAAK,CAAC,WAAW;KAAE;AACpD,GACA,OAAO;IACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,SAAS;QAClD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,MAAM,UAAU,MAAM,kBAAkB;IACxC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,iBAAiB,uBAAuB;QACnD;IACF;IACA,MAAM,QAAQ,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CACnE,CAAC,eAAe,EAAE,IAAI,KAAK,CAAC,KAAK,EAAE;IAErC,IAAI,CAAC,SAAS,MAAM,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ;QAC1D,IAAI,OAAO;YACT,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,MAAM,EAAE;QACpE;QACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,iBAAiB,aAAa;QACzC;IACF;IACA,IAAI,MAAM,KAAK,KAAK,QAAQ,IAAI,CAAC,EAAE,EAAE;QACnC,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,iBAAiB,aAAa;QACzC;IACF;IACA,MAAM,eAAe,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IAC1D,IAAI,cAAc;QAChB,MAAM,aAAa,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC9C;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,EAAE;IAC5D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,MAAM,EAAE;IAClE,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;IACpB,MAAM,cAAc,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IACzD,IAAI,aAAa;QACf,MAAM,YAAY,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC7C;IACA,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;QACzB,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW,IAAI;IAC9C;IACA,OAAO,IAAI,IAAI,CAAC;QACd,SAAS;QACT,SAAS;IACX;AACF;AAEF,IAAI,cAAc,mBAChB,iBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACjB,aAAa;QACf,GAAG,KAAK;QACR,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf,GAAG,QAAQ;IACb;IACA,KAAK;QAAC;KAAkB;IACxB,UAAU;QACR,SAAS;YACP,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,MAAM;wCACJ,MAAM;oCACR;oCACA,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,aAAa,SAAS;QACnD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,IAAI,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE;QACxD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CACpE,IAAI,IAAI,CAAC,QAAQ;IAEnB,IAAI,cAAc;QAChB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,KAAK,MAAM;QACnD,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CACjD,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAC9B;YACE,OAAO,IAAI,IAAI,CAAC,QAAQ;QAC1B;QAEF,OAAO,IAAI,IAAI,CAAC;YACd,QAAQ;QACV;IACF;IACA,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,2BAA2B,EAAE;QACrE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,MAAM,QAAQ,MAAM,6BAClB,IAAI,OAAO,CAAC,MAAM,EAClB,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAC9B,IAAI,IAAI,CAAC,QAAQ,EACjB,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;IAEzC,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;IAC3G,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,2BAA2B,CACpE;QACE,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;QAC9B,UAAU,IAAI,IAAI,CAAC,QAAQ;QAC3B;QACA;IACF,GACA,IAAI,OAAO;IAEb,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAGF,0BAA0B;AAC1B,IAAI,OAAO,CAAC,YAAY,SAAS,GAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iEA6E0B,EAAE,UAAU;;;OAGtE,CAAC;AACR,IAAI,QAAQ,mBACV,UACA;IACE,QAAQ;IACR,UAAU;QACR,GAAG,6JAAA,CAAA,gBAAa;QAChB,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,aAAa;4BACX,QAAQ;gCACN,MAAM;4BACR;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,QAAQ,IAAI,IAAI,EAAE,OAAO,EAAE,OAAO,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;IACzE,OAAO,IAAI,SAAS,KAAK,QAAQ;QAC/B,SAAS;YACP,gBAAgB;QAClB;IACF;AACF;AAGF,uBAAuB;AACvB,IAAI,KAAK,mBACP,OACA;IACE,QAAQ;IACR,UAAU;QACR,GAAG,6JAAA,CAAA,gBAAa;QAChB,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,IAAI;wCACF,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,OAAO,IAAI,IAAI,CAAC;QACd,IAAI;IACN;AACF;AAEF,IAAI,cAAc,IAAM,mBACtB,kBACA;QACE,QAAQ;QACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,sIAAA,CAAA,IAAC,CAAC,GAAG;QAChC,UAAU;YACR,QAAQ;gBACN,MAAM,CAAC;YACT;YACA,SAAS;gBACP,aAAa;gBACb,aAAa;oBACX,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,MAAM;wCACJ,MAAM;wCACN,aAAa;oCACf;oCACA,OAAO;wCACL,MAAM;wCACN,aAAa;oCACf;oCACA,UAAU;wCACR,MAAM;wCACN,aAAa;oCACf;oCACA,aAAa;wCACX,MAAM;wCACN,aAAa;oCACf;gCACF;gCACA,UAAU;oCAAC;oCAAQ;oCAAS;iCAAW;4BACzC;wBACF;oBACF;gBACF;gBACA,WAAW;oBACT,OAAO;wBACL,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,IAAI;4CACF,MAAM;4CACN,aAAa;wCACf;wCACA,OAAO;4CACL,MAAM;4CACN,aAAa;wCACf;wCACA,MAAM;4CACJ,MAAM;4CACN,aAAa;wCACf;wCACA,OAAO;4CACL,MAAM;4CACN,aAAa;wCACf;wCACA,eAAe;4CACb,MAAM;4CACN,aAAa;wCACf;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,SAAS;YAClD,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,OAAO,IAAI,IAAI;QACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,kBAAkB,GAAG;QAC3E,MAAM,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,GAAG,SAAS,CAAC;QAClD,IAAI,CAAC,aAAa,OAAO,EAAE;YACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,aAAa;YACzC;QACF;QACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;QACvE,IAAI,SAAS,MAAM,GAAG,mBAAmB;YACvC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,kBAAkB;YAC9C;QACF;QACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;QACvE,IAAI,SAAS,MAAM,GAAG,mBAAmB;YACvC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,iBAAiB;YAC7C;QACF;QACA,MAAM,SAAS,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC;QACjE,IAAI,QAAQ,MAAM;YAChB,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,oCAAoC,EAAE,OAAO;YACtE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,wBAAwB;gBACzC,SAAS,iBAAiB,mBAAmB;YAC/C;QACF;QACA,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,iBAAc,AAAD,EAClC,IAAI,OAAO,CAAC,OAAO,EACnB;QAEF,IAAI;QACJ,IAAI;YACF,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC;gBACzD,OAAO,MAAM,WAAW;gBACxB;gBACA;gBACA,GAAG,cAAc;gBACjB,eAAe;YACjB;YACA,IAAI,CAAC,aAAa;gBAChB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;oBAChC,SAAS,iBAAiB,qBAAqB;gBACjD;YACF;QACF,EAAE,OAAO,GAAG;YACV,IAAI,6JAAA,CAAA,gBAAa,EAAE;gBACjB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,yBAAyB;YACpD;YACA,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,wBAAwB;gBACzC,SAAS,iBAAiB,qBAAqB;gBAC/C,SAAS;YACX;QACF;QACA,IAAI,CAAC,aAAa;YAChB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,wBAAwB;gBACzC,SAAS,iBAAiB,qBAAqB;YACjD;QACF;QACA,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;QAC7C,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;YAC5C,QAAQ,YAAY,EAAE;YACtB,YAAY;YACZ,WAAW,YAAY,EAAE;YACzB,UAAU;QACZ;QACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,gBAAgB,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,wBAAwB,EAAE;YACxH,MAAM,QAAQ,MAAM,6BAClB,IAAI,OAAO,CAAC,MAAM,EAClB,YAAY,KAAK,EACjB,KAAK,GACL,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;YAEzC,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,KAAK,WAAW,IAAI,KAAK;YACvG,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBAC3C;gBACE,MAAM;gBACN;gBACA;YACF,GACA,IAAI,OAAO;QAEf;QACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,KAAK,SAAS,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,wBAAwB,EAAE;YAC9H,OAAO,IAAI,IAAI,CAAC;gBACd,OAAO;gBACP,MAAM;oBACJ,IAAI,YAAY,EAAE;oBAClB,OAAO,YAAY,KAAK;oBACxB,MAAM,YAAY,IAAI;oBACtB,OAAO,YAAY,KAAK;oBACxB,eAAe,YAAY,aAAa;oBACxC,WAAW,YAAY,SAAS;oBAChC,WAAW,YAAY,SAAS;gBAClC;YACF;QACF;QACA,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7D,YAAY,EAAE,EACd,IAAI,OAAO;QAEb,IAAI,CAAC,SAAS;YACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,iBAAiB,wBAAwB;YACpD;QACF;QACA,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;YAC1B;YACA,MAAM;QACR;QACA,OAAO,IAAI,IAAI,CAAC;YACd,OAAO,QAAQ,KAAK;YACpB,MAAM;gBACJ,IAAI,YAAY,EAAE;gBAClB,OAAO,YAAY,KAAK;gBACxB,MAAM,YAAY,IAAI;gBACtB,OAAO,YAAY,KAAK;gBACxB,eAAe,YAAY,aAAa;gBACxC,WAAW,YAAY,SAAS;gBAChC,WAAW,YAAY,SAAS;YAClC;QACF;IACF;AAEF,IAAI,mBAAmB,mBACrB,kBACA;IACE,QAAQ;IACR,KAAK;QAAC;KAAkB;IACxB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,OAAO;oCACL,MAAM;oCACN,YAAY;wCACV,IAAI;4CACF,MAAM;wCACR;wCACA,UAAU;4CACR,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,EAAE,OAAO,CAAC,OAAO;IACjC,MAAM,WAAW,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,YAAY,CAC3D,QAAQ,IAAI,CAAC,EAAE;IAEjB,OAAO,EAAE,IAAI,CACX,SAAS,GAAG,CAAC,CAAC;QACZ,OAAO;YACL,IAAI,EAAE,EAAE;YACR,UAAU,EAAE,UAAU;YACtB,WAAW,EAAE,SAAS;YACtB,WAAW,EAAE,SAAS;YACtB,WAAW,EAAE,SAAS;YACtB,QAAQ,EAAE,KAAK,EAAE,MAAM,QAAQ,EAAE;QACnC;IACF;AAEJ;AAEF,IAAI,oBAAoB,mBACtB,gBACA;IACE,QAAQ;IACR,gBAAgB;IAChB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;OAEC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACpB,aAAa;QACf,GAAG,QAAQ;QACX;;OAEC,GACD,UAAU,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC,6JAAA,CAAA,qBAAkB,EAAE;YACnC,aAAa;QACf;IACF;IACA,KAAK;QAAC;KAAkB;IACxB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,KAAK;wCACH,MAAM;oCACR;oCACA,UAAU;wCACR,MAAM;oCACR;gCACF;gCACA,UAAU;oCAAC;oCAAO;iCAAW;4BAC/B;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,EAAE,OAAO,CAAC,OAAO;IACjC,MAAM,UAAU,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,YAAY,CAC1D,QAAQ,IAAI,CAAC,EAAE;IAEjB,MAAM,kBAAkB,QAAQ,IAAI,CAClC,CAAC,IAAM,EAAE,UAAU,KAAK,EAAE,IAAI,CAAC,QAAQ;IAEzC,IAAI,iBAAiB;QACnB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,6BAA6B;QACzD;IACF;IACA,MAAM,WAAW,EAAE,OAAO,CAAC,eAAe,CAAC,IAAI,CAC7C,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ;IAEjC,IAAI,CAAC,UAAU;QACb,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CACpB,yEACA;YACE,UAAU,EAAE,IAAI,CAAC,QAAQ;QAC3B;QAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,iBAAiB,kBAAkB;QAC9C;IACF;IACA,MAAM,QAAQ,MAAM,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAE,GAAG;QACnC,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB,OAAO,QAAQ,IAAI,CAAC,KAAK;IAC3B;IACA,MAAM,MAAM,MAAM,SAAS,sBAAsB,CAAC;QAChD,OAAO,MAAM,KAAK;QAClB,cAAc,MAAM,YAAY;QAChC,aAAa,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE;IAC7D;IACA,OAAO,EAAE,IAAI,CAAC;QACZ,KAAK,IAAI,QAAQ;QACjB,UAAU;IACZ;AACF;AAEF,IAAI,gBAAgB,mBAClB,mBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM;IACtB;IACA,KAAK;QAAC;KAAuB;AAC/B,GACA,OAAO;IACL,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAC7D,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IAE7B,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,6BAA6B;QACzD;IACF;IACA,MAAM,eAAe,SAAS,IAAI,CAChC,CAAC,UAAY,QAAQ,UAAU,KAAK,IAAI,IAAI,CAAC,UAAU;IAEzD,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,iBAAiB,iBAAiB;QAC7C;IACF;IACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7C,IAAI,IAAI,CAAC,UAAU,EACnB,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IAE7B,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAGF,gCAAgC;AAChC,SAAS,gBAAgB,GAAG,EAAE,MAAM,EAAE,aAAa;IACjD,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,aAAa,SAAS;IAC5B,MAAM,uBAAuB,MAAM,cAAc,WAAW;IAC5D,OAAO,uBAAuB,cAAc,cAAc,KAAK,IAAI;AACrE;AACA,SAAS,kBAAkB,UAAU;IACnC,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;QACb,SAAS;IACX,IACA;QACE,QAAQ;QACR,YAAY;QACZ,SAAS;YACP,iBAAiB,WAAW,QAAQ;QACtC;IACF;AAEJ;AACA,SAAS,cAAc,WAAW,EAAE,MAAM;IACxC,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,aAAa,SAAS;IAC5B,OAAO,KAAK,IAAI,CAAC,CAAC,cAAc,aAAa,GAAG,IAAI;AACtD;AACA,SAAS,gBAAgB,GAAG,EAAE,SAAS;IACrC,MAAM,QAAQ;IACd,MAAM,KAAK,IAAI,OAAO;IACtB,OAAO;QACL,KAAK,OAAO;YACV,MAAM,MAAM,MAAM,GAAG,QAAQ,CAAC;gBAC5B;gBACA,OAAO;oBAAC;wBAAE,OAAO;wBAAO,OAAO;oBAAI;iBAAE;YACvC;YACA,MAAM,OAAO,GAAG,CAAC,EAAE;YACnB,IAAI,OAAO,MAAM,gBAAgB,UAAU;gBACzC,KAAK,WAAW,GAAG,OAAO,KAAK,WAAW;YAC5C;YACA,OAAO;QACT;QACA,KAAK,OAAO,KAAK,OAAO;YACtB,IAAI;gBACF,IAAI,SAAS;oBACX,MAAM,GAAG,UAAU,CAAC;wBAClB,OAAO,aAAa;wBACpB,OAAO;4BAAC;gCAAE,OAAO;gCAAO,OAAO;4BAAI;yBAAE;wBACrC,QAAQ;4BACN,OAAO,MAAM,KAAK;4BAClB,aAAa,MAAM,WAAW;wBAChC;oBACF;gBACF,OAAO;oBACL,MAAM,GAAG,MAAM,CAAC;wBACd,OAAO,aAAa;wBACpB,MAAM;4BACJ;4BACA,OAAO,MAAM,KAAK;4BAClB,aAAa,MAAM,WAAW;wBAChC;oBACF;gBACF;YACF,EAAE,OAAO,GAAG;gBACV,IAAI,MAAM,CAAC,KAAK,CAAC,4BAA4B;YAC/C;QACF;IACF;AACF;AACA,IAAI,SAAS,aAAa,GAAG,IAAI;AACjC,SAAS,oBAAoB,GAAG;IAC9B,IAAI,IAAI,OAAO,CAAC,SAAS,EAAE,eAAe;QACxC,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,aAAa;IAC5C;IACA,IAAI,IAAI,SAAS,CAAC,OAAO,KAAK,qBAAqB;QACjD,OAAO;YACL,KAAK,OAAO;gBACV,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,gBAAgB,EAAE,IAAI;gBAC5D,OAAO,cAAc,KAAK,KAAK,CAAC,eAAe,KAAK;YACtD;YACA,KAAK,OAAO,KAAK;gBACf,MAAM,IAAI,OAAO,CAAC,gBAAgB,EAAE,MAAM,KAAK,KAAK,SAAS,CAAC;YAChE;QACF;IACF;IACA,MAAM,UAAU,IAAI,SAAS,CAAC,OAAO;IACrC,IAAI,YAAY,UAAU;QACxB,OAAO;YACL,MAAM,KAAI,GAAG;gBACX,OAAO,OAAO,GAAG,CAAC;YACpB;YACA,MAAM,KAAI,GAAG,EAAE,KAAK,EAAE,OAAO;gBAC3B,OAAO,GAAG,CAAC,KAAK;YAClB;QACF;IACF;IACA,OAAO,gBAAgB,KAAK,IAAI,SAAS,CAAC,SAAS;AACrD;AACA,eAAe,mBAAmB,GAAG,EAAE,GAAG;IACxC,IAAI,CAAC,IAAI,SAAS,CAAC,OAAO,EAAE;QAC1B;IACF;IACA,MAAM,UAAU,IAAI,OAAO;IAC3B,MAAM,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;IACvD,IAAI,SAAS,IAAI,SAAS,CAAC,MAAM;IACjC,IAAI,MAAM,IAAI,SAAS,CAAC,GAAG;IAC3B,MAAM,MAAM,CAAA,GAAA,6JAAA,CAAA,QAAK,AAAD,EAAE,KAAK,IAAI,OAAO,IAAI;IACtC,MAAM,eAAe;IACrB,MAAM,cAAc,aAAa,IAAI,CAAC,CAAC,OAAS,KAAK,WAAW,CAAC;IACjE,IAAI,aAAa;QACf,SAAS,YAAY,MAAM;QAC3B,MAAM,YAAY,GAAG;IACvB;IACA,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,EAAE,CAAE;QAC9C,IAAI,OAAO,SAAS,EAAE;YACpB,MAAM,cAAc,OAAO,SAAS,CAAC,IAAI,CACvC,CAAC,OAAS,KAAK,WAAW,CAAC;YAE7B,IAAI,aAAa;gBACf,SAAS,YAAY,MAAM;gBAC3B,MAAM,YAAY,GAAG;gBACrB;YACF;QACF;IACF;IACA,IAAI,IAAI,SAAS,CAAC,WAAW,EAAE;QAC7B,MAAM,QAAQ,OAAO,IAAI,CAAC,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YACzD,IAAI,EAAE,QAAQ,CAAC,MAAM;gBACnB,MAAM,WAAW,cAAc,GAAG;gBAClC,OAAO;YACT;YACA,OAAO,MAAM;QACf;QACA,IAAI,OAAO;YACT,MAAM,aAAa,IAAI,SAAS,CAAC,WAAW,CAAC,MAAM;YACnD,MAAM,WAAW,OAAO,eAAe,aAAa,MAAM,WAAW,OAAO;YAC5E,IAAI,UAAU;gBACZ,SAAS,SAAS,MAAM;gBACxB,MAAM,SAAS,GAAG;YACpB;QACF;IACF;IACA,MAAM,UAAU,oBAAoB;IACpC,MAAM,OAAO,MAAM,QAAQ,GAAG,CAAC;IAC/B,MAAM,MAAM,KAAK,GAAG;IACpB,IAAI,CAAC,MAAM;QACT,MAAM,QAAQ,GAAG,CAAC,KAAK;YACrB;YACA,OAAO;YACP,aAAa;QACf;IACF,OAAO;QACL,MAAM,uBAAuB,MAAM,KAAK,WAAW;QACnD,IAAI,gBAAgB,KAAK,QAAQ,OAAO;YACtC,MAAM,aAAa,cAAc,KAAK,WAAW,EAAE;YACnD,OAAO,kBAAkB;QAC3B,OAAO,IAAI,uBAAuB,SAAS,KAAK;YAC9C,MAAM,QAAQ,GAAG,CACf,KACA;gBACE,GAAG,IAAI;gBACP,OAAO;gBACP,aAAa;YACf,GACA;QAEJ,OAAO;YACL,MAAM,QAAQ,GAAG,CACf,KACA;gBACE,GAAG,IAAI;gBACP,OAAO,KAAK,KAAK,GAAG;gBACpB,aAAa;YACf,GACA;QAEJ;IACF;AACF;AACA,SAAS;IACP,MAAM,eAAe;QACnB;YACE,aAAY,IAAI;gBACd,OAAO,KAAK,UAAU,CAAC,eAAe,KAAK,UAAU,CAAC,eAAe,KAAK,UAAU,CAAC,uBAAuB,KAAK,UAAU,CAAC;YAC9H;YACA,QAAQ;YACR,KAAK;QACP;KACD;IACD,OAAO;AACT;AACA,SAAS,aAAa,GAAG,EAAE,OAAO;IAChC,MAAM,kBAAkB,QAAQ,OAAO,EAAE,OACvC,CAAC,KAAK;QACJ,OAAO;YACL,GAAG,GAAG;YACN,GAAG,OAAO,SAAS;QACrB;IACF,GACA,CAAC;IAEH,MAAM,cAAc,QAAQ,OAAO,EAAE,IACnC,CAAC,SAAW,OAAO,WAAW,EAAE,IAAI,CAAC;YACnC,MAAM,aAAa,OAAO;gBACxB,OAAO,EAAE,UAAU,CAAC;oBAClB,GAAG,OAAO;oBACV,SAAS;wBACP,GAAG,GAAG;wBACN,GAAG,QAAQ,OAAO;oBACpB;gBACF;YACF;YACA,WAAW,IAAI,GAAG,EAAE,IAAI;YACxB,WAAW,OAAO,GAAG,EAAE,UAAU,CAAC,OAAO;YACzC,WAAW,OAAO,GAAG,EAAE,UAAU,CAAC,OAAO;YACzC,OAAO;gBACL,MAAM,EAAE,IAAI;gBACZ;YACF;QACF,IACA,OAAO,CAAC,SAAW,WAAW,KAAK,GAAG,UAAU,EAAE;IACpD,MAAM,gBAAgB;QACpB;QACA;QACA,YAAY;QACZ;QACA,aAAa;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,YAAY;QACZ;QACA;QACA,cAAc;QACd;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IACA,MAAM,YAAY;QAChB,GAAG,aAAa;QAChB,GAAG,eAAe;QAClB;QACA;IACF;IACA,IAAI,MAAM,CAAC;IACX,KAAK,MAAM,CAAC,KAAK,SAAS,IAAI,OAAO,OAAO,CAAC,WAAY;QACvD,GAAG,CAAC,IAAI,GAAG,OAAO,UAAU,CAAC,CAAC;YAC5B,SAAS,OAAO,GAAG,IAAI;YACvB,IAAI,cAAc;gBAChB,WAAU,IAAI,EAAE,KAAK;oBACnB,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM;gBAC7B;gBACA,WAAU,IAAI,EAAE,KAAK,EAAE,QAAQ;oBAC7B,CAAA,GAAA,iJAAA,CAAA,YAAS,AAAD,EAAE,SAAS,OAAO,EAAE,MAAM,OAAO;gBAC3C;gBACA,WAAU,IAAI,EAAE,MAAM;oBACpB,MAAM,SAAS,QAAQ,OAAO;oBAC9B,MAAM,UAAU,QAAQ,IAAI;oBAC5B,MAAM,SAAS,CAAA,GAAA,iJAAA,CAAA,YAAS,AAAD,EAAE,WAAW,IAAI,MAAM;oBAC9C,OAAO;gBACT;gBACA,iBAAgB,IAAI,EAAE,MAAM,EAAE,MAAM;oBAClC,MAAM,SAAS,QAAQ,OAAO;oBAC9B,IAAI,CAAC,QAAQ;wBACX,OAAO;oBACT;oBACA,MAAM,SAAS,CAAA,GAAA,iJAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ,QAAQ,MAAM;oBACrD,OAAO;gBACT;gBACA,MAAM,iBAAgB,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ;oBACjD,MAAM,CAAA,GAAA,iJAAA,CAAA,kBAAe,AAAD,EAAE,SAAS,OAAO,EAAE,MAAM,OAAO,QAAQ;gBAC/D;gBACA,UAAS,GAAG;oBACV,SAAS,OAAO,CAAC,GAAG,CAAC,YAAY;oBACjC,OAAO,IAAI,iJAAA,CAAA,WAAQ,CAAC;gBACtB;gBACA,gBAAgB,SAAS,OAAO;YAClC;YACA,IAAI,UAAU,MAAM;YACpB,IAAI,aAAa;YACjB,IAAI,kBAAkB;gBACpB,GAAG,WAAW;gBACd,GAAG,OAAO;gBACV,MAAM,SAAS,IAAI;gBACnB,SAAS;oBACP,GAAG,OAAO;oBACV,GAAG,QAAQ,OAAO;oBAClB,SAAS;oBACT,eAAe,SAAS,OAAO;wBAC7B,IAAI,CAAC,UAAU,GAAG;wBAClB,aAAa;oBACf;gBACF;YACF;YACA,MAAM,UAAU,QAAQ,OAAO,IAAI,EAAE;YACrC,MAAM,cAAc,QAAQ,GAAG,CAAC,CAAC;gBAC/B,IAAI,OAAO,KAAK,EAAE,QAAQ;oBACxB,OAAO,OAAO,KAAK,CAAC,MAAM;gBAC5B;YACF,GAAG,MAAM,CAAC,CAAC,SAAW,WAAW,KAAK,GAAG,IAAI;YAC7C,MAAM,aAAa,QAAQ,GAAG,CAAC,CAAC;gBAC9B,IAAI,OAAO,KAAK,EAAE,OAAO;oBACvB,OAAO,OAAO,KAAK,CAAC,KAAK;gBAC3B;YACF,GAAG,MAAM,CAAC,CAAC,SAAW,WAAW,KAAK,GAAG,IAAI;YAC7C,IAAI,QAAQ,KAAK,EAAE,QAAQ;gBACzB,YAAY,IAAI,CAAC;oBACf,SAAS,IAAM;oBACf,SAAS,QAAQ,KAAK,CAAC,MAAM;gBAC/B;YACF;YACA,IAAI,QAAQ,KAAK,EAAE,OAAO;gBACxB,WAAW,IAAI,CAAC;oBACd,SAAS,IAAM;oBACf,SAAS,QAAQ,KAAK,CAAC,KAAK;gBAC9B;YACF;YACA,KAAK,MAAM,QAAQ,YAAa;gBAC9B,IAAI,CAAC,KAAK,OAAO,CAAC,kBAAkB;gBACpC,MAAM,UAAU,MAAM,KAAK,OAAO,CAAC;gBACnC,IAAI,WAAW,aAAa,SAAS;oBACnC,kBAAkB;wBAChB,GAAG,eAAe;wBAClB,GAAG,QAAQ,OAAO;oBACpB;oBACA;gBACF;gBACA,IAAI,SAAS;oBACX,OAAO;gBACT;YACF;YACA,IAAI;YACJ,IAAI;gBACF,cAAc,MAAM,SAAS;gBAC7B,IAAI,YAAY;oBACd,gBAAgB,OAAO,CAAC,UAAU,GAAG;gBACvC;YACF,EAAE,OAAO,GAAG;gBACV,IAAI,YAAY;oBACd,gBAAgB,OAAO,CAAC,UAAU,GAAG;gBACvC;gBACA,IAAI,aAAa,iJAAA,CAAA,WAAQ,EAAE;oBACzB,IAAI,CAAC,YAAY,QAAQ;wBACvB,EAAE,OAAO,GAAG,SAAS,OAAO;wBAC5B,MAAM;oBACR;oBACA,gBAAgB,OAAO,CAAC,QAAQ,GAAG;oBACnC,gBAAgB,OAAO,CAAC,QAAQ,CAAC,OAAO,GAAG,SAAS,OAAO;oBAC3D,KAAK,MAAM,QAAQ,cAAc,EAAE,CAAE;wBACnC,MAAM,QAAQ,KAAK,OAAO,CAAC;wBAC3B,IAAI,OAAO;4BACT,IAAI;gCACF,MAAM,UAAU,MAAM,KAAK,OAAO,CAAC;gCACnC,IAAI,WAAW,cAAc,SAAS;oCACpC,gBAAgB,OAAO,CAAC,QAAQ,GAAG,QAAQ,QAAQ;gCACrD;4BACF,EAAE,OAAO,IAAI;gCACX,IAAI,cAAc,iJAAA,CAAA,WAAQ,EAAE;oCAC1B,gBAAgB,OAAO,CAAC,QAAQ,GAAG;oCACnC;gCACF;gCACA,MAAM;4BACR;wBACF;oBACF;oBACA,IAAI,gBAAgB,OAAO,CAAC,QAAQ,YAAY,iJAAA,CAAA,WAAQ,EAAE;wBACxD,gBAAgB,OAAO,CAAC,QAAQ,CAAC,OAAO,GAAG,SAAS,OAAO;wBAC3D,MAAM,gBAAgB,OAAO,CAAC,QAAQ;oBACxC;oBACA,OAAO,gBAAgB,OAAO,CAAC,QAAQ;gBACzC;gBACA,MAAM;YACR;YACA,gBAAgB,OAAO,CAAC,QAAQ,GAAG;YACnC,gBAAgB,cAAc,GAAG,SAAS,OAAO;YACjD,KAAK,MAAM,QAAQ,WAAY;gBAC7B,MAAM,QAAQ,KAAK,OAAO,CAAC;gBAC3B,IAAI,OAAO;oBACT,IAAI;wBACF,MAAM,UAAU,MAAM,KAAK,OAAO,CAAC;wBACnC,IAAI,SAAS;4BACX,IAAI,oBAAoB,SAAS;gCAC/B,MAAM,UAAU,QAAQ,cAAc;gCACtC,gBAAgB,cAAc,GAAG;4BACnC,OAAO;gCACL,gBAAgB,OAAO,CAAC,QAAQ,GAAG;4BACrC;wBACF;oBACF,EAAE,OAAO,GAAG;wBACV,IAAI,aAAa,iJAAA,CAAA,WAAQ,EAAE;4BACzB,gBAAgB,OAAO,CAAC,QAAQ,GAAG;4BACnC;wBACF;wBACA,MAAM;oBACR;gBACF;YACF;YACA,MAAM,WAAW,gBAAgB,OAAO,CAAC,QAAQ;YACjD,IAAI,oBAAoB,UAAU;gBAChC,SAAS,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO;oBAC/B,IAAI,SAAS,cAAc;wBACzB,SAAS,OAAO,CAAC,MAAM,CAAC,MAAM;oBAChC,OAAO;wBACL,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM;oBAC7B;gBACF;YACF;YACA,IAAI,oBAAoB,iJAAA,CAAA,WAAQ,EAAE;gBAChC,SAAS,OAAO,GAAG,SAAS,OAAO;gBACnC,MAAM;YACR;YACA,OAAO;QACT;QACA,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,IAAI;QAC7B,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,SAAS,MAAM;QACjC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,SAAS,OAAO;QACnC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,SAAS,OAAO;IACrC;IACA,OAAO;QACL;QACA;IACF;AACF;AACA,IAAI,SAAS,CAAC,KAAK;IACjB,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG,aAAa,KAAK;IAC/C,MAAM,WAAW,IAAI,IAAI,IAAI,OAAO,EAAE,QAAQ;IAC9C,OAAO,CAAA,GAAA,iJAAA,CAAA,eAAY,AAAD,EAAE,KAAK;QACvB,cAAc;QACd;QACA,kBAAkB;YAChB;gBACE,MAAM;gBACN,YAAY;YACd;eACG;SACJ;QACD,MAAM,WAAU,GAAG;YACjB,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,EAAE,CAAE;gBAC9C,IAAI,OAAO,SAAS,EAAE;oBACpB,MAAM,WAAW,MAAM,OAAO,SAAS,CAAC,KAAK;oBAC7C,IAAI,YAAY,cAAc,UAAU;wBACtC,OAAO,SAAS,QAAQ;oBAC1B;gBACF;YACF;YACA,OAAO,mBAAmB,KAAK;QACjC;QACA,MAAM,YAAW,GAAG;YAClB,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,EAAE,CAAE;gBAC9C,IAAI,OAAO,UAAU,EAAE;oBACrB,MAAM,WAAW,MAAM,OAAO,UAAU,CAAC,KAAK;oBAC9C,IAAI,UAAU;wBACZ,OAAO,SAAS,QAAQ;oBAC1B;gBACF;YACF;YACA,OAAO;QACT;QACA,SAAQ,CAAC;YACP,IAAI,aAAa,iJAAA,CAAA,WAAQ,IAAI,EAAE,MAAM,KAAK,SAAS;gBACjD;YACF;YACA,IAAI,QAAQ,UAAU,EAAE,OAAO;gBAC7B,MAAM;YACR;YACA,IAAI,QAAQ,UAAU,EAAE,SAAS;gBAC/B,QAAQ,UAAU,CAAC,OAAO,CAAC,GAAG;gBAC9B;YACF;YACA,MAAM,cAAc,QAAQ,MAAM,EAAE;YACpC,MAAM,MAAM,gBAAgB,WAAW,gBAAgB,UAAU,gBAAgB,UAAU,6JAAA,CAAA,SAAM,GAAG,KAAK;YACzG,IAAI,QAAQ,MAAM,EAAE,aAAa,MAAM;gBACrC,IAAI,KAAK,OAAO,MAAM,YAAY,aAAa,KAAK,OAAO,EAAE,OAAO,KAAK,UAAU;oBACjF,IAAI,EAAE,OAAO,CAAC,QAAQ,CAAC,gBAAgB,EAAE,OAAO,CAAC,QAAQ,CAAC,aAAa,EAAE,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE,OAAO,CAAC,QAAQ,CAAC,YAAY,EAAE,OAAO,CAAC,QAAQ,CAAC,mBAAmB;wBAC5K,IAAI,MAAM,EAAE,MAAM,EAAE,OAAO;wBAC3B;oBACF;gBACF;gBACA,IAAI,aAAa,iJAAA,CAAA,WAAQ,EAAE;oBACzB,IAAI,EAAE,MAAM,KAAK,yBAAyB;wBACxC,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE;oBAC7B;oBACA,KAAK,MAAM,EAAE,OAAO;gBACtB,OAAO;oBACL,IAAI,MAAM,EAAE,MACV,KAAK,OAAO,MAAM,YAAY,UAAU,IAAI,EAAE,IAAI,GAAG,IACrD;gBAEJ;YACF;QACF;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 5411, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5438, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-NN3CE6VO.js"],"sourcesContent":["import { safeJSONParse, parseSessionOutput, getIp, parseUserOutput } from './chunk-72KRA3CK.js';\nimport { generateId, logger, createLogger } from './chunk-KLDFBLYL.js';\nimport { getDate } from './chunk-FURNA6HY.js';\nimport { BetterAuthError } from './chunk-UNWCXKMP.js';\nimport { Kysely, SqliteDialect, MysqlDialect, PostgresDialect, MssqlDialect } from 'kysely';\nimport { z } from 'zod';\n\nfunction getDatabaseType(db) {\n  if (!db) {\n    return null;\n  }\n  if (\"dialect\" in db) {\n    return getDatabaseType(db.dialect);\n  }\n  if (\"createDriver\" in db) {\n    if (db instanceof SqliteDialect) {\n      return \"sqlite\";\n    }\n    if (db instanceof MysqlDialect) {\n      return \"mysql\";\n    }\n    if (db instanceof PostgresDialect) {\n      return \"postgres\";\n    }\n    if (db instanceof MssqlDialect) {\n      return \"mssql\";\n    }\n  }\n  if (\"aggregate\" in db) {\n    return \"sqlite\";\n  }\n  if (\"getConnection\" in db) {\n    return \"mysql\";\n  }\n  if (\"connect\" in db) {\n    return \"postgres\";\n  }\n  return null;\n}\nvar createKyselyAdapter = async (config) => {\n  const db = config.database;\n  if (!db) {\n    return {\n      kysely: null,\n      databaseType: null\n    };\n  }\n  if (\"db\" in db) {\n    return {\n      kysely: db.db,\n      databaseType: db.type\n    };\n  }\n  if (\"dialect\" in db) {\n    return {\n      kysely: new Kysely({ dialect: db.dialect }),\n      databaseType: db.type\n    };\n  }\n  let dialect = void 0;\n  const databaseType = getDatabaseType(db);\n  if (\"createDriver\" in db) {\n    dialect = db;\n  }\n  if (\"aggregate\" in db) {\n    dialect = new SqliteDialect({\n      database: db\n    });\n  }\n  if (\"getConnection\" in db) {\n    dialect = new MysqlDialect(db);\n  }\n  if (\"connect\" in db) {\n    dialect = new PostgresDialect({\n      pool: db\n    });\n  }\n  return {\n    kysely: dialect ? new Kysely({ dialect }) : null,\n    databaseType\n  };\n};\n\n// src/db/with-hooks.ts\nfunction getWithHooks(adapter, ctx) {\n  const hooks = ctx.hooks;\n  async function createWithHooks(data, model, customCreateFn) {\n    let actualData = data;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.create?.before;\n      if (toRun) {\n        const result = await toRun(data);\n        if (result === false) {\n          return null;\n        }\n        const isObject = typeof result === \"object\" && \"data\" in result;\n        if (isObject) {\n          actualData = result.data;\n        }\n      }\n    }\n    const customCreated = customCreateFn ? await customCreateFn.fn(actualData) : null;\n    const created = !customCreateFn || customCreateFn.executeMainFn ? await adapter.create({\n      model,\n      data: actualData\n    }) : customCreated;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.create?.after;\n      if (toRun) {\n        await toRun(created);\n      }\n    }\n    return created;\n  }\n  async function updateWithHooks(data, where, model, customUpdateFn) {\n    let actualData = data;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.before;\n      if (toRun) {\n        const result = await toRun(data);\n        if (result === false) {\n          return null;\n        }\n        const isObject = typeof result === \"object\";\n        actualData = isObject ? result.data : result;\n      }\n    }\n    const customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n    const updated = !customUpdateFn || customUpdateFn.executeMainFn ? await adapter.update({\n      model,\n      update: actualData,\n      where\n    }) : customUpdated;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.after;\n      if (toRun) {\n        await toRun(updated);\n      }\n    }\n    return updated;\n  }\n  async function updateManyWithHooks(data, where, model, customUpdateFn) {\n    let actualData = data;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.before;\n      if (toRun) {\n        const result = await toRun(data);\n        if (result === false) {\n          return null;\n        }\n        const isObject = typeof result === \"object\";\n        actualData = isObject ? result.data : result;\n      }\n    }\n    const customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n    const updated = !customUpdateFn || customUpdateFn.executeMainFn ? await adapter.updateMany({\n      model,\n      update: actualData,\n      where\n    }) : customUpdated;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.after;\n      if (toRun) {\n        await toRun(updated);\n      }\n    }\n    return updated;\n  }\n  return {\n    createWithHooks,\n    updateWithHooks,\n    updateManyWithHooks\n  };\n}\n\n// src/db/internal-adapter.ts\nvar createInternalAdapter = (adapter, ctx) => {\n  const options = ctx.options;\n  const secondaryStorage = options.secondaryStorage;\n  const sessionExpiration = options.session?.expiresIn || 60 * 60 * 24 * 7;\n  const { createWithHooks, updateWithHooks, updateManyWithHooks } = getWithHooks(adapter, ctx);\n  return {\n    createOAuthUser: async (user, account) => {\n      const createdUser = await createWithHooks(\n        {\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...user\n        },\n        \"user\"\n      );\n      const createdAccount = await createWithHooks(\n        {\n          ...account,\n          userId: createdUser.id || user.id,\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date()\n        },\n        \"account\"\n      );\n      return {\n        user: createdUser,\n        account: createdAccount\n      };\n    },\n    createUser: async (user) => {\n      const createdUser = await createWithHooks(\n        {\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          emailVerified: false,\n          ...user,\n          email: user.email.toLowerCase()\n        },\n        \"user\"\n      );\n      return createdUser;\n    },\n    createAccount: async (account) => {\n      const createdAccount = await createWithHooks(\n        {\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...account\n        },\n        \"account\"\n      );\n      return createdAccount;\n    },\n    listSessions: async (userId) => {\n      if (secondaryStorage) {\n        const currentList = await secondaryStorage.get(\n          `active-sessions-${userId}`\n        );\n        if (!currentList) return [];\n        const list = safeJSONParse(currentList) || [];\n        const now = Date.now();\n        const validSessions = list.filter((s) => s.expiresAt > now);\n        const sessions2 = [];\n        for (const session of validSessions) {\n          const sessionStringified = await secondaryStorage.get(session.token);\n          if (sessionStringified) {\n            const s = JSON.parse(sessionStringified);\n            const parsedSession = parseSessionOutput(ctx.options, {\n              ...s.session,\n              expiresAt: new Date(s.session.expiresAt)\n            });\n            sessions2.push(parsedSession);\n          }\n        }\n        return sessions2;\n      }\n      const sessions = await adapter.findMany({\n        model: \"session\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      return sessions;\n    },\n    listUsers: async (limit, offset, sortBy, where) => {\n      const users = await adapter.findMany({\n        model: \"user\",\n        limit,\n        offset,\n        sortBy,\n        where\n      });\n      return users;\n    },\n    deleteUser: async (userId) => {\n      await adapter.deleteMany({\n        model: \"session\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      await adapter.deleteMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      await adapter.delete({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: userId\n          }\n        ]\n      });\n    },\n    createSession: async (userId, request, dontRememberMe, override) => {\n      const headers = request instanceof Request ? request.headers : request;\n      const { id: _, ...rest } = override || {};\n      const data = {\n        ipAddress: request ? getIp(request, ctx.options) || \"\" : \"\",\n        userAgent: headers?.get(\"user-agent\") || \"\",\n        ...rest,\n        /**\n         * If the user doesn't want to be remembered\n         * set the session to expire in 1 day.\n         * The cookie will be set to expire at the end of the session\n         */\n        expiresAt: dontRememberMe ? getDate(60 * 60 * 24, \"sec\") : getDate(sessionExpiration, \"sec\"),\n        userId,\n        token: generateId(32),\n        createdAt: /* @__PURE__ */ new Date(),\n        updatedAt: /* @__PURE__ */ new Date()\n      };\n      const res = await createWithHooks(\n        data,\n        \"session\",\n        secondaryStorage ? {\n          fn: async (sessionData) => {\n            const currentList = await secondaryStorage.get(\n              `active-sessions-${userId}`\n            );\n            let list = [];\n            const now = Date.now();\n            if (currentList) {\n              list = safeJSONParse(currentList) || [];\n              list = list.filter((session) => session.expiresAt > now);\n            }\n            list.push({\n              token: data.token,\n              expiresAt: now + sessionExpiration * 1e3\n            });\n            await secondaryStorage.set(\n              `active-sessions-${userId}`,\n              JSON.stringify(list),\n              sessionExpiration\n            );\n            return sessionData;\n          },\n          executeMainFn: options.session?.storeSessionInDatabase\n        } : void 0\n      );\n      return res;\n    },\n    findSession: async (token) => {\n      if (secondaryStorage) {\n        const sessionStringified = await secondaryStorage.get(token);\n        if (!sessionStringified) {\n          return null;\n        }\n        const s = JSON.parse(sessionStringified);\n        const parsedSession2 = parseSessionOutput(ctx.options, {\n          ...s.session,\n          expiresAt: new Date(s.session.expiresAt),\n          createdAt: new Date(s.session.createdAt),\n          updatedAt: new Date(s.session.updatedAt)\n        });\n        const parsedUser2 = parseUserOutput(ctx.options, {\n          ...s.user,\n          createdAt: new Date(s.user.createdAt),\n          updatedAt: new Date(s.user.updatedAt)\n        });\n        return {\n          session: parsedSession2,\n          user: parsedUser2\n        };\n      }\n      const session = await adapter.findOne({\n        model: \"session\",\n        where: [\n          {\n            value: token,\n            field: \"token\"\n          }\n        ]\n      });\n      if (!session) {\n        return null;\n      }\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            value: session.userId,\n            field: \"id\"\n          }\n        ]\n      });\n      if (!user) {\n        return null;\n      }\n      const parsedSession = parseSessionOutput(ctx.options, session);\n      const parsedUser = parseUserOutput(ctx.options, user);\n      return {\n        session: parsedSession,\n        user: parsedUser\n      };\n    },\n    findSessions: async (sessionTokens) => {\n      if (secondaryStorage) {\n        const sessions2 = [];\n        for (const sessionToken of sessionTokens) {\n          const sessionStringified = await secondaryStorage.get(sessionToken);\n          if (sessionStringified) {\n            const s = JSON.parse(sessionStringified);\n            const session = {\n              session: {\n                ...s.session,\n                expiresAt: new Date(s.session.expiresAt)\n              },\n              user: {\n                ...s.user,\n                createdAt: new Date(s.user.createdAt),\n                updatedAt: new Date(s.user.updatedAt)\n              }\n            };\n            sessions2.push(session);\n          }\n        }\n        return sessions2;\n      }\n      const sessions = await adapter.findMany({\n        model: \"session\",\n        where: [\n          {\n            field: \"token\",\n            value: sessionTokens,\n            operator: \"in\"\n          }\n        ]\n      });\n      const userIds = sessions.map((session) => {\n        return session.userId;\n      });\n      if (!userIds.length) return [];\n      const users = await adapter.findMany({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: userIds,\n            operator: \"in\"\n          }\n        ]\n      });\n      return sessions.map((session) => {\n        const user = users.find((u) => u.id === session.userId);\n        if (!user) return null;\n        return {\n          session,\n          user\n        };\n      });\n    },\n    updateSession: async (sessionToken, session) => {\n      const updatedSession = await updateWithHooks(\n        session,\n        [{ field: \"token\", value: sessionToken }],\n        \"session\",\n        secondaryStorage ? {\n          async fn(data) {\n            const currentSession = await secondaryStorage.get(sessionToken);\n            let updatedSession2 = null;\n            if (currentSession) {\n              const parsedSession = JSON.parse(currentSession);\n              updatedSession2 = {\n                ...parsedSession.session,\n                ...data\n              };\n              return updatedSession2;\n            } else {\n              return null;\n            }\n          },\n          executeMainFn: options.session?.storeSessionInDatabase\n        } : void 0\n      );\n      return updatedSession;\n    },\n    deleteSession: async (token) => {\n      if (secondaryStorage) {\n        await secondaryStorage.delete(token);\n        if (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) {\n          return;\n        }\n      }\n      await adapter.delete({\n        model: \"session\",\n        where: [\n          {\n            field: \"token\",\n            value: token\n          }\n        ]\n      });\n    },\n    deleteAccounts: async (userId) => {\n      await adapter.deleteMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n    },\n    deleteAccount: async (providerId, userId) => {\n      await adapter.delete({\n        model: \"account\",\n        where: [\n          {\n            field: \"providerId\",\n            value: providerId\n          },\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n    },\n    deleteSessions: async (userIdOrSessionTokens) => {\n      if (secondaryStorage) {\n        if (typeof userIdOrSessionTokens === \"string\") {\n          const activeSession = await secondaryStorage.get(\n            `active-sessions-${userIdOrSessionTokens}`\n          );\n          const sessions = activeSession ? safeJSONParse(activeSession) : [];\n          if (!sessions) return;\n          for (const session of sessions) {\n            await secondaryStorage.delete(session.token);\n          }\n        } else {\n          for (const sessionToken of userIdOrSessionTokens) {\n            const session = await secondaryStorage.get(sessionToken);\n            if (session) {\n              await secondaryStorage.delete(sessionToken);\n            }\n          }\n        }\n        if (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) {\n          return;\n        }\n      }\n      await adapter.deleteMany({\n        model: \"session\",\n        where: [\n          {\n            field: Array.isArray(userIdOrSessionTokens) ? \"token\" : \"userId\",\n            value: userIdOrSessionTokens,\n            operator: Array.isArray(userIdOrSessionTokens) ? \"in\" : void 0\n          }\n        ]\n      });\n    },\n    findOAuthUser: async (email, accountId, providerId) => {\n      const account = await adapter.findOne({\n        model: \"account\",\n        where: [\n          {\n            value: accountId,\n            field: \"accountId\"\n          },\n          {\n            value: providerId,\n            field: \"providerId\"\n          }\n        ]\n      });\n      if (account) {\n        const user = await adapter.findOne({\n          model: \"user\",\n          where: [\n            {\n              value: account.userId,\n              field: \"id\"\n            }\n          ]\n        });\n        if (user) {\n          return {\n            user,\n            accounts: [account]\n          };\n        } else {\n          return null;\n        }\n      } else {\n        const user = await adapter.findOne({\n          model: \"user\",\n          where: [\n            {\n              value: email.toLowerCase(),\n              field: \"email\"\n            }\n          ]\n        });\n        if (user) {\n          const accounts = await adapter.findMany({\n            model: \"account\",\n            where: [\n              {\n                value: user.id,\n                field: \"userId\"\n              }\n            ]\n          });\n          return {\n            user,\n            accounts: accounts || []\n          };\n        } else {\n          return null;\n        }\n      }\n    },\n    findUserByEmail: async (email, options2) => {\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            value: email.toLowerCase(),\n            field: \"email\"\n          }\n        ]\n      });\n      if (!user) return null;\n      if (options2?.includeAccounts) {\n        const accounts = await adapter.findMany({\n          model: \"account\",\n          where: [\n            {\n              value: user.id,\n              field: \"userId\"\n            }\n          ]\n        });\n        return {\n          user,\n          accounts\n        };\n      }\n      return {\n        user,\n        accounts: []\n      };\n    },\n    findUserById: async (userId) => {\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: userId\n          }\n        ]\n      });\n      return user;\n    },\n    linkAccount: async (account) => {\n      const _account = await createWithHooks(\n        {\n          ...account,\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date()\n        },\n        \"account\"\n      );\n      return _account;\n    },\n    updateUser: async (userId, data) => {\n      const user = await updateWithHooks(\n        data,\n        [\n          {\n            field: \"id\",\n            value: userId\n          }\n        ],\n        \"user\"\n      );\n      return user;\n    },\n    updateUserByEmail: async (email, data) => {\n      const user = await updateWithHooks(\n        data,\n        [\n          {\n            field: \"email\",\n            value: email\n          }\n        ],\n        \"user\"\n      );\n      return user;\n    },\n    updatePassword: async (userId, password) => {\n      await updateManyWithHooks(\n        {\n          password\n        },\n        [\n          {\n            field: \"userId\",\n            value: userId\n          },\n          {\n            field: \"providerId\",\n            value: \"credential\"\n          }\n        ],\n        \"account\"\n      );\n    },\n    findAccounts: async (userId) => {\n      const accounts = await adapter.findMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      return accounts;\n    },\n    findAccount: async (accountId) => {\n      const account = await adapter.findOne({\n        model: \"account\",\n        where: [\n          {\n            field: \"accountId\",\n            value: accountId\n          }\n        ]\n      });\n      return account;\n    },\n    findAccountByUserId: async (userId) => {\n      const account = await adapter.findMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      return account;\n    },\n    updateAccount: async (accountId, data) => {\n      const account = await updateWithHooks(\n        data,\n        [{ field: \"id\", value: accountId }],\n        \"account\"\n      );\n      return account;\n    },\n    createVerificationValue: async (data) => {\n      const verification = await createWithHooks(\n        {\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...data\n        },\n        \"verification\"\n      );\n      return verification;\n    },\n    findVerificationValue: async (identifier) => {\n      const verification = await adapter.findMany({\n        model: \"verification\",\n        where: [\n          {\n            field: \"identifier\",\n            value: identifier\n          }\n        ],\n        sortBy: {\n          field: \"createdAt\",\n          direction: \"desc\"\n        },\n        limit: 1\n      });\n      const lastVerification = verification[0];\n      return lastVerification;\n    },\n    deleteVerificationValue: async (id) => {\n      await adapter.delete({\n        model: \"verification\",\n        where: [\n          {\n            field: \"id\",\n            value: id\n          }\n        ]\n      });\n    },\n    deleteVerificationByIdentifier: async (identifier) => {\n      await adapter.delete({\n        model: \"verification\",\n        where: [\n          {\n            field: \"identifier\",\n            value: identifier\n          }\n        ]\n      });\n    },\n    updateVerificationValue: async (id, data) => {\n      const verification = await updateWithHooks(\n        data,\n        [{ field: \"id\", value: id }],\n        \"verification\"\n      );\n      return verification;\n    }\n  };\n};\n\n// src/db/field.ts\nvar createFieldAttribute = (type, config) => {\n  return {\n    type,\n    ...config\n  };\n};\n\n// src/db/get-tables.ts\nvar getAuthTables = (options) => {\n  const pluginSchema = options.plugins?.reduce(\n    (acc, plugin) => {\n      const schema = plugin.schema;\n      if (!schema) return acc;\n      for (const [key, value] of Object.entries(schema)) {\n        acc[key] = {\n          fields: {\n            ...acc[key]?.fields,\n            ...value.fields\n          },\n          modelName: value.modelName || key\n        };\n      }\n      return acc;\n    },\n    {}\n  );\n  const shouldAddRateLimitTable = options.rateLimit?.storage === \"database\";\n  const rateLimitTable = {\n    rateLimit: {\n      modelName: options.rateLimit?.modelName || \"rateLimit\",\n      fields: {\n        key: {\n          type: \"string\",\n          fieldName: options.rateLimit?.fields?.key || \"key\"\n        },\n        count: {\n          type: \"number\",\n          fieldName: options.rateLimit?.fields?.count || \"count\"\n        },\n        lastRequest: {\n          type: \"number\",\n          bigint: true,\n          fieldName: options.rateLimit?.fields?.lastRequest || \"lastRequest\"\n        }\n      }\n    }\n  };\n  const { user, session, account, ...pluginTables } = pluginSchema || {};\n  return {\n    user: {\n      modelName: options.user?.modelName || \"user\",\n      fields: {\n        name: {\n          type: \"string\",\n          required: true,\n          fieldName: options.user?.fields?.name || \"name\",\n          sortable: true\n        },\n        email: {\n          type: \"string\",\n          unique: true,\n          required: true,\n          fieldName: options.user?.fields?.email || \"email\",\n          sortable: true\n        },\n        emailVerified: {\n          type: \"boolean\",\n          defaultValue: () => false,\n          required: true,\n          fieldName: options.user?.fields?.emailVerified || \"emailVerified\"\n        },\n        image: {\n          type: \"string\",\n          required: false,\n          fieldName: options.user?.fields?.image || \"image\"\n        },\n        createdAt: {\n          type: \"date\",\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          required: true,\n          fieldName: options.user?.fields?.createdAt || \"createdAt\"\n        },\n        updatedAt: {\n          type: \"date\",\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          required: true,\n          fieldName: options.user?.fields?.updatedAt || \"updatedAt\"\n        },\n        ...user?.fields,\n        ...options.user?.additionalFields\n      },\n      order: 1\n    },\n    session: {\n      modelName: options.session?.modelName || \"session\",\n      fields: {\n        expiresAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.session?.fields?.expiresAt || \"expiresAt\"\n        },\n        token: {\n          type: \"string\",\n          required: true,\n          fieldName: options.session?.fields?.token || \"token\",\n          unique: true\n        },\n        createdAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.session?.fields?.createdAt || \"createdAt\"\n        },\n        updatedAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.session?.fields?.updatedAt || \"updatedAt\"\n        },\n        ipAddress: {\n          type: \"string\",\n          required: false,\n          fieldName: options.session?.fields?.ipAddress || \"ipAddress\"\n        },\n        userAgent: {\n          type: \"string\",\n          required: false,\n          fieldName: options.session?.fields?.userAgent || \"userAgent\"\n        },\n        userId: {\n          type: \"string\",\n          fieldName: options.session?.fields?.userId || \"userId\",\n          references: {\n            model: options.user?.modelName || \"user\",\n            field: \"id\",\n            onDelete: \"cascade\"\n          },\n          required: true\n        },\n        ...session?.fields,\n        ...options.session?.additionalFields\n      },\n      order: 2\n    },\n    account: {\n      modelName: options.account?.modelName || \"account\",\n      fields: {\n        accountId: {\n          type: \"string\",\n          required: true,\n          fieldName: options.account?.fields?.accountId || \"accountId\"\n        },\n        providerId: {\n          type: \"string\",\n          required: true,\n          fieldName: options.account?.fields?.providerId || \"providerId\"\n        },\n        userId: {\n          type: \"string\",\n          references: {\n            model: options.user?.modelName || \"user\",\n            field: \"id\",\n            onDelete: \"cascade\"\n          },\n          required: true,\n          fieldName: options.account?.fields?.userId || \"userId\"\n        },\n        accessToken: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.accessToken || \"accessToken\"\n        },\n        refreshToken: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.refreshToken || \"refreshToken\"\n        },\n        idToken: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.idToken || \"idToken\"\n        },\n        accessTokenExpiresAt: {\n          type: \"date\",\n          required: false,\n          fieldName: options.account?.fields?.accessTokenExpiresAt || \"accessTokenExpiresAt\"\n        },\n        refreshTokenExpiresAt: {\n          type: \"date\",\n          required: false,\n          fieldName: options.account?.fields?.accessTokenExpiresAt || \"refreshTokenExpiresAt\"\n        },\n        scope: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.scope || \"scope\"\n        },\n        password: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.password || \"password\"\n        },\n        createdAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.account?.fields?.createdAt || \"createdAt\"\n        },\n        updatedAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.account?.fields?.updatedAt || \"updatedAt\"\n        },\n        ...account?.fields\n      },\n      order: 3\n    },\n    verification: {\n      modelName: options.verification?.modelName || \"verification\",\n      fields: {\n        identifier: {\n          type: \"string\",\n          required: true,\n          fieldName: options.verification?.fields?.identifier || \"identifier\"\n        },\n        value: {\n          type: \"string\",\n          required: true,\n          fieldName: options.verification?.fields?.value || \"value\"\n        },\n        expiresAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.verification?.fields?.expiresAt || \"expiresAt\"\n        },\n        createdAt: {\n          type: \"date\",\n          required: false,\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          fieldName: options.verification?.fields?.createdAt || \"createdAt\"\n        },\n        updatedAt: {\n          type: \"date\",\n          required: false,\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          fieldName: options.verification?.fields?.updatedAt || \"updatedAt\"\n        }\n      },\n      order: 4\n    },\n    ...pluginTables,\n    ...shouldAddRateLimitTable ? rateLimitTable : {}\n  };\n};\nfunction toZodSchema(fields) {\n  const schema = z.object({\n    ...Object.keys(fields).reduce((acc, key) => {\n      const field = fields[key];\n      if (!field) {\n        return acc;\n      }\n      if (field.type === \"string[]\" || field.type === \"number[]\") {\n        return {\n          ...acc,\n          [key]: z.array(field.type === \"string[]\" ? z.string() : z.number())\n        };\n      }\n      if (Array.isArray(field.type)) {\n        return {\n          ...acc,\n          [key]: z.any()\n        };\n      }\n      let schema2 = z[field.type]();\n      if (field?.required === false) {\n        schema2 = schema2.optional();\n      }\n      if (field?.returned === false) {\n        return acc;\n      }\n      return {\n        ...acc,\n        [key]: schema2\n      };\n    }, {})\n  });\n  return schema;\n}\n\n// src/adapters/utils.ts\nfunction withApplyDefault(value, field, action) {\n  if (action === \"update\") {\n    return value;\n  }\n  if (value === void 0 || value === null) {\n    if (field.defaultValue) {\n      if (typeof field.defaultValue === \"function\") {\n        return field.defaultValue();\n      }\n      return field.defaultValue;\n    }\n  }\n  return value;\n}\n\n// src/adapters/memory-adapter/memory-adapter.ts\nvar createTransform = (options) => {\n  const schema = getAuthTables(options);\n  function getField(model, field) {\n    if (field === \"id\") {\n      return field;\n    }\n    const f = schema[model].fields[field];\n    return f.fieldName || field;\n  }\n  return {\n    transformInput(data, model, action) {\n      const transformedData = action === \"update\" ? {} : {\n        id: options.advanced?.generateId ? options.advanced.generateId({\n          model\n        }) : data.id || generateId()\n      };\n      const fields = schema[model].fields;\n      for (const field in fields) {\n        const value = data[field];\n        if (value === void 0 && !fields[field].defaultValue) {\n          continue;\n        }\n        transformedData[fields[field].fieldName || field] = withApplyDefault(\n          value,\n          fields[field],\n          action\n        );\n      }\n      return transformedData;\n    },\n    transformOutput(data, model, select = []) {\n      if (!data) return null;\n      const transformedData = data.id || data._id ? select.length === 0 || select.includes(\"id\") ? {\n        id: data.id\n      } : {} : {};\n      const tableSchema = schema[model].fields;\n      for (const key in tableSchema) {\n        if (select.length && !select.includes(key)) {\n          continue;\n        }\n        const field = tableSchema[key];\n        if (field) {\n          transformedData[key] = data[field.fieldName || key];\n        }\n      }\n      return transformedData;\n    },\n    convertWhereClause(where, table, model) {\n      return table.filter((record) => {\n        return where.every((clause) => {\n          const { field: _field, value, operator } = clause;\n          const field = getField(model, _field);\n          if (operator === \"in\") {\n            if (!Array.isArray(value)) {\n              throw new Error(\"Value must be an array\");\n            }\n            return value.includes(record[field]);\n          } else if (operator === \"contains\") {\n            return record[field].includes(value);\n          } else if (operator === \"starts_with\") {\n            return record[field].startsWith(value);\n          } else if (operator === \"ends_with\") {\n            return record[field].endsWith(value);\n          } else {\n            return record[field] === value;\n          }\n        });\n      });\n    },\n    getField\n  };\n};\nvar memoryAdapter = (db) => (options) => {\n  const { transformInput, transformOutput, convertWhereClause, getField } = createTransform(options);\n  return {\n    id: \"memory\",\n    create: async ({ model, data }) => {\n      const transformed = transformInput(data, model, \"create\");\n      db[model].push(transformed);\n      return transformOutput(transformed, model);\n    },\n    findOne: async ({ model, where, select }) => {\n      const table = db[model];\n      const res = convertWhereClause(where, table, model);\n      const record = res[0] || null;\n      return transformOutput(record, model, select);\n    },\n    findMany: async ({ model, where, sortBy, limit, offset }) => {\n      let table = db[model];\n      if (where) {\n        table = convertWhereClause(where, table, model);\n      }\n      if (sortBy) {\n        table = table.sort((a, b) => {\n          const field = getField(model, sortBy.field);\n          if (sortBy.direction === \"asc\") {\n            return a[field] > b[field] ? 1 : -1;\n          } else {\n            return a[field] < b[field] ? 1 : -1;\n          }\n        });\n      }\n      if (offset !== void 0) {\n        table = table.slice(offset);\n      }\n      if (limit !== void 0) {\n        table = table.slice(0, limit);\n      }\n      return table.map((record) => transformOutput(record, model));\n    },\n    update: async ({ model, where, update }) => {\n      const table = db[model];\n      const res = convertWhereClause(where, table, model);\n      res.forEach((record) => {\n        Object.assign(record, transformInput(update, model, \"update\"));\n      });\n      return transformOutput(res[0], model);\n    },\n    delete: async ({ model, where }) => {\n      const table = db[model];\n      const res = convertWhereClause(where, table, model);\n      db[model] = table.filter((record) => !res.includes(record));\n    },\n    deleteMany: async ({ model, where }) => {\n      const table = db[model];\n      const res = convertWhereClause(where, table, model);\n      let count = 0;\n      db[model] = table.filter((record) => {\n        if (res.includes(record)) {\n          count++;\n          return false;\n        }\n        return !res.includes(record);\n      });\n      return count;\n    },\n    updateMany(data) {\n      const { model, where, update } = data;\n      const table = db[model];\n      const res = convertWhereClause(where, table, model);\n      res.forEach((record) => {\n        Object.assign(record, update);\n      });\n      return res[0] || null;\n    }\n  };\n};\n\n// src/db/utils.ts\nasync function getAdapter(options) {\n  if (!options.database) {\n    const tables = getAuthTables(options);\n    const memoryDB = Object.keys(tables).reduce((acc, key) => {\n      acc[key] = [];\n      return acc;\n    }, {});\n    logger.warn(\n      \"No database configuration provided. Using memory adapter in development\"\n    );\n    return memoryAdapter(memoryDB)(options);\n  }\n  if (typeof options.database === \"function\") {\n    return options.database(options);\n  }\n  const { kysely, databaseType } = await createKyselyAdapter(options);\n  if (!kysely) {\n    throw new BetterAuthError(\"Failed to initialize database adapter\");\n  }\n  return kyselyAdapter(kysely, {\n    type: databaseType || \"sqlite\"\n  })(options);\n}\nfunction convertToDB(fields, values) {\n  let result = values.id ? {\n    id: values.id\n  } : {};\n  for (const key in fields) {\n    const field = fields[key];\n    const value = values[key];\n    if (value === void 0) {\n      continue;\n    }\n    result[field.fieldName || key] = value;\n  }\n  return result;\n}\nfunction convertFromDB(fields, values) {\n  if (!values) {\n    return null;\n  }\n  let result = {\n    id: values.id\n  };\n  for (const [key, value] of Object.entries(fields)) {\n    result[key] = values[value.fieldName || key];\n  }\n  return result;\n}\n\n// src/db/get-schema.ts\nfunction getSchema(config) {\n  const tables = getAuthTables(config);\n  let schema = {};\n  for (const key in tables) {\n    const table = tables[key];\n    const fields = table.fields;\n    let actualFields = {};\n    Object.entries(fields).forEach(([key2, field]) => {\n      actualFields[field.fieldName || key2] = field;\n      if (field.references) {\n        const refTable = tables[field.references.model];\n        if (refTable) {\n          actualFields[field.fieldName || key2].references = {\n            model: refTable.modelName,\n            field: field.references.field\n          };\n        }\n      }\n    });\n    if (schema[table.modelName]) {\n      schema[table.modelName].fields = {\n        ...schema[table.modelName].fields,\n        ...actualFields\n      };\n      continue;\n    }\n    schema[table.modelName] = {\n      fields: actualFields,\n      order: table.order || Infinity\n    };\n  }\n  return schema;\n}\n\n// src/db/get-migration.ts\nvar postgresMap = {\n  string: [\"character varying\", \"text\"],\n  number: [\n    \"int4\",\n    \"integer\",\n    \"bigint\",\n    \"smallint\",\n    \"numeric\",\n    \"real\",\n    \"double precision\"\n  ],\n  boolean: [\"bool\", \"boolean\"],\n  date: [\"timestamp\", \"date\"]\n};\nvar mysqlMap = {\n  string: [\"varchar\", \"text\"],\n  number: [\n    \"integer\",\n    \"int\",\n    \"bigint\",\n    \"smallint\",\n    \"decimal\",\n    \"float\",\n    \"double\"\n  ],\n  boolean: [\"boolean\", \"tinyint\"],\n  date: [\"timestamp\", \"datetime\", \"date\"]\n};\nvar sqliteMap = {\n  string: [\"TEXT\"],\n  number: [\"INTEGER\", \"REAL\"],\n  boolean: [\"INTEGER\", \"BOOLEAN\"],\n  // 0 or 1\n  date: [\"DATE\", \"INTEGER\"]\n};\nvar mssqlMap = {\n  string: [\"text\", \"varchar\"],\n  number: [\"int\", \"bigint\", \"smallint\", \"decimal\", \"float\", \"double\"],\n  boolean: [\"bit\", \"smallint\"],\n  date: [\"datetime\", \"date\"]\n};\nvar map = {\n  postgres: postgresMap,\n  mysql: mysqlMap,\n  sqlite: sqliteMap,\n  mssql: mssqlMap\n};\nfunction matchType(columnDataType, fieldType, dbType) {\n  if (fieldType === \"string[]\" || fieldType === \"number[]\") {\n    return columnDataType.toLowerCase().includes(\"json\");\n  }\n  const types = map[dbType];\n  const type = Array.isArray(fieldType) ? types[\"string\"].map((t) => t.toLowerCase()) : types[fieldType].map((t) => t.toLowerCase());\n  const matches = type.includes(columnDataType.toLowerCase());\n  return matches;\n}\nasync function getMigrations(config) {\n  const betterAuthSchema = getSchema(config);\n  const logger2 = createLogger(config.logger);\n  let { kysely: db, databaseType: dbType } = await createKyselyAdapter(config);\n  if (!dbType) {\n    logger2.warn(\n      \"Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this.\"\n    );\n    dbType = \"sqlite\";\n  }\n  if (!db) {\n    logger2.error(\n      \"Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter.\"\n    );\n    process.exit(1);\n  }\n  const tableMetadata = await db.introspection.getTables();\n  const toBeCreated = [];\n  const toBeAdded = [];\n  for (const [key, value] of Object.entries(betterAuthSchema)) {\n    const table = tableMetadata.find((t) => t.name === key);\n    if (!table) {\n      const tIndex = toBeCreated.findIndex((t) => t.table === key);\n      const tableData = {\n        table: key,\n        fields: value.fields,\n        order: value.order || Infinity\n      };\n      const insertIndex = toBeCreated.findIndex(\n        (t) => (t.order || Infinity) > tableData.order\n      );\n      if (insertIndex === -1) {\n        if (tIndex === -1) {\n          toBeCreated.push(tableData);\n        } else {\n          toBeCreated[tIndex].fields = {\n            ...toBeCreated[tIndex].fields,\n            ...value.fields\n          };\n        }\n      } else {\n        toBeCreated.splice(insertIndex, 0, tableData);\n      }\n      continue;\n    }\n    let toBeAddedFields = {};\n    for (const [fieldName, field] of Object.entries(value.fields)) {\n      const column = table.columns.find((c) => c.name === fieldName);\n      if (!column) {\n        toBeAddedFields[fieldName] = field;\n        continue;\n      }\n      if (matchType(column.dataType, field.type, dbType)) {\n        continue;\n      } else {\n        logger2.warn(\n          `Field ${fieldName} in table ${key} has a different type in the database. Expected ${field.type} but got ${column.dataType}.`\n        );\n      }\n    }\n    if (Object.keys(toBeAddedFields).length > 0) {\n      toBeAdded.push({\n        table: key,\n        fields: toBeAddedFields,\n        order: value.order || Infinity\n      });\n    }\n  }\n  const migrations = [];\n  function getType(field) {\n    const type = field.type;\n    const typeMap = {\n      string: {\n        sqlite: \"text\",\n        postgres: \"text\",\n        mysql: field.unique ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"text\",\n        mssql: field.unique || field.sortable ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"text\"\n      },\n      boolean: {\n        sqlite: \"integer\",\n        postgres: \"boolean\",\n        mysql: \"boolean\",\n        mssql: \"smallint\"\n      },\n      number: {\n        sqlite: field.bigint ? \"bigint\" : \"integer\",\n        postgres: field.bigint ? \"bigint\" : \"integer\",\n        mysql: field.bigint ? \"bigint\" : \"integer\",\n        mssql: field.bigint ? \"bigint\" : \"integer\"\n      },\n      date: {\n        sqlite: \"date\",\n        postgres: \"timestamp\",\n        mysql: \"datetime\",\n        mssql: \"datetime\"\n      }\n    };\n    if (dbType === \"sqlite\" && (type === \"string[]\" || type === \"number[]\")) {\n      return \"text\";\n    }\n    if (type === \"string[]\" || type === \"number[]\") {\n      return \"jsonb\";\n    }\n    if (Array.isArray(type)) {\n      return \"text\";\n    }\n    return typeMap[type][dbType || \"sqlite\"];\n  }\n  if (toBeAdded.length) {\n    for (const table of toBeAdded) {\n      for (const [fieldName, field] of Object.entries(table.fields)) {\n        const type = getType(field);\n        const exec = db.schema.alterTable(table.table).addColumn(fieldName, type, (col) => {\n          col = field.required !== false ? col.notNull() : col;\n          if (field.references) {\n            col = col.references(\n              `${field.references.model}.${field.references.field}`\n            );\n          }\n          if (field.unique) {\n            col = col.unique();\n          }\n          return col;\n        });\n        migrations.push(exec);\n      }\n    }\n  }\n  if (toBeCreated.length) {\n    for (const table of toBeCreated) {\n      let dbT = db.schema.createTable(table.table).addColumn(\n        \"id\",\n        dbType === \"mysql\" || dbType === \"mssql\" ? \"varchar(36)\" : \"text\",\n        (col) => col.primaryKey().notNull()\n      );\n      for (const [fieldName, field] of Object.entries(table.fields)) {\n        const type = getType(field);\n        dbT = dbT.addColumn(fieldName, type, (col) => {\n          col = field.required !== false ? col.notNull() : col;\n          if (field.references) {\n            col = col.references(\n              `${field.references.model}.${field.references.field}`\n            );\n          }\n          if (field.unique) {\n            col = col.unique();\n          }\n          return col;\n        });\n      }\n      migrations.push(dbT);\n    }\n  }\n  async function runMigrations() {\n    for (const migration of migrations) {\n      await migration.execute();\n    }\n  }\n  async function compileMigrations() {\n    const compiled = migrations.map((m) => m.compile().sql);\n    return compiled.join(\";\\n\\n\");\n  }\n  return { toBeCreated, toBeAdded, runMigrations, compileMigrations };\n}\n\n// src/adapters/kysely-adapter/kysely-adapter.ts\nvar createTransform2 = (db, options, config) => {\n  const schema = getAuthTables(options);\n  function getField(model, field) {\n    if (field === \"id\") {\n      return field;\n    }\n    const f = schema[model].fields[field];\n    if (!f) {\n      console.log(\"Field not found\", model, field);\n    }\n    return f.fieldName || field;\n  }\n  function transformValueToDB(value, model, field) {\n    const { type = \"sqlite\" } = config || {};\n    const f = schema[model].fields[field];\n    if (f.type === \"boolean\" && (type === \"sqlite\" || type === \"mssql\") && value !== null && value !== void 0) {\n      return value ? 1 : 0;\n    }\n    if (f.type === \"date\" && value && value instanceof Date) {\n      return type === \"sqlite\" ? value.toISOString() : value;\n    }\n    return value;\n  }\n  function transformValueFromDB(value, model, field) {\n    const { type = \"sqlite\" } = config || {};\n    const f = schema[model].fields[field];\n    if (f.type === \"boolean\" && (type === \"sqlite\" || type === \"mssql\") && value !== null) {\n      return value === 1;\n    }\n    if (f.type === \"date\" && value) {\n      return new Date(value);\n    }\n    return value;\n  }\n  function getModelName(model) {\n    return schema[model].modelName;\n  }\n  const useDatabaseGeneratedId = options?.advanced?.generateId === false;\n  return {\n    transformInput(data, model, action) {\n      const transformedData = useDatabaseGeneratedId || action === \"update\" ? {} : {\n        id: options.advanced?.generateId ? options.advanced.generateId({\n          model\n        }) : data.id || generateId()\n      };\n      const fields = schema[model].fields;\n      for (const field in fields) {\n        const value = data[field];\n        transformedData[fields[field].fieldName || field] = withApplyDefault(\n          transformValueToDB(value, model, field),\n          fields[field],\n          action\n        );\n      }\n      return transformedData;\n    },\n    transformOutput(data, model, select = []) {\n      if (!data) return null;\n      const transformedData = data.id ? select.length === 0 || select.includes(\"id\") ? {\n        id: data.id\n      } : {} : {};\n      const tableSchema = schema[model].fields;\n      for (const key in tableSchema) {\n        if (select.length && !select.includes(key)) {\n          continue;\n        }\n        const field = tableSchema[key];\n        if (field) {\n          transformedData[key] = transformValueFromDB(\n            data[field.fieldName || key],\n            model,\n            key\n          );\n        }\n      }\n      return transformedData;\n    },\n    convertWhereClause(model, w) {\n      if (!w)\n        return {\n          and: null,\n          or: null\n        };\n      const conditions = {\n        and: [],\n        or: []\n      };\n      w.forEach((condition) => {\n        const {\n          field: _field,\n          value,\n          operator = \"=\",\n          connector = \"AND\"\n        } = condition;\n        const field = getField(model, _field);\n        const expr = (eb) => {\n          if (operator.toLowerCase() === \"in\") {\n            return eb(field, \"in\", Array.isArray(value) ? value : [value]);\n          }\n          if (operator === \"contains\") {\n            return eb(field, \"like\", `%${value}%`);\n          }\n          if (operator === \"starts_with\") {\n            return eb(field, \"like\", `${value}%`);\n          }\n          if (operator === \"ends_with\") {\n            return eb(field, \"like\", `%${value}`);\n          }\n          if (operator === \"eq\") {\n            return eb(field, \"=\", value);\n          }\n          if (operator === \"ne\") {\n            return eb(field, \"<>\", value);\n          }\n          if (operator === \"gt\") {\n            return eb(field, \">\", value);\n          }\n          if (operator === \"gte\") {\n            return eb(field, \">=\", value);\n          }\n          if (operator === \"lt\") {\n            return eb(field, \"<\", value);\n          }\n          if (operator === \"lte\") {\n            return eb(field, \"<=\", value);\n          }\n          return eb(field, operator, value);\n        };\n        if (connector === \"OR\") {\n          conditions.or.push(expr);\n        } else {\n          conditions.and.push(expr);\n        }\n      });\n      return {\n        and: conditions.and.length ? conditions.and : null,\n        or: conditions.or.length ? conditions.or : null\n      };\n    },\n    async withReturning(values, builder, model, where) {\n      let res;\n      if (config?.type === \"mysql\") {\n        await builder.execute();\n        const field = values.id ? \"id\" : where[0].field ? where[0].field : \"id\";\n        const value = values[field] || where[0].value;\n        res = await db.selectFrom(getModelName(model)).selectAll().where(getField(model, field), \"=\", value).executeTakeFirst();\n        return res;\n      }\n      if (config?.type === \"mssql\") {\n        res = await builder.outputAll(\"inserted\").executeTakeFirst();\n        return res;\n      }\n      res = await builder.returningAll().executeTakeFirst();\n      return res;\n    },\n    getModelName,\n    getField\n  };\n};\nvar kyselyAdapter = (db, config) => (opts) => {\n  const {\n    transformInput,\n    withReturning,\n    transformOutput,\n    convertWhereClause,\n    getModelName,\n    getField\n  } = createTransform2(db, opts, config);\n  return {\n    id: \"kysely\",\n    async create(data) {\n      const { model, data: values, select } = data;\n      const transformed = transformInput(values, model, \"create\");\n      const builder = db.insertInto(getModelName(model)).values(transformed);\n      return transformOutput(\n        await withReturning(transformed, builder, model, []),\n        model,\n        select\n      );\n    },\n    async findOne(data) {\n      const { model, where, select } = data;\n      const { and, or } = convertWhereClause(model, where);\n      let query = db.selectFrom(getModelName(model)).selectAll();\n      if (and) {\n        query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n      }\n      if (or) {\n        query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n      }\n      const res = await query.executeTakeFirst();\n      if (!res) return null;\n      return transformOutput(res, model, select);\n    },\n    async findMany(data) {\n      const { model, where, limit, offset, sortBy } = data;\n      const { and, or } = convertWhereClause(model, where);\n      let query = db.selectFrom(getModelName(model));\n      if (and) {\n        query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n      }\n      if (or) {\n        query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n      }\n      if (config?.type === \"mssql\") {\n        if (!offset) {\n          query = query.top(limit || 100);\n        }\n      } else {\n        query = query.limit(limit || 100);\n      }\n      if (sortBy) {\n        query = query.orderBy(\n          getField(model, sortBy.field),\n          sortBy.direction\n        );\n      }\n      if (offset) {\n        if (config?.type === \"mssql\") {\n          if (!sortBy) {\n            query = query.orderBy(getField(model, \"id\"));\n          }\n          query = query.offset(offset).fetch(limit || 100);\n        } else {\n          query = query.offset(offset);\n        }\n      }\n      const res = await query.selectAll().execute();\n      if (!res) return [];\n      return res.map((r) => transformOutput(r, model));\n    },\n    async update(data) {\n      const { model, where, update: values } = data;\n      const { and, or } = convertWhereClause(model, where);\n      const transformedData = transformInput(values, model, \"update\");\n      let query = db.updateTable(getModelName(model)).set(transformedData);\n      if (and) {\n        query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n      }\n      if (or) {\n        query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n      }\n      const res = await transformOutput(\n        await withReturning(transformedData, query, model, where),\n        model\n      );\n      return res;\n    },\n    async updateMany(data) {\n      const { model, where, update: values } = data;\n      const { and, or } = convertWhereClause(model, where);\n      const transformedData = transformInput(values, model, \"update\");\n      let query = db.updateTable(getModelName(model)).set(transformedData);\n      if (and) {\n        query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n      }\n      if (or) {\n        query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n      }\n      const res = await query.execute();\n      return res.length;\n    },\n    async delete(data) {\n      const { model, where } = data;\n      const { and, or } = convertWhereClause(model, where);\n      let query = db.deleteFrom(getModelName(model));\n      if (and) {\n        query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n      }\n      if (or) {\n        query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n      }\n      await query.execute();\n    },\n    async deleteMany(data) {\n      const { model, where } = data;\n      const { and, or } = convertWhereClause(model, where);\n      let query = db.deleteFrom(getModelName(model));\n      if (and) {\n        query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n      }\n      if (or) {\n        query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n      }\n      return (await query.execute()).length;\n    },\n    options: config\n  };\n};\n\nexport { convertFromDB, convertToDB, createFieldAttribute, createInternalAdapter, createKyselyAdapter, getAdapter, getAuthTables, getMigrations, getSchema, getWithHooks, kyselyAdapter, matchType, memoryAdapter, toZodSchema, withApplyDefault };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7292, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7298, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 7299, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7305, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-3XTQSPPA.js"],"sourcesContent":["// src/utils/misc.ts\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport { capitalizeFirstLetter };\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;AACpB,SAAS,sBAAsB,GAAG;IAChC,OAAO,IAAI,MAAM,CAAC,GAAG,WAAW,KAAK,IAAI,KAAK,CAAC;AACjD","ignoreList":[0]}},
    {"offset": {"line": 7313, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7319, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/index.js"],"sourcesContent":["import { checkPassword } from './chunk-TOKZL3ZI.js';\nimport { getEndpoints, router, BASE_ERROR_CODES } from './chunk-FUJTYWXL.js';\nimport { socialProviders } from './chunk-GB5YTBLA.js';\nimport './chunk-GTQM7JU7.js';\nimport { getBaseURL } from './chunk-XFCIANZX.js';\nimport { getCookies, createCookieGetter } from './chunk-IWEXZ2ES.js';\nexport { createCookieGetter, deleteSessionCookie, getCookies, parseCookies, parseSetCookieHeader, setCookieCache, setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { getAdapter, getAuthTables, createInternalAdapter } from './chunk-NN3CE6VO.js';\nimport './chunk-72KRA3CK.js';\nimport { createLogger, generateId } from './chunk-KLDFBLYL.js';\nexport { HIDE_METADATA, createLogger, generateId, levels, logger, shouldPublishLog } from './chunk-KLDFBLYL.js';\nexport { generateState, parseState } from './chunk-NPO64SVN.js';\nimport './chunk-SK6Y2YH6.js';\nexport { capitalizeFirstLetter } from './chunk-3XTQSPPA.js';\nimport { hashPassword, verifyPassword } from './chunk-DBPOZRMS.js';\nimport './chunk-FURNA6HY.js';\nimport { env, isProduction } from './chunk-TQQSPPNA.js';\nexport { BetterAuthError, MissingDependencyError } from './chunk-UNWCXKMP.js';\nimport { defu } from 'defu';\n\n// src/utils/constants.ts\nvar DEFAULT_SECRET = \"better-auth-secret-123456789\";\n\n// src/init.ts\nvar init = async (options) => {\n  const adapter = await getAdapter(options);\n  const plugins = options.plugins || [];\n  const internalPlugins = getInternalPlugins(options);\n  const logger2 = createLogger(options.logger);\n  const baseURL = getBaseURL(options.baseURL, options.basePath);\n  const secret = options.secret || env.BETTER_AUTH_SECRET || env.AUTH_SECRET || DEFAULT_SECRET;\n  if (secret === DEFAULT_SECRET) {\n    if (isProduction) {\n      logger2.error(\n        \"You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.\"\n      );\n    }\n  }\n  options = {\n    ...options,\n    secret,\n    baseURL: baseURL ? new URL(baseURL).origin : \"\",\n    basePath: options.basePath || \"/api/auth\",\n    plugins: plugins.concat(internalPlugins)\n  };\n  const cookies = getCookies(options);\n  const tables = getAuthTables(options);\n  const providers = Object.keys(options.socialProviders || {}).map((key) => {\n    const value = options.socialProviders?.[key];\n    if (value.enabled === false) {\n      return null;\n    }\n    if (!value.clientId) {\n      logger2.warn(\n        `Social provider ${key} is missing clientId or clientSecret`\n      );\n    }\n    return socialProviders[key](\n      value\n      // TODO: fix this\n    );\n  }).filter((x) => x !== null);\n  const generateIdFunc = ({ model, size }) => {\n    if (typeof options?.advanced?.generateId === \"function\") {\n      return options.advanced.generateId({ model, size });\n    }\n    return generateId(size);\n  };\n  const ctx = {\n    appName: options.appName || \"Better Auth\",\n    socialProviders: providers,\n    options,\n    tables,\n    trustedOrigins: getTrustedOrigins(options),\n    baseURL: baseURL || \"\",\n    sessionConfig: {\n      updateAge: options.session?.updateAge !== void 0 ? options.session.updateAge : 24 * 60 * 60,\n      // 24 hours\n      expiresIn: options.session?.expiresIn || 60 * 60 * 24 * 7,\n      // 7 days\n      freshAge: options.session?.freshAge === void 0 ? 60 * 60 * 24 : options.session.freshAge\n    },\n    secret,\n    rateLimit: {\n      ...options.rateLimit,\n      enabled: options.rateLimit?.enabled ?? isProduction,\n      window: options.rateLimit?.window || 10,\n      max: options.rateLimit?.max || 100,\n      storage: options.rateLimit?.storage || (options.secondaryStorage ? \"secondary-storage\" : \"memory\")\n    },\n    authCookies: cookies,\n    logger: logger2,\n    generateId: generateIdFunc,\n    session: null,\n    secondaryStorage: options.secondaryStorage,\n    password: {\n      hash: options.emailAndPassword?.password?.hash || hashPassword,\n      verify: options.emailAndPassword?.password?.verify || verifyPassword,\n      config: {\n        minPasswordLength: options.emailAndPassword?.minPasswordLength || 8,\n        maxPasswordLength: options.emailAndPassword?.maxPasswordLength || 128\n      },\n      checkPassword\n    },\n    setNewSession(session) {\n      this.newSession = session;\n    },\n    newSession: null,\n    adapter,\n    internalAdapter: createInternalAdapter(adapter, {\n      options,\n      hooks: options.databaseHooks ? [options.databaseHooks] : [],\n      generateId: generateIdFunc\n    }),\n    createAuthCookie: createCookieGetter(options)\n  };\n  let { context } = runPluginInit(ctx);\n  return context;\n};\nfunction runPluginInit(ctx) {\n  let options = ctx.options;\n  const plugins = options.plugins || [];\n  let context = ctx;\n  const dbHooks = [];\n  for (const plugin of plugins) {\n    if (plugin.init) {\n      const result = plugin.init(ctx);\n      if (typeof result === \"object\") {\n        if (result.options) {\n          const { databaseHooks, ...restOpts } = result.options;\n          if (databaseHooks) {\n            dbHooks.push(databaseHooks);\n          }\n          options = defu(options, restOpts);\n        }\n        if (result.context) {\n          context = {\n            ...context,\n            ...result.context\n          };\n        }\n      }\n    }\n  }\n  dbHooks.push(options.databaseHooks);\n  context.internalAdapter = createInternalAdapter(ctx.adapter, {\n    options,\n    hooks: dbHooks.filter((u) => u !== void 0),\n    generateId: ctx.generateId\n  });\n  context.options = options;\n  return { context };\n}\nfunction getInternalPlugins(options) {\n  const plugins = [];\n  if (options.advanced?.crossSubDomainCookies?.enabled) ;\n  return plugins;\n}\nfunction getTrustedOrigins(options) {\n  const baseURL = getBaseURL(options.baseURL, options.basePath);\n  if (!baseURL) {\n    return [];\n  }\n  const trustedOrigins = [new URL(baseURL).origin];\n  if (options.trustedOrigins) {\n    trustedOrigins.push(...options.trustedOrigins);\n  }\n  const envTrustedOrigins = env.BETTER_AUTH_TRUSTED_ORIGINS;\n  if (envTrustedOrigins) {\n    trustedOrigins.push(...envTrustedOrigins.split(\",\"));\n  }\n  return trustedOrigins;\n}\n\n// src/auth.ts\nvar betterAuth = (options) => {\n  const authContext = init(options);\n  const { api } = getEndpoints(authContext, options);\n  const errorCodes = options.plugins?.reduce((acc, plugin) => {\n    if (plugin.$ERROR_CODES) {\n      return {\n        ...acc,\n        ...plugin.$ERROR_CODES\n      };\n    }\n    return acc;\n  }, {});\n  return {\n    handler: async (request) => {\n      const ctx = await authContext;\n      const basePath = ctx.options.basePath || \"/api/auth\";\n      const url = new URL(request.url);\n      if (!ctx.options.baseURL) {\n        const baseURL = getBaseURL(void 0, basePath) || `${url.origin}${basePath}`;\n        ctx.options.baseURL = baseURL;\n        ctx.baseURL = baseURL;\n      }\n      ctx.trustedOrigins = [\n        ...options.trustedOrigins || [],\n        ctx.baseURL,\n        url.origin\n      ];\n      const { handler } = router(ctx, options);\n      return handler(request);\n    },\n    api,\n    options,\n    $context: authContext,\n    $Infer: {},\n    $ERROR_CODES: {\n      ...errorCodes,\n      ...BASE_ERROR_CODES\n    }\n  };\n};\n\nexport { betterAuth };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7547, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7578, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-MPR5EWNB.js"],"sourcesContent":["import { createAuthEndpoint, BASE_ERROR_CODES, getSessionFromCtx } from './chunk-FUJTYWXL.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { mergeSchema } from './chunk-72KRA3CK.js';\nimport { generateRandomString } from './chunk-DBPOZRMS.js';\nimport { getDate } from './chunk-FURNA6HY.js';\nimport { z } from 'zod';\nimport { APIError } from 'better-call';\n\nfunction generateOTP(size) {\n  return generateRandomString(size, \"0-9\");\n}\nvar phoneNumber = (options) => {\n  const opts = {\n    expiresIn: options?.expiresIn || 300,\n    otpLength: options?.otpLength || 6,\n    ...options,\n    phoneNumber: \"phoneNumber\",\n    phoneNumberVerified: \"phoneNumberVerified\",\n    code: \"code\",\n    createdAt: \"createdAt\"\n  };\n  const ERROR_CODES = {\n    INVALID_PHONE_NUMBER: \"Invalid phone number\",\n    INVALID_PHONE_NUMBER_OR_PASSWORD: \"Invalid phone number or password\",\n    UNEXPECTED_ERROR: \"Unexpected error\",\n    OTP_NOT_FOUND: \"OTP not found\"\n  };\n  return {\n    id: \"phone-number\",\n    endpoints: {\n      signInPhoneNumber: createAuthEndpoint(\n        \"/sign-in/phone-number\",\n        {\n          method: \"POST\",\n          body: z.object({\n            phoneNumber: z.string({\n              description: \"Phone number to sign in\"\n            }),\n            password: z.string({\n              description: \"Password to use for sign in\"\n            }),\n            rememberMe: z.boolean({\n              description: \"Remember the session\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              summary: \"Sign in with phone number\",\n              description: \"Use this endpoint to sign in with phone number\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          },\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                },\n                400: {\n                  description: \"Invalid phone number or password\"\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const { password, phoneNumber: phoneNumber2 } = ctx.body;\n          if (opts.phoneNumberValidator) {\n            const isValidNumber = await opts.phoneNumberValidator(\n              ctx.body.phoneNumber\n            );\n            if (!isValidNumber) {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: ERROR_CODES.INVALID_PHONE_NUMBER\n              });\n            }\n          }\n          const user = await ctx.context.adapter.findOne({\n            model: \"user\",\n            where: [\n              {\n                field: \"phoneNumber\",\n                value: phoneNumber2\n              }\n            ]\n          });\n          if (!user) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_PHONE_NUMBER_OR_PASSWORD\n            });\n          }\n          const accounts = await ctx.context.internalAdapter.findAccountByUserId(user.id);\n          const credentialAccount = accounts.find(\n            (a) => a.providerId === \"credential\"\n          );\n          if (!credentialAccount) {\n            ctx.context.logger.error(\"Credential account not found\", {\n              phoneNumber: phoneNumber2\n            });\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_PHONE_NUMBER_OR_PASSWORD\n            });\n          }\n          const currentPassword = credentialAccount?.password;\n          if (!currentPassword) {\n            ctx.context.logger.error(\"Password not found\", { phoneNumber: phoneNumber2 });\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.UNEXPECTED_ERROR\n            });\n          }\n          const validPassword = await ctx.context.password.verify({\n            hash: currentPassword,\n            password\n          });\n          if (!validPassword) {\n            ctx.context.logger.error(\"Invalid password\");\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_PHONE_NUMBER_OR_PASSWORD\n            });\n          }\n          const session = await ctx.context.internalAdapter.createSession(\n            user.id,\n            ctx.headers,\n            ctx.body.rememberMe === false\n          );\n          if (!session) {\n            ctx.context.logger.error(\"Failed to create session\");\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION\n            });\n          }\n          await setSessionCookie(\n            ctx,\n            {\n              session,\n              user\n            },\n            ctx.body.rememberMe === false\n          );\n          return ctx.json({\n            token: session.token,\n            user: {\n              id: user.id,\n              email: user.email,\n              emailVerified: user.emailVerified,\n              name: user.name,\n              image: user.image,\n              phoneNumber: user.phoneNumber,\n              phoneNumberVerified: user.phoneNumberVerified,\n              createdAt: user.createdAt,\n              updatedAt: user.updatedAt\n            }\n          });\n        }\n      ),\n      sendPhoneNumberOTP: createAuthEndpoint(\n        \"/phone-number/send-otp\",\n        {\n          method: \"POST\",\n          body: z.object({\n            phoneNumber: z.string({\n              description: \"Phone number to send OTP\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              summary: \"Send OTP to phone number\",\n              description: \"Use this endpoint to send OTP to phone number\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          message: {\n                            type: \"string\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          if (!options?.sendOTP) {\n            ctx.context.logger.warn(\"sendOTP not implemented\");\n            throw new APIError(\"NOT_IMPLEMENTED\", {\n              message: \"sendOTP not implemented\"\n            });\n          }\n          if (opts.phoneNumberValidator) {\n            const isValidNumber = await opts.phoneNumberValidator(\n              ctx.body.phoneNumber\n            );\n            if (!isValidNumber) {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: ERROR_CODES.INVALID_PHONE_NUMBER\n              });\n            }\n          }\n          const code = generateOTP(opts.otpLength);\n          await ctx.context.internalAdapter.createVerificationValue({\n            value: code,\n            identifier: ctx.body.phoneNumber,\n            expiresAt: getDate(opts.expiresIn, \"sec\")\n          });\n          await options.sendOTP(\n            {\n              phoneNumber: ctx.body.phoneNumber,\n              code\n            },\n            ctx.request\n          );\n          return ctx.json(\n            { code },\n            {\n              body: {\n                message: \"Code sent\"\n              }\n            }\n          );\n        }\n      ),\n      verifyPhoneNumber: createAuthEndpoint(\n        \"/phone-number/verify\",\n        {\n          method: \"POST\",\n          body: z.object({\n            /**\n             * Phone number\n             */\n            phoneNumber: z.string({\n              description: \"Phone number to verify\"\n            }),\n            /**\n             * OTP code\n             */\n            code: z.string({\n              description: \"OTP code\"\n            }),\n            /**\n             * Disable session creation after verification\n             * @default false\n             */\n            disableSession: z.boolean({\n              description: \"Disable session creation after verification\"\n            }).optional(),\n            /**\n             * This checks if there is a session already\n             * and updates the phone number with the provided\n             * phone number\n             */\n            updatePhoneNumber: z.boolean({\n              description: \"Check if there is a session and update the phone number\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              summary: \"Verify phone number\",\n              description: \"Use this endpoint to verify phone number\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          },\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                },\n                400: {\n                  description: \"Invalid OTP\"\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const otp = await ctx.context.internalAdapter.findVerificationValue(\n            ctx.body.phoneNumber\n          );\n          if (!otp || otp.expiresAt < /* @__PURE__ */ new Date()) {\n            if (otp && otp.expiresAt < /* @__PURE__ */ new Date()) {\n              await ctx.context.internalAdapter.deleteVerificationValue(otp.id);\n              throw new APIError(\"BAD_REQUEST\", {\n                message: \"OTP expired\"\n              });\n            }\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.OTP_NOT_FOUND\n            });\n          }\n          if (otp.value !== ctx.body.code) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"Invalid OTP\"\n            });\n          }\n          await ctx.context.internalAdapter.deleteVerificationValue(otp.id);\n          if (ctx.body.updatePhoneNumber) {\n            const session = await getSessionFromCtx(ctx);\n            if (!session) {\n              throw new APIError(\"UNAUTHORIZED\", {\n                message: BASE_ERROR_CODES.USER_NOT_FOUND\n              });\n            }\n            let user2 = await ctx.context.internalAdapter.updateUser(\n              session.user.id,\n              {\n                [opts.phoneNumber]: ctx.body.phoneNumber,\n                [opts.phoneNumberVerified]: true\n              }\n            );\n            return ctx.json({\n              status: true,\n              token: session.session.token,\n              user: {\n                id: user2.id,\n                email: user2.email,\n                emailVerified: user2.emailVerified,\n                name: user2.name,\n                image: user2.image,\n                phoneNumber: user2.phoneNumber,\n                phoneNumberVerified: user2.phoneNumberVerified,\n                createdAt: user2.createdAt,\n                updatedAt: user2.updatedAt\n              }\n            });\n          }\n          let user = await ctx.context.adapter.findOne({\n            model: \"user\",\n            where: [\n              {\n                value: ctx.body.phoneNumber,\n                field: opts.phoneNumber\n              }\n            ]\n          });\n          await options?.callbackOnVerification?.(\n            {\n              phoneNumber: ctx.body.phoneNumber,\n              user\n            },\n            ctx.request\n          );\n          if (!user) {\n            if (options?.signUpOnVerification) {\n              user = await ctx.context.internalAdapter.createUser({\n                email: options.signUpOnVerification.getTempEmail(\n                  ctx.body.phoneNumber\n                ),\n                name: options.signUpOnVerification.getTempName ? options.signUpOnVerification.getTempName(\n                  ctx.body.phoneNumber\n                ) : ctx.body.phoneNumber,\n                [opts.phoneNumber]: ctx.body.phoneNumber,\n                [opts.phoneNumberVerified]: true\n              });\n              if (!user) {\n                throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n                  message: BASE_ERROR_CODES.FAILED_TO_CREATE_USER\n                });\n              }\n            } else {\n              return ctx.json(null);\n            }\n          } else {\n            user = await ctx.context.internalAdapter.updateUser(user.id, {\n              [opts.phoneNumberVerified]: true\n            });\n          }\n          if (!user) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: BASE_ERROR_CODES.FAILED_TO_UPDATE_USER\n            });\n          }\n          if (!ctx.body.disableSession) {\n            const session = await ctx.context.internalAdapter.createSession(\n              user.id,\n              ctx.request\n            );\n            if (!session) {\n              throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n                message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION\n              });\n            }\n            await setSessionCookie(ctx, {\n              session,\n              user\n            });\n            return ctx.json({\n              status: true,\n              token: session.token,\n              user: {\n                id: user.id,\n                email: user.email,\n                emailVerified: user.emailVerified,\n                name: user.name,\n                image: user.image,\n                phoneNumber: user.phoneNumber,\n                phoneNumberVerified: user.phoneNumberVerified,\n                createdAt: user.createdAt,\n                updatedAt: user.updatedAt\n              }\n            });\n          }\n          return ctx.json({\n            status: true,\n            token: null,\n            user: {\n              id: user.id,\n              email: user.email,\n              emailVerified: user.emailVerified,\n              name: user.name,\n              image: user.image,\n              phoneNumber: user.phoneNumber,\n              phoneNumberVerified: user.phoneNumberVerified,\n              createdAt: user.createdAt,\n              updatedAt: user.updatedAt\n            }\n          });\n        }\n      )\n    },\n    schema: mergeSchema(schema, options?.schema),\n    $ERROR_CODES: ERROR_CODES\n  };\n};\nvar schema = {\n  user: {\n    fields: {\n      phoneNumber: {\n        type: \"string\",\n        required: false,\n        unique: true,\n        sortable: true,\n        returned: true\n      },\n      phoneNumberVerified: {\n        type: \"boolean\",\n        required: false,\n        returned: true,\n        input: false\n      }\n    }\n  }\n};\n\nexport { phoneNumber };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8011, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8017, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-WMXBA6LX.js"],"sourcesContent":["// src/plugins/two-factor/error-code.ts\nvar TWO_FACTOR_ERROR_CODES = {\n  OTP_NOT_ENABLED: \"OTP not enabled\",\n  OTP_HAS_EXPIRED: \"OTP has expired\",\n  TOTP_NOT_ENABLED: \"TOTP not enabled\",\n  TWO_FACTOR_NOT_ENABLED: \"Two factor isn't enabled\",\n  BACKUP_CODES_NOT_ENABLED: \"Backup codes aren't enabled\",\n  INVALID_BACKUP_CODE: \"Invalid backup code\"\n};\n\nexport { TWO_FACTOR_ERROR_CODES };\n"],"names":[],"mappings":"AAAA,uCAAuC;;;;AACvC,IAAI,yBAAyB;IAC3B,iBAAiB;IACjB,iBAAiB;IACjB,kBAAkB;IAClB,wBAAwB;IACxB,0BAA0B;IAC1B,qBAAqB;AACvB","ignoreList":[0]}},
    {"offset": {"line": 8030, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8036, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-K5MUU6L4.js"],"sourcesContent":["import { TWO_FACTOR_ERROR_CODES } from './chunk-WMXBA6LX.js';\nimport { validatePassword } from './chunk-TOKZL3ZI.js';\nimport { createAuthMiddleware, getSessionFromCtx, createAuthEndpoint, sessionMiddleware, BASE_ERROR_CODES } from './chunk-FUJTYWXL.js';\nimport { setSessionCookie, deleteSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { mergeSchema } from './chunk-72KRA3CK.js';\nimport { generateRandomString, symmetricEncrypt, symmetricDecrypt } from './chunk-DBPOZRMS.js';\nimport { z } from 'zod';\nimport { APIError } from 'better-call';\nimport { createHMAC } from '@better-auth/utils/hmac';\nimport { createOTP } from '@better-auth/utils/otp';\n\n// src/plugins/two-factor/constant.ts\nvar TWO_FACTOR_COOKIE_NAME = \"two_factor\";\nvar TRUST_DEVICE_COOKIE_NAME = \"trust_device\";\nvar verifyTwoFactorMiddleware = createAuthMiddleware(\n  {\n    body: z.object({\n      /**\n       * if true, the device will be trusted\n       * for 30 days. It'll be refreshed on\n       * every sign in request within this time.\n       */\n      trustDevice: z.boolean().optional()\n    })\n  },\n  async (ctx) => {\n    const session = await getSessionFromCtx(ctx);\n    if (!session) {\n      const cookieName = ctx.context.createAuthCookie(TWO_FACTOR_COOKIE_NAME);\n      const userId = await ctx.getSignedCookie(\n        cookieName.name,\n        ctx.context.secret\n      );\n      if (!userId) {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: \"invalid two factor cookie\"\n        });\n      }\n      const user = await ctx.context.internalAdapter.findUserById(\n        userId\n      );\n      if (!user) {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: \"invalid two factor cookie\"\n        });\n      }\n      const session2 = await ctx.context.internalAdapter.createSession(\n        userId,\n        ctx.request\n      );\n      if (!session2) {\n        throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n          message: \"failed to create session\"\n        });\n      }\n      return {\n        valid: async () => {\n          await setSessionCookie(ctx, {\n            session: session2,\n            user\n          });\n          if (ctx.body.trustDevice) {\n            const trustDeviceCookie = ctx.context.createAuthCookie(\n              TRUST_DEVICE_COOKIE_NAME,\n              {\n                maxAge: 30 * 24 * 60 * 60\n                // 30 days, it'll be refreshed on sign in requests\n              }\n            );\n            const token = await createHMAC(\"SHA-256\", \"base64urlnopad\").sign(\n              ctx.context.secret,\n              `${user.id}!${session2.token}`\n            );\n            await ctx.setSignedCookie(\n              trustDeviceCookie.name,\n              `${token}!${session2.token}`,\n              ctx.context.secret,\n              trustDeviceCookie.attributes\n            );\n          }\n          return ctx.json({\n            token: session2.token,\n            user: {\n              id: user.id,\n              email: user.email,\n              emailVerified: user.emailVerified,\n              name: user.name,\n              image: user.image,\n              createdAt: user.createdAt,\n              updatedAt: user.updatedAt\n            }\n          });\n        },\n        invalid: async () => {\n          throw new APIError(\"UNAUTHORIZED\", {\n            message: \"invalid two factor authentication\"\n          });\n        },\n        session: {\n          session: session2,\n          user\n        }\n      };\n    }\n    return {\n      valid: async () => {\n        return ctx.json({\n          token: session.session.token,\n          user: {\n            id: session.user.id,\n            email: session.user.email,\n            emailVerified: session.user.emailVerified,\n            name: session.user.name,\n            image: session.user.image,\n            createdAt: session.user.createdAt,\n            updatedAt: session.user.updatedAt\n          }\n        });\n      },\n      invalid: async () => {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: \"invalid two factor authentication\"\n        });\n      },\n      session\n    };\n  }\n);\nfunction generateBackupCodesFn(options) {\n  return Array.from({ length: 10 }).fill(null).map(() => generateRandomString(10, \"a-z\", \"0-9\", \"A-Z\")).map((code) => `${code.slice(0, 5)}-${code.slice(5)}`);\n}\nasync function generateBackupCodes(secret, options) {\n  const key = secret;\n  const backupCodes = options?.customBackupCodesGenerate ? options.customBackupCodesGenerate() : generateBackupCodesFn();\n  const encCodes = await symmetricEncrypt({\n    data: JSON.stringify(backupCodes),\n    key\n  });\n  return {\n    backupCodes,\n    encryptedBackupCodes: encCodes\n  };\n}\nasync function verifyBackupCode(data, key) {\n  const codes = await getBackupCodes(data.backupCodes, key);\n  if (!codes) {\n    return {\n      status: false,\n      updated: null\n    };\n  }\n  return {\n    status: codes.includes(data.code),\n    updated: codes.filter((code) => code !== data.code)\n  };\n}\nasync function getBackupCodes(backupCodes, key) {\n  const secret = Buffer.from(\n    await symmetricDecrypt({ key, data: backupCodes })\n  ).toString(\"utf-8\");\n  const data = JSON.parse(secret);\n  const result = z.array(z.string()).safeParse(data);\n  if (result.success) {\n    return result.data;\n  }\n  return null;\n}\nvar backupCode2fa = (options) => {\n  const twoFactorTable = \"twoFactor\";\n  return {\n    id: \"backup_code\",\n    endpoints: {\n      verifyBackupCode: createAuthEndpoint(\n        \"/two-factor/verify-backup-code\",\n        {\n          method: \"POST\",\n          body: z.object({\n            code: z.string(),\n            /**\n             * Disable setting the session cookie\n             */\n            disableSession: z.boolean().optional()\n          }),\n          use: [verifyTwoFactorMiddleware]\n        },\n        async (ctx) => {\n          const user = ctx.context.session.user;\n          const twoFactor2 = await ctx.context.adapter.findOne({\n            model: twoFactorTable,\n            where: [\n              {\n                field: \"userId\",\n                value: user.id\n              }\n            ]\n          });\n          if (!twoFactor2) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: TWO_FACTOR_ERROR_CODES.BACKUP_CODES_NOT_ENABLED\n            });\n          }\n          const validate = await verifyBackupCode(\n            {\n              backupCodes: twoFactor2.backupCodes,\n              code: ctx.body.code\n            },\n            ctx.context.secret\n          );\n          if (!validate.status) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: TWO_FACTOR_ERROR_CODES.INVALID_BACKUP_CODE\n            });\n          }\n          const updatedBackupCodes = await symmetricEncrypt({\n            key: ctx.context.secret,\n            data: JSON.stringify(validate.updated)\n          });\n          await ctx.context.adapter.updateMany({\n            model: twoFactorTable,\n            update: {\n              backupCodes: updatedBackupCodes\n            },\n            where: [\n              {\n                field: \"userId\",\n                value: user.id\n              }\n            ]\n          });\n          if (!ctx.body.disableSession) {\n            await setSessionCookie(ctx, {\n              session: ctx.context.session.session,\n              user\n            });\n          }\n          return ctx.json({\n            user,\n            session: ctx.context.session\n          });\n        }\n      ),\n      generateBackupCodes: createAuthEndpoint(\n        \"/two-factor/generate-backup-codes\",\n        {\n          method: \"POST\",\n          body: z.object({\n            password: z.string()\n          }),\n          use: [sessionMiddleware]\n        },\n        async (ctx) => {\n          const user = ctx.context.session.user;\n          if (!user.twoFactorEnabled) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: TWO_FACTOR_ERROR_CODES.TWO_FACTOR_NOT_ENABLED\n            });\n          }\n          await ctx.context.password.checkPassword(user.id, ctx);\n          const backupCodes = await generateBackupCodes(\n            ctx.context.secret,\n            options\n          );\n          await ctx.context.adapter.update({\n            model: twoFactorTable,\n            update: {\n              backupCodes: backupCodes.encryptedBackupCodes\n            },\n            where: [\n              {\n                field: \"userId\",\n                value: ctx.context.session.user.id\n              }\n            ]\n          });\n          return ctx.json({\n            status: true,\n            backupCodes: backupCodes.backupCodes\n          });\n        }\n      ),\n      viewBackupCodes: createAuthEndpoint(\n        \"/two-factor/view-backup-codes\",\n        {\n          method: \"GET\",\n          body: z.object({\n            userId: z.string()\n          }),\n          metadata: {\n            SERVER_ONLY: true\n          }\n        },\n        async (ctx) => {\n          const twoFactor2 = await ctx.context.adapter.findOne({\n            model: twoFactorTable,\n            where: [\n              {\n                field: \"userId\",\n                value: ctx.body.userId\n              }\n            ]\n          });\n          if (!twoFactor2) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"Backup codes aren't enabled\"\n            });\n          }\n          const backupCodes = await getBackupCodes(\n            twoFactor2.backupCodes,\n            ctx.context.secret\n          );\n          if (!backupCodes) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: TWO_FACTOR_ERROR_CODES.BACKUP_CODES_NOT_ENABLED\n            });\n          }\n          return ctx.json({\n            status: true,\n            backupCodes\n          });\n        }\n      )\n    }\n  };\n};\nvar otp2fa = (options) => {\n  const opts = {\n    ...options,\n    digits: options?.digits || 6,\n    period: (options?.period || 3) * 60 * 1e3\n  };\n  const twoFactorTable = \"twoFactor\";\n  const send2FaOTP = createAuthEndpoint(\n    \"/two-factor/send-otp\",\n    {\n      method: \"POST\",\n      use: [verifyTwoFactorMiddleware],\n      metadata: {\n        openapi: {\n          summary: \"Send two factor OTP\",\n          description: \"Send two factor OTP to the user\",\n          responses: {\n            200: {\n              description: \"Successful response\",\n              content: {\n                \"application/json\": {\n                  schema: {\n                    type: \"object\",\n                    properties: {\n                      status: {\n                        type: \"boolean\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    async (ctx) => {\n      if (!options || !options.sendOTP) {\n        ctx.context.logger.error(\n          \"send otp isn't configured. Please configure the send otp function on otp options.\"\n        );\n        throw new APIError(\"BAD_REQUEST\", {\n          message: \"otp isn't configured\"\n        });\n      }\n      const user = ctx.context.session.user;\n      const twoFactor2 = await ctx.context.adapter.findOne({\n        model: twoFactorTable,\n        where: [\n          {\n            field: \"userId\",\n            value: user.id\n          }\n        ]\n      });\n      if (!twoFactor2) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: TWO_FACTOR_ERROR_CODES.OTP_NOT_ENABLED\n        });\n      }\n      const code = generateRandomString(opts.digits, \"0-9\");\n      await ctx.context.internalAdapter.createVerificationValue({\n        value: code,\n        identifier: `2fa-otp-${user.id}`,\n        expiresAt: new Date(Date.now() + opts.period)\n      });\n      await options.sendOTP({ user, otp: code }, ctx.request);\n      return ctx.json({ status: true });\n    }\n  );\n  const verifyOTP = createAuthEndpoint(\n    \"/two-factor/verify-otp\",\n    {\n      method: \"POST\",\n      body: z.object({\n        code: z.string({\n          description: \"The otp code to verify\"\n        })\n      }),\n      use: [verifyTwoFactorMiddleware],\n      metadata: {\n        openapi: {\n          summary: \"Verify two factor OTP\",\n          description: \"Verify two factor OTP\",\n          responses: {\n            200: {\n              description: \"Success\",\n              content: {\n                \"application/json\": {\n                  schema: {\n                    type: \"object\",\n                    properties: {\n                      status: {\n                        type: \"boolean\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    async (ctx) => {\n      const user = ctx.context.session.user;\n      if (!user.twoFactorEnabled) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: \"two factor isn't enabled\"\n        });\n      }\n      const twoFactor2 = await ctx.context.adapter.findOne({\n        model: twoFactorTable,\n        where: [\n          {\n            field: \"userId\",\n            value: user.id\n          }\n        ]\n      });\n      if (!twoFactor2) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: TWO_FACTOR_ERROR_CODES.OTP_NOT_ENABLED\n        });\n      }\n      const toCheckOtp = await ctx.context.internalAdapter.findVerificationValue(\n        `2fa-otp-${user.id}`\n      );\n      if (!toCheckOtp || toCheckOtp.expiresAt < /* @__PURE__ */ new Date()) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: TWO_FACTOR_ERROR_CODES.OTP_HAS_EXPIRED\n        });\n      }\n      if (toCheckOtp.value === ctx.body.code) {\n        return ctx.context.valid();\n      } else {\n        return ctx.context.invalid();\n      }\n    }\n  );\n  return {\n    id: \"otp\",\n    endpoints: {\n      sendTwoFactorOTP: send2FaOTP,\n      verifyTwoFactorOTP: verifyOTP\n    }\n  };\n};\nvar totp2fa = (options) => {\n  const opts = {\n    ...options,\n    digits: options?.digits || 6,\n    period: options?.period || 30\n  };\n  const twoFactorTable = \"twoFactor\";\n  const generateTOTP = createAuthEndpoint(\n    \"/totp/generate\",\n    {\n      method: \"POST\",\n      use: [sessionMiddleware],\n      metadata: {\n        openapi: {\n          summary: \"Generate TOTP code\",\n          description: \"Use this endpoint to generate a TOTP code\",\n          responses: {\n            200: {\n              description: \"Successful response\",\n              content: {\n                \"application/json\": {\n                  schema: {\n                    type: \"object\",\n                    properties: {\n                      code: {\n                        type: \"string\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    async (ctx) => {\n      if (options?.disable) {\n        ctx.context.logger.error(\n          \"totp isn't configured. please pass totp option on two factor plugin to enable totp\"\n        );\n        throw new APIError(\"BAD_REQUEST\", {\n          message: \"totp isn't configured\"\n        });\n      }\n      const user = ctx.context.session.user;\n      const twoFactor2 = await ctx.context.adapter.findOne({\n        model: twoFactorTable,\n        where: [\n          {\n            field: \"userId\",\n            value: user.id\n          }\n        ]\n      });\n      if (!twoFactor2) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: TWO_FACTOR_ERROR_CODES.TOTP_NOT_ENABLED\n        });\n      }\n      const code = await createOTP(twoFactor2.secret, {\n        period: opts.period,\n        digits: opts.digits\n      }).totp();\n      return { code };\n    }\n  );\n  const getTOTPURI = createAuthEndpoint(\n    \"/two-factor/get-totp-uri\",\n    {\n      method: \"POST\",\n      use: [sessionMiddleware],\n      body: z.object({\n        password: z.string({\n          description: \"User password\"\n        })\n      }),\n      metadata: {\n        openapi: {\n          summary: \"Get TOTP URI\",\n          description: \"Use this endpoint to get the TOTP URI\",\n          responses: {\n            200: {\n              description: \"Successful response\",\n              content: {\n                \"application/json\": {\n                  schema: {\n                    type: \"object\",\n                    properties: {\n                      totpURI: {\n                        type: \"string\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    async (ctx) => {\n      if (options?.disable) {\n        ctx.context.logger.error(\n          \"totp isn't configured. please pass totp option on two factor plugin to enable totp\"\n        );\n        throw new APIError(\"BAD_REQUEST\", {\n          message: \"totp isn't configured\"\n        });\n      }\n      const user = ctx.context.session.user;\n      const twoFactor2 = await ctx.context.adapter.findOne({\n        model: twoFactorTable,\n        where: [\n          {\n            field: \"userId\",\n            value: user.id\n          }\n        ]\n      });\n      if (!twoFactor2 || !user.twoFactorEnabled) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: TWO_FACTOR_ERROR_CODES.TOTP_NOT_ENABLED\n        });\n      }\n      const secret = await symmetricDecrypt({\n        key: ctx.context.secret,\n        data: twoFactor2.secret\n      });\n      await ctx.context.password.checkPassword(user.id, ctx);\n      const totpURI = createOTP(secret, {\n        digits: opts.digits,\n        period: opts.period\n      }).url(options?.issuer || ctx.context.appName, user.email);\n      return {\n        totpURI\n      };\n    }\n  );\n  const verifyTOTP = createAuthEndpoint(\n    \"/two-factor/verify-totp\",\n    {\n      method: \"POST\",\n      body: z.object({\n        code: z.string({\n          description: \"The otp code to verify\"\n        })\n      }),\n      use: [verifyTwoFactorMiddleware],\n      metadata: {\n        openapi: {\n          summary: \"Verify two factor TOTP\",\n          description: \"Verify two factor TOTP\",\n          responses: {\n            200: {\n              description: \"Successful response\",\n              content: {\n                \"application/json\": {\n                  schema: {\n                    type: \"object\",\n                    properties: {\n                      status: {\n                        type: \"boolean\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    async (ctx) => {\n      if (options?.disable) {\n        ctx.context.logger.error(\n          \"totp isn't configured. please pass totp option on two factor plugin to enable totp\"\n        );\n        throw new APIError(\"BAD_REQUEST\", {\n          message: \"totp isn't configured\"\n        });\n      }\n      const user = ctx.context.session.user;\n      const twoFactor2 = await ctx.context.adapter.findOne({\n        model: twoFactorTable,\n        where: [\n          {\n            field: \"userId\",\n            value: user.id\n          }\n        ]\n      });\n      if (!twoFactor2) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: TWO_FACTOR_ERROR_CODES.TOTP_NOT_ENABLED\n        });\n      }\n      const decrypted = await symmetricDecrypt({\n        key: ctx.context.secret,\n        data: twoFactor2.secret\n      });\n      const status = await createOTP(decrypted, {\n        period: opts.period,\n        digits: opts.digits\n      }).verify(ctx.body.code);\n      if (!status) {\n        return ctx.context.invalid();\n      }\n      if (!user.twoFactorEnabled) {\n        const updatedUser = await ctx.context.internalAdapter.updateUser(\n          user.id,\n          {\n            twoFactorEnabled: true\n          }\n        );\n        const newSession = await ctx.context.internalAdapter.createSession(\n          user.id,\n          ctx.request,\n          false,\n          ctx.context.session.session\n        ).catch((e) => {\n          throw e;\n        });\n        await ctx.context.internalAdapter.deleteSession(\n          ctx.context.session.session.token\n        );\n        await setSessionCookie(ctx, {\n          session: newSession,\n          user: updatedUser\n        });\n      }\n      return ctx.context.valid();\n    }\n  );\n  return {\n    id: \"totp\",\n    endpoints: {\n      generateTOTP,\n      getTOTPURI,\n      verifyTOTP\n    }\n  };\n};\n\n// src/plugins/two-factor/schema.ts\nvar schema = {\n  user: {\n    fields: {\n      twoFactorEnabled: {\n        type: \"boolean\",\n        required: false,\n        defaultValue: false,\n        input: false\n      }\n    }\n  },\n  twoFactor: {\n    fields: {\n      secret: {\n        type: \"string\",\n        required: true,\n        returned: false\n      },\n      backupCodes: {\n        type: \"string\",\n        required: true,\n        returned: false\n      },\n      userId: {\n        type: \"string\",\n        required: true,\n        returned: false,\n        references: {\n          model: \"user\",\n          field: \"id\"\n        }\n      }\n    }\n  }\n};\nvar twoFactor = (options) => {\n  const opts = {\n    twoFactorTable: \"twoFactor\"\n  };\n  const totp = totp2fa(options?.totpOptions);\n  const backupCode = backupCode2fa(options?.backupCodeOptions);\n  const otp = otp2fa(options?.otpOptions);\n  return {\n    id: \"two-factor\",\n    endpoints: {\n      ...totp.endpoints,\n      ...otp.endpoints,\n      ...backupCode.endpoints,\n      enableTwoFactor: createAuthEndpoint(\n        \"/two-factor/enable\",\n        {\n          method: \"POST\",\n          body: z.object({\n            password: z.string({\n              description: \"User password\"\n            }).min(8)\n          }),\n          use: [sessionMiddleware],\n          metadata: {\n            openapi: {\n              summary: \"Enable two factor authentication\",\n              description: \"Use this endpoint to enable two factor authentication. This will generate a TOTP URI and backup codes. Once the user verifies the TOTP URI, the two factor authentication will be enabled.\",\n              responses: {\n                200: {\n                  description: \"Successful response\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          totpURI: {\n                            type: \"string\",\n                            description: \"TOTP URI\"\n                          },\n                          backupCodes: {\n                            type: \"array\",\n                            items: {\n                              type: \"string\"\n                            },\n                            description: \"Backup codes\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const user = ctx.context.session.user;\n          const { password } = ctx.body;\n          const isPasswordValid = await validatePassword(ctx, {\n            password,\n            userId: user.id\n          });\n          if (!isPasswordValid) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: BASE_ERROR_CODES.INVALID_PASSWORD\n            });\n          }\n          const secret = generateRandomString(32);\n          const encryptedSecret = await symmetricEncrypt({\n            key: ctx.context.secret,\n            data: secret\n          });\n          const backupCodes = await generateBackupCodes(\n            ctx.context.secret,\n            options?.backupCodeOptions\n          );\n          if (options?.skipVerificationOnEnable) {\n            const updatedUser = await ctx.context.internalAdapter.updateUser(\n              user.id,\n              {\n                twoFactorEnabled: true\n              }\n            );\n            const newSession = await ctx.context.internalAdapter.createSession(\n              updatedUser.id,\n              ctx.request,\n              false,\n              ctx.context.session.session\n            );\n            await setSessionCookie(ctx, {\n              session: newSession,\n              user: updatedUser\n            });\n            await ctx.context.internalAdapter.deleteSession(\n              ctx.context.session.session.token\n            );\n          }\n          await ctx.context.adapter.deleteMany({\n            model: opts.twoFactorTable,\n            where: [\n              {\n                field: \"userId\",\n                value: user.id\n              }\n            ]\n          });\n          await ctx.context.adapter.create({\n            model: opts.twoFactorTable,\n            data: {\n              secret: encryptedSecret,\n              backupCodes: backupCodes.encryptedBackupCodes,\n              userId: user.id\n            }\n          });\n          const totpURI = createOTP(secret, {\n            digits: options?.totpOptions?.digits || 6,\n            period: options?.totpOptions?.period\n          }).url(options?.issuer || ctx.context.appName, user.email);\n          return ctx.json({ totpURI, backupCodes: backupCodes.backupCodes });\n        }\n      ),\n      disableTwoFactor: createAuthEndpoint(\n        \"/two-factor/disable\",\n        {\n          method: \"POST\",\n          body: z.object({\n            password: z.string({\n              description: \"User password\"\n            }).min(8)\n          }),\n          use: [sessionMiddleware],\n          metadata: {\n            openapi: {\n              summary: \"Disable two factor authentication\",\n              description: \"Use this endpoint to disable two factor authentication.\",\n              responses: {\n                200: {\n                  description: \"Successful response\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          status: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const user = ctx.context.session.user;\n          const { password } = ctx.body;\n          const isPasswordValid = await validatePassword(ctx, {\n            password,\n            userId: user.id\n          });\n          if (!isPasswordValid) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"Invalid password\"\n            });\n          }\n          const updatedUser = await ctx.context.internalAdapter.updateUser(\n            user.id,\n            {\n              twoFactorEnabled: false\n            }\n          );\n          await ctx.context.adapter.delete({\n            model: opts.twoFactorTable,\n            where: [\n              {\n                field: \"userId\",\n                value: updatedUser.id\n              }\n            ]\n          });\n          const newSession = await ctx.context.internalAdapter.createSession(\n            updatedUser.id,\n            ctx.request,\n            false,\n            ctx.context.session.session\n          );\n          await setSessionCookie(ctx, {\n            session: newSession,\n            user: updatedUser\n          });\n          await ctx.context.internalAdapter.deleteSession(\n            ctx.context.session.session.token\n          );\n          return ctx.json({ status: true });\n        }\n      )\n    },\n    options,\n    hooks: {\n      after: [\n        {\n          matcher(context) {\n            return context.path === \"/sign-in/email\" || context.path === \"/sign-in/username\" || context.path === \"/sign-in/phone-number\";\n          },\n          handler: createAuthMiddleware(async (ctx) => {\n            const data = ctx.context.newSession;\n            if (!data) {\n              return;\n            }\n            if (!data?.user.twoFactorEnabled) {\n              return;\n            }\n            const trustDeviceCookieName = ctx.context.createAuthCookie(\n              TRUST_DEVICE_COOKIE_NAME\n            );\n            const trustDeviceCookie = await ctx.getSignedCookie(\n              trustDeviceCookieName.name,\n              ctx.context.secret\n            );\n            if (trustDeviceCookie) {\n              const [token, sessionToken] = trustDeviceCookie.split(\"!\");\n              const expectedToken = await createHMAC(\n                \"SHA-256\",\n                \"base64urlnopad\"\n              ).sign(ctx.context.secret, `${data.user.id}!${sessionToken}`);\n              if (token === expectedToken) {\n                const newToken = await createHMAC(\n                  \"SHA-256\",\n                  \"base64urlnopad\"\n                ).sign(ctx.context.secret, `${data.user.id}!${sessionToken}`);\n                await ctx.setSignedCookie(\n                  trustDeviceCookieName.name,\n                  `${newToken}!${data.session.token}`,\n                  ctx.context.secret,\n                  trustDeviceCookieName.attributes\n                );\n                return;\n              }\n            }\n            deleteSessionCookie(ctx);\n            await ctx.context.internalAdapter.deleteSession(data.session.token);\n            const twoFactorCookie = ctx.context.createAuthCookie(\n              TWO_FACTOR_COOKIE_NAME,\n              {\n                maxAge: 60 * 10\n                // 10 minutes\n              }\n            );\n            await ctx.setSignedCookie(\n              twoFactorCookie.name,\n              data.user.id,\n              ctx.context.secret,\n              twoFactorCookie.attributes\n            );\n            return ctx.json({\n              twoFactorRedirect: true\n            });\n          })\n        }\n      ]\n    },\n    schema: mergeSchema(schema, options?.schema),\n    rateLimit: [\n      {\n        pathMatcher(path) {\n          return path.startsWith(\"/two-factor/\");\n        },\n        window: 10,\n        max: 3\n      }\n    ]\n  };\n};\n\nexport { twoFactor };\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAPA;AAIA;;;;;;;;;;;AAKA,qCAAqC;AACrC,IAAI,yBAAyB;AAC7B,IAAI,2BAA2B;AAC/B,IAAI,4BAA4B,CAAA,GAAA,6KAAA,CAAA,uBAAoB,AAAD,EACjD;IACE,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb;;;;OAIC,GACD,aAAa,sIAAA,CAAA,IAAC,CAAC,OAAO,GAAG,QAAQ;IACnC;AACF,GACA,OAAO;IACL,MAAM,UAAU,MAAM,CAAA,GAAA,6KAAA,CAAA,oBAAiB,AAAD,EAAE;IACxC,IAAI,CAAC,SAAS;QACZ,MAAM,aAAa,IAAI,OAAO,CAAC,gBAAgB,CAAC;QAChD,MAAM,SAAS,MAAM,IAAI,eAAe,CACtC,WAAW,IAAI,EACf,IAAI,OAAO,CAAC,MAAM;QAEpB,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS;YACX;QACF;QACA,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CACzD;QAEF,IAAI,CAAC,MAAM;YACT,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS;YACX;QACF;QACA,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC9D,QACA,IAAI,OAAO;QAEb,IAAI,CAAC,UAAU;YACb,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,yBAAyB;gBAC1C,SAAS;YACX;QACF;QACA,OAAO;YACL,OAAO;gBACL,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;oBAC1B,SAAS;oBACT;gBACF;gBACA,IAAI,IAAI,IAAI,CAAC,WAAW,EAAE;oBACxB,MAAM,oBAAoB,IAAI,OAAO,CAAC,gBAAgB,CACpD,0BACA;wBACE,QAAQ,KAAK,KAAK,KAAK;oBAEzB;oBAEF,MAAM,QAAQ,MAAM,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EAAE,WAAW,kBAAkB,IAAI,CAC9D,IAAI,OAAO,CAAC,MAAM,EAClB,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,SAAS,KAAK,EAAE;oBAEhC,MAAM,IAAI,eAAe,CACvB,kBAAkB,IAAI,EACtB,GAAG,MAAM,CAAC,EAAE,SAAS,KAAK,EAAE,EAC5B,IAAI,OAAO,CAAC,MAAM,EAClB,kBAAkB,UAAU;gBAEhC;gBACA,OAAO,IAAI,IAAI,CAAC;oBACd,OAAO,SAAS,KAAK;oBACrB,MAAM;wBACJ,IAAI,KAAK,EAAE;wBACX,OAAO,KAAK,KAAK;wBACjB,eAAe,KAAK,aAAa;wBACjC,MAAM,KAAK,IAAI;wBACf,OAAO,KAAK,KAAK;wBACjB,WAAW,KAAK,SAAS;wBACzB,WAAW,KAAK,SAAS;oBAC3B;gBACF;YACF;YACA,SAAS;gBACP,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;oBACjC,SAAS;gBACX;YACF;YACA,SAAS;gBACP,SAAS;gBACT;YACF;QACF;IACF;IACA,OAAO;QACL,OAAO;YACL,OAAO,IAAI,IAAI,CAAC;gBACd,OAAO,QAAQ,OAAO,CAAC,KAAK;gBAC5B,MAAM;oBACJ,IAAI,QAAQ,IAAI,CAAC,EAAE;oBACnB,OAAO,QAAQ,IAAI,CAAC,KAAK;oBACzB,eAAe,QAAQ,IAAI,CAAC,aAAa;oBACzC,MAAM,QAAQ,IAAI,CAAC,IAAI;oBACvB,OAAO,QAAQ,IAAI,CAAC,KAAK;oBACzB,WAAW,QAAQ,IAAI,CAAC,SAAS;oBACjC,WAAW,QAAQ,IAAI,CAAC,SAAS;gBACnC;YACF;QACF;QACA,SAAS;YACP,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;gBACjC,SAAS;YACX;QACF;QACA;IACF;AACF;AAEF,SAAS,sBAAsB,OAAO;IACpC,OAAO,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAG,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,IAAM,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE,IAAI,OAAO,OAAO,QAAQ,GAAG,CAAC,CAAC,OAAS,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,KAAK,KAAK,CAAC,IAAI;AAC5J;AACA,eAAe,oBAAoB,MAAM,EAAE,OAAO;IAChD,MAAM,MAAM;IACZ,MAAM,cAAc,SAAS,4BAA4B,QAAQ,yBAAyB,KAAK;IAC/F,MAAM,WAAW,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;QACtC,MAAM,KAAK,SAAS,CAAC;QACrB;IACF;IACA,OAAO;QACL;QACA,sBAAsB;IACxB;AACF;AACA,eAAe,iBAAiB,IAAI,EAAE,GAAG;IACvC,MAAM,QAAQ,MAAM,eAAe,KAAK,WAAW,EAAE;IACrD,IAAI,CAAC,OAAO;QACV,OAAO;YACL,QAAQ;YACR,SAAS;QACX;IACF;IACA,OAAO;QACL,QAAQ,MAAM,QAAQ,CAAC,KAAK,IAAI;QAChC,SAAS,MAAM,MAAM,CAAC,CAAC,OAAS,SAAS,KAAK,IAAI;IACpD;AACF;AACA,eAAe,eAAe,WAAW,EAAE,GAAG;IAC5C,MAAM,SAAS,OAAO,IAAI,CACxB,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;QAAE;QAAK,MAAM;IAAY,IAChD,QAAQ,CAAC;IACX,MAAM,OAAO,KAAK,KAAK,CAAC;IACxB,MAAM,SAAS,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,SAAS,CAAC;IAC7C,IAAI,OAAO,OAAO,EAAE;QAClB,OAAO,OAAO,IAAI;IACpB;IACA,OAAO;AACT;AACA,IAAI,gBAAgB,CAAC;IACnB,MAAM,iBAAiB;IACvB,OAAO;QACL,IAAI;QACJ,WAAW;YACT,kBAAkB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACjC,kCACA;gBACE,QAAQ;gBACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;oBACd;;aAEC,GACD,gBAAgB,sIAAA,CAAA,IAAC,CAAC,OAAO,GAAG,QAAQ;gBACtC;gBACA,KAAK;oBAAC;iBAA0B;YAClC,GACA,OAAO;gBACL,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;gBACrC,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;oBACnD,OAAO;oBACP,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,KAAK,EAAE;wBAChB;qBACD;gBACH;gBACA,IAAI,CAAC,YAAY;oBACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,wBAAwB;oBAC1D;gBACF;gBACA,MAAM,WAAW,MAAM,iBACrB;oBACE,aAAa,WAAW,WAAW;oBACnC,MAAM,IAAI,IAAI,CAAC,IAAI;gBACrB,GACA,IAAI,OAAO,CAAC,MAAM;gBAEpB,IAAI,CAAC,SAAS,MAAM,EAAE;oBACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;wBACjC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,mBAAmB;oBACrD;gBACF;gBACA,MAAM,qBAAqB,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;oBAChD,KAAK,IAAI,OAAO,CAAC,MAAM;oBACvB,MAAM,KAAK,SAAS,CAAC,SAAS,OAAO;gBACvC;gBACA,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;oBACnC,OAAO;oBACP,QAAQ;wBACN,aAAa;oBACf;oBACA,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,KAAK,EAAE;wBAChB;qBACD;gBACH;gBACA,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,EAAE;oBAC5B,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;wBAC1B,SAAS,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO;wBACpC;oBACF;gBACF;gBACA,OAAO,IAAI,IAAI,CAAC;oBACd;oBACA,SAAS,IAAI,OAAO,CAAC,OAAO;gBAC9B;YACF;YAEF,qBAAqB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACpC,qCACA;gBACE,QAAQ;gBACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACb,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;gBACpB;gBACA,KAAK;oBAAC,6KAAA,CAAA,oBAAiB;iBAAC;YAC1B,GACA,OAAO;gBACL,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;gBACrC,IAAI,CAAC,KAAK,gBAAgB,EAAE;oBAC1B,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,sBAAsB;oBACxD;gBACF;gBACA,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,EAAE;gBAClD,MAAM,cAAc,MAAM,oBACxB,IAAI,OAAO,CAAC,MAAM,EAClB;gBAEF,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;oBAC/B,OAAO;oBACP,QAAQ;wBACN,aAAa,YAAY,oBAAoB;oBAC/C;oBACA,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;wBACpC;qBACD;gBACH;gBACA,OAAO,IAAI,IAAI,CAAC;oBACd,QAAQ;oBACR,aAAa,YAAY,WAAW;gBACtC;YACF;YAEF,iBAAiB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAChC,iCACA;gBACE,QAAQ;gBACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACb,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;gBAClB;gBACA,UAAU;oBACR,aAAa;gBACf;YACF,GACA,OAAO;gBACL,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;oBACnD,OAAO;oBACP,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,IAAI,IAAI,CAAC,MAAM;wBACxB;qBACD;gBACH;gBACA,IAAI,CAAC,YAAY;oBACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS;oBACX;gBACF;gBACA,MAAM,cAAc,MAAM,eACxB,WAAW,WAAW,EACtB,IAAI,OAAO,CAAC,MAAM;gBAEpB,IAAI,CAAC,aAAa;oBAChB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,wBAAwB;oBAC1D;gBACF;gBACA,OAAO,IAAI,IAAI,CAAC;oBACd,QAAQ;oBACR;gBACF;YACF;QAEJ;IACF;AACF;AACA,IAAI,SAAS,CAAC;IACZ,MAAM,OAAO;QACX,GAAG,OAAO;QACV,QAAQ,SAAS,UAAU;QAC3B,QAAQ,CAAC,SAAS,UAAU,CAAC,IAAI,KAAK;IACxC;IACA,MAAM,iBAAiB;IACvB,MAAM,aAAa,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAClC,wBACA;QACE,QAAQ;QACR,KAAK;YAAC;SAA0B;QAChC,UAAU;YACR,SAAS;gBACP,SAAS;gBACT,aAAa;gBACb,WAAW;oBACT,KAAK;wBACH,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,QAAQ;4CACN,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI,CAAC,WAAW,CAAC,QAAQ,OAAO,EAAE;YAChC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;YAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;QACrC,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;YACnD,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,KAAK,EAAE;gBAChB;aACD;QACH;QACA,IAAI,CAAC,YAAY;YACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,eAAe;YACjD;QACF;QACA,MAAM,OAAO,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE,KAAK,MAAM,EAAE;QAC/C,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC;YACxD,OAAO;YACP,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;YAChC,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,MAAM;QAC9C;QACA,MAAM,QAAQ,OAAO,CAAC;YAAE;YAAM,KAAK;QAAK,GAAG,IAAI,OAAO;QACtD,OAAO,IAAI,IAAI,CAAC;YAAE,QAAQ;QAAK;IACjC;IAEF,MAAM,YAAY,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACjC,0BACA;QACE,QAAQ;QACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACb,aAAa;YACf;QACF;QACA,KAAK;YAAC;SAA0B;QAChC,UAAU;YACR,SAAS;gBACP,SAAS;gBACT,aAAa;gBACb,WAAW;oBACT,KAAK;wBACH,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,QAAQ;4CACN,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;QACrC,IAAI,CAAC,KAAK,gBAAgB,EAAE;YAC1B,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;YACnD,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,KAAK,EAAE;gBAChB;aACD;QACH;QACA,IAAI,CAAC,YAAY;YACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,eAAe;YACjD;QACF;QACA,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CACxE,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;QAEtB,IAAI,CAAC,cAAc,WAAW,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ;YACpE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,eAAe;YACjD;QACF;QACA,IAAI,WAAW,KAAK,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE;YACtC,OAAO,IAAI,OAAO,CAAC,KAAK;QAC1B,OAAO;YACL,OAAO,IAAI,OAAO,CAAC,OAAO;QAC5B;IACF;IAEF,OAAO;QACL,IAAI;QACJ,WAAW;YACT,kBAAkB;YAClB,oBAAoB;QACtB;IACF;AACF;AACA,IAAI,UAAU,CAAC;IACb,MAAM,OAAO;QACX,GAAG,OAAO;QACV,QAAQ,SAAS,UAAU;QAC3B,QAAQ,SAAS,UAAU;IAC7B;IACA,MAAM,iBAAiB;IACvB,MAAM,eAAe,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACpC,kBACA;QACE,QAAQ;QACR,KAAK;YAAC,6KAAA,CAAA,oBAAiB;SAAC;QACxB,UAAU;YACR,SAAS;gBACP,SAAS;gBACT,aAAa;gBACb,WAAW;oBACT,KAAK;wBACH,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,MAAM;4CACJ,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI,SAAS,SAAS;YACpB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;YAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;QACrC,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;YACnD,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,KAAK,EAAE;gBAChB;aACD;QACH;QACA,IAAI,CAAC,YAAY;YACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,gBAAgB;YAClD;QACF;QACA,MAAM,OAAO,MAAM,CAAA,GAAA,2JAAA,CAAA,YAAS,AAAD,EAAE,WAAW,MAAM,EAAE;YAC9C,QAAQ,KAAK,MAAM;YACnB,QAAQ,KAAK,MAAM;QACrB,GAAG,IAAI;QACP,OAAO;YAAE;QAAK;IAChB;IAEF,MAAM,aAAa,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAClC,4BACA;QACE,QAAQ;QACR,KAAK;YAAC,6KAAA,CAAA,oBAAiB;SAAC;QACxB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACjB,aAAa;YACf;QACF;QACA,UAAU;YACR,SAAS;gBACP,SAAS;gBACT,aAAa;gBACb,WAAW;oBACT,KAAK;wBACH,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,SAAS;4CACP,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI,SAAS,SAAS;YACpB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;YAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;QACrC,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;YACnD,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,KAAK,EAAE;gBAChB;aACD;QACH;QACA,IAAI,CAAC,cAAc,CAAC,KAAK,gBAAgB,EAAE;YACzC,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,gBAAgB;YAClD;QACF;QACA,MAAM,SAAS,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;YACpC,KAAK,IAAI,OAAO,CAAC,MAAM;YACvB,MAAM,WAAW,MAAM;QACzB;QACA,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,EAAE;QAClD,MAAM,UAAU,CAAA,GAAA,2JAAA,CAAA,YAAS,AAAD,EAAE,QAAQ;YAChC,QAAQ,KAAK,MAAM;YACnB,QAAQ,KAAK,MAAM;QACrB,GAAG,GAAG,CAAC,SAAS,UAAU,IAAI,OAAO,CAAC,OAAO,EAAE,KAAK,KAAK;QACzD,OAAO;YACL;QACF;IACF;IAEF,MAAM,aAAa,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAClC,2BACA;QACE,QAAQ;QACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACb,aAAa;YACf;QACF;QACA,KAAK;YAAC;SAA0B;QAChC,UAAU;YACR,SAAS;gBACP,SAAS;gBACT,aAAa;gBACb,WAAW;oBACT,KAAK;wBACH,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,QAAQ;4CACN,MAAM;wCACR;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI,SAAS,SAAS;YACpB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB;YAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;QACrC,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;YACnD,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,KAAK,EAAE;gBAChB;aACD;QACH;QACA,IAAI,CAAC,YAAY;YACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6JAAA,CAAA,yBAAsB,CAAC,gBAAgB;YAClD;QACF;QACA,MAAM,YAAY,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;YACvC,KAAK,IAAI,OAAO,CAAC,MAAM;YACvB,MAAM,WAAW,MAAM;QACzB;QACA,MAAM,SAAS,MAAM,CAAA,GAAA,2JAAA,CAAA,YAAS,AAAD,EAAE,WAAW;YACxC,QAAQ,KAAK,MAAM;YACnB,QAAQ,KAAK,MAAM;QACrB,GAAG,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI;QACvB,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,OAAO,CAAC,OAAO;QAC5B;QACA,IAAI,CAAC,KAAK,gBAAgB,EAAE;YAC1B,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAC9D,KAAK,EAAE,EACP;gBACE,kBAAkB;YACpB;YAEF,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAChE,KAAK,EAAE,EACP,IAAI,OAAO,EACX,OACA,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAC3B,KAAK,CAAC,CAAC;gBACP,MAAM;YACR;YACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7C,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK;YAEnC,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;gBAC1B,SAAS;gBACT,MAAM;YACR;QACF;QACA,OAAO,IAAI,OAAO,CAAC,KAAK;IAC1B;IAEF,OAAO;QACL,IAAI;QACJ,WAAW;YACT;YACA;YACA;QACF;IACF;AACF;AAEA,mCAAmC;AACnC,IAAI,SAAS;IACX,MAAM;QACJ,QAAQ;YACN,kBAAkB;gBAChB,MAAM;gBACN,UAAU;gBACV,cAAc;gBACd,OAAO;YACT;QACF;IACF;IACA,WAAW;QACT,QAAQ;YACN,QAAQ;gBACN,MAAM;gBACN,UAAU;gBACV,UAAU;YACZ;YACA,aAAa;gBACX,MAAM;gBACN,UAAU;gBACV,UAAU;YACZ;YACA,QAAQ;gBACN,MAAM;gBACN,UAAU;gBACV,UAAU;gBACV,YAAY;oBACV,OAAO;oBACP,OAAO;gBACT;YACF;QACF;IACF;AACF;AACA,IAAI,YAAY,CAAC;IACf,MAAM,OAAO;QACX,gBAAgB;IAClB;IACA,MAAM,OAAO,QAAQ,SAAS;IAC9B,MAAM,aAAa,cAAc,SAAS;IAC1C,MAAM,MAAM,OAAO,SAAS;IAC5B,OAAO;QACL,IAAI;QACJ,WAAW;YACT,GAAG,KAAK,SAAS;YACjB,GAAG,IAAI,SAAS;YAChB,GAAG,WAAW,SAAS;YACvB,iBAAiB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAChC,sBACA;gBACE,QAAQ;gBACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACb,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;wBACjB,aAAa;oBACf,GAAG,GAAG,CAAC;gBACT;gBACA,KAAK;oBAAC,6KAAA,CAAA,oBAAiB;iBAAC;gBACxB,UAAU;oBACR,SAAS;wBACP,SAAS;wBACT,aAAa;wBACb,WAAW;4BACT,KAAK;gCACH,aAAa;gCACb,SAAS;oCACP,oBAAoB;wCAClB,QAAQ;4CACN,MAAM;4CACN,YAAY;gDACV,SAAS;oDACP,MAAM;oDACN,aAAa;gDACf;gDACA,aAAa;oDACX,MAAM;oDACN,OAAO;wDACL,MAAM;oDACR;oDACA,aAAa;gDACf;4CACF;wCACF;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF,GACA,OAAO;gBACL,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;gBACrC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;gBAC7B,MAAM,kBAAkB,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;oBAClD;oBACA,QAAQ,KAAK,EAAE;gBACjB;gBACA,IAAI,CAAC,iBAAiB;oBACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS,6KAAA,CAAA,mBAAgB,CAAC,gBAAgB;oBAC5C;gBACF;gBACA,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE;gBACpC,MAAM,kBAAkB,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE;oBAC7C,KAAK,IAAI,OAAO,CAAC,MAAM;oBACvB,MAAM;gBACR;gBACA,MAAM,cAAc,MAAM,oBACxB,IAAI,OAAO,CAAC,MAAM,EAClB,SAAS;gBAEX,IAAI,SAAS,0BAA0B;oBACrC,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAC9D,KAAK,EAAE,EACP;wBACE,kBAAkB;oBACpB;oBAEF,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAChE,YAAY,EAAE,EACd,IAAI,OAAO,EACX,OACA,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO;oBAE7B,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;wBAC1B,SAAS;wBACT,MAAM;oBACR;oBACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7C,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK;gBAErC;gBACA,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;oBACnC,OAAO,KAAK,cAAc;oBAC1B,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,KAAK,EAAE;wBAChB;qBACD;gBACH;gBACA,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;oBAC/B,OAAO,KAAK,cAAc;oBAC1B,MAAM;wBACJ,QAAQ;wBACR,aAAa,YAAY,oBAAoB;wBAC7C,QAAQ,KAAK,EAAE;oBACjB;gBACF;gBACA,MAAM,UAAU,CAAA,GAAA,2JAAA,CAAA,YAAS,AAAD,EAAE,QAAQ;oBAChC,QAAQ,SAAS,aAAa,UAAU;oBACxC,QAAQ,SAAS,aAAa;gBAChC,GAAG,GAAG,CAAC,SAAS,UAAU,IAAI,OAAO,CAAC,OAAO,EAAE,KAAK,KAAK;gBACzD,OAAO,IAAI,IAAI,CAAC;oBAAE;oBAAS,aAAa,YAAY,WAAW;gBAAC;YAClE;YAEF,kBAAkB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACjC,uBACA;gBACE,QAAQ;gBACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACb,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;wBACjB,aAAa;oBACf,GAAG,GAAG,CAAC;gBACT;gBACA,KAAK;oBAAC,6KAAA,CAAA,oBAAiB;iBAAC;gBACxB,UAAU;oBACR,SAAS;wBACP,SAAS;wBACT,aAAa;wBACb,WAAW;4BACT,KAAK;gCACH,aAAa;gCACb,SAAS;oCACP,oBAAoB;wCAClB,QAAQ;4CACN,MAAM;4CACN,YAAY;gDACV,QAAQ;oDACN,MAAM;gDACR;4CACF;wCACF;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF,GACA,OAAO;gBACL,MAAM,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;gBACrC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;gBAC7B,MAAM,kBAAkB,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;oBAClD;oBACA,QAAQ,KAAK,EAAE;gBACjB;gBACA,IAAI,CAAC,iBAAiB;oBACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS;oBACX;gBACF;gBACA,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAC9D,KAAK,EAAE,EACP;oBACE,kBAAkB;gBACpB;gBAEF,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;oBAC/B,OAAO,KAAK,cAAc;oBAC1B,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,YAAY,EAAE;wBACvB;qBACD;gBACH;gBACA,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAChE,YAAY,EAAE,EACd,IAAI,OAAO,EACX,OACA,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO;gBAE7B,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;oBAC1B,SAAS;oBACT,MAAM;gBACR;gBACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAC7C,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK;gBAEnC,OAAO,IAAI,IAAI,CAAC;oBAAE,QAAQ;gBAAK;YACjC;QAEJ;QACA;QACA,OAAO;YACL,OAAO;gBACL;oBACE,SAAQ,OAAO;wBACb,OAAO,QAAQ,IAAI,KAAK,oBAAoB,QAAQ,IAAI,KAAK,uBAAuB,QAAQ,IAAI,KAAK;oBACvG;oBACA,SAAS,CAAA,GAAA,6KAAA,CAAA,uBAAoB,AAAD,EAAE,OAAO;wBACnC,MAAM,OAAO,IAAI,OAAO,CAAC,UAAU;wBACnC,IAAI,CAAC,MAAM;4BACT;wBACF;wBACA,IAAI,CAAC,MAAM,KAAK,kBAAkB;4BAChC;wBACF;wBACA,MAAM,wBAAwB,IAAI,OAAO,CAAC,gBAAgB,CACxD;wBAEF,MAAM,oBAAoB,MAAM,IAAI,eAAe,CACjD,sBAAsB,IAAI,EAC1B,IAAI,OAAO,CAAC,MAAM;wBAEpB,IAAI,mBAAmB;4BACrB,MAAM,CAAC,OAAO,aAAa,GAAG,kBAAkB,KAAK,CAAC;4BACtD,MAAM,gBAAgB,MAAM,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EACnC,WACA,kBACA,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,EAAE,GAAG,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,cAAc;4BAC5D,IAAI,UAAU,eAAe;gCAC3B,MAAM,WAAW,MAAM,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EAC9B,WACA,kBACA,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,EAAE,GAAG,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,cAAc;gCAC5D,MAAM,IAAI,eAAe,CACvB,sBAAsB,IAAI,EAC1B,GAAG,SAAS,CAAC,EAAE,KAAK,OAAO,CAAC,KAAK,EAAE,EACnC,IAAI,OAAO,CAAC,MAAM,EAClB,sBAAsB,UAAU;gCAElC;4BACF;wBACF;wBACA,CAAA,GAAA,6JAAA,CAAA,sBAAmB,AAAD,EAAE;wBACpB,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,OAAO,CAAC,KAAK;wBAClE,MAAM,kBAAkB,IAAI,OAAO,CAAC,gBAAgB,CAClD,wBACA;4BACE,QAAQ,KAAK;wBAEf;wBAEF,MAAM,IAAI,eAAe,CACvB,gBAAgB,IAAI,EACpB,KAAK,IAAI,CAAC,EAAE,EACZ,IAAI,OAAO,CAAC,MAAM,EAClB,gBAAgB,UAAU;wBAE5B,OAAO,IAAI,IAAI,CAAC;4BACd,mBAAmB;wBACrB;oBACF;gBACF;aACD;QACH;QACA,QAAQ,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD,EAAE,QAAQ,SAAS;QACrC,WAAW;YACT;gBACE,aAAY,IAAI;oBACd,OAAO,KAAK,UAAU,CAAC;gBACzB;gBACA,QAAQ;gBACR,KAAK;YACP;SACD;IACH;AACF","ignoreList":[0]}},
    {"offset": {"line": 8967, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8973, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-4FIFM3LN.js"],"sourcesContent":["import { TWO_FACTOR_ERROR_CODES } from './chunk-WMXBA6LX.js';\nimport { createAuthEndpoint, sendVerificationEmailFn, BASE_ERROR_CODES } from './chunk-FUJTYWXL.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { mergeSchema } from './chunk-72KRA3CK.js';\nimport { z } from 'zod';\nimport { APIError } from 'better-call';\n\n// src/plugins/username/schema.ts\nvar schema = {\n  user: {\n    fields: {\n      username: {\n        type: \"string\",\n        required: false,\n        sortable: true,\n        unique: true,\n        returned: true,\n        transform: {\n          input(value) {\n            return value?.toString().toLowerCase();\n          }\n        }\n      }\n    }\n  }\n};\n\n// src/plugins/username/index.ts\nvar username = (options) => {\n  const ERROR_CODES = {\n    INVALID_USERNAME_OR_PASSWORD: \"invalid username or password\",\n    EMAIL_NOT_VERIFIED: \"email not verified\",\n    UNEXPECTED_ERROR: \"unexpected error\",\n    USERNAME_IS_ALREADY_TAKEN: \"username is already taken. please try another.\"\n  };\n  return {\n    id: \"username\",\n    endpoints: {\n      signInUsername: createAuthEndpoint(\n        \"/sign-in/username\",\n        {\n          method: \"POST\",\n          body: z.object({\n            username: z.string({\n              description: \"The username of the user\"\n            }),\n            password: z.string({\n              description: \"The password of the user\"\n            }),\n            rememberMe: z.boolean({\n              description: \"Remember the user session\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              summary: \"Sign in with username\",\n              description: \"Sign in with username\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          },\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const user = await ctx.context.adapter.findOne({\n            model: \"user\",\n            where: [\n              {\n                field: \"username\",\n                value: ctx.body.username.toLowerCase()\n              }\n            ]\n          });\n          if (!user) {\n            await ctx.context.password.hash(ctx.body.password);\n            ctx.context.logger.error(\"User not found\", { username });\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_USERNAME_OR_PASSWORD\n            });\n          }\n          if (!user.emailVerified && ctx.context.options.emailAndPassword?.requireEmailVerification) {\n            await sendVerificationEmailFn(ctx, user);\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_USERNAME_OR_PASSWORD\n            });\n          }\n          const account = await ctx.context.adapter.findOne({\n            model: \"account\",\n            where: [\n              {\n                field: \"userId\",\n                value: user.id\n              },\n              {\n                field: \"providerId\",\n                value: \"credential\"\n              }\n            ]\n          });\n          if (!account) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_USERNAME_OR_PASSWORD\n            });\n          }\n          const currentPassword = account?.password;\n          if (!currentPassword) {\n            ctx.context.logger.error(\"Password not found\", { username });\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_USERNAME_OR_PASSWORD\n            });\n          }\n          const validPassword = await ctx.context.password.verify({\n            hash: currentPassword,\n            password: ctx.body.password\n          });\n          if (!validPassword) {\n            ctx.context.logger.error(\"Invalid password\");\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_USERNAME_OR_PASSWORD\n            });\n          }\n          const session = await ctx.context.internalAdapter.createSession(\n            user.id,\n            ctx.request,\n            ctx.body.rememberMe === false\n          );\n          if (!session) {\n            return ctx.json(null, {\n              status: 500,\n              body: {\n                message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION,\n                status: 500\n              }\n            });\n          }\n          await setSessionCookie(\n            ctx,\n            { session, user },\n            ctx.body.rememberMe === false\n          );\n          return ctx.json({\n            token: session.token,\n            user: {\n              id: user.id,\n              email: user.email,\n              emailVerified: user.emailVerified,\n              name: user.name,\n              image: user.image,\n              createdAt: user.createdAt,\n              updatedAt: user.updatedAt\n            }\n          });\n        }\n      )\n    },\n    schema: mergeSchema(schema, options?.schema),\n    hooks: {\n      before: [\n        {\n          matcher(context) {\n            return context.path === \"/sign-up/email\";\n          },\n          async handler(ctx) {\n            const username2 = ctx.body.username;\n            if (username2) {\n              const user = await ctx.context.adapter.findOne({\n                model: \"user\",\n                where: [\n                  {\n                    field: \"username\",\n                    value: username2.toLowerCase()\n                  }\n                ]\n              });\n              if (user) {\n                throw new APIError(\"UNPROCESSABLE_ENTITY\", {\n                  message: ERROR_CODES.USERNAME_IS_ALREADY_TAKEN\n                });\n              }\n            }\n          }\n        }\n      ]\n    },\n    $ERROR_CODES: TWO_FACTOR_ERROR_CODES\n  };\n};\n\nexport { username };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9181, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9187, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-I6AIEFED.js"],"sourcesContent":["import { createAuthEndpoint, sessionMiddleware } from './chunk-FUJTYWXL.js';\nimport { mergeSchema } from './chunk-72KRA3CK.js';\nimport { symmetricEncrypt, symmetricDecrypt } from './chunk-DBPOZRMS.js';\nimport { z } from 'zod';\nimport { generateKeyPair, exportJWK, importJWK, SignJWT } from 'jose';\n\nvar schema = {\n  jwks: {\n    fields: {\n      publicKey: {\n        type: \"string\",\n        required: true\n      },\n      privateKey: {\n        type: \"string\",\n        required: true\n      },\n      createdAt: {\n        type: \"date\",\n        required: true\n      }\n    }\n  }\n};\nz.object({\n  id: z.string(),\n  publicKey: z.string(),\n  privateKey: z.string(),\n  createdAt: z.date()\n});\n\n// src/plugins/jwt/adapter.ts\nvar getJwksAdapter = (adapter) => {\n  return {\n    getAllKeys: async () => {\n      return await adapter.findMany({\n        model: \"jwks\"\n      });\n    },\n    getLatestKey: async () => {\n      const key = await adapter.findMany({\n        model: \"jwks\",\n        sortBy: {\n          field: \"createdAt\",\n          direction: \"desc\"\n        },\n        limit: 1\n      });\n      return key[0];\n    },\n    createJwk: async (webKey) => {\n      const jwk2 = await adapter.create({\n        model: \"jwks\",\n        data: {\n          ...webKey,\n          createdAt: /* @__PURE__ */ new Date()\n        }\n      });\n      return jwk2;\n    }\n  };\n};\nvar jwt = (options) => {\n  return {\n    id: \"jwt\",\n    endpoints: {\n      getJwks: createAuthEndpoint(\n        \"/jwks\",\n        {\n          method: \"GET\",\n          metadata: {\n            openapi: {\n              description: \"Get the JSON Web Key Set\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          keys: {\n                            type: \"array\",\n                            items: {\n                              type: \"object\",\n                              properties: {\n                                kid: {\n                                  type: \"string\"\n                                },\n                                kty: {\n                                  type: \"string\"\n                                },\n                                use: {\n                                  type: \"string\"\n                                },\n                                alg: {\n                                  type: \"string\"\n                                },\n                                n: {\n                                  type: \"string\"\n                                },\n                                e: {\n                                  type: \"string\"\n                                }\n                              }\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const adapter = getJwksAdapter(ctx.context.adapter);\n          const keySets = await adapter.getAllKeys();\n          if (keySets.length === 0) {\n            const { publicKey, privateKey } = await generateKeyPair(\n              options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\",\n              options?.jwks?.keyPairConfig ?? {\n                crv: \"Ed25519\",\n                extractable: true\n              }\n            );\n            const publicWebKey = await exportJWK(publicKey);\n            const privateWebKey = await exportJWK(privateKey);\n            const stringifiedPrivateWebKey = JSON.stringify(privateWebKey);\n            const privateKeyEncryptionEnabled = !options?.jwks?.disablePrivateKeyEncryption;\n            let jwk2 = {\n              id: ctx.context.generateId({\n                model: \"jwks\"\n              }),\n              publicKey: JSON.stringify(publicWebKey),\n              privateKey: privateKeyEncryptionEnabled ? JSON.stringify(\n                await symmetricEncrypt({\n                  key: ctx.context.options.secret,\n                  data: stringifiedPrivateWebKey\n                })\n              ) : stringifiedPrivateWebKey,\n              createdAt: /* @__PURE__ */ new Date()\n            };\n            await adapter.createJwk(jwk2);\n            return ctx.json({\n              keys: [\n                {\n                  ...publicWebKey,\n                  kid: jwk2.id\n                }\n              ]\n            });\n          }\n          return ctx.json({\n            keys: keySets.map((keySet) => ({\n              ...JSON.parse(keySet.publicKey),\n              kid: keySet.id\n            }))\n          });\n        }\n      ),\n      getToken: createAuthEndpoint(\n        \"/token\",\n        {\n          method: \"GET\",\n          requireHeaders: true,\n          use: [sessionMiddleware],\n          metadata: {\n            openapi: {\n              description: \"Get a JWT token\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          token: {\n                            type: \"string\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const adapter = getJwksAdapter(ctx.context.adapter);\n          let key = await adapter.getLatestKey();\n          const privateKeyEncryptionEnabled = !options?.jwks?.disablePrivateKeyEncryption;\n          if (key === void 0) {\n            const { publicKey, privateKey: privateKey2 } = await generateKeyPair(\n              options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\",\n              options?.jwks?.keyPairConfig ?? {\n                crv: \"Ed25519\",\n                extractable: true\n              }\n            );\n            const publicWebKey = await exportJWK(publicKey);\n            const privateWebKey2 = await exportJWK(privateKey2);\n            const stringifiedPrivateWebKey = JSON.stringify(privateWebKey2);\n            let jwk2 = {\n              id: ctx.context.generateId({\n                model: \"jwks\"\n              }),\n              publicKey: JSON.stringify(publicWebKey),\n              privateKey: privateKeyEncryptionEnabled ? JSON.stringify(\n                await symmetricEncrypt({\n                  key: ctx.context.options.secret,\n                  data: stringifiedPrivateWebKey\n                })\n              ) : stringifiedPrivateWebKey,\n              createdAt: /* @__PURE__ */ new Date()\n            };\n            key = await adapter.createJwk(jwk2);\n          }\n          let privateWebKey = privateKeyEncryptionEnabled ? await symmetricDecrypt({\n            key: ctx.context.options.secret,\n            data: JSON.parse(key.privateKey)\n          }) : key.privateKey;\n          const privateKey = await importJWK(\n            JSON.parse(privateWebKey),\n            options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\"\n          );\n          const payload = !options?.jwt?.definePayload ? ctx.context.session.user : await options?.jwt.definePayload(ctx.context.session);\n          const jwt2 = await new SignJWT({\n            ...payload,\n            // I am aware that this is not the best way to handle this, but this is the only way I know to get the impersonatedBy field\n            ...ctx.context.session.session.impersonatedBy ? {\n              impersonatedBy: ctx.context.session.session.impersonatedBy\n            } : {}\n          }).setProtectedHeader({\n            alg: options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\",\n            kid: key.id\n          }).setIssuedAt().setIssuer(options?.jwt?.issuer ?? ctx.context.options.baseURL).setAudience(options?.jwt?.audience ?? ctx.context.options.baseURL).setExpirationTime(options?.jwt?.expirationTime ?? \"15m\").setSubject(ctx.context.session.user.id).sign(privateKey);\n          return ctx.json({\n            token: jwt2\n          });\n        }\n      )\n    },\n    schema: mergeSchema(schema, options?.schema)\n  };\n};\n\nexport { jwt };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9428, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9434, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-RC4GIBXH.js"],"sourcesContent":["import { createAuthEndpoint, BASE_ERROR_CODES, originCheck } from './chunk-FUJTYWXL.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { generateRandomString } from './chunk-DBPOZRMS.js';\nimport { z } from 'zod';\nimport { APIError } from 'better-call';\n\nvar magicLink = (options) => {\n  return {\n    id: \"magic-link\",\n    endpoints: {\n      signInMagicLink: createAuthEndpoint(\n        \"/sign-in/magic-link\",\n        {\n          method: \"POST\",\n          requireHeaders: true,\n          body: z.object({\n            email: z.string({\n              description: \"Email address to send the magic link\"\n            }).email(),\n            name: z.string({\n              description: \"User display name. Only used if the user is registering for the first time.\"\n            }).optional(),\n            callbackURL: z.string({\n              description: \"URL to redirect after magic link verification\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              description: \"Sign in with magic link\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          status: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const { email } = ctx.body;\n          if (options.disableSignUp) {\n            const user = await ctx.context.internalAdapter.findUserByEmail(email);\n            if (!user) {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: BASE_ERROR_CODES.USER_NOT_FOUND\n              });\n            }\n          }\n          const verificationToken = generateRandomString(32, \"a-z\", \"A-Z\");\n          await ctx.context.internalAdapter.createVerificationValue({\n            identifier: verificationToken,\n            value: JSON.stringify({ email, name: ctx.body.name }),\n            expiresAt: new Date(\n              Date.now() + (options.expiresIn || 60 * 5) * 1e3\n            )\n          });\n          const url = `${ctx.context.baseURL}/magic-link/verify?token=${verificationToken}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n          await options.sendMagicLink(\n            {\n              email,\n              url,\n              token: verificationToken\n            },\n            ctx.request\n          );\n          return ctx.json({\n            status: true\n          });\n        }\n      ),\n      magicLinkVerify: createAuthEndpoint(\n        \"/magic-link/verify\",\n        {\n          method: \"GET\",\n          query: z.object({\n            token: z.string({\n              description: \"Verification token\"\n            }),\n            callbackURL: z.string({\n              description: \"URL to redirect after magic link verification, if not provided will return session\"\n            }).optional()\n          }),\n          use: [originCheck((ctx) => ctx.query.callbackURL)],\n          requireHeaders: true,\n          metadata: {\n            openapi: {\n              description: \"Verify magic link\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          },\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const { token, callbackURL } = ctx.query;\n          const toRedirectTo = callbackURL?.startsWith(\"http\") ? callbackURL : callbackURL ? `${ctx.context.options.baseURL}${callbackURL}` : ctx.context.options.baseURL;\n          const tokenValue = await ctx.context.internalAdapter.findVerificationValue(token);\n          if (!tokenValue) {\n            throw ctx.redirect(`${toRedirectTo}?error=INVALID_TOKEN`);\n          }\n          if (tokenValue.expiresAt < /* @__PURE__ */ new Date()) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              tokenValue.id\n            );\n            throw ctx.redirect(`${toRedirectTo}?error=EXPIRED_TOKEN`);\n          }\n          await ctx.context.internalAdapter.deleteVerificationValue(\n            tokenValue.id\n          );\n          const { email, name } = JSON.parse(tokenValue.value);\n          let user = await ctx.context.internalAdapter.findUserByEmail(email).then((res) => res?.user);\n          if (!user) {\n            if (!options.disableSignUp) {\n              const newUser = await ctx.context.internalAdapter.createUser({\n                email,\n                emailVerified: true,\n                name: name || email\n              });\n              user = newUser;\n              if (!user) {\n                throw ctx.redirect(\n                  `${toRedirectTo}?error=failed_to_create_user`\n                );\n              }\n            } else {\n              throw ctx.redirect(`${toRedirectTo}?error=failed_to_create_user`);\n            }\n          }\n          if (!user.emailVerified) {\n            await ctx.context.internalAdapter.updateUser(user.id, {\n              emailVerified: true\n            });\n          }\n          const session = await ctx.context.internalAdapter.createSession(\n            user.id,\n            ctx.headers\n          );\n          if (!session) {\n            throw ctx.redirect(\n              `${toRedirectTo}?error=failed_to_create_session`\n            );\n          }\n          await setSessionCookie(ctx, {\n            session,\n            user\n          });\n          if (!callbackURL) {\n            return ctx.json({\n              token: session.token,\n              user: {\n                id: user.id,\n                email: user.email,\n                emailVerified: user.emailVerified,\n                name: user.name,\n                image: user.image,\n                createdAt: user.createdAt,\n                updatedAt: user.updatedAt\n              }\n            });\n          }\n          throw ctx.redirect(callbackURL);\n        }\n      )\n    },\n    rateLimit: [\n      {\n        pathMatcher(path) {\n          return path.startsWith(\"/sign-in/magic-link\") || path.startsWith(\"/magic-link/verify\");\n        },\n        window: options.rateLimit?.window || 60,\n        max: options.rateLimit?.max || 5\n      }\n    ]\n  };\n};\n\nexport { magicLink };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9627, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9633, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-I7IXLICR.js"],"sourcesContent":["import { createAuthEndpoint, sessionMiddleware, APIError, createAuthMiddleware } from './chunk-FUJTYWXL.js';\nimport { parseCookies, setSessionCookie, deleteSessionCookie, parseSetCookieHeader } from './chunk-IWEXZ2ES.js';\nimport { z } from 'zod';\n\nvar multiSession = (options) => {\n  const opts = {\n    maximumSessions: 5,\n    ...options\n  };\n  const isMultiSessionCookie = (key) => key.includes(\"_multi-\");\n  const ERROR_CODES = {\n    INVALID_SESSION_TOKEN: \"Invalid session token\"\n  };\n  return {\n    id: \"multi-session\",\n    endpoints: {\n      listDeviceSessions: createAuthEndpoint(\n        \"/multi-session/list-device-sessions\",\n        {\n          method: \"GET\",\n          requireHeaders: true\n        },\n        async (ctx) => {\n          const cookieHeader = ctx.headers?.get(\"cookie\");\n          if (!cookieHeader) return ctx.json([]);\n          const cookies = Object.fromEntries(parseCookies(cookieHeader));\n          const sessionTokens = (await Promise.all(\n            Object.entries(cookies).filter(([key]) => isMultiSessionCookie(key)).map(\n              async ([key]) => await ctx.getSignedCookie(key, ctx.context.secret)\n            )\n          )).filter((v) => v !== void 0);\n          if (!sessionTokens.length) return ctx.json([]);\n          const sessions = await ctx.context.internalAdapter.findSessions(sessionTokens);\n          const validSessions = sessions.filter(\n            (session) => session && session.session.expiresAt > /* @__PURE__ */ new Date()\n          );\n          return ctx.json(validSessions);\n        }\n      ),\n      setActiveSession: createAuthEndpoint(\n        \"/multi-session/set-active\",\n        {\n          method: \"POST\",\n          body: z.object({\n            sessionToken: z.string({\n              description: \"The session token to set as active\"\n            })\n          }),\n          requireHeaders: true,\n          use: [sessionMiddleware],\n          metadata: {\n            openapi: {\n              description: \"Set the active session\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const sessionToken = ctx.body.sessionToken;\n          const multiSessionCookieName = `${ctx.context.authCookies.sessionToken.name}_multi-${sessionToken}`;\n          const sessionCookie = await ctx.getSignedCookie(\n            multiSessionCookieName,\n            ctx.context.secret\n          );\n          if (!sessionCookie) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_SESSION_TOKEN\n            });\n          }\n          const session = await ctx.context.internalAdapter.findSession(sessionToken);\n          if (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n            ctx.setCookie(multiSessionCookieName, \"\", {\n              ...ctx.context.authCookies.sessionToken.options,\n              maxAge: 0\n            });\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_SESSION_TOKEN\n            });\n          }\n          await setSessionCookie(ctx, session);\n          return ctx.json(session);\n        }\n      ),\n      revokeDeviceSession: createAuthEndpoint(\n        \"/multi-session/revoke\",\n        {\n          method: \"POST\",\n          body: z.object({\n            sessionToken: z.string({\n              description: \"The session token to revoke\"\n            })\n          }),\n          requireHeaders: true,\n          use: [sessionMiddleware],\n          metadata: {\n            openapi: {\n              description: \"Revoke a device session\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          status: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const sessionToken = ctx.body.sessionToken;\n          const multiSessionCookieName = `${ctx.context.authCookies.sessionToken.name}_multi-${sessionToken}`;\n          const sessionCookie = await ctx.getSignedCookie(\n            multiSessionCookieName,\n            ctx.context.secret\n          );\n          if (!sessionCookie) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ERROR_CODES.INVALID_SESSION_TOKEN\n            });\n          }\n          await ctx.context.internalAdapter.deleteSession(sessionToken);\n          ctx.setCookie(multiSessionCookieName, \"\", {\n            ...ctx.context.authCookies.sessionToken.options,\n            maxAge: 0\n          });\n          const isActive = ctx.context.session?.session.token === sessionToken;\n          if (!isActive) return ctx.json({ status: true });\n          const cookieHeader = ctx.headers?.get(\"cookie\");\n          if (cookieHeader) {\n            const cookies = Object.fromEntries(parseCookies(cookieHeader));\n            const sessionTokens = (await Promise.all(\n              Object.entries(cookies).filter(([key]) => isMultiSessionCookie(key)).map(\n                async ([key]) => await ctx.getSignedCookie(key, ctx.context.secret)\n              )\n            )).filter((v) => v !== void 0);\n            const internalAdapter = ctx.context.internalAdapter;\n            if (sessionTokens.length > 0) {\n              const sessions = await internalAdapter.findSessions(sessionTokens);\n              const validSessions = sessions.filter(\n                (session) => session && session.session.expiresAt > /* @__PURE__ */ new Date()\n              );\n              if (validSessions.length > 0) {\n                const nextSession = validSessions[0];\n                await setSessionCookie(ctx, nextSession);\n              } else {\n                deleteSessionCookie(ctx);\n              }\n            } else {\n              deleteSessionCookie(ctx);\n            }\n          } else {\n            deleteSessionCookie(ctx);\n          }\n          return ctx.json({\n            status: true\n          });\n        }\n      )\n    },\n    hooks: {\n      after: [\n        {\n          matcher: () => true,\n          handler: createAuthMiddleware(async (ctx) => {\n            const cookieString = ctx.responseHeader.get(\"set-cookie\");\n            if (!cookieString) return;\n            const setCookies = parseSetCookieHeader(cookieString);\n            const sessionCookieConfig = ctx.context.authCookies.sessionToken;\n            const sessionToken = setCookies.get(\n              sessionCookieConfig.name\n            )?.value;\n            if (!sessionToken) return;\n            const cookies = parseCookies(ctx.headers?.get(\"cookie\") || \"\");\n            const rawSession = sessionToken.split(\".\")[0];\n            if (!rawSession) {\n              return;\n            }\n            const cookieName = `${sessionCookieConfig.name}_multi-${rawSession}`;\n            if (setCookies.get(cookieName) || cookies.get(cookieName)) return;\n            const currentMultiSessions = Object.keys(Object.fromEntries(cookies)).filter(\n              isMultiSessionCookie\n            ).length + (cookieString.includes(\"session_token\") ? 1 : 0);\n            if (currentMultiSessions > opts.maximumSessions) {\n              return;\n            }\n            await ctx.setSignedCookie(\n              cookieName,\n              rawSession,\n              ctx.context.secret,\n              sessionCookieConfig.options\n            );\n          })\n        },\n        {\n          matcher: (context) => context.path === \"/sign-out\",\n          handler: createAuthMiddleware(async (ctx) => {\n            const cookieHeader = ctx.headers?.get(\"cookie\");\n            if (!cookieHeader) return;\n            const cookies = Object.fromEntries(parseCookies(cookieHeader));\n            const ids = Object.keys(cookies).map((key) => {\n              if (isMultiSessionCookie(key)) {\n                ctx.setCookie(key, \"\", { maxAge: 0 });\n                const id = key.split(\"_multi-\")[1];\n                return id;\n              }\n              return null;\n            }).filter((v) => v !== null);\n            await ctx.context.internalAdapter.deleteSessions(ids);\n          })\n        }\n      ]\n    },\n    $ERROR_CODES: ERROR_CODES\n  };\n};\n\nexport { multiSession };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9850, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9856, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-G4TT5TMT.js"],"sourcesContent":["import { createAuthEndpoint, APIError } from './chunk-FUJTYWXL.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { z } from 'zod';\nimport { betterFetch } from '@better-fetch/fetch';\n\n// src/utils/boolean.ts\nfunction toBoolean(value) {\n  return value === \"true\" || value === true;\n}\n\n// src/plugins/one-tap/index.ts\nvar oneTap = (options) => ({\n  id: \"one-tap\",\n  endpoints: {\n    oneTapCallback: createAuthEndpoint(\n      \"/one-tap/callback\",\n      {\n        method: \"POST\",\n        body: z.object({\n          idToken: z.string({\n            description: \"Google ID token, which the client obtains from the One Tap API\"\n          })\n        }),\n        metadata: {\n          openapi: {\n            summary: \"One tap callback\",\n            description: \"Use this endpoint to authenticate with Google One Tap\",\n            responses: {\n              200: {\n                description: \"Successful response\",\n                content: {\n                  \"application/json\": {\n                    schema: {\n                      type: \"object\",\n                      properties: {\n                        session: {\n                          $ref: \"#/components/schemas/Session\"\n                        },\n                        user: {\n                          $ref: \"#/components/schemas/User\"\n                        }\n                      }\n                    }\n                  }\n                }\n              },\n              400: {\n                description: \"Invalid token\"\n              }\n            }\n          }\n        }\n      },\n      async (ctx) => {\n        const { idToken } = ctx.body;\n        const { data, error } = await betterFetch(\"https://oauth2.googleapis.com/tokeninfo?id_token=\" + idToken);\n        if (error) {\n          return ctx.json({\n            error: \"Invalid token\"\n          });\n        }\n        const user = await ctx.context.internalAdapter.findUserByEmail(\n          data.email\n        );\n        if (!user) {\n          if (options?.disableSignup) {\n            throw new APIError(\"BAD_GATEWAY\", {\n              message: \"User not found\"\n            });\n          }\n          const user2 = await ctx.context.internalAdapter.createOAuthUser(\n            {\n              email: data.email,\n              emailVerified: toBoolean(data.email_verified),\n              name: data.name,\n              image: data.picture\n            },\n            {\n              providerId: \"google\",\n              accountId: data.sub\n            }\n          );\n          if (!user2) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: \"Could not create user\"\n            });\n          }\n          const session2 = await ctx.context.internalAdapter.createSession(\n            user2?.user.id,\n            ctx.request\n          );\n          await setSessionCookie(ctx, {\n            user: user2.user,\n            session: session2\n          });\n          return ctx.json({\n            token: session2.token,\n            user: {\n              id: user2.user.id,\n              email: user2.user.email,\n              emailVerified: user2.user.emailVerified,\n              name: user2.user.name,\n              image: user2.user.image,\n              createdAt: user2.user.createdAt,\n              updatedAt: user2.user.updatedAt\n            }\n          });\n        }\n        const session = await ctx.context.internalAdapter.createSession(\n          user.user.id,\n          ctx.request\n        );\n        await setSessionCookie(ctx, {\n          user: user.user,\n          session\n        });\n        return ctx.json({\n          token: session.token,\n          user: {\n            id: user.user.id,\n            email: user.user.email,\n            emailVerified: user.user.emailVerified,\n            name: user.user.name,\n            image: user.user.image,\n            createdAt: user.user.createdAt,\n            updatedAt: user.user.updatedAt\n          }\n        });\n      }\n    )\n  }\n});\n\nexport { oneTap };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9981, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9987, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-4VOFXDSP.js"],"sourcesContent":["import { createAuthEndpoint, APIError, getEndpoints } from './chunk-FUJTYWXL.js';\nimport { getAuthTables } from './chunk-NN3CE6VO.js';\nimport { ZodObject, ZodSchema, ZodOptional } from 'zod';\n\nvar paths = {};\nfunction getTypeFromZodType(zodType) {\n  switch (zodType.constructor.name) {\n    case \"ZodString\":\n      return \"string\";\n    case \"ZodNumber\":\n      return \"number\";\n    case \"ZodBoolean\":\n      return \"boolean\";\n    case \"ZodObject\":\n      return \"object\";\n    case \"ZodArray\":\n      return \"array\";\n    default:\n      return \"string\";\n  }\n}\nfunction getParameters(options) {\n  const parameters = [];\n  if (options.metadata?.openapi?.parameters) {\n    parameters.push(...options.metadata.openapi.parameters);\n    return parameters;\n  }\n  if (options.query instanceof ZodObject) {\n    Object.entries(options.query.shape).forEach(([key, value]) => {\n      if (value instanceof ZodSchema) {\n        parameters.push({\n          name: key,\n          in: \"query\",\n          schema: {\n            type: getTypeFromZodType(value),\n            ...\"minLength\" in value && value.minLength ? {\n              minLength: value.minLength\n            } : {},\n            description: value.description\n          }\n        });\n      }\n    });\n  }\n  return parameters;\n}\nfunction getRequestBody(options) {\n  if (options.metadata?.openapi?.requestBody) {\n    return options.metadata.openapi.requestBody;\n  }\n  if (!options.body) return void 0;\n  if (options.body instanceof ZodObject || options.body instanceof ZodOptional) {\n    const shape = options.body.shape;\n    if (!shape) return void 0;\n    const properties = {};\n    const required = [];\n    Object.entries(shape).forEach(([key, value]) => {\n      if (value instanceof ZodSchema) {\n        properties[key] = {\n          type: getTypeFromZodType(value),\n          description: value.description\n        };\n        if (!(value instanceof ZodOptional)) {\n          required.push(key);\n        }\n      }\n    });\n    return {\n      required: options.body instanceof ZodOptional ? false : options.body ? true : false,\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties,\n            required\n          }\n        }\n      }\n    };\n  }\n  return void 0;\n}\nfunction getResponse(responses) {\n  return {\n    \"400\": {\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties: {\n              message: {\n                type: \"string\"\n              }\n            },\n            required: [\"message\"]\n          }\n        }\n      },\n      description: \"Bad Request. Usually due to missing parameters, or invalid parameters.\"\n    },\n    \"401\": {\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties: {\n              message: {\n                type: \"string\"\n              }\n            },\n            required: [\"message\"]\n          }\n        }\n      },\n      description: \"Unauthorized. Due to missing or invalid authentication.\"\n    },\n    \"403\": {\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties: {\n              message: {\n                type: \"string\"\n              }\n            }\n          }\n        }\n      },\n      description: \"Forbidden. You do not have permission to access this resource or to perform this action.\"\n    },\n    \"404\": {\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties: {\n              message: {\n                type: \"string\"\n              }\n            }\n          }\n        }\n      },\n      description: \"Not Found. The requested resource was not found.\"\n    },\n    \"429\": {\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties: {\n              message: {\n                type: \"string\"\n              }\n            }\n          }\n        }\n      },\n      description: \"Too Many Requests. You have exceeded the rate limit. Try again later.\"\n    },\n    \"500\": {\n      content: {\n        \"application/json\": {\n          schema: {\n            type: \"object\",\n            properties: {\n              message: {\n                type: \"string\"\n              }\n            }\n          }\n        }\n      },\n      description: \"Internal Server Error. This is a problem with the server that you cannot fix.\"\n    },\n    ...responses\n  };\n}\nasync function generator(ctx, options) {\n  const baseEndpoints = getEndpoints(ctx, {\n    ...options,\n    plugins: []\n  });\n  const tables = getAuthTables(options);\n  const models = Object.entries(tables).reduce((acc, [key, value]) => {\n    const modelName = key.charAt(0).toUpperCase() + key.slice(1);\n    acc[modelName] = {\n      type: \"object\",\n      properties: Object.entries(value.fields).reduce(\n        (acc2, [key2, value2]) => {\n          acc2[key2] = {\n            type: value2.type\n          };\n          return acc2;\n        },\n        {}\n      )\n    };\n    return acc;\n  }, {});\n  const components = {\n    schemas: {\n      ...models\n    }\n  };\n  Object.entries(baseEndpoints.api).forEach(([_, value]) => {\n    const options2 = value.options;\n    if (options2.metadata?.SERVER_ONLY) return;\n    if (options2.method === \"GET\") {\n      paths[value.path] = {\n        get: {\n          tags: [\"Default\", ...options2.metadata?.openapi?.tags || []],\n          description: options2.metadata?.openapi?.description,\n          operationId: options2.metadata?.openapi?.operationId,\n          security: [\n            {\n              bearerAuth: []\n            }\n          ],\n          parameters: getParameters(options2),\n          responses: getResponse(options2.metadata?.openapi?.responses)\n        }\n      };\n    }\n    if (options2.method === \"POST\") {\n      const body = getRequestBody(options2);\n      paths[value.path] = {\n        post: {\n          tags: [\"Default\", ...options2.metadata?.openapi?.tags || []],\n          description: options2.metadata?.openapi?.description,\n          operationId: options2.metadata?.openapi?.operationId,\n          security: [\n            {\n              bearerAuth: []\n            }\n          ],\n          parameters: getParameters(options2),\n          ...body ? { requestBody: body } : {\n            requestBody: {\n              //set body none\n              content: {\n                \"application/json\": {\n                  schema: {\n                    type: \"object\",\n                    properties: {}\n                  }\n                }\n              }\n            }\n          },\n          responses: getResponse(options2.metadata?.openapi?.responses)\n        }\n      };\n    }\n  });\n  for (const plugin of options.plugins || []) {\n    if (plugin.id === \"open-api\") {\n      continue;\n    }\n    const pluginEndpoints = getEndpoints(ctx, {\n      ...options,\n      plugins: [plugin]\n    });\n    const api = Object.keys(pluginEndpoints.api).map((key) => {\n      if (baseEndpoints.api[key] === void 0) {\n        return pluginEndpoints.api[key];\n      }\n      return null;\n    }).filter((x) => x !== null);\n    Object.entries(api).forEach(([key, value]) => {\n      const options2 = value.options;\n      if (options2.metadata?.SERVER_ONLY) return;\n      if (options2.method === \"GET\") {\n        paths[value.path] = {\n          get: {\n            tags: options2.metadata?.openapi?.tags || [\n              plugin.id.charAt(0).toUpperCase() + plugin.id.slice(1)\n            ],\n            description: options2.metadata?.openapi?.description,\n            operationId: options2.metadata?.openapi?.operationId,\n            security: [\n              {\n                bearerAuth: []\n              }\n            ],\n            parameters: getParameters(options2),\n            responses: getResponse(options2.metadata?.openapi?.responses)\n          }\n        };\n      }\n      if (options2.method === \"POST\") {\n        paths[value.path] = {\n          post: {\n            tags: options2.metadata?.openapi?.tags || [\n              plugin.id.charAt(0).toUpperCase() + plugin.id.slice(1)\n            ],\n            description: options2.metadata?.openapi?.description,\n            operationId: options2.metadata?.openapi?.operationId,\n            security: [\n              {\n                bearerAuth: []\n              }\n            ],\n            parameters: getParameters(options2),\n            requestBody: getRequestBody(options2),\n            responses: getResponse(options2.metadata?.openapi?.responses)\n          }\n        };\n      }\n    });\n  }\n  const res = {\n    openapi: \"3.1.1\",\n    info: {\n      title: \"Better Auth\",\n      description: \"API Reference for your Better Auth Instance\",\n      version: \"1.1.0\"\n    },\n    components,\n    security: [\n      {\n        apiKeyCookie: []\n      }\n    ],\n    servers: [\n      {\n        url: ctx.baseURL\n      }\n    ],\n    tags: [\n      {\n        name: \"Default\",\n        description: \"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin.\"\n      }\n    ],\n    paths\n  };\n  return res;\n}\n\n// src/plugins/open-api/logo.ts\nvar logo = `<svg width=\"75\" height=\"75\" viewBox=\"0 0 75 75\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<rect width=\"75\" height=\"75\" fill=\"url(#pattern0_21_12)\"/>\n<defs>\n<pattern id=\"pattern0_21_12\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\n<use xlink:href=\"#image0_21_12\" transform=\"scale(0.00094697)\"/>\n</pattern>\n<image id=\"image0_21_12\" width=\"1056\" height=\"1056\" xlink:href=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAEIKADAAQAAAABAAAEIAAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+ICKElDQ19QUk9GSUxFAAEBAAACGGFwcGwEAAAAbW50clJHQiBYWVogB+YAAQABAAAAAAAAYWNzcEFQUEwAAAAAQVBQTAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1hcHBs7P2jjjiFR8NttL1PetoYLwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKZGVzYwAAAPwAAAAwY3BydAAAASwAAABQd3RwdAAAAXwAAAAUclhZWgAAAZAAAAAUZ1hZWgAAAaQAAAAUYlhZWgAAAbgAAAAUclRSQwAAAcwAAAAgY2hhZAAAAewAAAAsYlRSQwAAAcwAAAAgZ1RSQwAAAcwAAAAgbWx1YwAAAAAAAAABAAAADGVuVVMAAAAUAAAAHABEAGkAcwBwAGwAYQB5ACAAUAAzbWx1YwAAAAAAAAABAAAADGVuVVMAAAA0AAAAHABDAG8AcAB5AHIAaQBnAGgAdAAgAEEAcABwAGwAZQAgAEkAbgBjAC4ALAAgADIAMAAyADJYWVogAAAAAAAA9tUAAQAAAADTLFhZWiAAAAAAAACD3wAAPb////+7WFlaIAAAAAAAAEq/AACxNwAACrlYWVogAAAAAAAAKDgAABELAADIuXBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbc2YzMgAAAAAAAQxCAAAF3v//8yYAAAeTAAD9kP//+6L///2jAAAD3AAAwG7/wAARCAQgBCADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBAMDAwQFBAQEBAUHBQUFBQUHCAcHBwcHBwgICAgICAgICgoKCgoKCwsLCwsNDQ0NDQ0NDQ0N/9sAQwECAgIDAwMGAwMGDQkHCQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0N/90ABABC/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Ln/gq38a/in8Dvgp4T8R/CfxFdeG9SvvFMdlcXFoELyW5srqQxnzEcY3op4Gciv1Gr8Z/+C2X/JvXgj/sc4v/AE33lAH4z/8ADwv9tD/oq2tf9823/wAZo/4eF/tof9FW1r/vm2/+M18Z0UAfZn/Dwv8AbQ/6KtrX/fNt/wDGaP8Ah4X+2h/0VbWv++bb/wCM18Z0UAfZn/Dwv9tD/oq2tf8AfNt/8Zo/4eF/tof9FW1r/vm2/wDjNfGdFAH2Z/w8L/bQ/wCira1/3zbf/GaP+Hhf7aH/AEVbWv8Avm2/+M18Z0UAfZn/AA8L/bQ/6KtrX/fNt/8AGaP+Hhf7aH/RVta/75tv/jNfGdFAH2Z/w8L/AG0P+ira1/3zbf8Axmj/AIeF/tof9FW1r/vm2/8AjNfGdFAH63/sVftq/tTfEb9qb4deCfG3xF1TVtD1bVGgvbKdYBHPGIJW2ttiVsblB4I6V/UbX8Z//BPT/k9D4U/9hpv/AEmmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+M/wD4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAPsz/h4X+2h/0VbWv++bb/4zR/w8L/bQ/wCira1/3zbf/Ga+M6KAPsz/AIeF/tof9FW1r/vm2/8AjNH/AA8L/bQ/6KtrX/fNt/8AGa+M6KAPsz/h4X+2h/0VbWv++bb/AOM0f8PC/wBtD/oq2tf9823/AMZr4zooA+zP+Hhf7aH/AEVbWv8Avm2/+M0f8PC/20P+ira1/wB823/xmvjOigD7M/4eF/tof9FW1r/vm2/+M0f8PC/20P8Aoq2tf9823/xmvjOigD7M/wCHhf7aH/RVta/75tv/AIzR/wAPC/20P+ira1/3zbf/ABmvjOigD7M/4eF/tof9FW1r/vm2/wDjNH/Dwv8AbQ/6KtrX/fNt/wDGa+M6KAPsz/h4X+2h/wBFW1r/AL5tv/jNH/Dwv9tD/oq2tf8AfNt/8Zr4zooA+zP+Hhf7aH/RVta/75tv/jNH/Dwv9tD/AKKtrX/fNt/8Zr4zooA+zP8Ah4X+2h/0VbWv++bb/wCM0f8ADwv9tD/oq2tf9823/wAZr4zooA+zP+Hhf7aH/RVta/75tv8A4zR/w8L/AG0P+ira1/3zbf8AxmvjOigD7M/4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAP6tv+CUnxr+Kfxx+CnizxH8WPEV14k1Kx8UyWVvcXYQPHbiytZBGPLRBje7HkZya/Uavxn/AOCJv/JvXjf/ALHOX/032dfsxQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfwq/BT4r638Dvin4d+LHhy0tb7UvDd0bu3t70ObeRzG0eJBGyPjDnowOa/Ub/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH9MlFfzN/8Psv2hf+hI8Gf9+tQ/8Ak2j/AIfZftC/9CR4M/79ah/8m0Af0yUV/M3/AMPsv2hf+hI8Gf8AfrUP/k2j/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH4z0V/TJ/w5N/Z6/6Hfxn/wB/dP8A/kKj/hyb+z1/0O/jP/v7p/8A8hUAfzN0V/TJ/wAOTf2ev+h38Z/9/dP/APkKj/hyb+z1/wBDv4z/AO/un/8AyFQB/M3RX9Mn/Dk39nr/AKHfxn/390//AOQqP+HJv7PX/Q7+M/8Av7p//wAhUAfzN0V/TJ/w5N/Z6/6Hfxn/AN/dP/8AkKj/AIcm/s9f9Dv4z/7+6f8A/IVAH8zdFf0yf8OTf2ev+h38Z/8Af3T/AP5Co/4cm/s9f9Dv4z/7+6f/APIVAH8zdFf0yf8ADk39nr/od/Gf/f3T/wD5Co/4cm/s9f8AQ7+M/wDv7p//AMhUAfzN0V/TJ/w5N/Z6/wCh38Z/9/dP/wDkKvwV/ag+FGifA74++M/hP4cu7q+03w3fi0t7i9KG4kQxRyZkMaomcueigYoA8FooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/AOxzl/8ATfZ1+zFfjP8A8ETf+TevG/8A2Ocv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD1L4KfCjW/jj8U/Dvwn8OXdrY6l4kujaW9xelxbxuI2kzIY1d8YQ9FJzX6jf8OTf2hf8Aod/Bn/f3UP8A5Cr4z/4J6f8AJ6Hwp/7DTf8ApNNX9mFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH8zf8Aw5N/aF/6HfwZ/wB/dQ/+QqP+HJv7Qv8A0O/gz/v7qH/yFX9MlFAH8zf/AA5N/aF/6HfwZ/391D/5Co/4cm/tC/8AQ7+DP+/uof8AyFX9MlFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH4z/8AD7L9nr/oSPGf/frT/wD5No/4fZfs9f8AQkeM/wDv1p//AMm1/M3RQB/TJ/w+y/Z6/wChI8Z/9+tP/wDk2j/h9l+z1/0JHjP/AL9af/8AJtfzN0UAf0yf8Psv2ev+hI8Z/wDfrT//AJNo/wCH2X7PX/QkeM/+/Wn/APybX8zdFAH9Mn/D7L9nr/oSPGf/AH60/wD+TaP+H2X7PX/QkeM/+/Wn/wDybX8zdFAH9Mn/AA+y/Z6/6Ejxn/360/8A+TaP+H2X7PX/AEJHjP8A79af/wDJtfzN0UAf0yf8Psv2ev8AoSPGf/frT/8A5No/4fZfs9f9CR4z/wC/Wn//ACbX8zdFAH9Mn/D7L9nr/oSPGf8A360//wCTa/BX9qD4r6J8cfj74z+LHhy0urHTfEl+Lu3t70ILiNBFHHiQRs6Zyh6MRivBaKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/ACb143/7HOX/ANN9nX7MV+M//BE3/k3rxv8A9jnL/wCm+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+XP/BVv4KfFP44/BTwn4c+E/h268SalY+KY724t7QoHjtxZXUZkPmOgxvdRwc5NAH8pNFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAfGdFfZn/DvT9tD/AKJTrX/fVt/8eo/4d6ftof8ARKda/wC+rb/49QB8Z0V9mf8ADvT9tD/olOtf99W3/wAeo/4d6ftof9Ep1r/vq2/+PUAfGdFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAH/BPT/k9D4U/wDYab/0mmr+zCv5cv2Kv2Kv2pvhz+1N8OvG3jb4dappOh6TqjT3t7O0BjgjMEq7m2ys2NzAcA9a/qNoAKKKKACiiigAooooAKKKKACiiigAooooA/gDor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD9mP+CJv/JvXjf8A7HOX/wBN9nX7MV+XP/BKT4KfFP4HfBTxZ4c+LHh268N6lfeKZL23t7soXktzZWsYkHlu4xvRhyc5FfqNQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9f9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/2Q==\"/>\n</defs>\n</svg>\n`;\n\n// src/plugins/open-api/index.ts\nvar getHTML = (apiReference) => `<!doctype html>\n<html>\n  <head>\n    <title>Scalar API Reference</title>\n    <meta charset=\"utf-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1\" />\n  </head>\n  <body>\n    <script\n      id=\"api-reference\"\n      type=\"application/json\">\n    ${JSON.stringify(apiReference)}\n    </script>\n\t <script>\n      var configuration = {\n\t  \tfavicon: \"data:image/svg+xml;utf8,${encodeURIComponent(logo)}\",\n\t   \ttheme: \"saturn\",\n        metaData: {\n\t\t\ttitle: \"Better Auth API\",\n\t\t\tdescription: \"API Reference for your Better Auth Instance\",\n\t\t}\n      }\n\n      document.getElementById('api-reference').dataset.configuration =\n        JSON.stringify(configuration)\n    </script>\n\t  <script src=\"https://cdn.jsdelivr.net/npm/@scalar/api-reference\"></script>\n  </body>\n</html>`;\nvar openAPI = (options) => {\n  const path = options?.path ?? \"/reference\";\n  return {\n    id: \"open-api\",\n    endpoints: {\n      generateOpenAPISchema: createAuthEndpoint(\n        \"/open-api/generate-schema\",\n        {\n          method: \"GET\"\n        },\n        async (ctx) => {\n          const schema = await generator(ctx.context, ctx.context.options);\n          return ctx.json(schema);\n        }\n      ),\n      openAPIReference: createAuthEndpoint(\n        path,\n        {\n          method: \"GET\",\n          metadata: {\n            isAction: false\n          }\n        },\n        async (ctx) => {\n          if (options?.disableDefaultReference) {\n            throw new APIError(\"NOT_FOUND\");\n          }\n          const schema = await generator(ctx.context, ctx.context.options);\n          return new Response(getHTML(schema), {\n            headers: {\n              \"Content-Type\": \"text/html\"\n            }\n          });\n        }\n      )\n    }\n  };\n};\n\nexport { openAPI };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10419, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10425, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-GBLEGHZW.js"],"sourcesContent":["// src/plugins/organization/access/access.ts\nfunction createAccessControl(s) {\n  return {\n    newRole(statements2) {\n      return role(statements2);\n    }\n  };\n}\nfunction role(statements) {\n  return {\n    statements,\n    authorize(request, connector) {\n      for (const [requestedResource, requestedActions] of Object.entries(\n        request\n      )) {\n        const allowedActions = statements[requestedResource];\n        if (!allowedActions) {\n          return {\n            success: false,\n            error: `You are not allowed to access resource: ${requestedResource}`\n          };\n        }\n        const success = connector === \"OR\" ? requestedActions.some(\n          (requestedAction) => allowedActions.includes(requestedAction)\n        ) : requestedActions.every(\n          (requestedAction) => allowedActions.includes(requestedAction)\n        );\n        if (success) {\n          return { success: true };\n        }\n        return {\n          success: false,\n          error: `Unauthorized to access resource \"${requestedResource}\"`\n        };\n      }\n      return {\n        success: false,\n        error: \"Not authorized\"\n      };\n    }\n  };\n}\n\n// src/plugins/organization/access/statement.ts\nvar defaultStatements = {\n  organization: [\"update\", \"delete\"],\n  member: [\"create\", \"update\", \"delete\"],\n  invitation: [\"create\", \"cancel\"]\n};\nvar defaultAc = createAccessControl();\nvar adminAc = defaultAc.newRole({\n  organization: [\"update\"],\n  invitation: [\"create\", \"cancel\"],\n  member: [\"create\", \"update\", \"delete\"]\n});\nvar ownerAc = defaultAc.newRole({\n  organization: [\"update\", \"delete\"],\n  member: [\"create\", \"update\", \"delete\"],\n  invitation: [\"create\", \"cancel\"]\n});\nvar memberAc = defaultAc.newRole({\n  organization: [],\n  member: [],\n  invitation: []\n});\nvar defaultRoles = {\n  admin: adminAc,\n  owner: ownerAc,\n  member: memberAc\n};\n\nexport { adminAc, createAccessControl, defaultAc, defaultRoles, defaultStatements, memberAc, ownerAc, role };\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;;;;;;AAC5C,SAAS,oBAAoB,CAAC;IAC5B,OAAO;QACL,SAAQ,WAAW;YACjB,OAAO,KAAK;QACd;IACF;AACF;AACA,SAAS,KAAK,UAAU;IACtB,OAAO;QACL;QACA,WAAU,OAAO,EAAE,SAAS;YAC1B,KAAK,MAAM,CAAC,mBAAmB,iBAAiB,IAAI,OAAO,OAAO,CAChE,SACC;gBACD,MAAM,iBAAiB,UAAU,CAAC,kBAAkB;gBACpD,IAAI,CAAC,gBAAgB;oBACnB,OAAO;wBACL,SAAS;wBACT,OAAO,CAAC,wCAAwC,EAAE,mBAAmB;oBACvE;gBACF;gBACA,MAAM,UAAU,cAAc,OAAO,iBAAiB,IAAI,CACxD,CAAC,kBAAoB,eAAe,QAAQ,CAAC,oBAC3C,iBAAiB,KAAK,CACxB,CAAC,kBAAoB,eAAe,QAAQ,CAAC;gBAE/C,IAAI,SAAS;oBACX,OAAO;wBAAE,SAAS;oBAAK;gBACzB;gBACA,OAAO;oBACL,SAAS;oBACT,OAAO,CAAC,iCAAiC,EAAE,kBAAkB,CAAC,CAAC;gBACjE;YACF;YACA,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;IACF;AACF;AAEA,+CAA+C;AAC/C,IAAI,oBAAoB;IACtB,cAAc;QAAC;QAAU;KAAS;IAClC,QAAQ;QAAC;QAAU;QAAU;KAAS;IACtC,YAAY;QAAC;QAAU;KAAS;AAClC;AACA,IAAI,YAAY;AAChB,IAAI,UAAU,UAAU,OAAO,CAAC;IAC9B,cAAc;QAAC;KAAS;IACxB,YAAY;QAAC;QAAU;KAAS;IAChC,QAAQ;QAAC;QAAU;QAAU;KAAS;AACxC;AACA,IAAI,UAAU,UAAU,OAAO,CAAC;IAC9B,cAAc;QAAC;QAAU;KAAS;IAClC,QAAQ;QAAC;QAAU;QAAU;KAAS;IACtC,YAAY;QAAC;QAAU;KAAS;AAClC;AACA,IAAI,WAAW,UAAU,OAAO,CAAC;IAC/B,cAAc,EAAE;IAChB,QAAQ,EAAE;IACV,YAAY,EAAE;AAChB;AACA,IAAI,eAAe;IACjB,OAAO;IACP,OAAO;IACP,QAAQ;AACV","ignoreList":[0]}},
    {"offset": {"line": 10530, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10536, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-HVHN3Y2L.js"],"sourcesContent":["// src/client/parser.ts\nvar PROTO_POLLUTION_PATTERNS = {\n  proto: /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n  constructor: /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n  protoShort: /\"__proto__\"\\s*:/,\n  constructorShort: /\"constructor\"\\s*:/\n};\nvar JSON_SIGNATURE = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nvar SPECIAL_VALUES = {\n  true: true,\n  false: false,\n  null: null,\n  undefined: void 0,\n  nan: Number.NaN,\n  infinity: Number.POSITIVE_INFINITY,\n  \"-infinity\": Number.NEGATIVE_INFINITY\n};\nvar ISO_DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\nfunction isValidDate(date) {\n  return date instanceof Date && !isNaN(date.getTime());\n}\nfunction parseISODate(value) {\n  const match = ISO_DATE_REGEX.exec(value);\n  if (!match) return null;\n  const [\n    ,\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    ms,\n    offsetSign,\n    offsetHour,\n    offsetMinute\n  ] = match;\n  let date = new Date(\n    Date.UTC(\n      parseInt(year, 10),\n      parseInt(month, 10) - 1,\n      parseInt(day, 10),\n      parseInt(hour, 10),\n      parseInt(minute, 10),\n      parseInt(second, 10),\n      ms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0\n    )\n  );\n  if (offsetSign) {\n    const offset = (parseInt(offsetHour, 10) * 60 + parseInt(offsetMinute, 10)) * (offsetSign === \"+\" ? -1 : 1);\n    date.setUTCMinutes(date.getUTCMinutes() + offset);\n  }\n  return isValidDate(date) ? date : null;\n}\nfunction betterJSONParse(value, options = {}) {\n  const {\n    strict = false,\n    warnings = false,\n    reviver,\n    parseDates = true\n  } = options;\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  const trimmed = value.trim();\n  if (trimmed[0] === '\"' && trimmed.endsWith('\"') && !trimmed.slice(1, -1).includes('\"')) {\n    return trimmed.slice(1, -1);\n  }\n  const lowerValue = trimmed.toLowerCase();\n  if (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) {\n    return SPECIAL_VALUES[lowerValue];\n  }\n  if (!JSON_SIGNATURE.test(trimmed)) {\n    if (strict) {\n      throw new SyntaxError(\"[better-json] Invalid JSON\");\n    }\n    return value;\n  }\n  const hasProtoPattern = Object.entries(PROTO_POLLUTION_PATTERNS).some(\n    ([key, pattern]) => {\n      const matches = pattern.test(trimmed);\n      if (matches && warnings) {\n        console.warn(\n          `[better-json] Detected potential prototype pollution attempt using ${key} pattern`\n        );\n      }\n      return matches;\n    }\n  );\n  if (hasProtoPattern && strict) {\n    throw new Error(\n      \"[better-json] Potential prototype pollution attempt detected\"\n    );\n  }\n  try {\n    const secureReviver = (key, value2) => {\n      if (key === \"__proto__\" || key === \"constructor\" && value2 && typeof value2 === \"object\" && \"prototype\" in value2) {\n        if (warnings) {\n          console.warn(\n            `[better-json] Dropping \"${key}\" key to prevent prototype pollution`\n          );\n        }\n        return void 0;\n      }\n      if (parseDates && typeof value2 === \"string\") {\n        const date = parseISODate(value2);\n        if (date) {\n          return date;\n        }\n      }\n      return reviver ? reviver(key, value2) : value2;\n    };\n    return JSON.parse(trimmed, secureReviver);\n  } catch (error) {\n    if (strict) {\n      throw error;\n    }\n    return value;\n  }\n}\nfunction parseJSON(value, options = { strict: true }) {\n  return betterJSONParse(value, options);\n}\nvar parser_default = parseJSON;\n\nexport { parseJSON, parser_default };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10632, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10638, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-NAAR7BAI.js"],"sourcesContent":["import { defaultRoles } from './chunk-GBLEGHZW.js';\nimport { createAuthMiddleware, sessionMiddleware, createAuthEndpoint, getSessionFromCtx, BASE_ERROR_CODES } from './chunk-FUJTYWXL.js';\nimport { parser_default } from './chunk-HVHN3Y2L.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { generateId } from './chunk-KLDFBLYL.js';\nimport { getDate } from './chunk-FURNA6HY.js';\nimport { BetterAuthError } from './chunk-UNWCXKMP.js';\nimport { APIError } from 'better-call';\nimport { z } from 'zod';\n\n// src/utils/shim.ts\nvar shimContext = (originalObject, newContext) => {\n  const shimmedObj = {};\n  for (const [key, value] of Object.entries(originalObject)) {\n    shimmedObj[key] = (ctx) => {\n      return value({\n        ...ctx,\n        context: {\n          ...newContext,\n          ...ctx.context\n        }\n      });\n    };\n    shimmedObj[key].path = value.path;\n    shimmedObj[key].method = value.method;\n    shimmedObj[key].options = value.options;\n    shimmedObj[key].headers = value.headers;\n  }\n  return shimmedObj;\n};\n\n// src/plugins/organization/adapter.ts\nvar getOrgAdapter = (context, options) => {\n  const adapter = context.adapter;\n  return {\n    findOrganizationBySlug: async (slug) => {\n      const organization2 = await adapter.findOne({\n        model: \"organization\",\n        where: [\n          {\n            field: \"slug\",\n            value: slug\n          }\n        ]\n      });\n      return organization2;\n    },\n    createOrganization: async (data) => {\n      const organization2 = await adapter.create({\n        model: \"organization\",\n        data: {\n          ...data.organization,\n          metadata: data.organization.metadata ? JSON.stringify(data.organization.metadata) : void 0\n        }\n      });\n      const member = await adapter.create({\n        model: \"member\",\n        data: {\n          organizationId: organization2.id,\n          userId: data.user.id,\n          createdAt: /* @__PURE__ */ new Date(),\n          role: options?.creatorRole || \"owner\"\n        }\n      });\n      return {\n        ...organization2,\n        metadata: organization2.metadata ? JSON.parse(organization2.metadata) : void 0,\n        members: [\n          {\n            ...member,\n            user: {\n              id: data.user.id,\n              name: data.user.name,\n              email: data.user.email,\n              image: data.user.image\n            }\n          }\n        ]\n      };\n    },\n    findMemberByEmail: async (data) => {\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            field: \"email\",\n            value: data.email\n          }\n        ]\n      });\n      if (!user) {\n        return null;\n      }\n      const member = await adapter.findOne({\n        model: \"member\",\n        where: [\n          {\n            field: \"organizationId\",\n            value: data.organizationId\n          },\n          {\n            field: \"userId\",\n            value: user.id\n          }\n        ]\n      });\n      if (!member) {\n        return null;\n      }\n      return {\n        ...member,\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          image: user.image\n        }\n      };\n    },\n    findMemberByOrgId: async (data) => {\n      const [member, user] = await Promise.all([\n        await adapter.findOne({\n          model: \"member\",\n          where: [\n            {\n              field: \"userId\",\n              value: data.userId\n            },\n            {\n              field: \"organizationId\",\n              value: data.organizationId\n            }\n          ]\n        }),\n        await adapter.findOne({\n          model: \"user\",\n          where: [\n            {\n              field: \"id\",\n              value: data.userId\n            }\n          ]\n        })\n      ]);\n      if (!user || !member) {\n        return null;\n      }\n      return {\n        ...member,\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          image: user.image\n        }\n      };\n    },\n    findMemberById: async (memberId) => {\n      const member = await adapter.findOne({\n        model: \"member\",\n        where: [\n          {\n            field: \"id\",\n            value: memberId\n          }\n        ]\n      });\n      if (!member) {\n        return null;\n      }\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: member.userId\n          }\n        ]\n      });\n      if (!user) {\n        return null;\n      }\n      return {\n        ...member,\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          image: user.image\n        }\n      };\n    },\n    createMember: async (data) => {\n      const member = await adapter.create({\n        model: \"member\",\n        data\n      });\n      return member;\n    },\n    updateMember: async (memberId, role2) => {\n      const member = await adapter.update({\n        model: \"member\",\n        where: [\n          {\n            field: \"id\",\n            value: memberId\n          }\n        ],\n        update: {\n          role: role2\n        }\n      });\n      return member;\n    },\n    deleteMember: async (memberId) => {\n      const member = await adapter.delete({\n        model: \"member\",\n        where: [\n          {\n            field: \"id\",\n            value: memberId\n          }\n        ]\n      });\n      return member;\n    },\n    updateOrganization: async (organizationId, data) => {\n      const organization2 = await adapter.update({\n        model: \"organization\",\n        where: [\n          {\n            field: \"id\",\n            value: organizationId\n          }\n        ],\n        update: {\n          ...data,\n          metadata: typeof data.metadata === \"object\" ? JSON.stringify(data.metadata) : data.metadata\n        }\n      });\n      if (!organization2) {\n        return null;\n      }\n      return {\n        ...organization2,\n        metadata: organization2.metadata ? parser_default(organization2.metadata) : void 0\n      };\n    },\n    deleteOrganization: async (organizationId) => {\n      await adapter.delete({\n        model: \"member\",\n        where: [\n          {\n            field: \"organizationId\",\n            value: organizationId\n          }\n        ]\n      });\n      await adapter.delete({\n        model: \"invitation\",\n        where: [\n          {\n            field: \"organizationId\",\n            value: organizationId\n          }\n        ]\n      });\n      await adapter.delete({\n        model: \"organization\",\n        where: [\n          {\n            field: \"id\",\n            value: organizationId\n          }\n        ]\n      });\n      return organizationId;\n    },\n    setActiveOrganization: async (sessionToken, organizationId) => {\n      const session = await context.internalAdapter.updateSession(\n        sessionToken,\n        {\n          activeOrganizationId: organizationId\n        }\n      );\n      return session;\n    },\n    findOrganizationById: async (organizationId) => {\n      const organization2 = await adapter.findOne({\n        model: \"organization\",\n        where: [\n          {\n            field: \"id\",\n            value: organizationId\n          }\n        ]\n      });\n      return organization2;\n    },\n    /**\n     * @requires db\n     */\n    findFullOrganization: async ({\n      organizationId,\n      isSlug\n    }) => {\n      const org = await adapter.findOne({\n        model: \"organization\",\n        where: [{ field: isSlug ? \"slug\" : \"id\", value: organizationId }]\n      });\n      if (!org) {\n        return null;\n      }\n      const [invitations, members] = await Promise.all([\n        adapter.findMany({\n          model: \"invitation\",\n          where: [{ field: \"organizationId\", value: org.id }]\n        }),\n        adapter.findMany({\n          model: \"member\",\n          where: [{ field: \"organizationId\", value: org.id }]\n        })\n      ]);\n      if (!org) return null;\n      const userIds = members.map((member) => member.userId);\n      const users = await adapter.findMany({\n        model: \"user\",\n        where: [{ field: \"id\", value: userIds, operator: \"in\" }]\n      });\n      const userMap = new Map(users.map((user) => [user.id, user]));\n      const membersWithUsers = members.map((member) => {\n        const user = userMap.get(member.userId);\n        if (!user) {\n          throw new BetterAuthError(\n            \"Unexpected error: User not found for member\"\n          );\n        }\n        return {\n          ...member,\n          user: {\n            id: user.id,\n            name: user.name,\n            email: user.email,\n            image: user.image\n          }\n        };\n      });\n      return {\n        ...org,\n        invitations,\n        members: membersWithUsers\n      };\n    },\n    listOrganizations: async (userId) => {\n      const members = await adapter.findMany({\n        model: \"member\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      if (!members || members.length === 0) {\n        return [];\n      }\n      const organizationIds = members.map((member) => member.organizationId);\n      const organizations = await adapter.findMany({\n        model: \"organization\",\n        where: [\n          {\n            field: \"id\",\n            value: organizationIds,\n            operator: \"in\"\n          }\n        ]\n      });\n      return organizations;\n    },\n    createInvitation: async ({\n      invitation,\n      user\n    }) => {\n      const defaultExpiration = 1e3 * 60 * 60 * 48;\n      const expiresAt = getDate(\n        options?.invitationExpiresIn || defaultExpiration\n      );\n      const invite = await adapter.create({\n        model: \"invitation\",\n        data: {\n          email: invitation.email,\n          role: invitation.role,\n          organizationId: invitation.organizationId,\n          status: \"pending\",\n          expiresAt,\n          inviterId: user.id\n        }\n      });\n      return invite;\n    },\n    findInvitationById: async (id) => {\n      const invitation = await adapter.findOne({\n        model: \"invitation\",\n        where: [\n          {\n            field: \"id\",\n            value: id\n          }\n        ]\n      });\n      return invitation;\n    },\n    findPendingInvitation: async (data) => {\n      const invitation = await adapter.findMany({\n        model: \"invitation\",\n        where: [\n          {\n            field: \"email\",\n            value: data.email\n          },\n          {\n            field: \"organizationId\",\n            value: data.organizationId\n          },\n          {\n            field: \"status\",\n            value: \"pending\"\n          }\n        ]\n      });\n      return invitation.filter(\n        (invite) => new Date(invite.expiresAt) > /* @__PURE__ */ new Date()\n      );\n    },\n    updateInvitation: async (data) => {\n      const invitation = await adapter.update({\n        model: \"invitation\",\n        where: [\n          {\n            field: \"id\",\n            value: data.invitationId\n          }\n        ],\n        update: {\n          status: data.status\n        }\n      });\n      return invitation;\n    }\n  };\n};\nvar orgMiddleware = createAuthMiddleware(async (ctx) => {\n  return {};\n});\nvar orgSessionMiddleware = createAuthMiddleware(\n  {\n    use: [sessionMiddleware]\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    return {\n      session\n    };\n  }\n);\nvar role = z.string();\nvar invitationStatus = z.enum([\"pending\", \"accepted\", \"rejected\", \"canceled\"]).default(\"pending\");\nz.object({\n  id: z.string().default(generateId),\n  name: z.string(),\n  slug: z.string(),\n  logo: z.string().nullish(),\n  metadata: z.record(z.string()).or(z.string().transform((v) => JSON.parse(v))).nullish(),\n  createdAt: z.date()\n});\nz.object({\n  id: z.string().default(generateId),\n  organizationId: z.string(),\n  userId: z.string(),\n  role,\n  createdAt: z.date()\n});\nz.object({\n  id: z.string().default(generateId),\n  organizationId: z.string(),\n  email: z.string(),\n  role,\n  status: invitationStatus,\n  /**\n   * The id of the user who invited the user.\n   */\n  inviterId: z.string(),\n  expiresAt: z.date()\n});\n\n// src/plugins/organization/error-codes.ts\nvar ORGANIZATION_ERROR_CODES = {\n  YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION: \"You are not allowed to create a new organization\",\n  YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS: \"You have reached the maximum number of organizations\",\n  ORGANIZATION_ALREADY_EXISTS: \"Organization already exists\",\n  ORGANIZATION_NOT_FOUND: \"Organization not found\",\n  USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION: \"User is not a member of the organization\",\n  YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION: \"You are not allowed to update this organization\",\n  YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION: \"You are not allowed to delete this organization\",\n  NO_ACTIVE_ORGANIZATION: \"No active organization\",\n  USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION: \"User is already a member of this organization\",\n  MEMBER_NOT_FOUND: \"Member not found\",\n  ROLE_NOT_FOUND: \"Role not found\",\n  YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER: \"You cannot leave the organization as the only owner\",\n  YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER: \"You are not allowed to delete this member\",\n  YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION: \"You are not allowed to invite users to this organization\",\n  USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION: \"User is already invited to this organization\",\n  INVITATION_NOT_FOUND: \"Invitation not found\",\n  YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION: \"You are not the recipient of the invitation\",\n  YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION: \"You are not allowed to cancel this invitation\",\n  INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION: \"Inviter is no longer a member of the organization\",\n  YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE: \"you are not allowed to invite user with this role\"\n};\n\n// src/plugins/organization/routes/crud-invites.ts\nvar createInvitation = (option) => createAuthEndpoint(\n  \"/organization/invite-member\",\n  {\n    method: \"POST\",\n    use: [orgMiddleware, orgSessionMiddleware],\n    body: z.object({\n      email: z.string({\n        description: \"The email address of the user to invite\"\n      }),\n      role: z.string({\n        description: \"The role to assign to the user\"\n      }),\n      organizationId: z.string({\n        description: \"The organization ID to invite the user to\"\n      }).optional(),\n      resend: z.boolean({\n        description: \"Resend the invitation email, if the user is already invited\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Invite a user to an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    id: {\n                      type: \"string\"\n                    },\n                    email: {\n                      type: \"string\"\n                    },\n                    role: {\n                      type: \"string\"\n                    },\n                    organizationId: {\n                      type: \"string\"\n                    },\n                    inviterId: {\n                      type: \"string\"\n                    },\n                    status: {\n                      type: \"string\"\n                    },\n                    expiresAt: {\n                      type: \"string\"\n                    }\n                  },\n                  required: [\n                    \"id\",\n                    \"email\",\n                    \"role\",\n                    \"organizationId\",\n                    \"inviterId\",\n                    \"status\",\n                    \"expiresAt\"\n                  ]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.orgOptions.sendInvitationEmail) {\n      ctx.context.logger.warn(\n        \"Invitation email is not enabled. Pass `sendInvitationEmail` to the plugin options to enable it.\"\n      );\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Invitation email is not enabled\"\n      });\n    }\n    const session = ctx.context.session;\n    const organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n    if (!organizationId) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId\n    });\n    if (!member) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n      });\n    }\n    const role2 = ctx.context.roles[member.role];\n    if (!role2) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND\n      });\n    }\n    const canInvite = role2.authorize({\n      invitation: [\"create\"]\n    });\n    if (canInvite.error) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION\n      });\n    }\n    const creatorRole = ctx.context.orgOptions.creatorRole || \"owner\";\n    if (member.role !== creatorRole && ctx.body.role === creatorRole) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE\n      });\n    }\n    const alreadyMember = await adapter.findMemberByEmail({\n      email: ctx.body.email,\n      organizationId\n    });\n    if (alreadyMember) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION\n      });\n    }\n    const alreadyInvited = await adapter.findPendingInvitation({\n      email: ctx.body.email,\n      organizationId\n    });\n    if (alreadyInvited.length && !ctx.body.resend) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION\n      });\n    }\n    const invitation = await adapter.createInvitation({\n      invitation: {\n        role: ctx.body.role,\n        email: ctx.body.email,\n        organizationId\n      },\n      user: session.user\n    });\n    const organization2 = await adapter.findOrganizationById(organizationId);\n    if (!organization2) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n      });\n    }\n    await ctx.context.orgOptions.sendInvitationEmail?.(\n      {\n        id: invitation.id,\n        role: invitation.role,\n        email: invitation.email.toLowerCase(),\n        organization: organization2,\n        inviter: {\n          ...member,\n          user: session.user\n        }\n      },\n      ctx.request\n    );\n    return ctx.json(invitation);\n  }\n);\nvar acceptInvitation = createAuthEndpoint(\n  \"/organization/accept-invitation\",\n  {\n    method: \"POST\",\n    body: z.object({\n      invitationId: z.string({\n        description: \"The ID of the invitation to accept\"\n      })\n    }),\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Accept an invitation to an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    invitation: {\n                      type: \"object\"\n                    },\n                    member: {\n                      type: \"object\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const invitation = await adapter.findInvitationById(ctx.body.invitationId);\n    if (!invitation || invitation.expiresAt < /* @__PURE__ */ new Date() || invitation.status !== \"pending\") {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND\n      });\n    }\n    if (invitation.email !== session.user.email) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION\n      });\n    }\n    const acceptedI = await adapter.updateInvitation({\n      invitationId: ctx.body.invitationId,\n      status: \"accepted\"\n    });\n    const member = await adapter.createMember({\n      organizationId: invitation.organizationId,\n      userId: session.user.id,\n      role: invitation.role,\n      createdAt: /* @__PURE__ */ new Date()\n    });\n    await adapter.setActiveOrganization(\n      session.session.token,\n      invitation.organizationId\n    );\n    if (!acceptedI) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND\n        }\n      });\n    }\n    return ctx.json({\n      invitation: acceptedI,\n      member\n    });\n  }\n);\nvar rejectInvitation = createAuthEndpoint(\n  \"/organization/reject-invitation\",\n  {\n    method: \"POST\",\n    body: z.object({\n      invitationId: z.string({\n        description: \"The ID of the invitation to reject\"\n      })\n    }),\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Reject an invitation to an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    invitation: {\n                      type: \"object\"\n                    },\n                    member: {\n                      type: \"null\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const invitation = await adapter.findInvitationById(ctx.body.invitationId);\n    if (!invitation || invitation.expiresAt < /* @__PURE__ */ new Date() || invitation.status !== \"pending\") {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Invitation not found!\"\n      });\n    }\n    if (invitation.email !== session.user.email) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION\n      });\n    }\n    const rejectedI = await adapter.updateInvitation({\n      invitationId: ctx.body.invitationId,\n      status: \"rejected\"\n    });\n    return ctx.json({\n      invitation: rejectedI,\n      member: null\n    });\n  }\n);\nvar cancelInvitation = createAuthEndpoint(\n  \"/organization/cancel-invitation\",\n  {\n    method: \"POST\",\n    body: z.object({\n      invitationId: z.string({\n        description: \"The ID of the invitation to cancel\"\n      })\n    }),\n    use: [orgMiddleware, orgSessionMiddleware],\n    openapi: {\n      description: \"Cancel an invitation to an organization\",\n      responses: {\n        \"200\": {\n          description: \"Success\",\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  invitation: {\n                    type: \"object\"\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const invitation = await adapter.findInvitationById(ctx.body.invitationId);\n    if (!invitation) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND\n      });\n    }\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId: invitation.organizationId\n    });\n    if (!member) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n      });\n    }\n    const canCancel = ctx.context.roles[member.role].authorize({\n      invitation: [\"cancel\"]\n    });\n    if (canCancel.error) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION\n      });\n    }\n    const canceledI = await adapter.updateInvitation({\n      invitationId: ctx.body.invitationId,\n      status: \"canceled\"\n    });\n    return ctx.json(canceledI);\n  }\n);\nvar getInvitation = createAuthEndpoint(\n  \"/organization/get-invitation\",\n  {\n    method: \"GET\",\n    use: [orgMiddleware],\n    requireHeaders: true,\n    query: z.object({\n      id: z.string({\n        description: \"The ID of the invitation to get\"\n      })\n    }),\n    metadata: {\n      openapi: {\n        description: \"Get an invitation by ID\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    id: {\n                      type: \"string\"\n                    },\n                    email: {\n                      type: \"string\"\n                    },\n                    role: {\n                      type: \"string\"\n                    },\n                    organizationId: {\n                      type: \"string\"\n                    },\n                    inviterId: {\n                      type: \"string\"\n                    },\n                    status: {\n                      type: \"string\"\n                    },\n                    expiresAt: {\n                      type: \"string\"\n                    },\n                    organizationName: {\n                      type: \"string\"\n                    },\n                    organizationSlug: {\n                      type: \"string\"\n                    },\n                    inviterEmail: {\n                      type: \"string\"\n                    }\n                  },\n                  required: [\n                    \"id\",\n                    \"email\",\n                    \"role\",\n                    \"organizationId\",\n                    \"inviterId\",\n                    \"status\",\n                    \"expiresAt\",\n                    \"organizationName\",\n                    \"organizationSlug\",\n                    \"inviterEmail\"\n                  ]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = await getSessionFromCtx(ctx);\n    if (!session) {\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: \"Not authenticated\"\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const invitation = await adapter.findInvitationById(ctx.query.id);\n    if (!invitation || invitation.status !== \"pending\" || invitation.expiresAt < /* @__PURE__ */ new Date()) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Invitation not found!\"\n      });\n    }\n    if (invitation.email !== session.user.email) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION\n      });\n    }\n    const organization2 = await adapter.findOrganizationById(\n      invitation.organizationId\n    );\n    if (!organization2) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n      });\n    }\n    const member = await adapter.findMemberByOrgId({\n      userId: invitation.inviterId,\n      organizationId: invitation.organizationId\n    });\n    if (!member) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION\n      });\n    }\n    return ctx.json({\n      ...invitation,\n      organizationName: organization2.name,\n      organizationSlug: organization2.slug,\n      inviterEmail: member.user.email\n    });\n  }\n);\nvar addMember = () => createAuthEndpoint(\n  \"/organization/add-member\",\n  {\n    method: \"POST\",\n    body: z.object({\n      userId: z.string(),\n      role: z.string(),\n      organizationId: z.string().optional()\n    }),\n    use: [orgMiddleware],\n    metadata: {\n      SERVER_ONLY: true\n    }\n  },\n  async (ctx) => {\n    const session = ctx.body.userId ? await getSessionFromCtx(ctx).catch((e) => null) : null;\n    const orgId = ctx.body.organizationId || session?.session.activeOrganizationId;\n    if (!orgId) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION\n        }\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const user = await ctx.context.internalAdapter.findUserById(\n      ctx.body.userId\n    );\n    if (!user) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.USER_NOT_FOUND\n      });\n    }\n    const alreadyMember = await adapter.findMemberByEmail({\n      email: user.email,\n      organizationId: orgId\n    });\n    if (alreadyMember) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION\n      });\n    }\n    const createdMember = await adapter.createMember({\n      id: generateId(),\n      organizationId: orgId,\n      userId: user.id,\n      role: ctx.body.role,\n      createdAt: /* @__PURE__ */ new Date()\n    });\n    return ctx.json(createdMember);\n  }\n);\nvar removeMember = createAuthEndpoint(\n  \"/organization/remove-member\",\n  {\n    method: \"POST\",\n    body: z.object({\n      memberIdOrEmail: z.string({\n        description: \"The ID or email of the member to remove\"\n      }),\n      /**\n       * If not provided, the active organization will be used\n       */\n      organizationId: z.string({\n        description: \"The ID of the organization to remove the member from. If not provided, the active organization will be used\"\n      }).optional()\n    }),\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Remove a member from an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    member: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\"\n                        },\n                        userId: {\n                          type: \"string\"\n                        },\n                        organizationId: {\n                          type: \"string\"\n                        },\n                        role: {\n                          type: \"string\"\n                        }\n                      },\n                      required: [\"id\", \"userId\", \"organizationId\", \"role\"]\n                    }\n                  },\n                  required: [\"member\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n    if (!organizationId) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION\n        }\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId\n    });\n    if (!member) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n      });\n    }\n    const role2 = ctx.context.roles[member.role];\n    if (!role2) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND\n      });\n    }\n    const isLeaving = session.user.email === ctx.body.memberIdOrEmail || member.id === ctx.body.memberIdOrEmail;\n    const isOwnerLeaving = isLeaving && member.role === (ctx.context.orgOptions?.creatorRole || \"owner\");\n    if (isOwnerLeaving) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER\n      });\n    }\n    const canDeleteMember = isLeaving || role2.authorize({\n      member: [\"delete\"]\n    }).success;\n    if (!canDeleteMember) {\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER\n      });\n    }\n    let existing = null;\n    if (ctx.body.memberIdOrEmail.includes(\"@\")) {\n      existing = await adapter.findMemberByEmail({\n        email: ctx.body.memberIdOrEmail,\n        organizationId\n      });\n    } else {\n      existing = await adapter.findMemberById(ctx.body.memberIdOrEmail);\n    }\n    if (existing?.organizationId !== organizationId) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n      });\n    }\n    await adapter.deleteMember(existing.id);\n    if (session.user.id === existing.userId && session.session.activeOrganizationId === existing.organizationId) {\n      await adapter.setActiveOrganization(session.session.token, null);\n    }\n    return ctx.json({\n      member: existing\n    });\n  }\n);\nvar updateMemberRole = (option) => createAuthEndpoint(\n  \"/organization/update-member-role\",\n  {\n    method: \"POST\",\n    body: z.object({\n      role: z.string(),\n      memberId: z.string(),\n      /**\n       * If not provided, the active organization will be used\n       */\n      organizationId: z.string().optional()\n    }),\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Update the role of a member in an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    member: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\"\n                        },\n                        userId: {\n                          type: \"string\"\n                        },\n                        organizationId: {\n                          type: \"string\"\n                        },\n                        role: {\n                          type: \"string\"\n                        }\n                      },\n                      required: [\"id\", \"userId\", \"organizationId\", \"role\"]\n                    }\n                  },\n                  required: [\"member\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n    if (!organizationId) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION\n        }\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId\n    });\n    if (!member) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n        }\n      });\n    }\n    const role2 = ctx.context.roles[member.role];\n    if (!role2) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND\n        }\n      });\n    }\n    const canUpdateMember = role2.authorize({\n      member: [\"update\"]\n    }).error || ctx.body.role === \"owner\" && member.role !== \"owner\";\n    if (canUpdateMember) {\n      return ctx.json(null, {\n        body: {\n          message: \"You are not allowed to update this member\"\n        },\n        status: 403\n      });\n    }\n    const updatedMember = await adapter.updateMember(\n      ctx.body.memberId,\n      ctx.body.role\n    );\n    if (!updatedMember) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n        }\n      });\n    }\n    return ctx.json(updatedMember);\n  }\n);\nvar getActiveMember = createAuthEndpoint(\n  \"/organization/get-active-member\",\n  {\n    method: \"GET\",\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Get the active member in the organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    id: {\n                      type: \"string\"\n                    },\n                    userId: {\n                      type: \"string\"\n                    },\n                    organizationId: {\n                      type: \"string\"\n                    },\n                    role: {\n                      type: \"string\"\n                    }\n                  },\n                  required: [\"id\", \"userId\", \"organizationId\", \"role\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const organizationId = session.session.activeOrganizationId;\n    if (!organizationId) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION\n        }\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId\n    });\n    if (!member) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND\n        }\n      });\n    }\n    return ctx.json(member);\n  }\n);\nvar createOrganization = createAuthEndpoint(\n  \"/organization/create\",\n  {\n    method: \"POST\",\n    body: z.object({\n      name: z.string({\n        description: \"The name of the organization\"\n      }),\n      slug: z.string({\n        description: \"The slug of the organization\"\n      }),\n      userId: z.string({\n        description: \"The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server.\"\n      }).optional(),\n      logo: z.string({\n        description: \"The logo of the organization\"\n      }).optional(),\n      metadata: z.record(z.string(), z.any(), {\n        description: \"The metadata of the organization\"\n      }).optional()\n    }),\n    use: [orgMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Create an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  description: \"The organization that was created\",\n                  $ref: \"#/components/schemas/Organization\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = await getSessionFromCtx(ctx);\n    if (!session && (ctx.request || ctx.headers)) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    let user = session?.user || null;\n    if (!user) {\n      if (!ctx.body.userId) {\n        throw new APIError(\"UNAUTHORIZED\");\n      }\n      user = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n    }\n    if (!user) {\n      return ctx.json(null, {\n        status: 401\n      });\n    }\n    const options = ctx.context.orgOptions;\n    const canCreateOrg = typeof options?.allowUserToCreateOrganization === \"function\" ? await options.allowUserToCreateOrganization(user) : options?.allowUserToCreateOrganization === void 0 ? true : options.allowUserToCreateOrganization;\n    if (!canCreateOrg) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, options);\n    const userOrganizations = await adapter.listOrganizations(user.id);\n    const hasReachedOrgLimit = typeof options.organizationLimit === \"number\" ? userOrganizations.length >= options.organizationLimit : typeof options.organizationLimit === \"function\" ? await options.organizationLimit(user) : false;\n    if (hasReachedOrgLimit) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS\n      });\n    }\n    const existingOrganization = await adapter.findOrganizationBySlug(\n      ctx.body.slug\n    );\n    if (existingOrganization) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ORGANIZATION_ALREADY_EXISTS\n      });\n    }\n    const organization2 = await adapter.createOrganization({\n      organization: {\n        id: generateId(),\n        slug: ctx.body.slug,\n        name: ctx.body.name,\n        logo: ctx.body.logo,\n        createdAt: /* @__PURE__ */ new Date(),\n        metadata: ctx.body.metadata\n      },\n      user\n    });\n    if (ctx.context.session) {\n      await adapter.setActiveOrganization(\n        ctx.context.session.session.token,\n        organization2.id\n      );\n    }\n    return ctx.json(organization2);\n  }\n);\nvar updateOrganization = createAuthEndpoint(\n  \"/organization/update\",\n  {\n    method: \"POST\",\n    body: z.object({\n      data: z.object({\n        name: z.string({\n          description: \"The name of the organization\"\n        }).optional(),\n        slug: z.string({\n          description: \"The slug of the organization\"\n        }).optional(),\n        logo: z.string({\n          description: \"The logo of the organization\"\n        }).optional(),\n        metadata: z.record(z.string(), z.any(), {\n          description: \"The metadata of the organization\"\n        }).optional()\n      }).partial(),\n      organizationId: z.string().optional()\n    }),\n    requireHeaders: true,\n    use: [orgMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Update an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  description: \"The updated organization\",\n                  $ref: \"#/components/schemas/Organization\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = await ctx.context.getSession(ctx);\n    if (!session) {\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: \"User not found\"\n      });\n    }\n    const organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n    if (!organizationId) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n        }\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId\n    });\n    if (!member) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION\n        }\n      });\n    }\n    const role2 = ctx.context.roles[member.role];\n    if (!role2) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: \"Role not found!\"\n        }\n      });\n    }\n    const canUpdateOrg = role2.authorize({\n      organization: [\"update\"]\n    });\n    if (canUpdateOrg.error) {\n      return ctx.json(null, {\n        body: {\n          message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION\n        },\n        status: 403\n      });\n    }\n    const updatedOrg = await adapter.updateOrganization(\n      organizationId,\n      ctx.body.data\n    );\n    return ctx.json(updatedOrg);\n  }\n);\nvar deleteOrganization = createAuthEndpoint(\n  \"/organization/delete\",\n  {\n    method: \"POST\",\n    body: z.object({\n      organizationId: z.string({\n        description: \"The organization id to delete\"\n      })\n    }),\n    requireHeaders: true,\n    use: [orgMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Delete an organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"string\",\n                  description: \"The organization id that was deleted\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = await ctx.context.getSession(ctx);\n    if (!session) {\n      return ctx.json(null, {\n        status: 401\n      });\n    }\n    const organizationId = ctx.body.organizationId;\n    if (!organizationId) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n        }\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const member = await adapter.findMemberByOrgId({\n      userId: session.user.id,\n      organizationId\n    });\n    if (!member) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION\n        }\n      });\n    }\n    const role2 = ctx.context.roles[member.role];\n    if (!role2) {\n      return ctx.json(null, {\n        status: 400,\n        body: {\n          message: \"Role not found!\"\n        }\n      });\n    }\n    const canDeleteOrg = role2.authorize({\n      organization: [\"delete\"]\n    });\n    if (canDeleteOrg.error) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION\n      });\n    }\n    if (organizationId === session.session.activeOrganizationId) {\n      await adapter.setActiveOrganization(session.session.token, null);\n    }\n    const option = ctx.context.orgOptions.organizationDeletion;\n    if (option?.disabled) {\n      throw new APIError(\"FORBIDDEN\");\n    }\n    const org = await adapter.findOrganizationById(organizationId);\n    if (!org) {\n      throw new APIError(\"BAD_REQUEST\");\n    }\n    if (option?.beforeDelete) {\n      await option.beforeDelete({\n        organization: org,\n        user: session.user\n      });\n    }\n    await adapter.deleteOrganization(organizationId);\n    if (option?.afterDelete) {\n      await option.afterDelete({\n        organization: org,\n        user: session.user\n      });\n    }\n    return ctx.json(org);\n  }\n);\nvar getFullOrganization = createAuthEndpoint(\n  \"/organization/get-full-organization\",\n  {\n    method: \"GET\",\n    query: z.optional(\n      z.object({\n        organizationId: z.string({\n          description: \"The organization id to get\"\n        }).optional(),\n        organizationSlug: z.string({\n          description: \"The organization slug to get\"\n        }).optional()\n      })\n    ),\n    requireHeaders: true,\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Get the full organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  description: \"The organization\",\n                  $ref: \"#/components/schemas/Organization\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    const organizationId = ctx.query?.organizationSlug || ctx.query?.organizationId || session.session.activeOrganizationId;\n    if (!organizationId) {\n      return ctx.json(null, {\n        status: 200\n      });\n    }\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const organization2 = await adapter.findFullOrganization({\n      organizationId,\n      isSlug: !!ctx.query?.organizationSlug\n    });\n    const isMember = organization2?.members.find(\n      (member) => member.userId === session.user.id\n    );\n    if (!isMember) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION\n      });\n    }\n    if (!organization2) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n      });\n    }\n    return ctx.json(organization2);\n  }\n);\nvar setActiveOrganization = createAuthEndpoint(\n  \"/organization/set-active\",\n  {\n    method: \"POST\",\n    body: z.object({\n      organizationId: z.string({\n        description: \"The organization id to set as active. It can be null to unset the active organization\"\n      }).nullable().optional(),\n      organizationSlug: z.string({\n        description: \"The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided\"\n      }).optional()\n    }),\n    use: [orgSessionMiddleware, orgMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Set the active organization\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  description: \"The organization\",\n                  $ref: \"#/components/schemas/Organization\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const session = ctx.context.session;\n    let organizationId = ctx.body.organizationSlug || ctx.body.organizationId;\n    if (organizationId === null) {\n      const sessionOrgId = session.session.activeOrganizationId;\n      if (!sessionOrgId) {\n        return ctx.json(null);\n      }\n      const updatedSession2 = await adapter.setActiveOrganization(\n        session.session.token,\n        null\n      );\n      await setSessionCookie(ctx, {\n        session: updatedSession2,\n        user: session.user\n      });\n      return ctx.json(null);\n    }\n    if (!organizationId) {\n      const sessionOrgId = session.session.activeOrganizationId;\n      if (!sessionOrgId) {\n        return ctx.json(null);\n      }\n      organizationId = sessionOrgId;\n    }\n    const organization2 = await adapter.findFullOrganization({\n      organizationId,\n      isSlug: !!ctx.body.organizationSlug\n    });\n    const isMember = organization2?.members.find(\n      (member) => member.userId === session.user.id\n    );\n    if (!isMember) {\n      await adapter.setActiveOrganization(session.session.token, null);\n      throw new APIError(\"FORBIDDEN\", {\n        message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION\n      });\n    }\n    if (!organization2) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND\n      });\n    }\n    const updatedSession = await adapter.setActiveOrganization(\n      session.session.token,\n      organization2.id\n    );\n    await setSessionCookie(ctx, {\n      session: updatedSession,\n      user: session.user\n    });\n    return ctx.json(organization2);\n  }\n);\nvar listOrganizations = createAuthEndpoint(\n  \"/organization/list\",\n  {\n    method: \"GET\",\n    use: [orgMiddleware, orgSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"List all organizations\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    $ref: \"#/components/schemas/Organization\"\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n    const organizations = await adapter.listOrganizations(\n      ctx.context.session.user.id\n    );\n    return ctx.json(organizations);\n  }\n);\n\n// src/plugins/organization/organization.ts\nvar organization = (options) => {\n  const endpoints = {\n    createOrganization,\n    updateOrganization,\n    deleteOrganization,\n    setActiveOrganization,\n    getFullOrganization,\n    listOrganizations,\n    createInvitation: createInvitation(),\n    cancelInvitation,\n    acceptInvitation,\n    getInvitation,\n    rejectInvitation,\n    addMember: addMember(),\n    removeMember,\n    updateMemberRole: updateMemberRole(),\n    getActiveMember\n  };\n  const roles = {\n    ...defaultRoles,\n    ...options?.roles\n  };\n  const api = shimContext(endpoints, {\n    orgOptions: options || {},\n    roles,\n    getSession: async (context) => {\n      return await getSessionFromCtx(context);\n    }\n  });\n  return {\n    id: \"organization\",\n    endpoints: {\n      ...api,\n      hasPermission: createAuthEndpoint(\n        \"/organization/has-permission\",\n        {\n          method: \"POST\",\n          requireHeaders: true,\n          body: z.object({\n            organizationId: z.string().optional(),\n            permission: z.record(z.string(), z.array(z.string()))\n          }),\n          use: [orgSessionMiddleware],\n          metadata: {\n            openapi: {\n              description: \"Check if the user has permission\",\n              requestBody: {\n                content: {\n                  \"application/json\": {\n                    schema: {\n                      type: \"object\",\n                      properties: {\n                        permission: {\n                          type: \"object\",\n                          description: \"The permission to check\"\n                        }\n                      },\n                      required: [\"permission\"]\n                    }\n                  }\n                }\n              },\n              responses: {\n                \"200\": {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          error: {\n                            type: \"string\"\n                          },\n                          success: {\n                            type: \"boolean\"\n                          }\n                        },\n                        required: [\"success\"]\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          if (!ctx.body.permission || Object.keys(ctx.body.permission).length > 1) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"invalid permission check. you can only check one resource permission at a time.\"\n            });\n          }\n          const activeOrganizationId = ctx.body.organizationId || ctx.context.session.session.activeOrganizationId;\n          if (!activeOrganizationId) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION\n            });\n          }\n          const adapter = getOrgAdapter(ctx.context);\n          const member = await adapter.findMemberByOrgId({\n            userId: ctx.context.session.user.id,\n            organizationId: activeOrganizationId\n          });\n          if (!member) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION\n            });\n          }\n          const role2 = roles[member.role];\n          const result = role2.authorize(ctx.body.permission);\n          if (result.error) {\n            return ctx.json(\n              {\n                error: result.error,\n                success: false\n              },\n              {\n                status: 403\n              }\n            );\n          }\n          return ctx.json({\n            error: null,\n            success: true\n          });\n        }\n      )\n    },\n    schema: {\n      session: {\n        fields: {\n          activeOrganizationId: {\n            type: \"string\",\n            required: false,\n            fieldName: options?.schema?.session?.fields?.activeOrganizationId\n          }\n        }\n      },\n      organization: {\n        modelName: options?.schema?.organization?.modelName,\n        fields: {\n          name: {\n            type: \"string\",\n            required: true,\n            sortable: true,\n            fieldName: options?.schema?.organization?.fields?.name\n          },\n          slug: {\n            type: \"string\",\n            unique: true,\n            sortable: true,\n            fieldName: options?.schema?.organization?.fields?.slug\n          },\n          logo: {\n            type: \"string\",\n            required: false,\n            fieldName: options?.schema?.organization?.fields?.logo\n          },\n          createdAt: {\n            type: \"date\",\n            required: true,\n            fieldName: options?.schema?.organization?.fields?.createdAt\n          },\n          metadata: {\n            type: \"string\",\n            required: false,\n            fieldName: options?.schema?.organization?.fields?.metadata\n          }\n        }\n      },\n      member: {\n        modelName: options?.schema?.member?.modelName,\n        fields: {\n          organizationId: {\n            type: \"string\",\n            required: true,\n            references: {\n              model: \"organization\",\n              field: \"id\"\n            },\n            fieldName: options?.schema?.member?.fields?.organizationId\n          },\n          userId: {\n            type: \"string\",\n            required: true,\n            fieldName: options?.schema?.member?.fields?.userId,\n            references: {\n              model: \"user\",\n              field: \"id\"\n            }\n          },\n          role: {\n            type: \"string\",\n            required: true,\n            sortable: true,\n            defaultValue: \"member\",\n            fieldName: options?.schema?.member?.fields?.role\n          },\n          createdAt: {\n            type: \"date\",\n            required: true,\n            fieldName: options?.schema?.member?.fields?.createdAt\n          }\n        }\n      },\n      invitation: {\n        modelName: options?.schema?.invitation?.modelName,\n        fields: {\n          organizationId: {\n            type: \"string\",\n            required: true,\n            references: {\n              model: \"organization\",\n              field: \"id\"\n            },\n            fieldName: options?.schema?.invitation?.fields?.organizationId\n          },\n          email: {\n            type: \"string\",\n            required: true,\n            sortable: true,\n            fieldName: options?.schema?.invitation?.fields?.email\n          },\n          role: {\n            type: \"string\",\n            required: false,\n            sortable: true,\n            fieldName: options?.schema?.invitation?.fields?.role\n          },\n          status: {\n            type: \"string\",\n            required: true,\n            sortable: true,\n            defaultValue: \"pending\",\n            fieldName: options?.schema?.invitation?.fields?.status\n          },\n          expiresAt: {\n            type: \"date\",\n            required: true,\n            fieldName: options?.schema?.invitation?.fields?.expiresAt\n          },\n          inviterId: {\n            type: \"string\",\n            references: {\n              model: \"user\",\n              field: \"id\"\n            },\n            fieldName: options?.schema?.invitation?.fields?.inviterId,\n            required: true\n          }\n        }\n      }\n    },\n    $Infer: {\n      Organization: {},\n      Invitation: {},\n      Member: {},\n      ActiveOrganization: {}\n    },\n    $ERROR_CODES: ORGANIZATION_ERROR_CODES\n  };\n};\n\nexport { organization };\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAOA;;;;;;;;;;AAEA,oBAAoB;AACpB,IAAI,cAAc,CAAC,gBAAgB;IACjC,MAAM,aAAa,CAAC;IACpB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,gBAAiB;QACzD,UAAU,CAAC,IAAI,GAAG,CAAC;YACjB,OAAO,MAAM;gBACX,GAAG,GAAG;gBACN,SAAS;oBACP,GAAG,UAAU;oBACb,GAAG,IAAI,OAAO;gBAChB;YACF;QACF;QACA,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;QACjC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,MAAM;QACrC,UAAU,CAAC,IAAI,CAAC,OAAO,GAAG,MAAM,OAAO;QACvC,UAAU,CAAC,IAAI,CAAC,OAAO,GAAG,MAAM,OAAO;IACzC;IACA,OAAO;AACT;AAEA,sCAAsC;AACtC,IAAI,gBAAgB,CAAC,SAAS;IAC5B,MAAM,UAAU,QAAQ,OAAO;IAC/B,OAAO;QACL,wBAAwB,OAAO;YAC7B,MAAM,gBAAgB,MAAM,QAAQ,OAAO,CAAC;gBAC1C,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,OAAO;QACT;QACA,oBAAoB,OAAO;YACzB,MAAM,gBAAgB,MAAM,QAAQ,MAAM,CAAC;gBACzC,OAAO;gBACP,MAAM;oBACJ,GAAG,KAAK,YAAY;oBACpB,UAAU,KAAK,YAAY,CAAC,QAAQ,GAAG,KAAK,SAAS,CAAC,KAAK,YAAY,CAAC,QAAQ,IAAI,KAAK;gBAC3F;YACF;YACA,MAAM,SAAS,MAAM,QAAQ,MAAM,CAAC;gBAClC,OAAO;gBACP,MAAM;oBACJ,gBAAgB,cAAc,EAAE;oBAChC,QAAQ,KAAK,IAAI,CAAC,EAAE;oBACpB,WAAW,aAAa,GAAG,IAAI;oBAC/B,MAAM,SAAS,eAAe;gBAChC;YACF;YACA,OAAO;gBACL,GAAG,aAAa;gBAChB,UAAU,cAAc,QAAQ,GAAG,KAAK,KAAK,CAAC,cAAc,QAAQ,IAAI,KAAK;gBAC7E,SAAS;oBACP;wBACE,GAAG,MAAM;wBACT,MAAM;4BACJ,IAAI,KAAK,IAAI,CAAC,EAAE;4BAChB,MAAM,KAAK,IAAI,CAAC,IAAI;4BACpB,OAAO,KAAK,IAAI,CAAC,KAAK;4BACtB,OAAO,KAAK,IAAI,CAAC,KAAK;wBACxB;oBACF;iBACD;YACH;QACF;QACA,mBAAmB,OAAO;YACxB,MAAM,OAAO,MAAM,QAAQ,OAAO,CAAC;gBACjC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO,KAAK,KAAK;oBACnB;iBACD;YACH;YACA,IAAI,CAAC,MAAM;gBACT,OAAO;YACT;YACA,MAAM,SAAS,MAAM,QAAQ,OAAO,CAAC;gBACnC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO,KAAK,cAAc;oBAC5B;oBACA;wBACE,OAAO;wBACP,OAAO,KAAK,EAAE;oBAChB;iBACD;YACH;YACA,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YACA,OAAO;gBACL,GAAG,MAAM;gBACT,MAAM;oBACJ,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,OAAO,KAAK,KAAK;gBACnB;YACF;QACF;QACA,mBAAmB,OAAO;YACxB,MAAM,CAAC,QAAQ,KAAK,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACvC,MAAM,QAAQ,OAAO,CAAC;oBACpB,OAAO;oBACP,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,KAAK,MAAM;wBACpB;wBACA;4BACE,OAAO;4BACP,OAAO,KAAK,cAAc;wBAC5B;qBACD;gBACH;gBACA,MAAM,QAAQ,OAAO,CAAC;oBACpB,OAAO;oBACP,OAAO;wBACL;4BACE,OAAO;4BACP,OAAO,KAAK,MAAM;wBACpB;qBACD;gBACH;aACD;YACD,IAAI,CAAC,QAAQ,CAAC,QAAQ;gBACpB,OAAO;YACT;YACA,OAAO;gBACL,GAAG,MAAM;gBACT,MAAM;oBACJ,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,OAAO,KAAK,KAAK;gBACnB;YACF;QACF;QACA,gBAAgB,OAAO;YACrB,MAAM,SAAS,MAAM,QAAQ,OAAO,CAAC;gBACnC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YACA,MAAM,OAAO,MAAM,QAAQ,OAAO,CAAC;gBACjC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO,OAAO,MAAM;oBACtB;iBACD;YACH;YACA,IAAI,CAAC,MAAM;gBACT,OAAO;YACT;YACA,OAAO;gBACL,GAAG,MAAM;gBACT,MAAM;oBACJ,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,OAAO,KAAK,KAAK;gBACnB;YACF;QACF;QACA,cAAc,OAAO;YACnB,MAAM,SAAS,MAAM,QAAQ,MAAM,CAAC;gBAClC,OAAO;gBACP;YACF;YACA,OAAO;QACT;QACA,cAAc,OAAO,UAAU;YAC7B,MAAM,SAAS,MAAM,QAAQ,MAAM,CAAC;gBAClC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;gBACD,QAAQ;oBACN,MAAM;gBACR;YACF;YACA,OAAO;QACT;QACA,cAAc,OAAO;YACnB,MAAM,SAAS,MAAM,QAAQ,MAAM,CAAC;gBAClC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,OAAO;QACT;QACA,oBAAoB,OAAO,gBAAgB;YACzC,MAAM,gBAAgB,MAAM,QAAQ,MAAM,CAAC;gBACzC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;gBACD,QAAQ;oBACN,GAAG,IAAI;oBACP,UAAU,OAAO,KAAK,QAAQ,KAAK,WAAW,KAAK,SAAS,CAAC,KAAK,QAAQ,IAAI,KAAK,QAAQ;gBAC7F;YACF;YACA,IAAI,CAAC,eAAe;gBAClB,OAAO;YACT;YACA,OAAO;gBACL,GAAG,aAAa;gBAChB,UAAU,cAAc,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,iBAAc,AAAD,EAAE,cAAc,QAAQ,IAAI,KAAK;YACnF;QACF;QACA,oBAAoB,OAAO;YACzB,MAAM,QAAQ,MAAM,CAAC;gBACnB,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,MAAM,QAAQ,MAAM,CAAC;gBACnB,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,MAAM,QAAQ,MAAM,CAAC;gBACnB,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,OAAO;QACT;QACA,uBAAuB,OAAO,cAAc;YAC1C,MAAM,UAAU,MAAM,QAAQ,eAAe,CAAC,aAAa,CACzD,cACA;gBACE,sBAAsB;YACxB;YAEF,OAAO;QACT;QACA,sBAAsB,OAAO;YAC3B,MAAM,gBAAgB,MAAM,QAAQ,OAAO,CAAC;gBAC1C,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,OAAO;QACT;QACA;;KAEC,GACD,sBAAsB,OAAO,EAC3B,cAAc,EACd,MAAM,EACP;YACC,MAAM,MAAM,MAAM,QAAQ,OAAO,CAAC;gBAChC,OAAO;gBACP,OAAO;oBAAC;wBAAE,OAAO,SAAS,SAAS;wBAAM,OAAO;oBAAe;iBAAE;YACnE;YACA,IAAI,CAAC,KAAK;gBACR,OAAO;YACT;YACA,MAAM,CAAC,aAAa,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC/C,QAAQ,QAAQ,CAAC;oBACf,OAAO;oBACP,OAAO;wBAAC;4BAAE,OAAO;4BAAkB,OAAO,IAAI,EAAE;wBAAC;qBAAE;gBACrD;gBACA,QAAQ,QAAQ,CAAC;oBACf,OAAO;oBACP,OAAO;wBAAC;4BAAE,OAAO;4BAAkB,OAAO,IAAI,EAAE;wBAAC;qBAAE;gBACrD;aACD;YACD,IAAI,CAAC,KAAK,OAAO;YACjB,MAAM,UAAU,QAAQ,GAAG,CAAC,CAAC,SAAW,OAAO,MAAM;YACrD,MAAM,QAAQ,MAAM,QAAQ,QAAQ,CAAC;gBACnC,OAAO;gBACP,OAAO;oBAAC;wBAAE,OAAO;wBAAM,OAAO;wBAAS,UAAU;oBAAK;iBAAE;YAC1D;YACA,MAAM,UAAU,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,OAAS;oBAAC,KAAK,EAAE;oBAAE;iBAAK;YAC3D,MAAM,mBAAmB,QAAQ,GAAG,CAAC,CAAC;gBACpC,MAAM,OAAO,QAAQ,GAAG,CAAC,OAAO,MAAM;gBACtC,IAAI,CAAC,MAAM;oBACT,MAAM,IAAI,6JAAA,CAAA,kBAAe,CACvB;gBAEJ;gBACA,OAAO;oBACL,GAAG,MAAM;oBACT,MAAM;wBACJ,IAAI,KAAK,EAAE;wBACX,MAAM,KAAK,IAAI;wBACf,OAAO,KAAK,KAAK;wBACjB,OAAO,KAAK,KAAK;oBACnB;gBACF;YACF;YACA,OAAO;gBACL,GAAG,GAAG;gBACN;gBACA,SAAS;YACX;QACF;QACA,mBAAmB,OAAO;YACxB,MAAM,UAAU,MAAM,QAAQ,QAAQ,CAAC;gBACrC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG;gBACpC,OAAO,EAAE;YACX;YACA,MAAM,kBAAkB,QAAQ,GAAG,CAAC,CAAC,SAAW,OAAO,cAAc;YACrE,MAAM,gBAAgB,MAAM,QAAQ,QAAQ,CAAC;gBAC3C,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;wBACP,UAAU;oBACZ;iBACD;YACH;YACA,OAAO;QACT;QACA,kBAAkB,OAAO,EACvB,UAAU,EACV,IAAI,EACL;YACC,MAAM,oBAAoB,MAAM,KAAK,KAAK;YAC1C,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD,EACtB,SAAS,uBAAuB;YAElC,MAAM,SAAS,MAAM,QAAQ,MAAM,CAAC;gBAClC,OAAO;gBACP,MAAM;oBACJ,OAAO,WAAW,KAAK;oBACvB,MAAM,WAAW,IAAI;oBACrB,gBAAgB,WAAW,cAAc;oBACzC,QAAQ;oBACR;oBACA,WAAW,KAAK,EAAE;gBACpB;YACF;YACA,OAAO;QACT;QACA,oBAAoB,OAAO;YACzB,MAAM,aAAa,MAAM,QAAQ,OAAO,CAAC;gBACvC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,OAAO;QACT;QACA,uBAAuB,OAAO;YAC5B,MAAM,aAAa,MAAM,QAAQ,QAAQ,CAAC;gBACxC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO,KAAK,KAAK;oBACnB;oBACA;wBACE,OAAO;wBACP,OAAO,KAAK,cAAc;oBAC5B;oBACA;wBACE,OAAO;wBACP,OAAO;oBACT;iBACD;YACH;YACA,OAAO,WAAW,MAAM,CACtB,CAAC,SAAW,IAAI,KAAK,OAAO,SAAS,IAAI,aAAa,GAAG,IAAI;QAEjE;QACA,kBAAkB,OAAO;YACvB,MAAM,aAAa,MAAM,QAAQ,MAAM,CAAC;gBACtC,OAAO;gBACP,OAAO;oBACL;wBACE,OAAO;wBACP,OAAO,KAAK,YAAY;oBAC1B;iBACD;gBACD,QAAQ;oBACN,QAAQ,KAAK,MAAM;gBACrB;YACF;YACA,OAAO;QACT;IACF;AACF;AACA,IAAI,gBAAgB,CAAA,GAAA,6KAAA,CAAA,uBAAoB,AAAD,EAAE,OAAO;IAC9C,OAAO,CAAC;AACV;AACA,IAAI,uBAAuB,CAAA,GAAA,6KAAA,CAAA,uBAAoB,AAAD,EAC5C;IACE,KAAK;QAAC,6KAAA,CAAA,oBAAiB;KAAC;AAC1B,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,OAAO;QACL;IACF;AACF;AAEF,IAAI,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;AACnB,IAAI,mBAAmB,sIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;IAAC;IAAW;IAAY;IAAY;CAAW,EAAE,OAAO,CAAC;AACvF,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACP,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC,6JAAA,CAAA,aAAU;IACjC,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;IACd,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO;IACxB,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,EAAE,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,IAAM,KAAK,KAAK,CAAC,KAAK,OAAO;IACrF,WAAW,sIAAA,CAAA,IAAC,CAAC,IAAI;AACnB;AACA,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACP,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC,6JAAA,CAAA,aAAU;IACjC,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM;IACxB,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;IAChB;IACA,WAAW,sIAAA,CAAA,IAAC,CAAC,IAAI;AACnB;AACA,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACP,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC,6JAAA,CAAA,aAAU;IACjC,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM;IACxB,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM;IACf;IACA,QAAQ;IACR;;GAEC,GACD,WAAW,sIAAA,CAAA,IAAC,CAAC,MAAM;IACnB,WAAW,sIAAA,CAAA,IAAC,CAAC,IAAI;AACnB;AAEA,0CAA0C;AAC1C,IAAI,2BAA2B;IAC7B,kDAAkD;IAClD,sDAAsD;IACtD,6BAA6B;IAC7B,wBAAwB;IACxB,0CAA0C;IAC1C,iDAAiD;IACjD,iDAAiD;IACjD,wBAAwB;IACxB,+CAA+C;IAC/C,kBAAkB;IAClB,gBAAgB;IAChB,qDAAqD;IACrD,2CAA2C;IAC3C,0DAA0D;IAC1D,8CAA8C;IAC9C,sBAAsB;IACtB,6CAA6C;IAC7C,+CAA+C;IAC/C,mDAAmD;IACnD,mDAAmD;AACrD;AAEA,kDAAkD;AAClD,IAAI,mBAAmB,CAAC,SAAW,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAClD,+BACA;QACE,QAAQ;QACR,KAAK;YAAC;YAAe;SAAqB;QAC1C,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACd,aAAa;YACf;YACA,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACb,aAAa;YACf;YACA,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACvB,aAAa;YACf,GAAG,QAAQ;YACX,QAAQ,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;gBAChB,aAAa;YACf,GAAG,QAAQ;QACb;QACA,UAAU;YACR,SAAS;gBACP,aAAa;gBACb,WAAW;oBACT,OAAO;wBACL,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,IAAI;4CACF,MAAM;wCACR;wCACA,OAAO;4CACL,MAAM;wCACR;wCACA,MAAM;4CACJ,MAAM;wCACR;wCACA,gBAAgB;4CACd,MAAM;wCACR;wCACA,WAAW;4CACT,MAAM;wCACR;wCACA,QAAQ;4CACN,MAAM;wCACR;wCACA,WAAW;4CACT,MAAM;wCACR;oCACF;oCACA,UAAU;wCACR;wCACA;wCACA;wCACA;wCACA;wCACA;wCACA;qCACD;gCACH;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,CAAC,mBAAmB,EAAE;YAC/C,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CACrB;YAEF,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS;YACX;QACF;QACA,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;QACnC,MAAM,iBAAiB,IAAI,IAAI,CAAC,cAAc,IAAI,QAAQ,OAAO,CAAC,oBAAoB;QACtF,IAAI,CAAC,gBAAgB;YACnB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,sBAAsB;YAC1D;QACF;QACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;QACjE,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;YAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACvB;QACF;QACA,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,gBAAgB;YACpD;QACF;QACA,MAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC;QAC5C,IAAI,CAAC,OAAO;YACV,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,cAAc;YAClD;QACF;QACA,MAAM,YAAY,MAAM,SAAS,CAAC;YAChC,YAAY;gBAAC;aAAS;QACxB;QACA,IAAI,UAAU,KAAK,EAAE;YACnB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;gBAC9B,SAAS,yBAAyB,wDAAwD;YAC5F;QACF;QACA,MAAM,cAAc,IAAI,OAAO,CAAC,UAAU,CAAC,WAAW,IAAI;QAC1D,IAAI,OAAO,IAAI,KAAK,eAAe,IAAI,IAAI,CAAC,IAAI,KAAK,aAAa;YAChE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;gBAC9B,SAAS,yBAAyB,iDAAiD;YACrF;QACF;QACA,MAAM,gBAAgB,MAAM,QAAQ,iBAAiB,CAAC;YACpD,OAAO,IAAI,IAAI,CAAC,KAAK;YACrB;QACF;QACA,IAAI,eAAe;YACjB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,6CAA6C;YACjF;QACF;QACA,MAAM,iBAAiB,MAAM,QAAQ,qBAAqB,CAAC;YACzD,OAAO,IAAI,IAAI,CAAC,KAAK;YACrB;QACF;QACA,IAAI,eAAe,MAAM,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;YAC7C,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,4CAA4C;YAChF;QACF;QACA,MAAM,aAAa,MAAM,QAAQ,gBAAgB,CAAC;YAChD,YAAY;gBACV,MAAM,IAAI,IAAI,CAAC,IAAI;gBACnB,OAAO,IAAI,IAAI,CAAC,KAAK;gBACrB;YACF;YACA,MAAM,QAAQ,IAAI;QACpB;QACA,MAAM,gBAAgB,MAAM,QAAQ,oBAAoB,CAAC;QACzD,IAAI,CAAC,eAAe;YAClB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,sBAAsB;YAC1D;QACF;QACA,MAAM,IAAI,OAAO,CAAC,UAAU,CAAC,mBAAmB,GAC9C;YACE,IAAI,WAAW,EAAE;YACjB,MAAM,WAAW,IAAI;YACrB,OAAO,WAAW,KAAK,CAAC,WAAW;YACnC,cAAc;YACd,SAAS;gBACP,GAAG,MAAM;gBACT,MAAM,QAAQ,IAAI;YACpB;QACF,GACA,IAAI,OAAO;QAEb,OAAO,IAAI,IAAI,CAAC;IAClB;AAEF,IAAI,mBAAmB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACtC,mCACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACrB,aAAa;QACf;IACF;IACA,KAAK;QAAC;QAAe;KAAqB;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,YAAY;wCACV,MAAM;oCACR;oCACA,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,aAAa,MAAM,QAAQ,kBAAkB,CAAC,IAAI,IAAI,CAAC,YAAY;IACzE,IAAI,CAAC,cAAc,WAAW,SAAS,GAAG,aAAa,GAAG,IAAI,UAAU,WAAW,MAAM,KAAK,WAAW;QACvG,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,oBAAoB;QACxD;IACF;IACA,IAAI,WAAW,KAAK,KAAK,QAAQ,IAAI,CAAC,KAAK,EAAE;QAC3C,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,2CAA2C;QAC/E;IACF;IACA,MAAM,YAAY,MAAM,QAAQ,gBAAgB,CAAC;QAC/C,cAAc,IAAI,IAAI,CAAC,YAAY;QACnC,QAAQ;IACV;IACA,MAAM,SAAS,MAAM,QAAQ,YAAY,CAAC;QACxC,gBAAgB,WAAW,cAAc;QACzC,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB,MAAM,WAAW,IAAI;QACrB,WAAW,aAAa,GAAG,IAAI;IACjC;IACA,MAAM,QAAQ,qBAAqB,CACjC,QAAQ,OAAO,CAAC,KAAK,EACrB,WAAW,cAAc;IAE3B,IAAI,CAAC,WAAW;QACd,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,oBAAoB;YACxD;QACF;IACF;IACA,OAAO,IAAI,IAAI,CAAC;QACd,YAAY;QACZ;IACF;AACF;AAEF,IAAI,mBAAmB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACtC,mCACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACrB,aAAa;QACf;IACF;IACA,KAAK;QAAC;QAAe;KAAqB;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,YAAY;wCACV,MAAM;oCACR;oCACA,QAAQ;wCACN,MAAM;oCACR;gCACF;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,aAAa,MAAM,QAAQ,kBAAkB,CAAC,IAAI,IAAI,CAAC,YAAY;IACzE,IAAI,CAAC,cAAc,WAAW,SAAS,GAAG,aAAa,GAAG,IAAI,UAAU,WAAW,MAAM,KAAK,WAAW;QACvG,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,IAAI,WAAW,KAAK,KAAK,QAAQ,IAAI,CAAC,KAAK,EAAE;QAC3C,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,2CAA2C;QAC/E;IACF;IACA,MAAM,YAAY,MAAM,QAAQ,gBAAgB,CAAC;QAC/C,cAAc,IAAI,IAAI,CAAC,YAAY;QACnC,QAAQ;IACV;IACA,OAAO,IAAI,IAAI,CAAC;QACd,YAAY;QACZ,QAAQ;IACV;AACF;AAEF,IAAI,mBAAmB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACtC,mCACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,cAAc,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACrB,aAAa;QACf;IACF;IACA,KAAK;QAAC;QAAe;KAAqB;IAC1C,SAAS;QACP,aAAa;QACb,WAAW;YACT,OAAO;gBACL,aAAa;gBACb,SAAS;oBACP,oBAAoB;wBAClB,QAAQ;4BACN,MAAM;4BACN,YAAY;gCACV,YAAY;oCACV,MAAM;gCACR;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,aAAa,MAAM,QAAQ,kBAAkB,CAAC,IAAI,IAAI,CAAC,YAAY;IACzE,IAAI,CAAC,YAAY;QACf,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,oBAAoB;QACxD;IACF;IACA,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;QAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB,gBAAgB,WAAW,cAAc;IAC3C;IACA,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,gBAAgB;QACpD;IACF;IACA,MAAM,YAAY,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,SAAS,CAAC;QACzD,YAAY;YAAC;SAAS;IACxB;IACA,IAAI,UAAU,KAAK,EAAE;QACnB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,6CAA6C;QACjF;IACF;IACA,MAAM,YAAY,MAAM,QAAQ,gBAAgB,CAAC;QAC/C,cAAc,IAAI,IAAI,CAAC,YAAY;QACnC,QAAQ;IACV;IACA,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,gBAAgB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACnC,gCACA;IACE,QAAQ;IACR,KAAK;QAAC;KAAc;IACpB,gBAAgB;IAChB,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACd,IAAI,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACX,aAAa;QACf;IACF;IACA,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,IAAI;wCACF,MAAM;oCACR;oCACA,OAAO;wCACL,MAAM;oCACR;oCACA,MAAM;wCACJ,MAAM;oCACR;oCACA,gBAAgB;wCACd,MAAM;oCACR;oCACA,WAAW;wCACT,MAAM;oCACR;oCACA,QAAQ;wCACN,MAAM;oCACR;oCACA,WAAW;wCACT,MAAM;oCACR;oCACA,kBAAkB;wCAChB,MAAM;oCACR;oCACA,kBAAkB;wCAChB,MAAM;oCACR;oCACA,cAAc;wCACZ,MAAM;oCACR;gCACF;gCACA,UAAU;oCACR;oCACA;oCACA;oCACA;oCACA;oCACA;oCACA;oCACA;oCACA;oCACA;iCACD;4BACH;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,MAAM,CAAA,GAAA,6KAAA,CAAA,oBAAiB,AAAD,EAAE;IACxC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS;QACX;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,aAAa,MAAM,QAAQ,kBAAkB,CAAC,IAAI,KAAK,CAAC,EAAE;IAChE,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,aAAa,WAAW,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ;QACvG,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS;QACX;IACF;IACA,IAAI,WAAW,KAAK,KAAK,QAAQ,IAAI,CAAC,KAAK,EAAE;QAC3C,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,2CAA2C;QAC/E;IACF;IACA,MAAM,gBAAgB,MAAM,QAAQ,oBAAoB,CACtD,WAAW,cAAc;IAE3B,IAAI,CAAC,eAAe;QAClB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,sBAAsB;QAC1D;IACF;IACA,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;QAC7C,QAAQ,WAAW,SAAS;QAC5B,gBAAgB,WAAW,cAAc;IAC3C;IACA,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,iDAAiD;QACrF;IACF;IACA,OAAO,IAAI,IAAI,CAAC;QACd,GAAG,UAAU;QACb,kBAAkB,cAAc,IAAI;QACpC,kBAAkB,cAAc,IAAI;QACpC,cAAc,OAAO,IAAI,CAAC,KAAK;IACjC;AACF;AAEF,IAAI,YAAY,IAAM,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACrC,4BACA;QACE,QAAQ;QACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM;YAChB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;YACd,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACrC;QACA,KAAK;YAAC;SAAc;QACpB,UAAU;YACR,aAAa;QACf;IACF,GACA,OAAO;QACL,MAAM,UAAU,IAAI,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA,GAAA,6KAAA,CAAA,oBAAiB,AAAD,EAAE,KAAK,KAAK,CAAC,CAAC,IAAM,QAAQ;QACpF,MAAM,QAAQ,IAAI,IAAI,CAAC,cAAc,IAAI,SAAS,QAAQ;QAC1D,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,IAAI,CAAC,MAAM;gBACpB,QAAQ;gBACR,MAAM;oBACJ,SAAS,yBAAyB,sBAAsB;gBAC1D;YACF;QACF;QACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;QACjE,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CACzD,IAAI,IAAI,CAAC,MAAM;QAEjB,IAAI,CAAC,MAAM;YACT,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,6KAAA,CAAA,mBAAgB,CAAC,cAAc;YAC1C;QACF;QACA,MAAM,gBAAgB,MAAM,QAAQ,iBAAiB,CAAC;YACpD,OAAO,KAAK,KAAK;YACjB,gBAAgB;QAClB;QACA,IAAI,eAAe;YACjB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;gBAChC,SAAS,yBAAyB,6CAA6C;YACjF;QACF;QACA,MAAM,gBAAgB,MAAM,QAAQ,YAAY,CAAC;YAC/C,IAAI,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD;YACb,gBAAgB;YAChB,QAAQ,KAAK,EAAE;YACf,MAAM,IAAI,IAAI,CAAC,IAAI;YACnB,WAAW,aAAa,GAAG,IAAI;QACjC;QACA,OAAO,IAAI,IAAI,CAAC;IAClB;AAEF,IAAI,eAAe,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAClC,+BACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,iBAAiB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACxB,aAAa;QACf;QACA;;OAEC,GACD,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACvB,aAAa;QACf,GAAG,QAAQ;IACb;IACA,KAAK;QAAC;QAAe;KAAqB;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,QAAQ;wCACN,MAAM;wCACN,YAAY;4CACV,IAAI;gDACF,MAAM;4CACR;4CACA,QAAQ;gDACN,MAAM;4CACR;4CACA,gBAAgB;gDACd,MAAM;4CACR;4CACA,MAAM;gDACJ,MAAM;4CACR;wCACF;wCACA,UAAU;4CAAC;4CAAM;4CAAU;4CAAkB;yCAAO;oCACtD;gCACF;gCACA,UAAU;oCAAC;iCAAS;4BACtB;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,iBAAiB,IAAI,IAAI,CAAC,cAAc,IAAI,QAAQ,OAAO,CAAC,oBAAoB;IACtF,IAAI,CAAC,gBAAgB;QACnB,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,sBAAsB;YAC1D;QACF;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;QAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB;IACF;IACA,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,gBAAgB;QACpD;IACF;IACA,MAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC;IAC5C,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,cAAc;QAClD;IACF;IACA,MAAM,YAAY,QAAQ,IAAI,CAAC,KAAK,KAAK,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE,KAAK,IAAI,IAAI,CAAC,eAAe;IAC3G,MAAM,iBAAiB,aAAa,OAAO,IAAI,KAAK,CAAC,IAAI,OAAO,CAAC,UAAU,EAAE,eAAe,OAAO;IACnG,IAAI,gBAAgB;QAClB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,mDAAmD;QACvF;IACF;IACA,MAAM,kBAAkB,aAAa,MAAM,SAAS,CAAC;QACnD,QAAQ;YAAC;SAAS;IACpB,GAAG,OAAO;IACV,IAAI,CAAC,iBAAiB;QACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS,yBAAyB,yCAAyC;QAC7E;IACF;IACA,IAAI,WAAW;IACf,IAAI,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAM;QAC1C,WAAW,MAAM,QAAQ,iBAAiB,CAAC;YACzC,OAAO,IAAI,IAAI,CAAC,eAAe;YAC/B;QACF;IACF,OAAO;QACL,WAAW,MAAM,QAAQ,cAAc,CAAC,IAAI,IAAI,CAAC,eAAe;IAClE;IACA,IAAI,UAAU,mBAAmB,gBAAgB;QAC/C,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,gBAAgB;QACpD;IACF;IACA,MAAM,QAAQ,YAAY,CAAC,SAAS,EAAE;IACtC,IAAI,QAAQ,IAAI,CAAC,EAAE,KAAK,SAAS,MAAM,IAAI,QAAQ,OAAO,CAAC,oBAAoB,KAAK,SAAS,cAAc,EAAE;QAC3G,MAAM,QAAQ,qBAAqB,CAAC,QAAQ,OAAO,CAAC,KAAK,EAAE;IAC7D;IACA,OAAO,IAAI,IAAI,CAAC;QACd,QAAQ;IACV;AACF;AAEF,IAAI,mBAAmB,CAAC,SAAW,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAClD,oCACA;QACE,QAAQ;QACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM;YACd,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM;YAClB;;OAEC,GACD,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACrC;QACA,KAAK;YAAC;YAAe;SAAqB;QAC1C,UAAU;YACR,SAAS;gBACP,aAAa;gBACb,WAAW;oBACT,OAAO;wBACL,aAAa;wBACb,SAAS;4BACP,oBAAoB;gCAClB,QAAQ;oCACN,MAAM;oCACN,YAAY;wCACV,QAAQ;4CACN,MAAM;4CACN,YAAY;gDACV,IAAI;oDACF,MAAM;gDACR;gDACA,QAAQ;oDACN,MAAM;gDACR;gDACA,gBAAgB;oDACd,MAAM;gDACR;gDACA,MAAM;oDACJ,MAAM;gDACR;4CACF;4CACA,UAAU;gDAAC;gDAAM;gDAAU;gDAAkB;6CAAO;wCACtD;oCACF;oCACA,UAAU;wCAAC;qCAAS;gCACtB;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF,GACA,OAAO;QACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;QACnC,MAAM,iBAAiB,IAAI,IAAI,CAAC,cAAc,IAAI,QAAQ,OAAO,CAAC,oBAAoB;QACtF,IAAI,CAAC,gBAAgB;YACnB,OAAO,IAAI,IAAI,CAAC,MAAM;gBACpB,QAAQ;gBACR,MAAM;oBACJ,SAAS,yBAAyB,sBAAsB;gBAC1D;YACF;QACF;QACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;QACjE,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;YAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACvB;QACF;QACA,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,IAAI,CAAC,MAAM;gBACpB,QAAQ;gBACR,MAAM;oBACJ,SAAS,yBAAyB,gBAAgB;gBACpD;YACF;QACF;QACA,MAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC;QAC5C,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,IAAI,CAAC,MAAM;gBACpB,QAAQ;gBACR,MAAM;oBACJ,SAAS,yBAAyB,cAAc;gBAClD;YACF;QACF;QACA,MAAM,kBAAkB,MAAM,SAAS,CAAC;YACtC,QAAQ;gBAAC;aAAS;QACpB,GAAG,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,OAAO,IAAI,KAAK;QACzD,IAAI,iBAAiB;YACnB,OAAO,IAAI,IAAI,CAAC,MAAM;gBACpB,MAAM;oBACJ,SAAS;gBACX;gBACA,QAAQ;YACV;QACF;QACA,MAAM,gBAAgB,MAAM,QAAQ,YAAY,CAC9C,IAAI,IAAI,CAAC,QAAQ,EACjB,IAAI,IAAI,CAAC,IAAI;QAEf,IAAI,CAAC,eAAe;YAClB,OAAO,IAAI,IAAI,CAAC,MAAM;gBACpB,QAAQ;gBACR,MAAM;oBACJ,SAAS,yBAAyB,gBAAgB;gBACpD;YACF;QACF;QACA,OAAO,IAAI,IAAI,CAAC;IAClB;AAEF,IAAI,kBAAkB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACrC,mCACA;IACE,QAAQ;IACR,KAAK;QAAC;QAAe;KAAqB;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,YAAY;oCACV,IAAI;wCACF,MAAM;oCACR;oCACA,QAAQ;wCACN,MAAM;oCACR;oCACA,gBAAgB;wCACd,MAAM;oCACR;oCACA,MAAM;wCACJ,MAAM;oCACR;gCACF;gCACA,UAAU;oCAAC;oCAAM;oCAAU;oCAAkB;iCAAO;4BACtD;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,iBAAiB,QAAQ,OAAO,CAAC,oBAAoB;IAC3D,IAAI,CAAC,gBAAgB;QACnB,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,sBAAsB;YAC1D;QACF;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;QAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB;IACF;IACA,IAAI,CAAC,QAAQ;QACX,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,gBAAgB;YACpD;QACF;IACF;IACA,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,qBAAqB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACxC,wBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,aAAa;QACf;QACA,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,aAAa;QACf;QACA,QAAQ,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACf,aAAa;QACf,GAAG,QAAQ;QACX,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,aAAa;QACf,GAAG,QAAQ;QACX,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,sIAAA,CAAA,IAAC,CAAC,GAAG,IAAI;YACtC,aAAa;QACf,GAAG,QAAQ;IACb;IACA,KAAK;QAAC;KAAc;IACpB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,aAAa;gCACb,MAAM;4BACR;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,MAAM,CAAA,GAAA,6KAAA,CAAA,oBAAiB,AAAD,EAAE;IACxC,IAAI,CAAC,WAAW,CAAC,IAAI,OAAO,IAAI,IAAI,OAAO,GAAG;QAC5C,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,IAAI,OAAO,SAAS,QAAQ;IAC5B,IAAI,CAAC,MAAM;QACT,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;YACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;QACrB;QACA,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,MAAM;IACvE;IACA,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;QACV;IACF;IACA,MAAM,UAAU,IAAI,OAAO,CAAC,UAAU;IACtC,MAAM,eAAe,OAAO,SAAS,kCAAkC,aAAa,MAAM,QAAQ,6BAA6B,CAAC,QAAQ,SAAS,kCAAkC,KAAK,IAAI,OAAO,QAAQ,6BAA6B;IACxO,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,gDAAgD;QACpF;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE;IAC3C,MAAM,oBAAoB,MAAM,QAAQ,iBAAiB,CAAC,KAAK,EAAE;IACjE,MAAM,qBAAqB,OAAO,QAAQ,iBAAiB,KAAK,WAAW,kBAAkB,MAAM,IAAI,QAAQ,iBAAiB,GAAG,OAAO,QAAQ,iBAAiB,KAAK,aAAa,MAAM,QAAQ,iBAAiB,CAAC,QAAQ;IAC7N,IAAI,oBAAoB;QACtB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,oDAAoD;QACxF;IACF;IACA,MAAM,uBAAuB,MAAM,QAAQ,sBAAsB,CAC/D,IAAI,IAAI,CAAC,IAAI;IAEf,IAAI,sBAAsB;QACxB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,2BAA2B;QAC/D;IACF;IACA,MAAM,gBAAgB,MAAM,QAAQ,kBAAkB,CAAC;QACrD,cAAc;YACZ,IAAI,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD;YACb,MAAM,IAAI,IAAI,CAAC,IAAI;YACnB,MAAM,IAAI,IAAI,CAAC,IAAI;YACnB,MAAM,IAAI,IAAI,CAAC,IAAI;YACnB,WAAW,aAAa,GAAG,IAAI;YAC/B,UAAU,IAAI,IAAI,CAAC,QAAQ;QAC7B;QACA;IACF;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE;QACvB,MAAM,QAAQ,qBAAqB,CACjC,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EACjC,cAAc,EAAE;IAEpB;IACA,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,qBAAqB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACxC,wBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACb,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACb,aAAa;YACf,GAAG,QAAQ;YACX,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACb,aAAa;YACf,GAAG,QAAQ;YACX,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;gBACb,aAAa;YACf,GAAG,QAAQ;YACX,UAAU,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,sIAAA,CAAA,IAAC,CAAC,GAAG,IAAI;gBACtC,aAAa;YACf,GAAG,QAAQ;QACb,GAAG,OAAO;QACV,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACrC;IACA,gBAAgB;IAChB,KAAK;QAAC;KAAc;IACpB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,aAAa;gCACb,MAAM;4BACR;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,UAAU,CAAC;IAC7C,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;YACjC,SAAS;QACX;IACF;IACA,MAAM,iBAAiB,IAAI,IAAI,CAAC,cAAc,IAAI,QAAQ,OAAO,CAAC,oBAAoB;IACtF,IAAI,CAAC,gBAAgB;QACnB,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,sBAAsB;YAC1D;QACF;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;QAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB;IACF;IACA,IAAI,CAAC,QAAQ;QACX,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,wCAAwC;YAC5E;QACF;IACF;IACA,MAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC;IAC5C,IAAI,CAAC,OAAO;QACV,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS;YACX;QACF;IACF;IACA,MAAM,eAAe,MAAM,SAAS,CAAC;QACnC,cAAc;YAAC;SAAS;IAC1B;IACA,IAAI,aAAa,KAAK,EAAE;QACtB,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,MAAM;gBACJ,SAAS,yBAAyB,+CAA+C;YACnF;YACA,QAAQ;QACV;IACF;IACA,MAAM,aAAa,MAAM,QAAQ,kBAAkB,CACjD,gBACA,IAAI,IAAI,CAAC,IAAI;IAEf,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,qBAAqB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACxC,wBACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACvB,aAAa;QACf;IACF;IACA,gBAAgB;IAChB,KAAK;QAAC;KAAc;IACpB,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,aAAa;4BACf;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,UAAU,CAAC;IAC7C,IAAI,CAAC,SAAS;QACZ,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;QACV;IACF;IACA,MAAM,iBAAiB,IAAI,IAAI,CAAC,cAAc;IAC9C,IAAI,CAAC,gBAAgB;QACnB,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,sBAAsB;YAC1D;QACF;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;QAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB;IACF;IACA,IAAI,CAAC,QAAQ;QACX,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS,yBAAyB,wCAAwC;YAC5E;QACF;IACF;IACA,MAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC;IAC5C,IAAI,CAAC,OAAO;QACV,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;YACR,MAAM;gBACJ,SAAS;YACX;QACF;IACF;IACA,MAAM,eAAe,MAAM,SAAS,CAAC;QACnC,cAAc;YAAC;SAAS;IAC1B;IACA,IAAI,aAAa,KAAK,EAAE;QACtB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,+CAA+C;QACnF;IACF;IACA,IAAI,mBAAmB,QAAQ,OAAO,CAAC,oBAAoB,EAAE;QAC3D,MAAM,QAAQ,qBAAqB,CAAC,QAAQ,OAAO,CAAC,KAAK,EAAE;IAC7D;IACA,MAAM,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC,oBAAoB;IAC1D,IAAI,QAAQ,UAAU;QACpB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,MAAM,MAAM,MAAM,QAAQ,oBAAoB,CAAC;IAC/C,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACrB;IACA,IAAI,QAAQ,cAAc;QACxB,MAAM,OAAO,YAAY,CAAC;YACxB,cAAc;YACd,MAAM,QAAQ,IAAI;QACpB;IACF;IACA,MAAM,QAAQ,kBAAkB,CAAC;IACjC,IAAI,QAAQ,aAAa;QACvB,MAAM,OAAO,WAAW,CAAC;YACvB,cAAc;YACd,MAAM,QAAQ,IAAI;QACpB;IACF;IACA,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,sBAAsB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACzC,uCACA;IACE,QAAQ;IACR,OAAO,sIAAA,CAAA,IAAC,CAAC,QAAQ,CACf,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACvB,aAAa;QACf,GAAG,QAAQ;QACX,kBAAkB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACzB,aAAa;QACf,GAAG,QAAQ;IACb;IAEF,gBAAgB;IAChB,KAAK;QAAC;QAAe;KAAqB;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,aAAa;gCACb,MAAM;4BACR;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,iBAAiB,IAAI,KAAK,EAAE,oBAAoB,IAAI,KAAK,EAAE,kBAAkB,QAAQ,OAAO,CAAC,oBAAoB;IACvH,IAAI,CAAC,gBAAgB;QACnB,OAAO,IAAI,IAAI,CAAC,MAAM;YACpB,QAAQ;QACV;IACF;IACA,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,gBAAgB,MAAM,QAAQ,oBAAoB,CAAC;QACvD;QACA,QAAQ,CAAC,CAAC,IAAI,KAAK,EAAE;IACvB;IACA,MAAM,WAAW,eAAe,QAAQ,KACtC,CAAC,SAAW,OAAO,MAAM,KAAK,QAAQ,IAAI,CAAC,EAAE;IAE/C,IAAI,CAAC,UAAU;QACb,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,wCAAwC;QAC5E;IACF;IACA,IAAI,CAAC,eAAe;QAClB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,sBAAsB;QAC1D;IACF;IACA,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,wBAAwB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAC3C,4BACA;IACE,QAAQ;IACR,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACb,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACvB,aAAa;QACf,GAAG,QAAQ,GAAG,QAAQ;QACtB,kBAAkB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACzB,aAAa;QACf,GAAG,QAAQ;IACb;IACA,KAAK;QAAC;QAAsB;KAAc;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,aAAa;gCACb,MAAM;4BACR;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,IAAI,iBAAiB,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,IAAI,CAAC,cAAc;IACzE,IAAI,mBAAmB,MAAM;QAC3B,MAAM,eAAe,QAAQ,OAAO,CAAC,oBAAoB;QACzD,IAAI,CAAC,cAAc;YACjB,OAAO,IAAI,IAAI,CAAC;QAClB;QACA,MAAM,kBAAkB,MAAM,QAAQ,qBAAqB,CACzD,QAAQ,OAAO,CAAC,KAAK,EACrB;QAEF,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;YAC1B,SAAS;YACT,MAAM,QAAQ,IAAI;QACpB;QACA,OAAO,IAAI,IAAI,CAAC;IAClB;IACA,IAAI,CAAC,gBAAgB;QACnB,MAAM,eAAe,QAAQ,OAAO,CAAC,oBAAoB;QACzD,IAAI,CAAC,cAAc;YACjB,OAAO,IAAI,IAAI,CAAC;QAClB;QACA,iBAAiB;IACnB;IACA,MAAM,gBAAgB,MAAM,QAAQ,oBAAoB,CAAC;QACvD;QACA,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB;IACrC;IACA,MAAM,WAAW,eAAe,QAAQ,KACtC,CAAC,SAAW,OAAO,MAAM,KAAK,QAAQ,IAAI,CAAC,EAAE;IAE/C,IAAI,CAAC,UAAU;QACb,MAAM,QAAQ,qBAAqB,CAAC,QAAQ,OAAO,CAAC,KAAK,EAAE;QAC3D,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,aAAa;YAC9B,SAAS,yBAAyB,wCAAwC;QAC5E;IACF;IACA,IAAI,CAAC,eAAe;QAClB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;YAChC,SAAS,yBAAyB,sBAAsB;QAC1D;IACF;IACA,MAAM,iBAAiB,MAAM,QAAQ,qBAAqB,CACxD,QAAQ,OAAO,CAAC,KAAK,EACrB,cAAc,EAAE;IAElB,MAAM,CAAA,GAAA,6JAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;QAC1B,SAAS;QACT,MAAM,QAAQ,IAAI;IACpB;IACA,OAAO,IAAI,IAAI,CAAC;AAClB;AAEF,IAAI,oBAAoB,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EACvC,sBACA;IACE,QAAQ;IACR,KAAK;QAAC;QAAe;KAAqB;IAC1C,UAAU;QACR,SAAS;YACP,aAAa;YACb,WAAW;gBACT,OAAO;oBACL,aAAa;oBACb,SAAS;wBACP,oBAAoB;4BAClB,QAAQ;gCACN,MAAM;gCACN,OAAO;oCACL,MAAM;gCACR;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;AACF,GACA,OAAO;IACL,MAAM,UAAU,cAAc,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,UAAU;IACjE,MAAM,gBAAgB,MAAM,QAAQ,iBAAiB,CACnD,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IAE7B,OAAO,IAAI,IAAI,CAAC;AAClB;AAGF,2CAA2C;AAC3C,IAAI,eAAe,CAAC;IAClB,MAAM,YAAY;QAChB;QACA;QACA;QACA;QACA;QACA;QACA,kBAAkB;QAClB;QACA;QACA;QACA;QACA,WAAW;QACX;QACA,kBAAkB;QAClB;IACF;IACA,MAAM,QAAQ;QACZ,GAAG,6JAAA,CAAA,eAAY;QACf,GAAG,SAAS,KAAK;IACnB;IACA,MAAM,MAAM,YAAY,WAAW;QACjC,YAAY,WAAW,CAAC;QACxB;QACA,YAAY,OAAO;YACjB,OAAO,MAAM,CAAA,GAAA,6KAAA,CAAA,oBAAiB,AAAD,EAAE;QACjC;IACF;IACA,OAAO;QACL,IAAI;QACJ,WAAW;YACT,GAAG,GAAG;YACN,eAAe,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAC9B,gCACA;gBACE,QAAQ;gBACR,gBAAgB;gBAChB,MAAM,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACb,gBAAgB,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;oBACnC,YAAY,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,sIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM;gBACnD;gBACA,KAAK;oBAAC;iBAAqB;gBAC3B,UAAU;oBACR,SAAS;wBACP,aAAa;wBACb,aAAa;4BACX,SAAS;gCACP,oBAAoB;oCAClB,QAAQ;wCACN,MAAM;wCACN,YAAY;4CACV,YAAY;gDACV,MAAM;gDACN,aAAa;4CACf;wCACF;wCACA,UAAU;4CAAC;yCAAa;oCAC1B;gCACF;4BACF;wBACF;wBACA,WAAW;4BACT,OAAO;gCACL,aAAa;gCACb,SAAS;oCACP,oBAAoB;wCAClB,QAAQ;4CACN,MAAM;4CACN,YAAY;gDACV,OAAO;oDACL,MAAM;gDACR;gDACA,SAAS;oDACP,MAAM;gDACR;4CACF;4CACA,UAAU;gDAAC;6CAAU;wCACvB;oCACF;gCACF;4BACF;wBACF;oBACF;gBACF;YACF,GACA,OAAO;gBACL,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,IAAI,OAAO,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE,MAAM,GAAG,GAAG;oBACvE,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS;oBACX;gBACF;gBACA,MAAM,uBAAuB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,oBAAoB;gBACxG,IAAI,CAAC,sBAAsB;oBACzB,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,eAAe;wBAChC,SAAS,yBAAyB,sBAAsB;oBAC1D;gBACF;gBACA,MAAM,UAAU,cAAc,IAAI,OAAO;gBACzC,MAAM,SAAS,MAAM,QAAQ,iBAAiB,CAAC;oBAC7C,QAAQ,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBACnC,gBAAgB;gBAClB;gBACA,IAAI,CAAC,QAAQ;oBACX,MAAM,IAAI,iJAAA,CAAA,WAAQ,CAAC,gBAAgB;wBACjC,SAAS,yBAAyB,wCAAwC;oBAC5E;gBACF;gBACA,MAAM,QAAQ,KAAK,CAAC,OAAO,IAAI,CAAC;gBAChC,MAAM,SAAS,MAAM,SAAS,CAAC,IAAI,IAAI,CAAC,UAAU;gBAClD,IAAI,OAAO,KAAK,EAAE;oBAChB,OAAO,IAAI,IAAI,CACb;wBACE,OAAO,OAAO,KAAK;wBACnB,SAAS;oBACX,GACA;wBACE,QAAQ;oBACV;gBAEJ;gBACA,OAAO,IAAI,IAAI,CAAC;oBACd,OAAO;oBACP,SAAS;gBACX;YACF;QAEJ;QACA,QAAQ;YACN,SAAS;gBACP,QAAQ;oBACN,sBAAsB;wBACpB,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,SAAS,QAAQ;oBAC/C;gBACF;YACF;YACA,cAAc;gBACZ,WAAW,SAAS,QAAQ,cAAc;gBAC1C,QAAQ;oBACN,MAAM;wBACJ,MAAM;wBACN,UAAU;wBACV,UAAU;wBACV,WAAW,SAAS,QAAQ,cAAc,QAAQ;oBACpD;oBACA,MAAM;wBACJ,MAAM;wBACN,QAAQ;wBACR,UAAU;wBACV,WAAW,SAAS,QAAQ,cAAc,QAAQ;oBACpD;oBACA,MAAM;wBACJ,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,cAAc,QAAQ;oBACpD;oBACA,WAAW;wBACT,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,cAAc,QAAQ;oBACpD;oBACA,UAAU;wBACR,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,cAAc,QAAQ;oBACpD;gBACF;YACF;YACA,QAAQ;gBACN,WAAW,SAAS,QAAQ,QAAQ;gBACpC,QAAQ;oBACN,gBAAgB;wBACd,MAAM;wBACN,UAAU;wBACV,YAAY;4BACV,OAAO;4BACP,OAAO;wBACT;wBACA,WAAW,SAAS,QAAQ,QAAQ,QAAQ;oBAC9C;oBACA,QAAQ;wBACN,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,QAAQ,QAAQ;wBAC5C,YAAY;4BACV,OAAO;4BACP,OAAO;wBACT;oBACF;oBACA,MAAM;wBACJ,MAAM;wBACN,UAAU;wBACV,UAAU;wBACV,cAAc;wBACd,WAAW,SAAS,QAAQ,QAAQ,QAAQ;oBAC9C;oBACA,WAAW;wBACT,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,QAAQ,QAAQ;oBAC9C;gBACF;YACF;YACA,YAAY;gBACV,WAAW,SAAS,QAAQ,YAAY;gBACxC,QAAQ;oBACN,gBAAgB;wBACd,MAAM;wBACN,UAAU;wBACV,YAAY;4BACV,OAAO;4BACP,OAAO;wBACT;wBACA,WAAW,SAAS,QAAQ,YAAY,QAAQ;oBAClD;oBACA,OAAO;wBACL,MAAM;wBACN,UAAU;wBACV,UAAU;wBACV,WAAW,SAAS,QAAQ,YAAY,QAAQ;oBAClD;oBACA,MAAM;wBACJ,MAAM;wBACN,UAAU;wBACV,UAAU;wBACV,WAAW,SAAS,QAAQ,YAAY,QAAQ;oBAClD;oBACA,QAAQ;wBACN,MAAM;wBACN,UAAU;wBACV,UAAU;wBACV,cAAc;wBACd,WAAW,SAAS,QAAQ,YAAY,QAAQ;oBAClD;oBACA,WAAW;wBACT,MAAM;wBACN,UAAU;wBACV,WAAW,SAAS,QAAQ,YAAY,QAAQ;oBAClD;oBACA,WAAW;wBACT,MAAM;wBACN,YAAY;4BACV,OAAO;4BACP,OAAO;wBACT;wBACA,WAAW,SAAS,QAAQ,YAAY,QAAQ;wBAChD,UAAU;oBACZ;gBACF;YACF;QACF;QACA,QAAQ;YACN,cAAc,CAAC;YACf,YAAY,CAAC;YACb,QAAQ,CAAC;YACT,oBAAoB,CAAC;QACvB;QACA,cAAc;IAChB;AACF","ignoreList":[0]}},
    {"offset": {"line": 12735, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 12741, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-2EBJWXL5.js"],"sourcesContent":["import { createAuthEndpoint, sessionMiddleware, APIError, getSessionFromCtx } from './chunk-FUJTYWXL.js';\nimport { parseSetCookieHeader } from './chunk-IWEXZ2ES.js';\nimport { generateRandomString } from './chunk-DBPOZRMS.js';\nimport { SignJWT } from 'jose';\nimport { z } from 'zod';\nimport { subtle } from '@better-auth/utils';\nimport { APIError as APIError$1 } from 'better-call';\nimport { createHash } from '@better-auth/utils/hash';\n\n// src/plugins/oidc-provider/schema.ts\nvar schema = {\n  oauthApplication: {\n    modelName: \"oauthApplication\",\n    fields: {\n      name: {\n        type: \"string\"\n      },\n      icon: {\n        type: \"string\",\n        required: false\n      },\n      metadata: {\n        type: \"string\",\n        required: false\n      },\n      clientId: {\n        type: \"string\",\n        unique: true\n      },\n      clientSecret: {\n        type: \"string\"\n      },\n      redirectURLs: {\n        type: \"string\"\n      },\n      type: {\n        type: \"string\"\n      },\n      disabled: {\n        type: \"boolean\",\n        required: false,\n        defaultValue: false\n      },\n      userId: {\n        type: \"string\",\n        required: false\n      },\n      createdAt: {\n        type: \"date\"\n      },\n      updatedAt: {\n        type: \"date\"\n      }\n    }\n  },\n  oauthAccessToken: {\n    modelName: \"oauthAccessToken\",\n    fields: {\n      accessToken: {\n        type: \"string\",\n        unique: true\n      },\n      refreshToken: {\n        type: \"string\",\n        unique: true\n      },\n      accessTokenExpiresAt: {\n        type: \"date\"\n      },\n      refreshTokenExpiresAt: {\n        type: \"date\"\n      },\n      clientId: {\n        type: \"string\"\n      },\n      userId: {\n        type: \"string\",\n        required: false\n      },\n      scopes: {\n        type: \"string\"\n      },\n      createdAt: {\n        type: \"date\"\n      },\n      updatedAt: {\n        type: \"date\"\n      }\n    }\n  },\n  oauthConsent: {\n    modelName: \"oauthConsent\",\n    fields: {\n      clientId: {\n        type: \"string\"\n      },\n      userId: {\n        type: \"string\"\n      },\n      scopes: {\n        type: \"string\"\n      },\n      createdAt: {\n        type: \"date\"\n      },\n      updatedAt: {\n        type: \"date\"\n      },\n      consentGiven: {\n        type: \"boolean\"\n      }\n    }\n  }\n};\nfunction redirectErrorURL(url, error, description) {\n  return `${url.includes(\"?\") ? \"&\" : \"?\"}error=${error}&error_description=${description}`;\n}\nasync function authorize(ctx, options) {\n  const opts = {\n    codeExpiresIn: 600,\n    defaultScope: \"openid\",\n    ...options,\n    scopes: [\n      \"openid\",\n      \"profile\",\n      \"email\",\n      \"offline_access\",\n      ...options?.scopes || []\n    ]\n  };\n  if (!ctx.request) {\n    throw new APIError$1(\"UNAUTHORIZED\", {\n      error_description: \"request not found\",\n      error: \"invalid_request\"\n    });\n  }\n  const session = await getSessionFromCtx(ctx);\n  if (!session) {\n    await ctx.setSignedCookie(\n      \"oidc_login_prompt\",\n      JSON.stringify(ctx.query),\n      ctx.context.secret,\n      {\n        maxAge: 600\n      }\n    );\n    const queryFromURL = ctx.request.url?.split(\"?\")[1];\n    throw ctx.redirect(`${options.loginPage}?${queryFromURL}`);\n  }\n  const query = ctx.query;\n  if (!query.client_id) {\n    throw ctx.redirect(`${ctx.context.baseURL}/error?error=invalid_client`);\n  }\n  if (!query.response_type) {\n    throw ctx.redirect(\n      redirectErrorURL(\n        `${ctx.context.baseURL}/error`,\n        \"invalid_request\",\n        \"response_type is required\"\n      )\n    );\n  }\n  const client = await ctx.context.adapter.findOne({\n    model: \"oauthApplication\",\n    where: [\n      {\n        field: \"clientId\",\n        value: ctx.query.client_id\n      }\n    ]\n  }).then((res) => {\n    if (!res) {\n      return null;\n    }\n    return {\n      ...res,\n      redirectURLs: res.redirectURLs.split(\",\"),\n      metadata: res.metadata ? JSON.parse(res.metadata) : {}\n    };\n  });\n  if (!client) {\n    throw ctx.redirect(`${ctx.context.baseURL}/error?error=invalid_client`);\n  }\n  const redirectURI = client.redirectURLs.find(\n    (url) => url === ctx.query.redirect_uri\n  );\n  if (!redirectURI || !query.redirect_uri) {\n    throw new APIError$1(\"BAD_REQUEST\", {\n      message: \"Invalid redirect URI\"\n    });\n  }\n  if (client.disabled) {\n    throw ctx.redirect(`${ctx.context.baseURL}/error?error=client_disabled`);\n  }\n  if (query.response_type !== \"code\") {\n    throw ctx.redirect(\n      `${ctx.context.baseURL}/error?error=unsupported_response_type`\n    );\n  }\n  const requestScope = query.scope?.split(\" \").filter((s) => s) || opts.defaultScope.split(\" \");\n  const invalidScopes = requestScope.filter((scope) => {\n    const isInvalid = !opts.scopes.includes(scope) || scope === \"offline_access\" && query.prompt !== \"consent\";\n    return isInvalid;\n  });\n  if (invalidScopes.length) {\n    throw ctx.redirect(\n      redirectErrorURL(\n        query.redirect_uri,\n        \"invalid_scope\",\n        `The following scopes are invalid: ${invalidScopes.join(\", \")}`\n      )\n    );\n  }\n  if ((!query.code_challenge || !query.code_challenge_method) && options.requirePKCE) {\n    throw ctx.redirect(\n      redirectErrorURL(\n        query.redirect_uri,\n        \"invalid_request\",\n        \"pkce is required\"\n      )\n    );\n  }\n  if (![\n    \"s256\",\n    options.allowPlainCodeChallengeMethod ? \"plain\" : \"s256\"\n  ].includes(query.code_challenge_method?.toLowerCase() || \"\")) {\n    throw ctx.redirect(\n      redirectErrorURL(\n        query.redirect_uri,\n        \"invalid_request\",\n        \"invalid code_challenge method\"\n      )\n    );\n  }\n  const code = generateRandomString(32, \"a-z\", \"A-Z\", \"0-9\");\n  const codeExpiresInMs = opts.codeExpiresIn * 1e3;\n  const expiresAt = new Date(Date.now() + codeExpiresInMs);\n  try {\n    await ctx.context.internalAdapter.createVerificationValue({\n      value: JSON.stringify({\n        clientId: client.clientId,\n        redirectURI: query.redirect_uri,\n        scope: requestScope,\n        userId: session.user.id,\n        authTime: session.session.createdAt.getTime(),\n        /**\n         * If the prompt is set to `consent`, then we need\n         * to require the user to consent to the scopes.\n         *\n         * This means the code now needs to be treated as a\n         * consent request.\n         *\n         * once the user consents, teh code will be updated\n         * with the actual code. This is to prevent the\n         * client from using the code before the user\n         * consents.\n         */\n        requireConsent: query.prompt === \"consent\",\n        state: query.prompt === \"consent\" ? query.state : null,\n        codeChallenge: query.code_challenge,\n        codeChallengeMethod: query.code_challenge_method\n      }),\n      identifier: code,\n      expiresAt\n    });\n  } catch (e) {\n    throw ctx.redirect(\n      redirectErrorURL(\n        query.redirect_uri,\n        \"server_error\",\n        \"An error occurred while processing the request\"\n      )\n    );\n  }\n  const redirectURIWithCode = new URL(redirectURI);\n  redirectURIWithCode.searchParams.set(\"code\", code);\n  redirectURIWithCode.searchParams.set(\"state\", ctx.query.state);\n  if (query.prompt !== \"consent\") {\n    throw ctx.redirect(redirectURIWithCode.toString());\n  }\n  const hasAlreadyConsented = await ctx.context.adapter.findOne({\n    model: \"oauthConsent\",\n    where: [\n      {\n        field: \"clientId\",\n        value: client.clientId\n      },\n      {\n        field: \"userId\",\n        value: session.user.id\n      }\n    ]\n  }).then((res) => !!res?.consentGiven);\n  if (hasAlreadyConsented) {\n    throw ctx.redirect(redirectURIWithCode.toString());\n  }\n  if (options?.consentPage) {\n    await ctx.setSignedCookie(\"oidc_consent_prompt\", code, ctx.context.secret, {\n      maxAge: 600\n    });\n    const conceptURI = `${options.consentPage}?client_id=${client.clientId}&scope=${requestScope.join(\" \")}`;\n    throw ctx.redirect(conceptURI);\n  }\n  const htmlFn = options?.getConsentHTML;\n  if (!htmlFn) {\n    throw new APIError$1(\"INTERNAL_SERVER_ERROR\", {\n      message: \"No consent page provided\"\n    });\n  }\n  return new Response(\n    htmlFn({\n      scopes: requestScope,\n      clientMetadata: client.metadata,\n      clientIcon: client?.icon,\n      clientId: client.clientId,\n      clientName: client.name,\n      code\n    }),\n    {\n      headers: {\n        \"content-type\": \"text/html\"\n      }\n    }\n  );\n}\nvar getMetadata = (ctx, options) => {\n  const issuer = ctx.context.options.baseURL;\n  const baseURL = ctx.context.baseURL;\n  return {\n    issuer,\n    authorization_endpoint: `${baseURL}/oauth2/authorize`,\n    token_endpoint: `${baseURL}/oauth2/token`,\n    userInfo_endpoint: `${baseURL}/oauth2/userinfo`,\n    jwks_uri: `${baseURL}/jwks`,\n    registration_endpoint: `${baseURL}/oauth2/register`,\n    scopes_supported: [\"openid\", \"profile\", \"email\", \"offline_access\"],\n    response_types_supported: [\"code\"],\n    response_modes_supported: [\"query\"],\n    grant_types_supported: [\"authorization_code\"],\n    acr_values_supported: [\n      \"urn:mace:incommon:iap:silver\",\n      \"urn:mace:incommon:iap:bronze\"\n    ],\n    subject_types_supported: [\"public\"],\n    id_token_signing_alg_values_supported: [\"RS256\", \"none\"],\n    token_endpoint_auth_methods_supported: [\n      \"client_secret_basic\",\n      \"client_secret_post\"\n    ],\n    claims_supported: [\n      \"sub\",\n      \"iss\",\n      \"aud\",\n      \"exp\",\n      \"nbf\",\n      \"iat\",\n      \"jti\",\n      \"email\",\n      \"email_verified\",\n      \"name\"\n    ],\n    ...options?.metadata\n  };\n};\nvar oidcProvider = (options) => {\n  const modelName = {\n    oauthClient: \"oauthApplication\",\n    oauthAccessToken: \"oauthAccessToken\",\n    oauthConsent: \"oauthConsent\"\n  };\n  const opts = {\n    codeExpiresIn: 600,\n    defaultScope: \"openid\",\n    accessTokenExpiresIn: 3600,\n    refreshTokenExpiresIn: 604800,\n    ...options,\n    scopes: [\n      \"openid\",\n      \"profile\",\n      \"email\",\n      \"offline_access\",\n      ...options?.scopes || []\n    ]\n  };\n  return {\n    id: \"oidc\",\n    hooks: {\n      after: [\n        {\n          matcher() {\n            return true;\n          },\n          handler: async (ctx) => {\n            const cookie = await ctx.getSignedCookie(\n              \"oidc_login_prompt\",\n              ctx.context.secret\n            );\n            const cookieName = ctx.context.authCookies.sessionToken.name;\n            const parsedSetCookieHeader = parseSetCookieHeader(\n              ctx.responseHeader.get(\"set-cookie\") || \"\"\n            );\n            const hasSessionToken = parsedSetCookieHeader.has(cookieName);\n            if (!cookie || !hasSessionToken) {\n              return;\n            }\n            ctx.setCookie(\"oidc_login_prompt\", \"\", {\n              maxAge: 0\n            });\n            const sessionCookie = parsedSetCookieHeader.get(cookieName)?.value;\n            const sessionToken = sessionCookie?.split(\".\")[0];\n            if (!sessionToken) {\n              return;\n            }\n            const session = await ctx.context.internalAdapter.findSession(sessionToken);\n            if (!session) {\n              return;\n            }\n            ctx.query = JSON.parse(cookie);\n            ctx.query.prompt = \"consent\";\n            ctx.context.session = session;\n            const response = await authorize(ctx, opts);\n            return response;\n          }\n        }\n      ]\n    },\n    endpoints: {\n      getOpenIdConfig: createAuthEndpoint(\n        \"/.well-known/openid-configuration\",\n        {\n          method: \"GET\"\n        },\n        async (ctx) => {\n          const metadata = getMetadata(ctx, options);\n          return metadata;\n        }\n      ),\n      oAuth2authorize: createAuthEndpoint(\n        \"/oauth2/authorize\",\n        {\n          method: \"GET\",\n          query: z.record(z.string(), z.any())\n        },\n        async (ctx) => {\n          return authorize(ctx, opts);\n        }\n      ),\n      oAuthConsent: createAuthEndpoint(\n        \"/oauth2/consent\",\n        {\n          method: \"POST\",\n          body: z.object({\n            accept: z.boolean()\n          }),\n          use: [sessionMiddleware]\n        },\n        async (ctx) => {\n          const storedCode = await ctx.getSignedCookie(\n            \"oidc_consent_prompt\",\n            ctx.context.secret\n          );\n          if (!storedCode) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"No consent prompt found\",\n              error: \"invalid_grant\"\n            });\n          }\n          const verification = await ctx.context.internalAdapter.findVerificationValue(storedCode);\n          if (!verification) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"Invalid code\",\n              error: \"invalid_grant\"\n            });\n          }\n          if (verification.expiresAt < /* @__PURE__ */ new Date()) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              verification.id\n            );\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"Code expired\",\n              error: \"invalid_grant\"\n            });\n          }\n          const value = JSON.parse(verification.value);\n          if (!value.requireConsent || !value.state) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"Consent not required\",\n              error: \"invalid_grant\"\n            });\n          }\n          if (!ctx.body.accept) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              verification.id\n            );\n            return ctx.json({\n              redirectURI: `${value.redirectURI}?error=access_denied&error_description=User denied access`\n            });\n          }\n          const code = generateRandomString(32, \"a-z\", \"A-Z\", \"0-9\");\n          const codeExpiresInMs = opts.codeExpiresIn * 1e3;\n          const expiresAt = new Date(Date.now() + codeExpiresInMs);\n          await ctx.context.internalAdapter.updateVerificationValue(\n            verification.id,\n            {\n              value: JSON.stringify({\n                ...value,\n                requireConsent: false\n              }),\n              identifier: code,\n              expiresAt\n            }\n          );\n          await ctx.context.adapter.create({\n            model: modelName.oauthConsent,\n            data: {\n              clientId: value.clientId,\n              userId: value.userId,\n              scopes: value.scope.join(\" \"),\n              consentGiven: true,\n              createdAt: /* @__PURE__ */ new Date(),\n              updatedAt: /* @__PURE__ */ new Date()\n            }\n          });\n          const redirectURI = new URL(value.redirectURI);\n          redirectURI.searchParams.set(\"code\", code);\n          redirectURI.searchParams.set(\"state\", value.state);\n          return ctx.json({\n            redirectURI: redirectURI.toString()\n          });\n        }\n      ),\n      oAuth2token: createAuthEndpoint(\n        \"/oauth2/token\",\n        {\n          method: \"POST\",\n          body: z.any(),\n          metadata: {\n            isAction: false\n          }\n        },\n        async (ctx) => {\n          let { body } = ctx;\n          if (!body) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"request body not found\",\n              error: \"invalid_request\"\n            });\n          }\n          if (body instanceof FormData) {\n            body = Object.fromEntries(body.entries());\n          }\n          if (!(body instanceof Object)) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"request body is not an object\",\n              error: \"invalid_request\"\n            });\n          }\n          const {\n            client_id,\n            client_secret,\n            grant_type,\n            code,\n            redirect_uri,\n            refresh_token,\n            code_verifier\n          } = body;\n          if (grant_type === \"refresh_token\") {\n            if (!refresh_token) {\n              throw new APIError(\"BAD_REQUEST\", {\n                error_description: \"refresh_token is required\",\n                error: \"invalid_request\"\n              });\n            }\n            const token = await ctx.context.adapter.findOne({\n              model: modelName.oauthAccessToken,\n              where: [\n                {\n                  field: \"refreshToken\",\n                  value: refresh_token.toString()\n                }\n              ]\n            });\n            if (!token) {\n              throw new APIError(\"UNAUTHORIZED\", {\n                error_description: \"invalid refresh token\",\n                error: \"invalid_grant\"\n              });\n            }\n            if (token.clientId !== client_id?.toString()) {\n              throw new APIError(\"UNAUTHORIZED\", {\n                error_description: \"invalid client_id\",\n                error: \"invalid_client\"\n              });\n            }\n            if (token.refreshTokenExpiresAt < /* @__PURE__ */ new Date()) {\n              throw new APIError(\"UNAUTHORIZED\", {\n                error_description: \"refresh token expired\",\n                error: \"invalid_grant\"\n              });\n            }\n            const accessToken2 = generateRandomString(32, \"a-z\", \"A-Z\");\n            const newRefreshToken = generateRandomString(32, \"a-z\", \"A-Z\");\n            const accessTokenExpiresAt2 = new Date(\n              Date.now() + opts.accessTokenExpiresIn * 1e3\n            );\n            const refreshTokenExpiresAt2 = new Date(\n              Date.now() + opts.refreshTokenExpiresIn * 1e3\n            );\n            await ctx.context.adapter.create({\n              model: modelName.oauthAccessToken,\n              data: {\n                accessToken: accessToken2,\n                refreshToken: newRefreshToken,\n                accessTokenExpiresAt: accessTokenExpiresAt2,\n                refreshTokenExpiresAt: refreshTokenExpiresAt2,\n                clientId: client_id.toString(),\n                userId: token.userId,\n                scopes: token.scopes,\n                createdAt: /* @__PURE__ */ new Date(),\n                updatedAt: /* @__PURE__ */ new Date()\n              }\n            });\n            return ctx.json({\n              access_token: accessToken2,\n              token_type: \"bearer\",\n              expires_in: opts.accessTokenExpiresIn,\n              refresh_token: newRefreshToken,\n              scope: token.scopes\n            });\n          }\n          if (!code) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"code is required\",\n              error: \"invalid_request\"\n            });\n          }\n          if (options.requirePKCE && !code_verifier) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"code verifier is missing\",\n              error: \"invalid_request\"\n            });\n          }\n          const verificationValue = await ctx.context.internalAdapter.findVerificationValue(\n            code.toString()\n          );\n          if (!verificationValue) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"invalid code\",\n              error: \"invalid_grant\"\n            });\n          }\n          if (verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              verificationValue.id\n            );\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"code expired\",\n              error: \"invalid_grant\"\n            });\n          }\n          await ctx.context.internalAdapter.deleteVerificationValue(\n            verificationValue.id\n          );\n          if (!client_id || !client_secret) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"client_id and client_secret are required\",\n              error: \"invalid_client\"\n            });\n          }\n          if (!grant_type) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"grant_type is required\",\n              error: \"invalid_request\"\n            });\n          }\n          if (grant_type !== \"authorization_code\") {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"grant_type must be 'authorization_code'\",\n              error: \"unsupported_grant_type\"\n            });\n          }\n          if (!redirect_uri) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"redirect_uri is required\",\n              error: \"invalid_request\"\n            });\n          }\n          const client = await ctx.context.adapter.findOne({\n            model: modelName.oauthClient,\n            where: [{ field: \"clientId\", value: client_id.toString() }]\n          }).then((res) => {\n            if (!res) {\n              return null;\n            }\n            return {\n              ...res,\n              redirectURLs: res.redirectURLs.split(\",\"),\n              metadata: res.metadata ? JSON.parse(res.metadata) : {}\n            };\n          });\n          if (!client) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"invalid client_id\",\n              error: \"invalid_client\"\n            });\n          }\n          if (client.disabled) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"client is disabled\",\n              error: \"invalid_client\"\n            });\n          }\n          const isValidSecret = client.clientSecret === client_secret.toString();\n          if (!isValidSecret) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"invalid client_secret\",\n              error: \"invalid_client\"\n            });\n          }\n          const value = JSON.parse(\n            verificationValue.value\n          );\n          if (value.clientId !== client_id.toString()) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"invalid client_id\",\n              error: \"invalid_client\"\n            });\n          }\n          if (value.redirectURI !== redirect_uri.toString()) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"invalid redirect_uri\",\n              error: \"invalid_client\"\n            });\n          }\n          if (value.codeChallenge && !code_verifier) {\n            throw new APIError(\"BAD_REQUEST\", {\n              error_description: \"code verifier is missing\",\n              error: \"invalid_request\"\n            });\n          }\n          const challenge = value.codeChallengeMethod === \"plain\" ? code_verifier : await createHash(\"SHA-256\", \"base64urlnopad\").digest(\n            code_verifier\n          );\n          if (challenge !== value.codeChallenge) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"code verification failed\",\n              error: \"invalid_request\"\n            });\n          }\n          const requestedScopes = value.scope;\n          await ctx.context.internalAdapter.deleteVerificationValue(\n            code.toString()\n          );\n          const accessToken = generateRandomString(32, \"a-z\", \"A-Z\");\n          const refreshToken = generateRandomString(32, \"A-Z\", \"a-z\");\n          const accessTokenExpiresAt = new Date(\n            Date.now() + opts.accessTokenExpiresIn * 1e3\n          );\n          const refreshTokenExpiresAt = new Date(\n            Date.now() + opts.refreshTokenExpiresIn * 1e3\n          );\n          await ctx.context.adapter.create({\n            model: modelName.oauthAccessToken,\n            data: {\n              accessToken,\n              refreshToken,\n              accessTokenExpiresAt,\n              refreshTokenExpiresAt,\n              clientId: client_id.toString(),\n              userId: value.userId,\n              scopes: requestedScopes.join(\" \"),\n              createdAt: /* @__PURE__ */ new Date(),\n              updatedAt: /* @__PURE__ */ new Date()\n            }\n          });\n          const user = await ctx.context.internalAdapter.findUserById(\n            value.userId\n          );\n          if (!user) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"user not found\",\n              error: \"invalid_grant\"\n            });\n          }\n          let secretKey = {\n            alg: \"HS256\",\n            key: await subtle.generateKey(\n              {\n                name: \"HMAC\",\n                hash: \"SHA-256\"\n              },\n              true,\n              [\"sign\", \"verify\"]\n            )\n          };\n          const profile = {\n            given_name: user.name.split(\" \")[0],\n            family_name: user.name.split(\" \")[1],\n            name: user.name,\n            profile: user.image,\n            updated_at: user.updatedAt.toISOString()\n          };\n          const email = {\n            email: user.email,\n            email_verified: user.emailVerified\n          };\n          const userClaims = {\n            ...requestedScopes.includes(\"profile\") ? profile : {},\n            ...requestedScopes.includes(\"email\") ? email : {}\n          };\n          const idToken = await new SignJWT({\n            sub: user.id,\n            aud: client_id.toString(),\n            iat: Date.now(),\n            auth_time: ctx.context.session?.session.createdAt.getTime(),\n            nonce: body.nonce,\n            acr: \"urn:mace:incommon:iap:silver\",\n            // default to silver - ⚠︎ this should be configurable and should be validated against the client's metadata\n            ...userClaims\n          }).setProtectedHeader({ alg: secretKey.alg }).setIssuedAt().setExpirationTime(\n            Math.floor(Date.now() / 1e3) + opts.accessTokenExpiresIn\n          ).sign(secretKey.key);\n          return ctx.json(\n            {\n              access_token: accessToken,\n              token_type: \"Bearer\",\n              expires_in: opts.accessTokenExpiresIn,\n              refresh_token: requestedScopes.includes(\"offline_access\") ? refreshToken : void 0,\n              scope: requestedScopes.join(\" \"),\n              id_token: requestedScopes.includes(\"openid\") ? idToken : void 0\n            },\n            {\n              headers: {\n                \"Cache-Control\": \"no-store\",\n                Pragma: \"no-cache\"\n              }\n            }\n          );\n        }\n      ),\n      oAuth2userInfo: createAuthEndpoint(\n        \"/oauth2/userinfo\",\n        {\n          method: \"GET\",\n          metadata: {\n            isAction: false\n          }\n        },\n        async (ctx) => {\n          if (!ctx.request) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"request not found\",\n              error: \"invalid_request\"\n            });\n          }\n          const authorization = ctx.request.headers.get(\"authorization\");\n          if (!authorization) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"authorization header not found\",\n              error: \"invalid_request\"\n            });\n          }\n          const token = authorization.replace(\"Bearer \", \"\");\n          const accessToken = await ctx.context.adapter.findOne({\n            model: modelName.oauthAccessToken,\n            where: [\n              {\n                field: \"accessToken\",\n                value: token\n              }\n            ]\n          });\n          if (!accessToken) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"invalid access token\",\n              error: \"invalid_token\"\n            });\n          }\n          if (accessToken.accessTokenExpiresAt < /* @__PURE__ */ new Date()) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"The Access Token expired\",\n              error: \"invalid_token\"\n            });\n          }\n          const user = await ctx.context.internalAdapter.findUserById(\n            accessToken.userId\n          );\n          if (!user) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              error_description: \"user not found\",\n              error: \"invalid_token\"\n            });\n          }\n          const requestedScopes = accessToken.scopes.split(\" \");\n          const userClaims = {\n            email: requestedScopes.includes(\"email\") ? user.email : void 0,\n            name: requestedScopes.includes(\"profile\") ? user.name : void 0,\n            picture: requestedScopes.includes(\"profile\") ? user.image : void 0,\n            given_name: requestedScopes.includes(\"profile\") ? user.name.split(\" \")[0] : void 0,\n            family_name: requestedScopes.includes(\"profile\") ? user.name.split(\" \")[1] : void 0,\n            email_verified: requestedScopes.includes(\"email\") ? user.emailVerified : void 0\n          };\n          return ctx.json(userClaims);\n        }\n      ),\n      registerOAuthApplication: createAuthEndpoint(\n        \"/oauth2/register\",\n        {\n          method: \"POST\",\n          body: z.object({\n            name: z.string(),\n            icon: z.string().optional(),\n            metadata: z.record(z.any()).optional(),\n            redirectURLs: z.array(z.string())\n          })\n        },\n        async (ctx) => {\n          const body = ctx.body;\n          const session = await getSessionFromCtx(ctx);\n          if (!session && !options.allowDynamicClientRegistration) {\n            throw new APIError(\"UNAUTHORIZED\", {\n              message: \"Unauthorized\"\n            });\n          }\n          const clientId = options.generateClientId?.() || generateRandomString(32, \"a-z\", \"A-Z\");\n          const clientSecret = options.generateClientSecret?.() || generateRandomString(32, \"a-z\", \"A-Z\");\n          const client = await ctx.context.adapter.create({\n            model: modelName.oauthClient,\n            data: {\n              name: body.name,\n              icon: body.icon,\n              metadata: body.metadata ? JSON.stringify(body.metadata) : null,\n              clientId,\n              clientSecret,\n              redirectURLs: body.redirectURLs.join(\",\"),\n              type: \"web\",\n              authenticationScheme: \"client_secret\",\n              disabled: false,\n              userId: session?.session.userId,\n              createdAt: /* @__PURE__ */ new Date(),\n              updatedAt: /* @__PURE__ */ new Date()\n            }\n          });\n          return ctx.json({\n            ...client,\n            redirectURLs: client.redirectURLs.split(\",\"),\n            metadata: client.metadata ? JSON.parse(client.metadata) : null\n          });\n        }\n      ),\n      getOAuthClient: createAuthEndpoint(\n        \"/oauth2/client/:id\",\n        {\n          method: \"GET\",\n          use: [sessionMiddleware]\n        },\n        async (ctx) => {\n          const client = await ctx.context.adapter.findOne(\n            {\n              model: modelName.oauthClient,\n              where: [{ field: \"clientId\", value: ctx.params.id }]\n            }\n          );\n          if (!client) {\n            throw new APIError(\"NOT_FOUND\", {\n              error_description: \"client not found\",\n              error: \"not_found\"\n            });\n          }\n          return ctx.json({\n            clientId: client.clientId,\n            name: client.name,\n            icon: client.icon\n          });\n        }\n      )\n    },\n    schema\n  };\n};\n\nexport { oidcProvider };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13640, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 13646, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-WKR7D7I3.js"],"sourcesContent":["import { createAuthMiddleware, getSessionFromCtx, APIError, createAuthEndpoint } from './chunk-FUJTYWXL.js';\nimport { deleteSessionCookie, setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { mergeSchema } from './chunk-72KRA3CK.js';\nimport { getDate } from './chunk-FURNA6HY.js';\nimport { z } from 'zod';\nimport { APIError as APIError$1 } from 'better-call';\n\nvar getEndpointResponse = async (ctx) => {\n  const returned = ctx.context.returned;\n  if (!returned) {\n    return null;\n  }\n  if (returned instanceof Response) {\n    if (returned.status !== 200) {\n      return null;\n    }\n    return await returned.clone().json();\n  }\n  if (returned instanceof APIError$1) {\n    return null;\n  }\n  return returned;\n};\n\n// src/plugins/admin/index.ts\nvar admin = (options) => {\n  const opts = {\n    defaultRole: \"user\",\n    adminRole: \"admin\",\n    ...options\n  };\n  const ERROR_CODES = {\n    FAILED_TO_CREATE_USER: \"Failed to create user\",\n    USER_ALREADY_EXISTS: \"User already exists\",\n    USER_NOT_FOUND: \"User not found\",\n    YOU_CANNOT_BAN_YOURSELF: \"You cannot ban yourself\",\n    ONLY_ADMINS_CAN_ACCESS_THIS_ENDPOINT: \"Only admins can access this endpoint\"\n  };\n  const adminMiddleware = createAuthMiddleware(async (ctx) => {\n    const session = await getSessionFromCtx(ctx);\n    if (!session?.session) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    const user = session.user;\n    if (!user.role || (Array.isArray(opts.adminRole) ? !opts.adminRole.includes(user.role) : user.role !== opts.adminRole)) {\n      throw new APIError(\"FORBIDDEN\", {\n        message: \"Only admins can access this endpoint\"\n      });\n    }\n    return {\n      session: {\n        user,\n        session: session.session\n      }\n    };\n  });\n  return {\n    id: \"admin\",\n    init(ctx) {\n      return {\n        options: {\n          databaseHooks: {\n            user: {\n              create: {\n                async before(user) {\n                  if (options?.defaultRole === false) {\n                    return;\n                  }\n                  return {\n                    data: {\n                      role: options?.defaultRole ?? \"user\",\n                      ...user\n                    }\n                  };\n                }\n              }\n            },\n            session: {\n              create: {\n                async before(session) {\n                  const user = await ctx.internalAdapter.findUserById(\n                    session.userId\n                  );\n                  if (user.banned) {\n                    if (user.banExpires && user.banExpires.getTime() < Date.now()) {\n                      await ctx.internalAdapter.updateUser(session.userId, {\n                        banned: false,\n                        banReason: null,\n                        banExpires: null\n                      });\n                      return;\n                    }\n                    return false;\n                  }\n                }\n              }\n            }\n          }\n        }\n      };\n    },\n    hooks: {\n      after: [\n        {\n          matcher(context) {\n            return context.path === \"/list-sessions\";\n          },\n          handler: createAuthMiddleware(async (ctx) => {\n            const response = await getEndpointResponse(ctx);\n            if (!response) {\n              return;\n            }\n            const newJson = response.filter((session) => {\n              return !session.impersonatedBy;\n            });\n            return ctx.json(newJson);\n          })\n        }\n      ]\n    },\n    endpoints: {\n      setRole: createAuthEndpoint(\n        \"/admin/set-role\",\n        {\n          method: \"POST\",\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            }),\n            role: z.string({\n              description: \"The role to set. `admin` or `user` by default\"\n            })\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"setRole\",\n              summary: \"Set the role of a user\",\n              description: \"Set the role of a user\",\n              responses: {\n                200: {\n                  description: \"User role updated\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const updatedUser = await ctx.context.internalAdapter.updateUser(\n            ctx.body.userId,\n            {\n              role: ctx.body.role\n            }\n          );\n          return ctx.json({\n            user: updatedUser\n          });\n        }\n      ),\n      createUser: createAuthEndpoint(\n        \"/admin/create-user\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"The email of the user\"\n            }),\n            password: z.string({\n              description: \"The password of the user\"\n            }),\n            name: z.string({\n              description: \"The name of the user\"\n            }),\n            role: z.string({\n              description: \"The role of the user\"\n            }),\n            /**\n             * extra fields for user\n             */\n            data: z.optional(\n              z.record(z.any(), {\n                description: \"Extra fields for the user. Including custom additional fields.\"\n              })\n            )\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"createUser\",\n              summary: \"Create a new user\",\n              description: \"Create a new user\",\n              responses: {\n                200: {\n                  description: \"User created\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const existUser = await ctx.context.internalAdapter.findUserByEmail(\n            ctx.body.email\n          );\n          if (existUser) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.USER_ALREADY_EXISTS\n            });\n          }\n          const user = await ctx.context.internalAdapter.createUser({\n            email: ctx.body.email,\n            name: ctx.body.name,\n            role: ctx.body.role,\n            ...ctx.body.data\n          });\n          if (!user) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: ERROR_CODES.FAILED_TO_CREATE_USER\n            });\n          }\n          const hashedPassword = await ctx.context.password.hash(\n            ctx.body.password\n          );\n          await ctx.context.internalAdapter.linkAccount({\n            accountId: user.id,\n            providerId: \"credential\",\n            password: hashedPassword,\n            userId: user.id\n          });\n          return ctx.json({\n            user\n          });\n        }\n      ),\n      listUsers: createAuthEndpoint(\n        \"/admin/list-users\",\n        {\n          method: \"GET\",\n          use: [adminMiddleware],\n          query: z.object({\n            searchValue: z.string({\n              description: \"The value to search for\"\n            }).optional(),\n            searchField: z.enum([\"email\", \"name\"], {\n              description: \"The field to search in, defaults to email. Can be `email` or `name`\"\n            }).optional(),\n            searchOperator: z.enum([\"contains\", \"starts_with\", \"ends_with\"], {\n              description: \"The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`\"\n            }).optional(),\n            limit: z.string({\n              description: \"The number of users to return\"\n            }).or(z.number()).optional(),\n            offset: z.string({\n              description: \"The offset to start from\"\n            }).or(z.number()).optional(),\n            sortBy: z.string({\n              description: \"The field to sort by\"\n            }).optional(),\n            sortDirection: z.enum([\"asc\", \"desc\"], {\n              description: \"The direction to sort by\"\n            }).optional(),\n            filterField: z.string({\n              description: \"The field to filter by\"\n            }).optional(),\n            filterValue: z.string({\n              description: \"The value to filter by\"\n            }).or(z.number()).or(z.boolean()).optional(),\n            filterOperator: z.enum([\"eq\", \"ne\", \"lt\", \"lte\", \"gt\", \"gte\"], {\n              description: \"The operator to use for the filter\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              operationId: \"listUsers\",\n              summary: \"List users\",\n              description: \"List users\",\n              responses: {\n                200: {\n                  description: \"List of users\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          users: {\n                            type: \"array\",\n                            items: {\n                              $ref: \"#/components/schemas/User\"\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const where = [];\n          if (ctx.query?.searchValue) {\n            where.push({\n              field: ctx.query.searchField || \"email\",\n              operator: ctx.query.searchOperator || \"contains\",\n              value: ctx.query.searchValue\n            });\n          }\n          if (ctx.query?.filterValue) {\n            where.push({\n              field: ctx.query.filterField || \"email\",\n              operator: ctx.query.filterOperator || \"eq\",\n              value: ctx.query.filterValue\n            });\n          }\n          try {\n            const users = await ctx.context.internalAdapter.listUsers(\n              Number(ctx.query?.limit) || void 0,\n              Number(ctx.query?.offset) || void 0,\n              ctx.query?.sortBy ? {\n                field: ctx.query.sortBy,\n                direction: ctx.query.sortDirection || \"asc\"\n              } : void 0,\n              where.length ? where : void 0\n            );\n            return ctx.json({\n              users\n            });\n          } catch (e) {\n            return ctx.json({\n              users: []\n            });\n          }\n        }\n      ),\n      listUserSessions: createAuthEndpoint(\n        \"/admin/list-user-sessions\",\n        {\n          method: \"POST\",\n          use: [adminMiddleware],\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              operationId: \"listUserSessions\",\n              summary: \"List user sessions\",\n              description: \"List user sessions\",\n              responses: {\n                200: {\n                  description: \"List of user sessions\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          sessions: {\n                            type: \"array\",\n                            items: {\n                              $ref: \"#/components/schemas/Session\"\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const sessions = await ctx.context.internalAdapter.listSessions(\n            ctx.body.userId\n          );\n          return {\n            sessions\n          };\n        }\n      ),\n      unbanUser: createAuthEndpoint(\n        \"/admin/unban-user\",\n        {\n          method: \"POST\",\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            })\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"unbanUser\",\n              summary: \"Unban a user\",\n              description: \"Unban a user\",\n              responses: {\n                200: {\n                  description: \"User unbanned\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const user = await ctx.context.internalAdapter.updateUser(\n            ctx.body.userId,\n            {\n              banned: false\n            }\n          );\n          return ctx.json({\n            user\n          });\n        }\n      ),\n      banUser: createAuthEndpoint(\n        \"/admin/ban-user\",\n        {\n          method: \"POST\",\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            }),\n            /**\n             * Reason for the ban\n             */\n            banReason: z.string({\n              description: \"The reason for the ban\"\n            }).optional(),\n            /**\n             * Number of seconds until the ban expires\n             */\n            banExpiresIn: z.number({\n              description: \"The number of seconds until the ban expires\"\n            }).optional()\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"banUser\",\n              summary: \"Ban a user\",\n              description: \"Ban a user\",\n              responses: {\n                200: {\n                  description: \"User banned\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          if (ctx.body.userId === ctx.context.session.user.id) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.YOU_CANNOT_BAN_YOURSELF\n            });\n          }\n          const user = await ctx.context.internalAdapter.updateUser(\n            ctx.body.userId,\n            {\n              banned: true,\n              banReason: ctx.body.banReason || options?.defaultBanReason || \"No reason\",\n              banExpires: ctx.body.banExpiresIn ? getDate(ctx.body.banExpiresIn, \"sec\") : options?.defaultBanExpiresIn ? getDate(options.defaultBanExpiresIn, \"sec\") : void 0\n            }\n          );\n          await ctx.context.internalAdapter.deleteSessions(ctx.body.userId);\n          return ctx.json({\n            user\n          });\n        }\n      ),\n      impersonateUser: createAuthEndpoint(\n        \"/admin/impersonate-user\",\n        {\n          method: \"POST\",\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            })\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"impersonateUser\",\n              summary: \"Impersonate a user\",\n              description: \"Impersonate a user\",\n              responses: {\n                200: {\n                  description: \"Impersonation session created\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          },\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const targetUser = await ctx.context.internalAdapter.findUserById(\n            ctx.body.userId\n          );\n          if (!targetUser) {\n            throw new APIError(\"NOT_FOUND\", {\n              message: \"User not found\"\n            });\n          }\n          const session = await ctx.context.internalAdapter.createSession(\n            targetUser.id,\n            void 0,\n            true,\n            {\n              impersonatedBy: ctx.context.session.user.id,\n              expiresAt: options?.impersonationSessionDuration ? getDate(options.impersonationSessionDuration, \"sec\") : getDate(60 * 60, \"sec\")\n              // 1 hour\n            }\n          );\n          if (!session) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: ERROR_CODES.FAILED_TO_CREATE_USER\n            });\n          }\n          const authCookies = ctx.context.authCookies;\n          deleteSessionCookie(ctx);\n          await ctx.setSignedCookie(\n            \"admin_session\",\n            ctx.context.session.session.token,\n            ctx.context.secret,\n            authCookies.sessionToken.options\n          );\n          await setSessionCookie(\n            ctx,\n            {\n              session,\n              user: targetUser\n            },\n            true\n          );\n          return ctx.json({\n            session,\n            user: targetUser\n          });\n        }\n      ),\n      stopImpersonating: createAuthEndpoint(\n        \"/admin/stop-impersonating\",\n        {\n          method: \"POST\"\n        },\n        async (ctx) => {\n          const session = await getSessionFromCtx(ctx);\n          if (!session) {\n            throw new APIError(\"UNAUTHORIZED\");\n          }\n          if (!session.session.impersonatedBy) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"You are not impersonating anyone\"\n            });\n          }\n          const user = await ctx.context.internalAdapter.findUserById(\n            session.session.impersonatedBy\n          );\n          if (!user) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: \"Failed to find user\"\n            });\n          }\n          const adminCookie = await ctx.getSignedCookie(\n            \"admin_session\",\n            ctx.context.secret\n          );\n          if (!adminCookie) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: \"Failed to find admin session\"\n            });\n          }\n          const adminSession = await ctx.context.internalAdapter.findSession(adminCookie);\n          if (!adminSession || adminSession.session.userId !== user.id) {\n            throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n              message: \"Failed to find admin session\"\n            });\n          }\n          await setSessionCookie(ctx, adminSession);\n          return ctx.json(adminSession);\n        }\n      ),\n      revokeUserSession: createAuthEndpoint(\n        \"/admin/revoke-user-session\",\n        {\n          method: \"POST\",\n          body: z.object({\n            sessionToken: z.string({\n              description: \"The session token\"\n            })\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"revokeUserSession\",\n              summary: \"Revoke a user session\",\n              description: \"Revoke a user session\",\n              responses: {\n                200: {\n                  description: \"Session revoked\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          success: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          await ctx.context.internalAdapter.deleteSession(\n            ctx.body.sessionToken\n          );\n          return ctx.json({\n            success: true\n          });\n        }\n      ),\n      revokeUserSessions: createAuthEndpoint(\n        \"/admin/revoke-user-sessions\",\n        {\n          method: \"POST\",\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            })\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"revokeUserSessions\",\n              summary: \"Revoke all user sessions\",\n              description: \"Revoke all user sessions\",\n              responses: {\n                200: {\n                  description: \"Sessions revoked\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          success: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          await ctx.context.internalAdapter.deleteSessions(ctx.body.userId);\n          return ctx.json({\n            success: true\n          });\n        }\n      ),\n      removeUser: createAuthEndpoint(\n        \"/admin/remove-user\",\n        {\n          method: \"POST\",\n          body: z.object({\n            userId: z.string({\n              description: \"The user id\"\n            })\n          }),\n          use: [adminMiddleware],\n          metadata: {\n            openapi: {\n              operationId: \"removeUser\",\n              summary: \"Remove a user\",\n              description: \"Delete a user and all their sessions and accounts. Cannot be undone.\",\n              responses: {\n                200: {\n                  description: \"User removed\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          success: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          await ctx.context.internalAdapter.deleteUser(ctx.body.userId);\n          return ctx.json({\n            success: true\n          });\n        }\n      )\n    },\n    $ERROR_CODES: ERROR_CODES,\n    schema: mergeSchema(schema, opts.schema)\n  };\n};\nvar schema = {\n  user: {\n    fields: {\n      role: {\n        type: \"string\",\n        required: false,\n        input: false\n      },\n      banned: {\n        type: \"boolean\",\n        defaultValue: false,\n        required: false,\n        input: false\n      },\n      banReason: {\n        type: \"string\",\n        required: false,\n        input: false\n      },\n      banExpires: {\n        type: \"date\",\n        required: false,\n        input: false\n      }\n    }\n  },\n  session: {\n    fields: {\n      impersonatedBy: {\n        type: \"string\",\n        required: false\n      }\n    }\n  }\n};\n\nexport { admin };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14410, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14416, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-QMQ3YGXS.js"],"sourcesContent":["import { createAuthEndpoint, createAuthMiddleware, getSessionFromCtx, APIError } from './chunk-FUJTYWXL.js';\nimport { getOrigin } from './chunk-XFCIANZX.js';\nimport { setSessionCookie, parseSetCookieHeader } from './chunk-IWEXZ2ES.js';\nimport { mergeSchema } from './chunk-72KRA3CK.js';\n\n// src/plugins/anonymous/index.ts\nvar schema = {\n  user: {\n    fields: {\n      isAnonymous: {\n        type: \"boolean\",\n        required: false\n      }\n    }\n  }\n};\nvar anonymous = (options) => {\n  const ERROR_CODES = {\n    FAILED_TO_CREATE_USER: \"Failed to create user\",\n    COULD_NOT_CREATE_SESSION: \"Could not create session\",\n    ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY: \"Anonymous users cannot sign in again anonymously\"\n  };\n  return {\n    id: \"anonymous\",\n    endpoints: {\n      signInAnonymous: createAuthEndpoint(\n        \"/sign-in/anonymous\",\n        {\n          method: \"POST\",\n          metadata: {\n            openapi: {\n              description: \"Sign in anonymously\",\n              responses: {\n                200: {\n                  description: \"Sign in anonymously\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          },\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const { emailDomainName = getOrigin(ctx.context.baseURL) } = options || {};\n          const id = ctx.context.generateId({ model: \"user\" });\n          const email = `temp-${id}@${emailDomainName}`;\n          const newUser = await ctx.context.internalAdapter.createUser({\n            id,\n            email,\n            emailVerified: false,\n            isAnonymous: true,\n            name: \"Anonymous\",\n            createdAt: /* @__PURE__ */ new Date(),\n            updatedAt: /* @__PURE__ */ new Date()\n          });\n          if (!newUser) {\n            return ctx.json(null, {\n              status: 500,\n              body: {\n                message: ERROR_CODES.FAILED_TO_CREATE_USER,\n                status: 500\n              }\n            });\n          }\n          const session = await ctx.context.internalAdapter.createSession(\n            newUser.id,\n            ctx.request\n          );\n          if (!session) {\n            return ctx.json(null, {\n              status: 400,\n              body: {\n                message: ERROR_CODES.COULD_NOT_CREATE_SESSION\n              }\n            });\n          }\n          await setSessionCookie(ctx, {\n            session,\n            user: newUser\n          });\n          return ctx.json({\n            token: session.token,\n            user: {\n              id: newUser.id,\n              email: newUser.email,\n              emailVerified: newUser.emailVerified,\n              name: newUser.name,\n              createdAt: newUser.createdAt,\n              updatedAt: newUser.updatedAt\n            }\n          });\n        }\n      )\n    },\n    hooks: {\n      after: [\n        {\n          matcher(context) {\n            const setCookie = context.responseHeader.get(\"set-cookie\");\n            const hasSessionToken = setCookie?.includes(\n              context.context.authCookies.sessionToken.name\n            );\n            return !!hasSessionToken && (context.path.startsWith(\"/sign-in\") || context.path.startsWith(\"/callback\") || context.path.startsWith(\"/oauth2/callback\") || context.path.startsWith(\"/magic-link/verify\") || context.path.startsWith(\"/email-otp/verify-email\"));\n          },\n          handler: createAuthMiddleware(async (ctx) => {\n            const headers = ctx.responseHeader;\n            const setCookie = headers.get(\"set-cookie\");\n            const sessionTokenName = ctx.context.authCookies.sessionToken.name;\n            const sessionCookie = parseSetCookieHeader(setCookie || \"\").get(sessionTokenName)?.value.split(\".\")[0];\n            if (!sessionCookie) {\n              return;\n            }\n            const session = await getSessionFromCtx(\n              ctx,\n              {\n                disableRefresh: true\n              }\n            );\n            if (!session || !session.user.isAnonymous) {\n              return;\n            }\n            if (ctx.path === \"/sign-in/anonymous\") {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: ERROR_CODES.ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY\n              });\n            }\n            const newSession = ctx.context.newSession;\n            if (!newSession) {\n              return;\n            }\n            if (options?.onLinkAccount) {\n              await options?.onLinkAccount?.({\n                anonymousUser: session,\n                newUser: newSession\n              });\n            }\n            if (!options?.disableDeleteAnonymousUser) {\n              await ctx.context.internalAdapter.deleteUser(session.user.id);\n            }\n          })\n        }\n      ]\n    },\n    schema: mergeSchema(schema, options?.schema),\n    $ERROR_CODES: ERROR_CODES\n  };\n};\n\nexport { anonymous };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14575, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14581, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-OC5UM5IR.js"],"sourcesContent":["import { createAuthMiddleware } from './chunk-FUJTYWXL.js';\nimport { parseSetCookieHeader } from './chunk-IWEXZ2ES.js';\nimport { serializeSigned } from 'better-call';\nimport { createHMAC } from '@better-auth/utils/hmac';\n\nvar bearer = (options) => {\n  return {\n    id: \"bearer\",\n    hooks: {\n      before: [\n        {\n          matcher(context) {\n            return Boolean(\n              context.request?.headers.get(\"authorization\") || context.headers?.get(\"authorization\")\n            );\n          },\n          handler: async (c) => {\n            const token = c.request?.headers.get(\"authorization\")?.replace(\"Bearer \", \"\") || c.headers?.get(\"authorization\")?.replace(\"Bearer \", \"\");\n            if (!token) {\n              return;\n            }\n            let signedToken = \"\";\n            if (token.includes(\".\")) {\n              signedToken = token.replace(\"=\", \"\");\n            } else {\n              if (options?.requireSignature) {\n                return;\n              }\n              signedToken = (await serializeSigned(\"\", token, c.context.secret)).replace(\"=\", \"\");\n            }\n            try {\n              const decodedToken = decodeURIComponent(signedToken);\n              const isValid = await createHMAC(\n                \"SHA-256\",\n                \"base64urlnopad\"\n              ).verify(\n                c.context.secret,\n                decodedToken.split(\".\")[0],\n                decodedToken.split(\".\")[1]\n              );\n              if (!isValid) {\n                return;\n              }\n            } catch (e) {\n              return;\n            }\n            if (c.request) {\n              c.request.headers.append(\n                \"cookie\",\n                `${c.context.authCookies.sessionToken.name}=${signedToken}`\n              );\n            }\n            if (c.headers) {\n              c.headers.append(\n                \"cookie\",\n                `${c.context.authCookies.sessionToken.name}=${signedToken}`\n              );\n            }\n            return {\n              context: c\n            };\n          }\n        }\n      ],\n      after: [\n        {\n          matcher(context) {\n            return !!context.responseHeader.get(\"set-cookie\");\n          },\n          handler: createAuthMiddleware(async (ctx) => {\n            const setCookie = ctx.responseHeader.get(\"set-cookie\");\n            if (!setCookie) {\n              return;\n            }\n            const parsedCookies = parseSetCookieHeader(setCookie);\n            const cookieName = ctx.context.authCookies.sessionToken.name;\n            const sessionCookie = parsedCookies.get(cookieName);\n            if (!sessionCookie || !sessionCookie.value || sessionCookie[\"max-age\"] === 0) {\n              return;\n            }\n            const token = sessionCookie.value;\n            ctx.responseHeader.set(\"set-auth-token\", token);\n            ctx.responseHeader.set(\"Access-Control-Expose-Headers\", \"set-auth-token\");\n            return {\n              responseHeader: ctx.responseHeader\n            };\n          })\n        }\n      ]\n    }\n  };\n};\n\nexport { bearer };\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AAHA;;;;;AAKA,IAAI,SAAS,CAAC;IACZ,OAAO;QACL,IAAI;QACJ,OAAO;YACL,QAAQ;gBACN;oBACE,SAAQ,OAAO;wBACb,OAAO,QACL,QAAQ,OAAO,EAAE,QAAQ,IAAI,oBAAoB,QAAQ,OAAO,EAAE,IAAI;oBAE1E;oBACA,SAAS,OAAO;wBACd,MAAM,QAAQ,EAAE,OAAO,EAAE,QAAQ,IAAI,kBAAkB,QAAQ,WAAW,OAAO,EAAE,OAAO,EAAE,IAAI,kBAAkB,QAAQ,WAAW;wBACrI,IAAI,CAAC,OAAO;4BACV;wBACF;wBACA,IAAI,cAAc;wBAClB,IAAI,MAAM,QAAQ,CAAC,MAAM;4BACvB,cAAc,MAAM,OAAO,CAAC,KAAK;wBACnC,OAAO;4BACL,IAAI,SAAS,kBAAkB;gCAC7B;4BACF;4BACA,cAAc,CAAC,MAAM,CAAA,GAAA,iJAAA,CAAA,kBAAe,AAAD,EAAE,IAAI,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,KAAK;wBAClF;wBACA,IAAI;4BACF,MAAM,eAAe,mBAAmB;4BACxC,MAAM,UAAU,MAAM,CAAA,GAAA,4JAAA,CAAA,aAAU,AAAD,EAC7B,WACA,kBACA,MAAM,CACN,EAAE,OAAO,CAAC,MAAM,EAChB,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,EAC1B,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE;4BAE5B,IAAI,CAAC,SAAS;gCACZ;4BACF;wBACF,EAAE,OAAO,GAAG;4BACV;wBACF;wBACA,IAAI,EAAE,OAAO,EAAE;4BACb,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,CACtB,UACA,GAAG,EAAE,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,aAAa;wBAE/D;wBACA,IAAI,EAAE,OAAO,EAAE;4BACb,EAAE,OAAO,CAAC,MAAM,CACd,UACA,GAAG,EAAE,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,aAAa;wBAE/D;wBACA,OAAO;4BACL,SAAS;wBACX;oBACF;gBACF;aACD;YACD,OAAO;gBACL;oBACE,SAAQ,OAAO;wBACb,OAAO,CAAC,CAAC,QAAQ,cAAc,CAAC,GAAG,CAAC;oBACtC;oBACA,SAAS,CAAA,GAAA,6KAAA,CAAA,uBAAoB,AAAD,EAAE,OAAO;wBACnC,MAAM,YAAY,IAAI,cAAc,CAAC,GAAG,CAAC;wBACzC,IAAI,CAAC,WAAW;4BACd;wBACF;wBACA,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE;wBAC3C,MAAM,aAAa,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI;wBAC5D,MAAM,gBAAgB,cAAc,GAAG,CAAC;wBACxC,IAAI,CAAC,iBAAiB,CAAC,cAAc,KAAK,IAAI,aAAa,CAAC,UAAU,KAAK,GAAG;4BAC5E;wBACF;wBACA,MAAM,QAAQ,cAAc,KAAK;wBACjC,IAAI,cAAc,CAAC,GAAG,CAAC,kBAAkB;wBACzC,IAAI,cAAc,CAAC,GAAG,CAAC,iCAAiC;wBACxD,OAAO;4BACL,gBAAgB,IAAI,cAAc;wBACpC;oBACF;gBACF;aACD;QACH;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 14666, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14672, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-5U5EEBVF.js"],"sourcesContent":["import { createAuthEndpoint, getSessionFromCtx } from './chunk-FUJTYWXL.js';\nimport { z } from 'zod';\n\nvar customSession = (fn, options) => {\n  return {\n    id: \"custom-session\",\n    endpoints: {\n      getSession: createAuthEndpoint(\n        \"/get-session\",\n        {\n          method: \"GET\",\n          metadata: {\n            CUSTOM_SESSION: true\n          },\n          query: z.optional(\n            z.object({\n              /**\n               * If cookie cache is enabled, it will disable the cache\n               * and fetch the session from the database\n               */\n              disableCookieCache: z.boolean({\n                description: \"Disable cookie cache and fetch session from database\"\n              }).or(z.string().transform((v) => v === \"true\")).optional(),\n              disableRefresh: z.boolean({\n                description: \"Disable session refresh. Useful for checking session status, without updating the session\"\n              }).optional()\n            })\n          )\n        },\n        async (ctx) => {\n          const session = await getSessionFromCtx(ctx);\n          if (!session) {\n            return ctx.json(null);\n          }\n          const fnResult = await fn(session);\n          return ctx.json(fnResult);\n        }\n      )\n    }\n  };\n};\n\nexport { customSession };\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;;;AAEA,IAAI,gBAAgB,CAAC,IAAI;IACvB,OAAO;QACL,IAAI;QACJ,WAAW;YACT,YAAY,CAAA,GAAA,6KAAA,CAAA,qBAAkB,AAAD,EAC3B,gBACA;gBACE,QAAQ;gBACR,UAAU;oBACR,gBAAgB;gBAClB;gBACA,OAAO,sIAAA,CAAA,IAAC,CAAC,QAAQ,CACf,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;oBACP;;;eAGC,GACD,oBAAoB,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;wBAC5B,aAAa;oBACf,GAAG,EAAE,CAAC,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,IAAM,MAAM,SAAS,QAAQ;oBACzD,gBAAgB,sIAAA,CAAA,IAAC,CAAC,OAAO,CAAC;wBACxB,aAAa;oBACf,GAAG,QAAQ;gBACb;YAEJ,GACA,OAAO;gBACL,MAAM,UAAU,MAAM,CAAA,GAAA,6KAAA,CAAA,oBAAiB,AAAD,EAAE;gBACxC,IAAI,CAAC,SAAS;oBACZ,OAAO,IAAI,IAAI,CAAC;gBAClB;gBACA,MAAM,WAAW,MAAM,GAAG;gBAC1B,OAAO,IAAI,IAAI,CAAC;YAClB;QAEJ;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 14712, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14718, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-M3VAQKTB.js"],"sourcesContent":["import { createAuthEndpoint, APIError } from './chunk-FUJTYWXL.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { generateRandomString } from './chunk-DBPOZRMS.js';\nimport { getDate } from './chunk-FURNA6HY.js';\nimport { z } from 'zod';\n\nvar types = [\"email-verification\", \"sign-in\", \"forget-password\"];\nvar emailOTP = (options) => {\n  const opts = {\n    expiresIn: 5 * 60,\n    otpLength: 6,\n    ...options\n  };\n  const ERROR_CODES = {\n    OTP_EXPIRED: \"otp expired\",\n    INVALID_OTP: \"invalid otp\",\n    INVALID_EMAIL: \"invalid email\",\n    USER_NOT_FOUND: \"user not found\"\n  };\n  return {\n    id: \"email-otp\",\n    endpoints: {\n      sendVerificationOTP: createAuthEndpoint(\n        \"/email-otp/send-verification-otp\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"Email address to send the OTP\"\n            }),\n            type: z.enum(types, {\n              description: \"Type of the OTP\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              description: \"Send verification OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          success: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          if (!options?.sendVerificationOTP) {\n            ctx.context.logger.error(\n              \"send email verification is not implemented\"\n            );\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"send email verification is not implemented\"\n            });\n          }\n          const email = ctx.body.email;\n          const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n          if (!emailRegex.test(email)) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_EMAIL\n            });\n          }\n          if (ctx.body.type === \"forget-password\" || opts.disableSignUp) {\n            const user = await ctx.context.internalAdapter.findUserByEmail(email);\n            if (!user) {\n              return ctx.json({\n                success: true\n              });\n            }\n          }\n          const otp = generateRandomString(opts.otpLength, \"0-9\");\n          await ctx.context.internalAdapter.createVerificationValue({\n            value: otp,\n            identifier: `${ctx.body.type}-otp-${email}`,\n            expiresAt: getDate(opts.expiresIn, \"sec\")\n          }).catch(async (error) => {\n            await ctx.context.internalAdapter.deleteVerificationByIdentifier(\n              `${ctx.body.type}-otp-${email}`\n            );\n            await ctx.context.internalAdapter.createVerificationValue({\n              value: otp,\n              identifier: `${ctx.body.type}-otp-${email}`,\n              expiresAt: getDate(opts.expiresIn, \"sec\")\n            });\n          });\n          await options.sendVerificationOTP(\n            {\n              email,\n              otp,\n              type: ctx.body.type\n            },\n            ctx.request\n          );\n          return ctx.json({\n            success: true\n          });\n        }\n      ),\n      createVerificationOTP: createAuthEndpoint(\n        \"/email-otp/create-verification-otp\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"Email address to send the OTP\"\n            }),\n            type: z.enum(types, {\n              description: \"Type of the OTP\"\n            })\n          }),\n          metadata: {\n            SERVER_ONLY: true,\n            openapi: {\n              description: \"Create verification OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"string\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const email = ctx.body.email;\n          const otp = generateRandomString(opts.otpLength, \"0-9\");\n          await ctx.context.internalAdapter.createVerificationValue({\n            value: otp,\n            identifier: `${ctx.body.type}-otp-${email}`,\n            expiresAt: getDate(opts.expiresIn, \"sec\")\n          });\n          return otp;\n        }\n      ),\n      getVerificationOTP: createAuthEndpoint(\n        \"/email-otp/get-verification-otp\",\n        {\n          method: \"GET\",\n          query: z.object({\n            email: z.string({\n              description: \"Email address to get the OTP\"\n            }),\n            type: z.enum(types)\n          }),\n          metadata: {\n            SERVER_ONLY: true,\n            openapi: {\n              description: \"Get verification OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          otp: {\n                            type: \"string\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const email = ctx.query.email;\n          const verificationValue = await ctx.context.internalAdapter.findVerificationValue(\n            `${ctx.query.type}-otp-${email}`\n          );\n          if (!verificationValue || verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n            return ctx.json({\n              otp: null\n            });\n          }\n          return ctx.json({\n            otp: verificationValue.value\n          });\n        }\n      ),\n      verifyEmailOTP: createAuthEndpoint(\n        \"/email-otp/verify-email\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"Email address to verify\"\n            }),\n            otp: z.string({\n              description: \"OTP to verify\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              description: \"Verify email OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const email = ctx.body.email;\n          const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n          if (!emailRegex.test(email)) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_EMAIL\n            });\n          }\n          const verificationValue = await ctx.context.internalAdapter.findVerificationValue(\n            `email-verification-otp-${email}`\n          );\n          if (!verificationValue) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OTP\n            });\n          }\n          if (verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              verificationValue.id\n            );\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.OTP_EXPIRED\n            });\n          }\n          const otp = ctx.body.otp;\n          if (verificationValue.value !== otp) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OTP\n            });\n          }\n          await ctx.context.internalAdapter.deleteVerificationValue(\n            verificationValue.id\n          );\n          const user = await ctx.context.internalAdapter.findUserByEmail(email);\n          if (!user) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.USER_NOT_FOUND\n            });\n          }\n          const updatedUser = await ctx.context.internalAdapter.updateUser(\n            user.user.id,\n            {\n              email,\n              emailVerified: true\n            }\n          );\n          if (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n            const session = await ctx.context.internalAdapter.createSession(\n              updatedUser.id,\n              ctx.request\n            );\n            await setSessionCookie(ctx, {\n              session,\n              user: updatedUser\n            });\n            return ctx.json({\n              status: true,\n              token: session.token,\n              user: {\n                id: updatedUser.id,\n                email: updatedUser.email,\n                emailVerified: updatedUser.emailVerified,\n                name: updatedUser.name,\n                image: updatedUser.image,\n                createdAt: updatedUser.createdAt,\n                updatedAt: updatedUser.updatedAt\n              }\n            });\n          }\n          return ctx.json({\n            status: true,\n            token: null,\n            user: {\n              id: updatedUser.id,\n              email: updatedUser.email,\n              emailVerified: updatedUser.emailVerified,\n              name: updatedUser.name,\n              image: updatedUser.image,\n              createdAt: updatedUser.createdAt,\n              updatedAt: updatedUser.updatedAt\n            }\n          });\n        }\n      ),\n      signInEmailOTP: createAuthEndpoint(\n        \"/sign-in/email-otp\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"Email address to sign in\"\n            }),\n            otp: z.string({\n              description: \"OTP sent to the email\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              description: \"Sign in with email OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          user: {\n                            $ref: \"#/components/schemas/User\"\n                          },\n                          session: {\n                            $ref: \"#/components/schemas/Session\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const email = ctx.body.email;\n          const verificationValue = await ctx.context.internalAdapter.findVerificationValue(\n            `sign-in-otp-${email}`\n          );\n          if (!verificationValue) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OTP\n            });\n          }\n          if (verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              verificationValue.id\n            );\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.OTP_EXPIRED\n            });\n          }\n          const otp = ctx.body.otp;\n          if (verificationValue.value !== otp) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OTP\n            });\n          }\n          await ctx.context.internalAdapter.deleteVerificationValue(\n            verificationValue.id\n          );\n          const user = await ctx.context.internalAdapter.findUserByEmail(email);\n          if (!user) {\n            if (opts.disableSignUp) {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: ERROR_CODES.USER_NOT_FOUND\n              });\n            }\n            const newUser = await ctx.context.internalAdapter.createUser({\n              email,\n              emailVerified: true,\n              name: email\n            });\n            const session2 = await ctx.context.internalAdapter.createSession(\n              newUser.id,\n              ctx.request\n            );\n            await setSessionCookie(ctx, {\n              session: session2,\n              user: newUser\n            });\n            return ctx.json({\n              token: session2.token,\n              user: {\n                id: newUser.id,\n                email: newUser.email,\n                emailVerified: newUser.emailVerified,\n                name: newUser.name,\n                image: newUser.image,\n                createdAt: newUser.createdAt,\n                updatedAt: newUser.updatedAt\n              }\n            });\n          }\n          if (!user.user.emailVerified) {\n            await ctx.context.internalAdapter.updateUser(user.user.id, {\n              emailVerified: true\n            });\n          }\n          const session = await ctx.context.internalAdapter.createSession(\n            user.user.id,\n            ctx.request\n          );\n          await setSessionCookie(ctx, {\n            session,\n            user: user.user\n          });\n          return ctx.json({\n            token: session.token,\n            user: {\n              id: user.user.id,\n              email: user.user.email,\n              emailVerified: user.user.emailVerified,\n              name: user.user.name,\n              image: user.user.image,\n              createdAt: user.user.createdAt,\n              updatedAt: user.user.updatedAt\n            }\n          });\n        }\n      ),\n      forgetPasswordEmailOTP: createAuthEndpoint(\n        \"/forget-password/email-otp\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"Email address to send the OTP\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              description: \"Forget password with email OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          success: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const email = ctx.body.email;\n          const user = await ctx.context.internalAdapter.findUserByEmail(email);\n          if (!user) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.USER_NOT_FOUND\n            });\n          }\n          const otp = generateRandomString(opts.otpLength, \"0-9\");\n          await ctx.context.internalAdapter.createVerificationValue({\n            value: otp,\n            identifier: `forget-password-otp-${email}`,\n            expiresAt: getDate(opts.expiresIn, \"sec\")\n          });\n          await options.sendVerificationOTP(\n            {\n              email,\n              otp,\n              type: \"forget-password\"\n            },\n            ctx.request\n          );\n          return ctx.json({\n            success: true\n          });\n        }\n      ),\n      resetPasswordEmailOTP: createAuthEndpoint(\n        \"/email-otp/reset-password\",\n        {\n          method: \"POST\",\n          body: z.object({\n            email: z.string({\n              description: \"Email address to reset the password\"\n            }),\n            otp: z.string({\n              description: \"OTP sent to the email\"\n            }),\n            password: z.string({\n              description: \"New password\"\n            })\n          }),\n          metadata: {\n            openapi: {\n              description: \"Reset password with email OTP\",\n              responses: {\n                200: {\n                  description: \"Success\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          success: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const email = ctx.body.email;\n          const user = await ctx.context.internalAdapter.findUserByEmail(\n            email,\n            {\n              includeAccounts: true\n            }\n          );\n          if (!user) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.USER_NOT_FOUND\n            });\n          }\n          const verificationValue = await ctx.context.internalAdapter.findVerificationValue(\n            `forget-password-otp-${email}`\n          );\n          if (!verificationValue) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OTP\n            });\n          }\n          if (verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n            await ctx.context.internalAdapter.deleteVerificationValue(\n              verificationValue.id\n            );\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.OTP_EXPIRED\n            });\n          }\n          const otp = ctx.body.otp;\n          if (verificationValue.value !== otp) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OTP\n            });\n          }\n          await ctx.context.internalAdapter.deleteVerificationValue(\n            verificationValue.id\n          );\n          const passwordHash = await ctx.context.password.hash(\n            ctx.body.password\n          );\n          const account = user.accounts.find(\n            (account2) => account2.providerId === \"credential\"\n          );\n          if (!account) {\n            await ctx.context.internalAdapter.createAccount({\n              userId: user.user.id,\n              providerId: \"credential\",\n              accountId: user.user.id,\n              password: passwordHash\n            });\n          } else {\n            await ctx.context.internalAdapter.updatePassword(\n              user.user.id,\n              passwordHash\n            );\n          }\n          return ctx.json({\n            success: true\n          });\n        }\n      )\n    },\n    hooks: {\n      after: [\n        {\n          matcher(context) {\n            return !!(context.path?.startsWith(\"/sign-up\") && opts.sendVerificationOnSignUp);\n          },\n          async handler(ctx) {\n            const response = ctx.context.returned;\n            if (response instanceof APIError) {\n              return;\n            }\n            const email = response && \"email\" in response ? response.email : response instanceof Response ? response.status === 200 ? ctx.body.email : null : null;\n            if (email) {\n              const otp = generateRandomString(opts.otpLength, \"0-9\");\n              await ctx.context.internalAdapter.createVerificationValue({\n                value: otp,\n                identifier: `email-verification-otp-${email}`,\n                expiresAt: getDate(opts.expiresIn, \"sec\")\n              });\n              await options.sendVerificationOTP(\n                {\n                  email,\n                  otp,\n                  type: \"email-verification\"\n                },\n                ctx.request\n              );\n            }\n          }\n        }\n      ]\n    },\n    $ERROR_CODES: ERROR_CODES,\n    rateLimit: [\n      {\n        pathMatcher(path) {\n          return path === \"/email-otp/send-verification-otp\";\n        },\n        window: 60,\n        max: 3\n      },\n      {\n        pathMatcher(path) {\n          return path === \"/email-otp/verify-email\";\n        },\n        window: 60,\n        max: 3\n      },\n      {\n        pathMatcher(path) {\n          return path === \"/sign-in/email-otp\";\n        },\n        window: 60,\n        max: 3\n      }\n    ]\n  };\n};\n\nexport { emailOTP };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15311, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15317, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-427EJQBB.js"],"sourcesContent":["import { createAuthEndpoint, handleOAuthUserInfo } from './chunk-FUJTYWXL.js';\nimport { createAuthorizationURL, validateAuthorizationCode } from './chunk-GTQM7JU7.js';\nimport { setSessionCookie } from './chunk-IWEXZ2ES.js';\nimport { generateState, parseState } from './chunk-NPO64SVN.js';\nimport { betterFetch } from '@better-fetch/fetch';\nimport { APIError } from 'better-call';\nimport { z } from 'zod';\nimport { decodeJwt } from 'jose';\n\nasync function getUserInfo(tokens, finalUserInfoUrl) {\n  if (tokens.idToken) {\n    const decoded = decodeJwt(tokens.idToken);\n    if (decoded) {\n      if (decoded.sub && decoded.email) {\n        return {\n          id: decoded.sub,\n          emailVerified: decoded.email_verified,\n          image: decoded.picture,\n          ...decoded\n        };\n      }\n    }\n  }\n  if (!finalUserInfoUrl) {\n    return null;\n  }\n  const userInfo = await betterFetch(finalUserInfoUrl, {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${tokens.accessToken}`\n    }\n  });\n  return {\n    id: userInfo.data?.sub,\n    emailVerified: userInfo.data?.email_verified,\n    email: userInfo.data?.email,\n    image: userInfo.data?.picture,\n    name: userInfo.data?.name,\n    ...userInfo.data\n  };\n}\nvar genericOAuth = (options) => {\n  const ERROR_CODES = {\n    INVALID_OAUTH_CONFIGURATION: \"Invalid OAuth configuration\"\n  };\n  return {\n    id: \"generic-oauth\",\n    init: (ctx) => {\n      const genericProviders = options.config.map((c) => {\n        let finalUserInfoUrl = c.userInfoUrl;\n        return {\n          id: c.providerId,\n          name: c.providerId,\n          createAuthorizationURL(data) {\n            return createAuthorizationURL({\n              id: c.providerId,\n              options: {\n                clientId: c.clientId,\n                clientSecret: c.clientSecret,\n                redirectURI: c.redirectURI\n              },\n              authorizationEndpoint: c.authorizationUrl,\n              state: data.state,\n              codeVerifier: c.pkce ? data.codeVerifier : void 0,\n              scopes: c.scopes || [],\n              redirectURI: `${ctx.baseURL}/oauth2/callback/${c.providerId}`\n            });\n          },\n          async validateAuthorizationCode(data) {\n            let finalTokenUrl = c.tokenUrl;\n            if (c.discoveryUrl) {\n              const discovery = await betterFetch(c.discoveryUrl, {\n                method: \"GET\"\n              });\n              if (discovery.data) {\n                finalTokenUrl = discovery.data.token_endpoint;\n                finalUserInfoUrl = discovery.data.userinfo_endpoint;\n              }\n            }\n            if (!finalTokenUrl) {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: \"Invalid OAuth configuration. Token URL not found.\"\n              });\n            }\n            return validateAuthorizationCode({\n              code: data.code,\n              codeVerifier: data.codeVerifier,\n              redirectURI: data.redirectURI,\n              options: {\n                clientId: c.clientId,\n                clientSecret: c.clientSecret,\n                redirectURI: c.redirectURI\n              },\n              tokenEndpoint: finalTokenUrl\n            });\n          },\n          async getUserInfo(tokens) {\n            if (!finalUserInfoUrl) {\n              return null;\n            }\n            const userInfo = c.getUserInfo ? await c.getUserInfo(tokens) : await getUserInfo(tokens, finalUserInfoUrl);\n            if (!userInfo) {\n              return null;\n            }\n            return {\n              user: {\n                id: userInfo?.id,\n                email: userInfo?.email,\n                emailVerified: userInfo?.emailVerified,\n                image: userInfo?.image,\n                name: userInfo?.name,\n                ...c.mapProfileToUser?.(userInfo)\n              },\n              data: userInfo\n            };\n          }\n        };\n      });\n      return {\n        context: {\n          socialProviders: genericProviders.concat(ctx.socialProviders)\n        }\n      };\n    },\n    endpoints: {\n      signInWithOAuth2: createAuthEndpoint(\n        \"/sign-in/oauth2\",\n        {\n          method: \"POST\",\n          body: z.object({\n            providerId: z.string({\n              description: \"The provider ID for the OAuth provider\"\n            }),\n            callbackURL: z.string({\n              description: \"The URL to redirect to after sign in\"\n            }).optional(),\n            errorCallbackURL: z.string({\n              description: \"The URL to redirect to if an error occurs\"\n            }).optional(),\n            newUserCallbackURL: z.string({\n              description: \"The URL to redirect to after login if the user is new\"\n            }).optional(),\n            disableRedirect: z.boolean({\n              description: \"Disable redirect\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              description: \"Sign in with OAuth2\",\n              responses: {\n                200: {\n                  description: \"Sign in with OAuth2\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          url: {\n                            type: \"string\"\n                          },\n                          redirect: {\n                            type: \"boolean\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const { providerId } = ctx.body;\n          const config = options.config.find(\n            (c) => c.providerId === providerId\n          );\n          if (!config) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: `No config found for provider ${providerId}`\n            });\n          }\n          const {\n            discoveryUrl,\n            authorizationUrl,\n            tokenUrl,\n            clientId,\n            clientSecret,\n            scopes,\n            redirectURI,\n            responseType,\n            pkce,\n            prompt,\n            accessType,\n            authorizationUrlParams\n          } = config;\n          let finalAuthUrl = authorizationUrl;\n          let finalTokenUrl = tokenUrl;\n          if (discoveryUrl) {\n            const discovery = await betterFetch(discoveryUrl, {\n              onError(context) {\n                ctx.context.logger.error(context.error.message, context.error, {\n                  discoveryUrl\n                });\n              }\n            });\n            if (discovery.data) {\n              finalAuthUrl = discovery.data.authorization_endpoint;\n              finalTokenUrl = discovery.data.token_endpoint;\n            }\n          }\n          if (!finalAuthUrl || !finalTokenUrl) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: ERROR_CODES.INVALID_OAUTH_CONFIGURATION\n            });\n          }\n          if (authorizationUrlParams) {\n            const withAdditionalParams = new URL(finalAuthUrl);\n            for (const [paramName, paramValue] of Object.entries(\n              authorizationUrlParams\n            )) {\n              withAdditionalParams.searchParams.set(paramName, paramValue);\n            }\n            finalAuthUrl = withAdditionalParams.toString();\n          }\n          const { state, codeVerifier } = await generateState(ctx);\n          const authUrl = await createAuthorizationURL({\n            id: providerId,\n            options: {\n              clientId,\n              clientSecret,\n              redirectURI\n            },\n            authorizationEndpoint: finalAuthUrl,\n            state,\n            codeVerifier: pkce ? codeVerifier : void 0,\n            scopes: scopes || [],\n            redirectURI: `${ctx.context.baseURL}/oauth2/callback/${providerId}`\n          });\n          if (responseType && responseType !== \"code\") {\n            authUrl.searchParams.set(\"response_type\", responseType);\n          }\n          if (prompt) {\n            authUrl.searchParams.set(\"prompt\", prompt);\n          }\n          if (accessType) {\n            authUrl.searchParams.set(\"access_type\", accessType);\n          }\n          return ctx.json({\n            url: authUrl.toString(),\n            redirect: !ctx.body.disableRedirect\n          });\n        }\n      ),\n      oAuth2Callback: createAuthEndpoint(\n        \"/oauth2/callback/:providerId\",\n        {\n          method: \"GET\",\n          query: z.object({\n            code: z.string({\n              description: \"The OAuth2 code\"\n            }).optional(),\n            error: z.string({\n              description: \"The error message, if any\"\n            }).optional(),\n            state: z.string({\n              description: \"The state parameter from the OAuth2 request\"\n            }).optional()\n          }),\n          metadata: {\n            openapi: {\n              description: \"OAuth2 callback\",\n              responses: {\n                200: {\n                  description: \"OAuth2 callback\",\n                  content: {\n                    \"application/json\": {\n                      schema: {\n                        type: \"object\",\n                        properties: {\n                          url: {\n                            type: \"string\"\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          if (ctx.query.error || !ctx.query.code) {\n            throw ctx.redirect(\n              `${ctx.context.options.baseURL}?error=${ctx.query.error || \"oAuth_code_missing\"}`\n            );\n          }\n          const provider = options.config.find(\n            (p) => p.providerId === ctx.params.providerId\n          );\n          if (!provider) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: `No config found for provider ${ctx.params.providerId}`\n            });\n          }\n          let tokens = void 0;\n          const parsedState = await parseState(ctx);\n          const { callbackURL, codeVerifier, errorURL, newUserURL } = parsedState;\n          const code = ctx.query.code;\n          let finalTokenUrl = provider.tokenUrl;\n          let finalUserInfoUrl = provider.userInfoUrl;\n          if (provider.discoveryUrl) {\n            const discovery = await betterFetch(provider.discoveryUrl, {\n              method: \"GET\"\n            });\n            if (discovery.data) {\n              finalTokenUrl = discovery.data.token_endpoint;\n              finalUserInfoUrl = discovery.data.userinfo_endpoint;\n            }\n          }\n          try {\n            if (!finalTokenUrl) {\n              throw new APIError(\"BAD_REQUEST\", {\n                message: \"Invalid OAuth configuration.\"\n              });\n            }\n            tokens = await validateAuthorizationCode({\n              code,\n              codeVerifier: provider.pkce ? codeVerifier : void 0,\n              redirectURI: `${ctx.context.baseURL}/oauth2/callback/${provider.providerId}`,\n              options: {\n                clientId: provider.clientId,\n                clientSecret: provider.clientSecret,\n                redirectURI: provider.redirectURI\n              },\n              tokenEndpoint: finalTokenUrl\n            });\n          } catch (e) {\n            ctx.context.logger.error(\n              e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n              e\n            );\n            throw ctx.redirect(\n              `${errorURL}?error=oauth_code_verification_failed`\n            );\n          }\n          if (!tokens) {\n            throw new APIError(\"BAD_REQUEST\", {\n              message: \"Invalid OAuth configuration.\"\n            });\n          }\n          const userInfo = provider.getUserInfo ? await provider.getUserInfo(tokens) : await getUserInfo(tokens, finalUserInfoUrl);\n          if (!userInfo?.email) {\n            ctx.context.logger.error(\"Unable to get user info\", userInfo);\n            throw ctx.redirect(\n              `${ctx.context.baseURL}/error?error=email_is_missing`\n            );\n          }\n          const mapUser = provider.mapProfileToUser ? await provider.mapProfileToUser(userInfo) : null;\n          const result = await handleOAuthUserInfo(ctx, {\n            userInfo: {\n              ...userInfo,\n              ...mapUser\n            },\n            account: {\n              providerId: provider.providerId,\n              accountId: userInfo.id,\n              ...tokens,\n              scope: tokens.scopes?.join(\",\")\n            }\n          });\n          function redirectOnError(error) {\n            throw ctx.redirect(\n              `${errorURL || callbackURL || `${ctx.context.baseURL}/error`}?error=${error}`\n            );\n          }\n          if (result.error) {\n            return redirectOnError(result.error.split(\" \").join(\"_\"));\n          }\n          const { session, user } = result.data;\n          await setSessionCookie(ctx, {\n            session,\n            user\n          });\n          let toRedirectTo;\n          try {\n            const url = result.isRegister ? newUserURL || callbackURL : callbackURL;\n            toRedirectTo = url.toString();\n          } catch {\n            toRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n          }\n          throw ctx.redirect(toRedirectTo);\n        }\n      )\n    },\n    $ERROR_CODES: ERROR_CODES\n  };\n};\n\nexport { genericOAuth };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15690, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15696, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/chunk-GYDUPG7X.js"],"sourcesContent":["// src/plugins/two-factor/client.ts\nvar twoFactorClient = (options) => {\n  return {\n    id: \"two-factor\",\n    $InferServerPlugin: {},\n    atomListeners: [\n      {\n        matcher: (path) => path.startsWith(\"/two-factor/\"),\n        signal: \"$sessionSignal\"\n      }\n    ],\n    pathMethods: {\n      \"/two-factor/disable\": \"POST\",\n      \"/two-factor/enable\": \"POST\",\n      \"/two-factor/send-otp\": \"POST\",\n      \"/two-factor/generate-backup-codes\": \"POST\"\n    },\n    fetchPlugins: [\n      {\n        id: \"two-factor\",\n        name: \"two-factor\",\n        hooks: {\n          async onSuccess(context) {\n            if (context.data?.twoFactorRedirect) {\n              if (options?.onTwoFactorRedirect) {\n                await options.onTwoFactorRedirect();\n              }\n            }\n          }\n        }\n      }\n    ]\n  };\n};\n\nexport { twoFactorClient };\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;AACnC,IAAI,kBAAkB,CAAC;IACrB,OAAO;QACL,IAAI;QACJ,oBAAoB,CAAC;QACrB,eAAe;YACb;gBACE,SAAS,CAAC,OAAS,KAAK,UAAU,CAAC;gBACnC,QAAQ;YACV;SACD;QACD,aAAa;YACX,uBAAuB;YACvB,sBAAsB;YACtB,wBAAwB;YACxB,qCAAqC;QACvC;QACA,cAAc;YACZ;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;oBACL,MAAM,WAAU,OAAO;wBACrB,IAAI,QAAQ,IAAI,EAAE,mBAAmB;4BACnC,IAAI,SAAS,qBAAqB;gCAChC,MAAM,QAAQ,mBAAmB;4BACnC;wBACF;oBACF;gBACF;YACF;SACD;IACH;AACF","ignoreList":[0]}},
    {"offset": {"line": 15734, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15740, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/plugins.js"],"sourcesContent":["export { phoneNumber } from './chunk-MPR5EWNB.js';\nexport { twoFactor } from './chunk-K5MUU6L4.js';\nexport { username } from './chunk-4FIFM3LN.js';\nimport './chunk-WMXBA6LX.js';\nexport { jwt } from './chunk-I6AIEFED.js';\nexport { magicLink } from './chunk-RC4GIBXH.js';\nexport { multiSession } from './chunk-I7IXLICR.js';\nexport { oneTap } from './chunk-G4TT5TMT.js';\nexport { openAPI } from './chunk-4VOFXDSP.js';\nexport { organization } from './chunk-NAAR7BAI.js';\nexport { oidcProvider } from './chunk-2EBJWXL5.js';\nexport { admin } from './chunk-WKR7D7I3.js';\nexport { anonymous } from './chunk-QMQ3YGXS.js';\nexport { bearer } from './chunk-OC5UM5IR.js';\nexport { customSession } from './chunk-5U5EEBVF.js';\nexport { emailOTP } from './chunk-M3VAQKTB.js';\nexport { genericOAuth } from './chunk-427EJQBB.js';\nexport { twoFactorClient } from './chunk-GYDUPG7X.js';\nimport './chunk-GBLEGHZW.js';\nimport './chunk-TOKZL3ZI.js';\nimport { createAuthEndpoint, originCheck, createAuthMiddleware, APIError } from './chunk-FUJTYWXL.js';\nexport { createAuthEndpoint, createAuthMiddleware, optionsMiddleware } from './chunk-FUJTYWXL.js';\nimport './chunk-GB5YTBLA.js';\nimport './chunk-GTQM7JU7.js';\nimport './chunk-HVHN3Y2L.js';\nimport { getOrigin } from './chunk-XFCIANZX.js';\nimport './chunk-IWEXZ2ES.js';\nimport './chunk-NN3CE6VO.js';\nimport './chunk-72KRA3CK.js';\nexport { HIDE_METADATA } from './chunk-KLDFBLYL.js';\nimport './chunk-NPO64SVN.js';\nimport './chunk-SK6Y2YH6.js';\nimport './chunk-3XTQSPPA.js';\nimport { symmetricDecrypt, symmetricEncrypt } from './chunk-DBPOZRMS.js';\nimport './chunk-FURNA6HY.js';\nimport { env } from './chunk-TQQSPPNA.js';\nimport './chunk-UNWCXKMP.js';\nimport { z } from 'zod';\n\nfunction getVenderBaseURL() {\n  const vercel = env.VERCEL_URL;\n  const netlify = env.NETLIFY_URL;\n  const render = env.RENDER_URL;\n  const aws = env.AWS_LAMBDA_FUNCTION_NAME;\n  const google = env.GOOGLE_CLOUD_FUNCTION_NAME;\n  const azure = env.AZURE_FUNCTION_NAME;\n  return vercel || netlify || render || aws || google || azure;\n}\nvar oAuthProxy = (opts) => {\n  return {\n    id: \"oauth-proxy\",\n    endpoints: {\n      oAuthProxy: createAuthEndpoint(\n        \"/oauth-proxy-callback\",\n        {\n          method: \"GET\",\n          query: z.object({\n            callbackURL: z.string({\n              description: \"The URL to redirect to after the proxy\"\n            }),\n            cookies: z.string({\n              description: \"The cookies to set after the proxy\"\n            })\n          }),\n          use: [originCheck((ctx) => ctx.query.callbackURL)],\n          metadata: {\n            openapi: {\n              description: \"OAuth Proxy Callback\",\n              parameters: [\n                {\n                  in: \"query\",\n                  name: \"callbackURL\",\n                  required: true,\n                  description: \"The URL to redirect to after the proxy\"\n                },\n                {\n                  in: \"query\",\n                  name: \"cookies\",\n                  required: true,\n                  description: \"The cookies to set after the proxy\"\n                }\n              ],\n              responses: {\n                302: {\n                  description: \"Redirect\",\n                  headers: {\n                    Location: {\n                      description: \"The URL to redirect to\",\n                      schema: {\n                        type: \"string\"\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        async (ctx) => {\n          const cookies = ctx.query.cookies;\n          const decryptedCookies = await symmetricDecrypt({\n            key: ctx.context.secret,\n            data: cookies\n          });\n          ctx.setHeader(\"set-cookie\", decryptedCookies);\n          throw ctx.redirect(ctx.query.callbackURL);\n        }\n      )\n    },\n    hooks: {\n      after: [\n        {\n          matcher(context) {\n            return context.path?.startsWith(\"/callback\");\n          },\n          handler: createAuthMiddleware(async (ctx) => {\n            const response = ctx.context.returned;\n            const headers = response instanceof APIError ? response.headers : null;\n            const location = headers?.get(\"location\");\n            if (location?.includes(\"/oauth-proxy-callback?callbackURL\")) {\n              if (!location.startsWith(\"http\")) {\n                return;\n              }\n              const locationURL = new URL(location);\n              const origin = locationURL.origin;\n              if (origin === getOrigin(ctx.context.baseURL)) {\n                const newLocation = locationURL.searchParams.get(\"callbackURL\");\n                if (!newLocation) {\n                  return;\n                }\n                ctx.setHeader(\"location\", newLocation);\n                return;\n              }\n              const setCookies = headers?.get(\"set-cookie\");\n              if (!setCookies) {\n                return;\n              }\n              const encryptedCookies = await symmetricEncrypt({\n                key: ctx.context.secret,\n                data: setCookies\n              });\n              const locationWithCookies = `${location}&cookies=${encodeURIComponent(\n                encryptedCookies\n              )}`;\n              ctx.setHeader(\"location\", locationWithCookies);\n            }\n          })\n        }\n      ],\n      before: [\n        {\n          matcher(context) {\n            return context.path?.startsWith(\"/sign-in/social\");\n          },\n          async handler(ctx) {\n            const url = new URL(\n              opts?.currentURL || ctx.request?.url || getVenderBaseURL() || ctx.context.baseURL\n            );\n            const productionURL = opts?.productionURL || env.BETTER_AUTH_URL;\n            if (productionURL === ctx.context.options.baseURL) {\n              return;\n            }\n            ctx.body.callbackURL = `${url.origin}${ctx.context.options.basePath || \"/api/auth\"}/oauth-proxy-callback?callbackURL=${encodeURIComponent(\n              ctx.body.callbackURL || ctx.context.baseURL\n            )}`;\n            return {\n              context: ctx\n            };\n          }\n        }\n      ]\n    }\n  };\n};\n\nexport { oAuthProxy };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15915, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15965, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/node_modules/better-auth/dist/next-js.js"],"sourcesContent":["import { parseSetCookieHeader } from './chunk-IWEXZ2ES.js';\nimport './chunk-FURNA6HY.js';\nimport './chunk-TQQSPPNA.js';\nimport './chunk-UNWCXKMP.js';\nimport { cookies } from 'next/headers';\n\nfunction toNextJsHandler(auth) {\n  const handler = async (request) => {\n    return \"handler\" in auth ? auth.handler(request) : auth(request);\n  };\n  return {\n    GET: handler,\n    POST: handler\n  };\n}\nvar nextCookies = () => {\n  return {\n    id: \"next-cookies\",\n    hooks: {\n      after: [\n        {\n          matcher(ctx) {\n            return true;\n          },\n          handler: async (ctx) => {\n            const returned = ctx.responseHeader;\n            if (\"_flag\" in ctx && ctx._flag === \"router\") {\n              return;\n            }\n            if (returned instanceof Headers) {\n              const setCookies = returned?.get(\"set-cookie\");\n              if (!setCookies) return;\n              const parsed = parseSetCookieHeader(setCookies);\n              const cookieHelper = await cookies();\n              parsed.forEach((value, key) => {\n                if (!key) return;\n                const opts = {\n                  sameSite: value.samesite,\n                  secure: value.secure,\n                  maxAge: value[\"max-age\"],\n                  httpOnly: value.httponly,\n                  domain: value.domain,\n                  path: value.path\n                };\n                try {\n                  cookieHelper.set(key, decodeURIComponent(value.value), opts);\n                } catch (e) {\n                }\n              });\n              return;\n            }\n          }\n        }\n      ]\n    }\n  };\n};\n\nexport { nextCookies, toNextJsHandler };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,SAAS,gBAAgB,IAAI;IAC3B,MAAM,UAAU,OAAO;QACrB,OAAO,aAAa,OAAO,KAAK,OAAO,CAAC,WAAW,KAAK;IAC1D;IACA,OAAO;QACL,KAAK;QACL,MAAM;IACR;AACF;AACA,IAAI,cAAc;IAChB,OAAO;QACL,IAAI;QACJ,OAAO;YACL,OAAO;gBACL;oBACE,SAAQ,GAAG;wBACT,OAAO;oBACT;oBACA,SAAS,OAAO;wBACd,MAAM,WAAW,IAAI,cAAc;wBACnC,IAAI,WAAW,OAAO,IAAI,KAAK,KAAK,UAAU;4BAC5C;wBACF;wBACA,IAAI,oBAAoB,SAAS;4BAC/B,MAAM,aAAa,UAAU,IAAI;4BACjC,IAAI,CAAC,YAAY;4BACjB,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,uBAAoB,AAAD,EAAE;4BACpC,MAAM,eAAe,MAAM,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;4BACjC,OAAO,OAAO,CAAC,CAAC,OAAO;gCACrB,IAAI,CAAC,KAAK;gCACV,MAAM,OAAO;oCACX,UAAU,MAAM,QAAQ;oCACxB,QAAQ,MAAM,MAAM;oCACpB,QAAQ,KAAK,CAAC,UAAU;oCACxB,UAAU,MAAM,QAAQ;oCACxB,QAAQ,MAAM,MAAM;oCACpB,MAAM,MAAM,IAAI;gCAClB;gCACA,IAAI;oCACF,aAAa,GAAG,CAAC,KAAK,mBAAmB,MAAM,KAAK,GAAG;gCACzD,EAAE,OAAO,GAAG,CACZ;4BACF;4BACA;wBACF;oBACF;gBACF;aACD;QACH;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 16030, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/deleteReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\nexport async function deleteReport(reportId: string, userId: string) {\n  const report = await db.report.findUnique({\n    where: { id: reportId },\n  });\n\n  if (!report) return { error: \"Report not found\" };\n  if (report.submittedById !== userId) return { error: \"Unauthorized\" };\n\n  // ‚úÖ Delete the report\n  await db.report.delete({\n    where: { id: reportId },\n  });\n\n  return { success: true };\n}\n"],"names":[],"mappings":";;;;;IAIsB"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/officer.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABA0lEQVR42j2KvUsCcRzGfzeEDsKZnme1NFVD9rLVUlBQ/4C7c5yD/DBqEhJbtOjoEq0uTZcTRTnv0OkQ8ZxOfAFfFv8Bd8VN+Ho/QR/4wMPzeRAyY9myWvb3jk583qeEz/ucIN3crGid04PLG/+jNPoSygsC6Z7Di9vNwW5zMsGAaEQ+mkDAgZ8WbXMwmwO77d6V08VBTesBoZgq9Bk7u7OSFKIoJ+1yC2GhMpuMYWrCh+Oqg3axxKEzz9V9EPNa/leaK0obZLULr0lj/oBF7fz4+g5xWNQj/0NQpQLwGQNIz2UViKY7wOE/HXH+73YopkPyU4ZUvAShWAPe3qvwEq0DcUvPOXKW4ORclwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,iHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/car.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 64, height: 64, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABBUlEQVR42k2PuWoCYRSF/4AokyBxGTJDJMRXMIVVSBA7g0GTGLMVkyqmyQukSBcQBAcccMOxcEPRURQ3FMRO0EFt1EJ8A20UK+HqLwp+8HEv51QHoR0ygiAUKhWplsvJY4mEQIco1eT5y9cP+88FRe73T/y+u2dxti1PFUqN9Y1x+qutVbjZh3CzB7FGe/X4zjhxh24Mxk9PKDLIdoYgdEYgiCPIbeT4yODWYGTQk073Oo5GF2khD25vCFgfD4ViBSbx+Nyu1z8ju8nkaJfKy0QyM+MC/BSbSGVm3Vp9+WGxOBBF0Vqz1ebSXFxek2f0FRb/5gebi6JpLTraIJXKTvDdrzrM1pXKXXi29T9TAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,6GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkc,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/roadblock.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxElEQVR42k2PTwqCYBDFv++zSKJVglButBDCIIzcuAgzjP6RbcroAOIJatFKb+PaE3SAbuBCJOgc+USsBw9+82ZgZggpRCmhrDCpBKZ/NTlM2cK3OY9Vg2BkZVNuc3LiCvErUJ6RLoaRIYXgZNuJZZ7KxOw2zfQ8zt+P6ycLllnmWxk4vUxyU2iZhGeE99ZONNfUk9LmhjDY26wi9Mo19v54Nyzn1h+oLgxGVh+p6bOd2JNGlLEGDEZWDxQ/MYrHfjXEwF+c1CxBbgbuvwAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,mHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAA8W,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/raid.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAEAHicrHi4+RjwrOT8xFx4hFAAAAQAAAAAAAAAAAAACAwMBXIaagoTN7u6T0e3nZYaWgQIDAwIAAAAAAAAAAAACAwQBb5Okhqjh+/+s4vz/bpOklAIDAwIAAAAAABcfIhonNDo4e6GzoZTU8OiM0fDpcZ6ymiUwNSIMDxALAFh9jX2Hzezvrt/194KnuKR+rcKpidL07obJ6N5MbHpwAF6AkH+f3vv+od/7/2+dspiKtMexrOP8/6Hf+/5Zfo+KAFlyfnaUxdzbeLzb2lyFl4RtkqKKkMTc1JbG3NVTbXlpAA8TFRAZISQiGCAkIREWGBISFhgRGSAkHBkgJB0MEBENb3BpM2Q9BXAAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/caution.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA1UlEQVR42m3KPwsBYQAG8Pecw6UO50+OdNKhDMogg/+jRDFQLIz4BnwFE9ubUdksNm53C7kM6oYz33h1jI73Fqc89aunngcAU8J+0oeAf3GSuB1Os3M4y82dpNX+M2IfjQJTlncdRd51FdQx8yFA26j9srgV1p0Xsl/ktwGacBkjbsGwSTvSU/m6Jm6aOqIeatqkFeqjDaRYkj2vMsKTr+q3Tcnw4Cv6CaaFFOuIgnHTMxBhQrqukvfjkjOgfoFxadRwD4GXwukYQ3CxoPWLQQjOS1noN0q9SJ/GhODCAAAAAElFTkSuQmCC\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,iHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAkY,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/smoke.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 80, height: 80, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR42gEIAff+AAAAAAAAAAAACgsMDBgaHB8JCgsKAAAAAAAAAAAAAAAAAAAAAAASExQVho+Vn7O+xtmDi5GaGx0fIAICAgIAAAAAAAcICQhgZ2xyyNbf+LrM2P/H1d/7rrjAzjM3OjwAAAAAADg8P0PCz9frvs7a/7/BzP+4ydb/x9bh/6GqsbwYGxwdAG10eoDH1uD8v8HN/9qprv/Kt8D/vMjU/8vY4fhZXmNqALnFzd++ztr/x7rD//Gbl//qnp7/xbzG/8HR3f+zvsbWAImTmaeapq/RpZCW0cKVf9G/jYDRn5Wd0Zelr9GNlp2sAAsMDQ4PERIXDw8RFxEPDhcRDw8XDhARFw8REhcLDA0PWIh2COGodmEAAAAASUVORK5CYII=\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,+GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsd,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/public/marker.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 48, height: 48, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvklEQVR42k2Ovw7BUBjFf6goEsztJv4MbCqG4kE8hcTCYOEBWCUmiwfhBXSgQ41iExMdJPV9TSpOcpJzz+/k3gsiO0dlXWV27eKJT5Kn2ikjnya7qTEPXZ5+h4PvcNC8qTMXZlA1sQMHT2E7j9UuYsnoGMhNynRg6UFLhb+BEw+s+Ildk9Wnz1uBWnK4b7AqCIv/4ZZo3XqcowGR+t7jMpSOREaK9Nhm9HJ5qCeSs9Lxr3IGc1tnIV6WDcyk/wJYZD8DPsfKIQAAAABJRU5ErkJggg==\", blurWidth: 8, blurHeight: 8 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,gHAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAsW,WAAW;IAAG,YAAY;AAAE"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportMarkers.tsx"],"sourcesContent":["\"use client\";\nimport { Marker } from \"react-map-gl/maplibre\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport Image from \"next/image\";\nimport { useState } from \"react\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\n\nimport officer from \"@/public/officer.png\";\nimport car from \"@/public/car.png\";\nimport roadblock from \"@/public/roadblock.png\";\nimport ice from \"@//public/raid.png\";\nimport caution from \"@/public/caution.png\";\nimport smoke from \"@/public/smoke.png\";\nimport marker from \"@/public/marker.png\";\n\nconst reportTypeIcons = {\n  1: officer,\n  2: car,\n  3: roadblock,\n  4: ice,\n  5: caution,\n  6: smoke,\n};\n\nconst getMarkerColor = (trustScore: number) => {\n  if (trustScore >= 4)\n    return \"bg-green-300 shadow-green-400 before:border-t-green-300\";\n  if (trustScore >= 2)\n    return \"bg-yellow-300 shadow-yellow-400 before:border-t-yellow-300\";\n  return \"bg-red-300 shadow-red-400 before:border-t-red-300\";\n};\n\nconst getMarkerOpacity = (createdAt: string) => {\n  const reportDate = new Date(createdAt);\n  const now = new Date();\n  const hoursElapsed =\n    (now.getTime() - reportDate.getTime()) / (1000 * 60 * 60);\n  return hoursElapsed < 1 ? \"1\" : \"0.8\";\n};\n\nexport default function ReportMarkers({ setSelectedReport, userId }) {\n  const { reports, setReports } = useData();\n  const [newReportId, setNewReportId] = useState<string | null>(null);\n\n  return (\n    <AnimatePresence>\n      {reports.map((report) => {\n        if (report.isRemoving) return null;\n\n        const iconSrc = reportTypeIcons[report.reportTypeId] || marker;\n        const markerColor = getMarkerColor(report.trustScore);\n        const isNew = report.id === newReportId;\n\n        return (\n          <Marker\n            key={report.id}\n            longitude={report.long}\n            latitude={report.lat}\n            anchor=\"bottom\"\n            onClick={() => setSelectedReport(report)}\n          >\n            <motion.div\n              layout=\"position\"\n              variants={\n                isNew\n                  ? undefined\n                  : {\n                      hidden: { opacity: 0, y: -50 },\n                      show: { opacity: 1, y: 0 },\n                    }\n              }\n              initial={isNew ? { opacity: 0, y: -50 } : undefined}\n              animate={isNew ? { opacity: 1, y: 0 } : undefined}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <div\n                className={`relative flex items-center justify-center h-12 w-12 rounded-full opacity-95 shadow-md ${markerColor} p-1 before:content-[''] before:absolute before:bottom-[-28px] before:left-1/2 before:-translate-x-1/2 before:border-[15px] before:border-transparent -translate-y-4`}\n              >\n                <Image\n                  src={iconSrc}\n                  alt=\"Report Marker\"\n                  width={40}\n                  height={40}\n                />\n              </div>\n            </motion.div>\n          </Marker>\n        );\n      })}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AADA;AACA;;;AAFA;;;;;;;;;;;;;AAeA,MAAM,kBAAkB;IACtB,GAAG,4QAAA,CAAA,UAAO;IACV,GAAG,oQAAA,CAAA,UAAG;IACN,GAAG,gRAAA,CAAA,UAAS;IACZ,GAAG,sQAAA,CAAA,UAAG;IACN,GAAG,4QAAA,CAAA,UAAO;IACV,GAAG,wQAAA,CAAA,UAAK;AACV;AAEA,MAAM,iBAAiB,CAAC;IACtB,IAAI,cAAc,GAChB,OAAO;IACT,IAAI,cAAc,GAChB,OAAO;IACT,OAAO;AACT;AAEA,MAAM,mBAAmB,CAAC;IACxB,MAAM,aAAa,IAAI,KAAK;IAC5B,MAAM,MAAM,IAAI;IAChB,MAAM,eACJ,CAAC,IAAI,OAAO,KAAK,WAAW,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,EAAE;IAC1D,OAAO,eAAe,IAAI,MAAM;AAClC;AAEe,SAAS,cAAc,EAAE,iBAAiB,EAAE,MAAM,EAAE;;IACjE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,+IAAA,CAAA,UAAO,AAAD;IACtC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAE9D,qBACE,6LAAC,4LAAA,CAAA,kBAAe;kBACb,QAAQ,GAAG,CAAC,CAAC;YACZ,IAAI,OAAO,UAAU,EAAE,OAAO;YAE9B,MAAM,UAAU,eAAe,CAAC,OAAO,YAAY,CAAC,IAAI,0QAAA,CAAA,UAAM;YAC9D,MAAM,cAAc,eAAe,OAAO,UAAU;YACpD,MAAM,QAAQ,OAAO,EAAE,KAAK;YAE5B,qBACE,6LAAC,mLAAA,CAAA,SAAM;gBAEL,WAAW,OAAO,IAAI;gBACtB,UAAU,OAAO,GAAG;gBACpB,QAAO;gBACP,SAAS,IAAM,kBAAkB;0BAEjC,cAAA,6LAAC,6LAAA,CAAA,SAAM,CAAC,GAAG;oBACT,QAAO;oBACP,UACE,QACI,YACA;wBACE,QAAQ;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC7B,MAAM;4BAAE,SAAS;4BAAG,GAAG;wBAAE;oBAC3B;oBAEN,SAAS,QAAQ;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG,IAAI;oBAC1C,SAAS,QAAQ;wBAAE,SAAS;wBAAG,GAAG;oBAAE,IAAI;oBACxC,MAAM;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;8BAE3B,cAAA,6LAAC;wBACC,WAAW,CAAC,sFAAsF,EAAE,YAAY,oKAAoK,CAAC;kCAErR,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAK;4BACL,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;;;;;;eA3BT,OAAO,EAAE;;;;;QAiCpB;;;;;;AAGN;GAnDwB;;QACU,+IAAA,CAAA,UAAO;;;KADjB"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportPopup.tsx"],"sourcesContent":["\"use client\";\nimport { Popup } from \"react-map-gl/maplibre\";\n\nexport default function ReportPopup({\n  selectedReport,\n  setSelectedReport,\n  session,\n  handleDelete,\n}) {\n  if (!selectedReport) return null;\n\n  return (\n    <Popup\n      longitude={selectedReport.long}\n      latitude={selectedReport.lat}\n      closeButton\n      closeOnClick={false}\n      onClose={() => setSelectedReport(null)}\n      anchor=\"top\"\n    >\n      <div className=\"p-3 bg-white rounded shadow\">\n        <h3 className=\"font-bold\">Food Truck Report</h3>\n        <p className=\"text-sm\">\n          {selectedReport.description || \"No description provided\"}\n        </p>\n        <p>Submitted: {selectedReport.createdAt}</p>\n\n        {session && session?.user?.id !== selectedReport.submittedById && (\n          <div className=\"flex justify-between mt-2\">\n            <button className=\"bg-green-500 text-white px-3 py-1 rounded\">\n              ‚úÖ I See It\n            </button>\n            <button className=\"bg-red-500 text-white px-3 py-1 rounded\">\n              ‚ùå I Don't See It\n            </button>\n          </div>\n        )}\n\n        {session?.user?.id === selectedReport.submittedById && (\n          <button\n            className=\"bg-red-500 text-white px-3 py-1 mt-2 rounded hover:bg-red-700 transition\"\n            onClick={() => handleDelete(selectedReport.id)}\n          >\n            üóëÔ∏è Delete Report\n          </button>\n        )}\n      </div>\n    </Popup>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;AADA;;;AAGe,SAAS,YAAY,EAClC,cAAc,EACd,iBAAiB,EACjB,OAAO,EACP,YAAY,EACb;IACC,IAAI,CAAC,gBAAgB,OAAO;IAE5B,qBACE,6LAAC,kLAAA,CAAA,QAAK;QACJ,WAAW,eAAe,IAAI;QAC9B,UAAU,eAAe,GAAG;QAC5B,WAAW;QACX,cAAc;QACd,SAAS,IAAM,kBAAkB;QACjC,QAAO;kBAEP,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAY;;;;;;8BAC1B,6LAAC;oBAAE,WAAU;8BACV,eAAe,WAAW,IAAI;;;;;;8BAEjC,6LAAC;;wBAAE;wBAAY,eAAe,SAAS;;;;;;;gBAEtC,WAAW,SAAS,MAAM,OAAO,eAAe,aAAa,kBAC5D,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAO,WAAU;sCAA4C;;;;;;sCAG9D,6LAAC;4BAAO,WAAU;sCAA0C;;;;;;;;;;;;gBAM/D,SAAS,MAAM,OAAO,eAAe,aAAa,kBACjD,6LAAC;oBACC,WAAU;oBACV,SAAS,IAAM,aAAa,eAAe,EAAE;8BAC9C;;;;;;;;;;;;;;;;;AAOX;KA9CwB"}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/AddMarkerButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function AddMarkerButton({ isAdding, toggleMarker }) {\n  return (\n    <button\n      onClick={toggleMarker}\n      className={`absolute top-8 right-6 z-10 bg-blue-500 text-white text-4xl rounded-full w-12 h-12 flex justify-center shadow-lg hover:bg-blue-700 transition-transform duration-300 ease-in-out ${\n        isAdding ? \"rotate-45\" : \"\"\n      }`}\n    >\n      +\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,YAAY,EAAE;IAChE,qBACE,6LAAC;QACC,SAAS;QACT,WAAW,CAAC,iLAAiL,EAC3L,WAAW,cAAc,IACzB;kBACH;;;;;;AAIL;KAXwB"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/actions/postReport.ts"],"sourcesContent":["\"use server\";\n\nimport db from \"../db\";\n\ninterface ReportPayload {\n  latitude: number;\n  longitude: number;\n  reportTypeId: number;\n  trustScore: number;\n  userId: string;\n  description: Record<string, string> | null; // ‚úÖ Ensuring it's an object\n}\n\nexport async function postReport(payload: ReportPayload) {\n  try {\n    const {\n      latitude,\n      longitude,\n      reportTypeId,\n      trustScore,\n      userId,\n      description,\n    } = payload;\n\n    const image = null;\n\n    const report = await db.report.create({\n      data: {\n        lat: latitude,\n        long: longitude,\n        description: JSON.stringify(description) ?? null,\n        image: image ?? null,\n        trustScore,\n        submittedById: userId,\n        reportTypeId,\n      },\n    });\n\n    console.log(\"Report posted:\", report);\n\n    // Emit new report event via WebSocket\n    await fetch(\"http://localhost:3005/api/new-report\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(report),\n    });\n\n    return report;\n  } catch (error) {\n    console.error(error);\n    return { error: \"Failed to post report\" };\n  }\n}\n"],"names":[],"mappings":";;;;;IAasB"}},
    {"offset": {"line": 490, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/PopupForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { postReport } from \"@/actions/postReport\";\nimport { useSession } from \"@/app/lib/auth-client\";\nimport { useData } from \"@/app/components/layout/DataProvider\";\nimport { toast } from \"sonner\";\n\ninterface PopupFormProps {\n  latitude: number;\n  longitude: number;\n  onClose: () => void;\n}\n\nconst PopupForm = ({ latitude, longitude, onClose }: PopupFormProps) => {\n  const { reportTypes } = useData();\n  const [selectedReportType, setSelectedReportType] = useState<number>(\n    reportTypes.length > 0\n      ? [...reportTypes].sort((a, b) => a.id - b.id)[0].id\n      : 0\n  );\n  const [formData, setFormData] = useState(\"\");\n  const { data: session } = useSession();\n  const [loading, setLoading] = useState(false);\n\n  const userId = session?.user?.id || \"\";\n  const trustScore = session?.user?.trust || 0;\n\n  const selectedReport = reportTypes.find(\n    (type) => type.id === selectedReportType\n  );\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const payload = {\n        latitude,\n        longitude,\n        selectedReportType,\n        trustScore,\n        userId,\n        description: formData,\n      };\n\n      const response = await postReport({ payload });\n\n      if (!response) {\n        throw new Error(\"Failed to submit report\");\n      }\n\n      toast.success(\"Report submitted successfully!\");\n      setFormData(\"\");\n      onClose();\n    } catch (error) {\n      toast.error(\"Failed to submit report. Please try again.\");\n      console.error(\"‚ùå Failed to submit report:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const roundedLatitude = Number(latitude).toFixed(4);\n  const roundedLongitude = Number(longitude).toFixed(4);\n\n  return (\n    <div className=\"\">\n      <form onSubmit={handleSubmit} className=\"p-2\">\n        <div>\n          <label htmlFor=\"reportType\" className=\"block font-bold\">\n            Report Type:\n          </label>\n          <select\n            id=\"reportType\"\n            value={selectedReportType}\n            onChange={(e) => setSelectedReportType(Number(e.target.value))}\n            required\n            className=\"border rounded-sm p-1 w-full\"\n          >\n            {reportTypes\n              .slice()\n              .sort((a, b) => a.id - b.id)\n              .map((type) => (\n                <option key={type.id} value={type.id}>\n                  {type.name}\n                </option>\n              ))}\n          </select>\n        </div>\n\n        {/* Dynamic Fields Section */}\n        {selectedReport?.fields?.map((field) => (\n          <div className=\"mt-2\" key={field}>\n            <label className=\"block font-bold\">{field}:</label>\n            <input\n              type=\"text\"\n              value={formData[field] || \"\"}\n              onChange={(e) => handleInputChange(field, e.target.value)}\n              className=\"border rounded-sm p-1 w-full\"\n            />\n          </div>\n        ))}\n\n        <div className=\"mt-2\">\n          <label htmlFor=\"description\" className=\"block font-bold\">\n            Description:\n          </label>\n          <textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            className=\"border rounded-sm p-1 w-full\"\n          />\n        </div>\n        <div className=\"mt-2\">\n          <p>\n            <strong>Latitude:</strong> {roundedLatitude}\n          </p>\n          <p>\n            <strong>Longitude:</strong> {roundedLongitude}\n          </p>\n        </div>\n        <div className=\"mt-2 flex space-x-2\">\n          <button\n            type=\"submit\"\n            className=\"bg-blue-500 text-white px-3 py-1 rounded-sm hover:cursor-pointer\"\n            disabled={loading}\n          >\n            {loading ? (\n              <span className=\"flex items-center\">\n                <svg\n                  className=\"animate-spin h-4 w-4 mr-2 text-white\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                  ></circle>\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8v8H4z\"\n                  ></path>\n                </svg>\n                Submitting...\n              </span>\n            ) : (\n              \"Submit Report\"\n            )}\n          </button>\n          <button\n            type=\"button\"\n            className=\"bg-gray-500 text-white px-3 py-1 rounded-sm hover:cursor-pointer\"\n            onClick={onClose}\n            disabled={loading}\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PopupForm;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 803, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/ReportSubmissionMarker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Marker, Popup } from \"react-map-gl/maplibre\";\nimport PopupForm from \"./PopupForm\"; // Import the form for submitting\nimport { PositionAnchor } from \"maplibre-gl\";\nimport { motion, AnimatePresence } from \"motion/react\";\nimport Image from \"next/image\";\n\nexport default function ReportSubmissionMarker({\n  mapCenter,\n  isAdding,\n  setIsAdding,\n}) {\n  const [markerPosition, setMarkerPosition] = useState({\n    longitude: mapCenter.longitude,\n    latitude: mapCenter.latitude,\n  });\n  const [popupAnchor, setPopupAnchor] = useState<PositionAnchor>(\"bottom\");\n  const [popupOffset, setPopupOffset] = useState(60);\n\n  const markerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    setMarkerPosition({\n      longitude: mapCenter.longitude,\n      latitude: mapCenter.latitude,\n    });\n  }, [mapCenter]);\n\n  useEffect(() => {\n    updatePopupAnchor();\n  }, [markerPosition]);\n\n  const updatePopupAnchor = () => {\n    if (!markerRef.current) {\n      console.warn(\"‚ö†Ô∏è Marker ref is null!\");\n      return;\n    }\n\n    const markerRect = markerRef.current.getBoundingClientRect();\n    const screenHeight = window.innerHeight;\n\n    if (markerRect.top > (screenHeight / 5) * 2) {\n      setPopupAnchor(\"bottom\");\n      setPopupOffset(60);\n    } else {\n      setPopupAnchor(\"top\");\n      setPopupOffset(20);\n    }\n  };\n\n  const handleSubmissionSuccess = () => {\n    setIsAdding(false);\n  };\n\n  return (\n    <>\n      <Marker\n        longitude={markerPosition.longitude}\n        latitude={markerPosition.latitude}\n        draggable\n        anchor=\"bottom\"\n        style={{ zIndex: \"10\" }}\n        onDragEnd={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n          updatePopupAnchor();\n        }}\n        onDrag={(e) => {\n          const newCoords = { longitude: e.lngLat.lng, latitude: e.lngLat.lat };\n          setMarkerPosition(newCoords);\n        }}\n      >\n        <AnimatePresence>\n          {isAdding && (\n            <motion.div\n              key={\"adding-image\"}\n              initial={{ opacity: 0, y: -50 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.15 }}\n              exit={{ opacity: 0, y: -50 }}\n            >\n              <Image\n                src=\"/marker.png\"\n                width={45}\n                height={45}\n                alt=\"Marker\"\n                ref={markerRef}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </Marker>\n      {isAdding && (\n        <motion.div\n          key={\"adding-popup\"}\n          layoutId=\"popupForm\"\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.15 }}\n          exit={{ opacity: 0, y: -50 }}\n        >\n          <Popup\n            longitude={markerPosition.longitude}\n            latitude={markerPosition.latitude}\n            closeButton\n            closeOnClick={false}\n            onClose={() => setIsAdding(false)}\n            anchor={popupAnchor}\n            offset={popupOffset}\n          >\n            <PopupForm\n              latitude={markerPosition.latitude}\n              longitude={markerPosition.longitude}\n              onClose={handleSubmissionSuccess}\n            />\n          </Popup>\n        </motion.div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA,8OAAqC,iCAAiC;AAGtE;AAJA;AAGA;AAAA;AAHA;;;AAHA;;;;;;AASe,SAAS,uBAAuB,EAC7C,SAAS,EACT,QAAQ,EACR,WAAW,EACZ;;IACC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACnD,WAAW,UAAU,SAAS;QAC9B,UAAU,UAAU,QAAQ;IAC9B;IACA,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkB;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAyB;IAEhD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4CAAE;YACR,kBAAkB;gBAChB,WAAW,UAAU,SAAS;gBAC9B,UAAU,UAAU,QAAQ;YAC9B;QACF;2CAAG;QAAC;KAAU;IAEd,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4CAAE;YACR;QACF;2CAAG;QAAC;KAAe;IAEnB,MAAM,oBAAoB;QACxB,IAAI,CAAC,UAAU,OAAO,EAAE;YACtB,QAAQ,IAAI,CAAC;YACb;QACF;QAEA,MAAM,aAAa,UAAU,OAAO,CAAC,qBAAqB;QAC1D,MAAM,eAAe,OAAO,WAAW;QAEvC,IAAI,WAAW,GAAG,GAAG,AAAC,eAAe,IAAK,GAAG;YAC3C,eAAe;YACf,eAAe;QACjB,OAAO;YACL,eAAe;YACf,eAAe;QACjB;IACF;IAEA,MAAM,0BAA0B;QAC9B,YAAY;IACd;IAEA,qBACE;;0BACE,6LAAC,mLAAA,CAAA,SAAM;gBACL,WAAW,eAAe,SAAS;gBACnC,UAAU,eAAe,QAAQ;gBACjC,SAAS;gBACT,QAAO;gBACP,OAAO;oBAAE,QAAQ;gBAAK;gBACtB,WAAW,CAAC;oBACV,MAAM,YAAY;wBAAE,WAAW,EAAE,MAAM,CAAC,GAAG;wBAAE,UAAU,EAAE,MAAM,CAAC,GAAG;oBAAC;oBACpE,kBAAkB;oBAClB;gBACF;gBACA,QAAQ,CAAC;oBACP,MAAM,YAAY;wBAAE,WAAW,EAAE,MAAM,CAAC,GAAG;wBAAE,UAAU,EAAE,MAAM,CAAC,GAAG;oBAAC;oBACpE,kBAAkB;gBACpB;0BAEA,cAAA,6LAAC,oNAAA,CAAA,kBAAe;8BACb,0BACC,6LAAC,qNAAA,CAAA,SAAM,CAAC,GAAG;wBAET,SAAS;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC9B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,YAAY;4BAAE,UAAU;wBAAK;wBAC7B,MAAM;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;kCAE3B,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,KAAI;4BACJ,KAAK;;;;;;uBAXF;;;;;;;;;;;;;;;YAiBZ,0BACC,6LAAC,qNAAA,CAAA,SAAM,CAAC,GAAG;gBAET,UAAS;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG,CAAC;gBAAG;gBAC9B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,YAAY;oBAAE,UAAU;gBAAK;gBAC7B,MAAM;oBAAE,SAAS;oBAAG,GAAG,CAAC;gBAAG;0BAE3B,cAAA,6LAAC,kLAAA,CAAA,QAAK;oBACJ,WAAW,eAAe,SAAS;oBACnC,UAAU,eAAe,QAAQ;oBACjC,WAAW;oBACX,cAAc;oBACd,SAAS,IAAM,YAAY;oBAC3B,QAAQ;oBACR,QAAQ;8BAER,cAAA,6LAAC,yIAAA,CAAA,UAAS;wBACR,UAAU,eAAe,QAAQ;wBACjC,WAAW,eAAe,SAAS;wBACnC,SAAS;;;;;;;;;;;eAnBR;;;;;;;AA0Bf;GAjHwB;KAAA"}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1001, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1020, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max]\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\"\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/20 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n"],"names":[],"mappings":";;;;AAEA;AAGA;AAFA;;;AAHA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;;IAClD,MAAM,UAAU,8JAAM,OAAO;mCAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACZ,eACA;gBAAC;gBAAK;aAAI;kCAClB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,6LAAC,sKAAgB,IAAI;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,uOACA;QAED,GAAG,KAAK;;0BAET,6LAAC,sKAAgB,KAAK;gBACpB,aAAU;gBACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV;0BAGF,cAAA,6LAAC,sKAAgB,KAAK;oBACpB,aAAU;oBACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,6LAAC,sKAAgB,KAAK;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf;GArDS;KAAA"}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1102, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/components/map/TimeRangeSlider.tsx"],"sourcesContent":["\"use client\";\n\nimport { useData } from \"../layout/DataProvider\";\nimport { Slider } from \"@/components/ui/slider\";\n\nexport default function TimeRangeSlider() {\n  const { timeRange, setTimeRange } = useData();\n\n  return (\n    <div className=\"p-3 bg-white shadow-md rounded-lg\">\n      <label className=\"block font-semibold\">Time Range</label>\n      <Slider\n        min={1}\n        max={24}\n        step={1}\n        value={[timeRange]}\n        onValueChange={(value) => setTimeRange(value[0])}\n      />\n      <p className=\"text-sm text-gray-600 mt-2\">\n        Showing repotrs from the last <strong>{[timeRange]}</strong> hours\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,+IAAA,CAAA,UAAO,AAAD;IAE1C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAM,WAAU;0BAAsB;;;;;;0BACvC,6LAAC,8HAAA,CAAA,SAAM;gBACL,KAAK;gBACL,KAAK;gBACL,MAAM;gBACN,OAAO;oBAAC;iBAAU;gBAClB,eAAe,CAAC,QAAU,aAAa,KAAK,CAAC,EAAE;;;;;;0BAEjD,6LAAC;gBAAE,WAAU;;oBAA6B;kCACV,6LAAC;kCAAQ;4BAAC;yBAAU;;;;;;oBAAU;;;;;;;;;;;;;AAIpE;GAlBwB;;QACc,+IAAA,CAAA,UAAO;;;KADrB"}},
    {"offset": {"line": 1178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1184, "column": 0}, "map": {"version":3,"sources":["file:///Users/Nathan/Library/CloudStorage/Dropbox/Tech/projects/mapapp/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Map } from \"react-map-gl/maplibre\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport { io } from \"socket.io-client\";\nimport { useData } from \"./components/layout/DataProvider\";\nimport { useSession } from \"./lib/auth-client\";\nimport { deleteReport } from \"@/actions/deleteReport\";\nimport ReportMarkers from \"./components/map/ReportMarkers\";\nimport ReportPopup from \"./components/map/ReportPopup\";\nimport AddMarkerButton from \"./components/map/AddMarkerButton\";\nimport ReportSubmissionMarker from \"./components/map/ReportSubmissionMarker\";\nimport TimeRangeSlider from \"./components/map/TimeRangeSlider\";\n\nconst socket = io(\"http://localhost:3005\", {\n  reconnection: true,\n  reconnectionAttempts: 10,\n  reconnectionDelay: 2000,\n});\n\nconst Page = () => {\n  const { data: session } = useSession();\n  const userId = session?.user?.id || \"\";\n  const { reports, setReports } = useData();\n\n  const [mapCenter, setMapCenter] = useState({\n    longitude: parseFloat(\n      process.env.NEXT_PUBLIC_MAP_CENTER_LONG || \"-73.935424\"\n    ),\n    latitude: parseFloat(process.env.NEXT_PUBLIC_MAP_CENTER_LAT || \"40.730610\"),\n  });\n\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [isAdding, setIsAdding] = useState(false);\n\n  const getBoundsFromEnv = () => {\n    const sw = process.env.NEXT_PUBLIC_MAP_BOUNDS_SW?.split(\",\").map(Number);\n    const ne = process.env.NEXT_PUBLIC_MAP_BOUNDS_NE?.split(\",\").map(Number);\n\n    if (sw?.length === 2 && ne?.length === 2) {\n      return [sw[0], sw[1], ne[0], ne[1]];\n    }\n\n    return undefined;\n  };\n\n  const maxBounds = getBoundsFromEnv();\n\n  const handleDelete = async (reportId: string) => {\n    if (!userId) {\n      console.error(\"‚ùå No user ID found, cannot delete report\");\n      return;\n    }\n\n    const response = await deleteReport(reportId, userId);\n    if (!response) {\n      console.error(\"‚ùå Failed to delete report\");\n      return;\n    }\n\n    setReports((prevReports) =>\n      prevReports.filter((r) => r.id !== Number(reportId))\n    );\n    setSelectedReport(null);\n\n    socket.emit(\"report-deleted\", { reportId });\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-66px)] w-screen relative\">\n      <div className=\"absolute left-4 top-4 z-10 bg-white p-2 shadow-md rounded\">\n        <TimeRangeSlider />\n      </div>\n      <Map\n        initialViewState={{\n          longitude: mapCenter.longitude,\n          latitude: mapCenter.latitude,\n          zoom: 13,\n        }}\n        minZoom={Number(process.env.NEXT_PUBLIC_MAP_MIN_ZOOM || 10)}\n        maxZoom={Number(process.env.NEXT_PUBLIC_MAP_MAX_ZOOM || 18)}\n        maxBounds={maxBounds}\n        style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}\n        //mapStyle={\"http://159.65.164.132:8080/data/v3.json\"}\n        mapStyle={`https://api.maptiler.com/maps/streets/style.json?key=${process.env.NEXT_PUBLIC_MAPTILER_KEY}`}\n      >\n        <ReportMarkers setSelectedReport={setSelectedReport} userId={userId} />\n        <ReportPopup\n          selectedReport={selectedReport}\n          setSelectedReport={setSelectedReport}\n          session={session}\n          handleDelete={handleDelete}\n        />\n        {session && (\n          <AddMarkerButton\n            isAdding={isAdding}\n            toggleMarker={() => setIsAdding(!isAdding)}\n          ></AddMarkerButton>\n        )}\n        {session && (\n          <ReportSubmissionMarker\n            mapCenter={mapCenter}\n            isAdding={isAdding}\n            setIsAdding={setIsAdding}\n          ></ReportSubmissionMarker>\n        )}\n      </Map>\n    </div>\n  );\n};\n\nexport default Page;\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAuBM;AAzBN;;;AAHA;;;;;;;;;;;;;AAeA,MAAM,SAAS,CAAA,GAAA,kLAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;IACzC,cAAc;IACd,sBAAsB;IACtB,mBAAmB;AACrB;AAEA,MAAM,OAAO;;IACX,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,aAAU,AAAD;IACnC,MAAM,SAAS,SAAS,MAAM,MAAM;IACpC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,+IAAA,CAAA,UAAO,AAAD;IAEtC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACzC,WAAW,WACT,gDAA2C;QAE7C,UAAU,WAAW,+CAA0C;IACjE;IAEA,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,MAAM,mBAAmB;QACvB,MAAM,+DAA4C,MAAM,KAAK,IAAI;QACjE,MAAM,8DAA4C,MAAM,KAAK,IAAI;QAEjE,IAAI,IAAI,WAAW,KAAK,IAAI,WAAW,GAAG;YACxC,OAAO;gBAAC,EAAE,CAAC,EAAE;gBAAE,EAAE,CAAC,EAAE;gBAAE,EAAE,CAAC,EAAE;gBAAE,EAAE,CAAC,EAAE;aAAC;QACrC;QAEA,OAAO;IACT;IAEA,MAAM,YAAY;IAElB,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,QAAQ;YACX,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,MAAM,WAAW,MAAM,CAAA,GAAA,0HAAA,CAAA,eAAY,AAAD,EAAE,UAAU;QAC9C,IAAI,CAAC,UAAU;YACb,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,WAAW,CAAC,cACV,YAAY,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO;QAE5C,kBAAkB;QAElB,OAAO,IAAI,CAAC,kBAAkB;YAAE;QAAS;IAC3C;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,+IAAA,CAAA,UAAe;;;;;;;;;;0BAElB,6LAAC,gLAAA,CAAA,MAAG;gBACF,kBAAkB;oBAChB,WAAW,UAAU,SAAS;oBAC9B,UAAU,UAAU,QAAQ;oBAC5B,MAAM;gBACR;gBACA,SAAS,OAAO,0CAAwC;gBACxD,SAAS,OAAO,0CAAwC;gBACxD,WAAW;gBACX,OAAO;oBAAE,OAAO;oBAAQ,QAAQ;oBAAQ,UAAU;gBAAW;gBAC7D,sDAAsD;gBACtD,UAAU,CAAC,qDAAqD,4DAAwC;;kCAExG,6LAAC,6IAAA,CAAA,UAAa;wBAAC,mBAAmB;wBAAmB,QAAQ;;;;;;kCAC7D,6LAAC,2IAAA,CAAA,UAAW;wBACV,gBAAgB;wBAChB,mBAAmB;wBACnB,SAAS;wBACT,cAAc;;;;;;oBAEf,yBACC,6LAAC,+IAAA,CAAA,UAAe;wBACd,UAAU;wBACV,cAAc,IAAM,YAAY,CAAC;;;;;;oBAGpC,yBACC,6LAAC,sJAAA,CAAA,UAAsB;wBACrB,WAAW;wBACX,UAAU;wBACV,aAAa;;;;;;;;;;;;;;;;;;AAMzB;GAzFM;;QACsB,+HAAA,CAAA,aAAU;QAEJ,+IAAA,CAAA,UAAO;;;KAHnC;uCA2FS"}},
    {"offset": {"line": 1356, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}